"use strict";var hI=Object.defineProperty,fI=Object.defineProperties,pI=Object.getOwnPropertyDescriptors,PE=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,mI=Object.prototype.propertyIsEnumerable,OE=(Ot,$e,B)=>$e in Ot?hI(Ot,$e,{enumerable:!0,configurable:!0,writable:!0,value:B}):Ot[$e]=B,kE=(Ot,$e)=>{for(var B in $e||($e={}))gI.call($e,B)&&OE(Ot,B,$e[B]);if(PE)for(var B of PE($e))mI.call($e,B)&&OE(Ot,B,$e[B]);return Ot},FE=(Ot,$e)=>fI(Ot,pI($e));(self.webpackChunkclinicafinal=self.webpackChunkclinicafinal||[]).push([[179],{440:(Ot,$e,B)=>{B.d($e,{nm:()=>ir});var m=B(5813);B(5e3),B(5867);var he=B(5861),Xe=B(9681),ut=B(4859),We=B(2090),st=B(1877);const we=new Map,Qe={activated:!1,tokenObservers:[]},se={initialized:!1,enabled:!1};function Re(Pe){return we.get(Pe)||Qe}function fe(Pe,Ie){we.set(Pe,Ie)}function ze(){return se}class pn{constructor(Ie,qe,ct,xt,Wt){if(this.operation=Ie,this.retryPolicy=qe,this.getWaitDuration=ct,this.lowerBound=xt,this.upperBound=Wt,this.pending=null,this.nextErrorWaitInterval=xt,xt>Wt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var qe=this;return(0,he.Z)(function*(){qe.stop();try{qe.pending=new We.BH,yield function nn(Pe){return new Promise(Ie=>{setTimeout(Ie,Pe)})}(qe.getNextRun(Ie)),qe.pending.resolve(),yield qe.pending.promise,qe.pending=new We.BH,yield qe.operation(),qe.pending.resolve(),yield qe.pending.promise,qe.process(!0).catch(()=>{})}catch(ct){qe.retryPolicy(ct)?qe.process(!1).catch(()=>{}):qe.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const qe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),qe}}}const je=new We.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mt(Pe){if(!Re(Pe).activated)throw je.create("use-before-activation",{appName:Pe.name})}function fr(Pe,Ie){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,he.Z)(function*({url:Pe,body:Ie},qe){const ct={"Content-Type":"application/json"},xt=qe.getImmediate({optional:!0});if(xt){const oi=yield xt.getHeartbeatsHeader();oi&&(ct["X-Firebase-Client"]=oi)}const Wt={method:"POST",body:JSON.stringify(Ie),headers:ct};let Jn,Rr;try{Jn=yield fetch(Pe,Wt)}catch(oi){throw je.create("fetch-network-error",{originalErrorMessage:oi.message})}if(200!==Jn.status)throw je.create("fetch-status-error",{httpStatus:Jn.status});try{Rr=yield Jn.json()}catch(oi){throw je.create("fetch-parse-error",{originalErrorMessage:oi.message})}const Zn=Rr.ttl.match(/^([\d.]+)(s)$/);if(!Zn||!Zn[2]||isNaN(Number(Zn[1])))throw je.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Rr.ttl}`});const ds=1e3*Number(Zn[1]),lo=Date.now();return{token:Rr.token,expireTimeMillis:lo+ds,issuedAtTimeMillis:lo}})).apply(this,arguments)}function Dr(Pe,Ie){const{projectId:qe,appId:ct,apiKey:xt}=Pe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${qe}/apps/${ct}:exchangeDebugToken?key=${xt}`,body:{debug_token:Ie}}}const mn="firebase-app-check-store";let wn=null;function hi(){return wn||(wn=new Promise((Pe,Ie)=>{try{const qe=indexedDB.open("firebase-app-check-database",1);qe.onsuccess=ct=>{Pe(ct.target.result)},qe.onerror=ct=>{var xt;Ie(je.create("storage-open",{originalErrorMessage:null===(xt=ct.target.error)||void 0===xt?void 0:xt.message}))},qe.onupgradeneeded=ct=>{0===ct.oldVersion&&ct.target.result.createObjectStore(mn,{keyPath:"compositeKey"})}}catch(qe){Ie(je.create("storage-open",{originalErrorMessage:qe.message}))}}),wn)}function Ut(){return(Ut=(0,he.Z)(function*(Pe,Ie){const ct=(yield hi()).transaction(mn,"readwrite"),Wt=ct.objectStore(mn).put({compositeKey:Pe,value:Ie});return new Promise((Jn,Rr)=>{Wt.onsuccess=Zn=>{Jn()},ct.onerror=Zn=>{var ds;Rr(je.create("storage-set",{originalErrorMessage:null===(ds=Zn.target.error)||void 0===ds?void 0:ds.message}))}})})).apply(this,arguments)}const Xr=new st.Yd("@firebase/app-check");function zr(Pe,Ie){return(0,We.hl)()?function ii(Pe,Ie){return function Jr(Pe,Ie){return Ut.apply(this,arguments)}(function Sr(Pe){return`${Pe.options.appId}-${Pe.name}`}(Pe),Ie)}(Pe,Ie).catch(qe=>{Xr.warn(`Failed to write token to IndexedDB. Error: ${qe}`)}):Promise.resolve()}function De(){return ze().enabled}function Ce(){return ft.apply(this,arguments)}function ft(){return(ft=(0,he.Z)(function*(){const Pe=ze();if(Pe.enabled&&Pe.token)return Pe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fe={error:"UNKNOWN_ERROR"};function _t(Pe){return We.US.encodeString(JSON.stringify(Pe),!1)}function Lt(Pe){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,he.Z)(function*(Pe,Ie=!1){const qe=Pe.app;Mt(qe);const ct=Re(qe);let Wt,xt=ct.token;if(!xt){const Zn=yield ct.cachedTokenPromise;Zn&&Ei(Zn)&&(xt=Zn)}if(!Ie&&xt&&Ei(xt))return{token:xt.token};let Rr,Jn=!1;if(De()){ct.exchangeTokenPromise||(ct.exchangeTokenPromise=fr(Dr(qe,yield Ce()),Pe.heartbeatServiceProvider).then(ds=>(ct.exchangeTokenPromise=void 0,ds)),Jn=!0);const Zn=yield ct.exchangeTokenPromise;return yield zr(qe,Zn),fe(qe,Object.assign(Object.assign({},ct),{token:Zn})),{token:Zn.token}}try{ct.exchangeTokenPromise||(ct.exchangeTokenPromise=ct.provider.getToken().then(Zn=>(ct.exchangeTokenPromise=void 0,Zn)),Jn=!0),xt=yield ct.exchangeTokenPromise}catch(Zn){"appCheck/throttled"===Zn.code?Xr.warn(Zn.message):Xr.error(Zn),Wt=Zn}return xt?(Rr={token:xt.token},fe(qe,Object.assign(Object.assign({},ct),{token:xt})),yield zr(qe,xt)):Rr=jr(Wt),Jn&&_r(qe,Rr),Rr})).apply(this,arguments)}function yr(Pe,Ie){const qe=Re(Pe),ct=qe.tokenObservers.filter(xt=>xt.next!==Ie);0===ct.length&&qe.tokenRefresher&&qe.tokenRefresher.isRunning()&&qe.tokenRefresher.stop(),fe(Pe,Object.assign(Object.assign({},qe),{tokenObservers:ct}))}function hn(Pe){const{app:Ie}=Pe,qe=Re(Ie);let ct=qe.tokenRefresher;ct||(ct=function nr(Pe){const{app:Ie}=Pe;return new pn((0,he.Z)(function*(){let ct;if(ct=Re(Ie).token?yield Lt(Pe,!0):yield Lt(Pe),ct.error)throw ct.error}),()=>!0,()=>{const qe=Re(Ie);if(qe.token){let ct=qe.token.issuedAtTimeMillis+.5*(qe.token.expireTimeMillis-qe.token.issuedAtTimeMillis)+3e5;return ct=Math.min(ct,qe.token.expireTimeMillis-3e5),Math.max(0,ct-Date.now())}return 0},3e4,96e4)}(Pe),fe(Ie,Object.assign(Object.assign({},qe),{tokenRefresher:ct}))),!ct.isRunning()&&qe.isTokenAutoRefreshEnabled&&ct.start()}function _r(Pe,Ie){const qe=Re(Pe).tokenObservers;for(const ct of qe)try{"EXTERNAL"===ct.type&&null!=Ie.error?ct.error(Ie.error):ct.next(Ie)}catch(xt){}}function Ei(Pe){return Pe.expireTimeMillis-Date.now()>0}function jr(Pe){return{token:_t(Fe),error:Pe}}class wi{constructor(Ie,qe){this.app=Ie,this.heartbeatServiceProvider=qe}_delete(){const{tokenObservers:Ie}=Re(this.app);for(const qe of Ie)yr(this.app,qe.next);return Promise.resolve()}}const Ii="app-check-internal";!function Ur(){(0,Xe._registerComponent)(new ut.wA("app-check",Pe=>function cn(Pe,Ie){return new wi(Pe,Ie)}(Pe.getProvider("app").getImmediate(),Pe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Pe,Ie,qe)=>{Pe.getProvider(Ii).initialize()})),(0,Xe._registerComponent)(new ut.wA(Ii,Pe=>function it(Pe){return{getToken:Ie=>Lt(Pe,Ie),addTokenListener:Ie=>function on(Pe,Ie,qe,ct){const{app:xt}=Pe,Wt=Re(xt),Jn={next:qe,error:ct,type:Ie};if(fe(xt,Object.assign(Object.assign({},Wt),{tokenObservers:[...Wt.tokenObservers,Jn]})),Wt.token&&Ei(Wt.token)){const Rr=Wt.token;Promise.resolve().then(()=>{qe({token:Rr.token}),hn(Pe)}).catch(()=>{})}Wt.cachedTokenPromise.then(()=>hn(Pe))}(Pe,"INTERNAL",Ie),removeTokenListener:Ie=>yr(Pe.app,Ie)}}(Pe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Xe.registerVersion)("@firebase/app-check","0.5.8")}();class ir{constructor(){return(0,m.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Ot,$e,B)=>{B.d($e,{zQ:()=>He,ww:()=>vt,rT:()=>se,f7:()=>fe,L6:()=>we,_Q:()=>Qe,lh:()=>Re,Qv:()=>st,nw:()=>ze});var m=B(5e3),y=B(7579),te=B(9646),Ne=B(8306),Me=B(8996),Te=B(6451),Le=B(6063);class Ae extends y.x{constructor(Xt=1/0,Yt=1/0,ht=Le.l){super(),this._bufferSize=Xt,this._windowTime=Yt,this._timestampProvider=ht,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Yt===1/0,this._bufferSize=Math.max(1,Xt),this._windowTime=Math.max(1,Yt)}next(Xt){const{isStopped:Yt,_buffer:ht,_infiniteTimeWindow:pn,_timestampProvider:nn,_windowTime:yt}=this;Yt||(ht.push(Xt),!pn&&ht.push(nn.now()+yt)),this._trimBuffer(),super.next(Xt)}_subscribe(Xt){this._throwIfClosed(),this._trimBuffer();const Yt=this._innerSubscribe(Xt),{_infiniteTimeWindow:ht,_buffer:pn}=this,nn=pn.slice();for(let yt=0;yt<nn.length&&!Xt.closed;yt+=ht?1:2)Xt.next(nn[yt]);return this._checkFinalizedStatuses(Xt),Yt}_trimBuffer(){const{_bufferSize:Xt,_timestampProvider:Yt,_buffer:ht,_infiniteTimeWindow:pn}=this,nn=(pn?1:2)*Xt;if(Xt<1/0&&nn<ht.length&&ht.splice(0,ht.length-nn),!pn){const yt=Yt.now();let je=0;for(let gt=1;gt<ht.length&&ht[gt]<=yt;gt+=2)je=gt;je&&ht.splice(0,je+1)}}}var _e=B(3099);function le(St,Xt,Yt){let ht,pn=!1;return St&&"object"==typeof St?({bufferSize:ht=1/0,windowTime:Xt=1/0,refCount:pn=!1,scheduler:Yt}=St):ht=null!=St?St:1/0,(0,_e.B)({connector:()=>new Ae(ht,Xt,Yt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:pn})}var ie=B(3900),be=B(576);function mt(St,Xt){return(0,be.m)(Xt)?(0,ie.w)(()=>St,Xt):(0,ie.w)(()=>St)}var Be=B(5363),lt=B(4004),wt=B(590),Ze=B(9468),at=B(9300),At=B(5813),Nt=B(2011),he=B(9808),Xe=B(440),ut=B(127);const st=new m.OlP("angularfire2.auth.use-emulator"),we=new m.OlP("angularfire2.auth.settings"),Qe=new m.OlP("angularfire2.auth.tenant-id"),se=new m.OlP("angularfire2.auth.langugage-code"),Re=new m.OlP("angularfire2.auth.use-device-language"),fe=new m.OlP("angularfire.auth.persistence"),ze=(St,Xt,Yt,ht,pn,nn,yt,je)=>(0,Nt.cc)(`${St.name}.auth`,"AngularFireAuth",St.name,()=>{const gt=Xt.runOutsideAngular(()=>St.auth());if(Yt&&gt.useEmulator(...Yt),ht&&(gt.tenantId=ht),gt.languageCode=pn,nn&&gt.useDeviceLanguage(),yt)for(const[Mt,qt]of Object.entries(yt))gt.settings[Mt]=qt;return je&&gt.setPersistence(je),gt},[Yt,ht,pn,nn,yt,je]);let He=(()=>{class St{constructor(Yt,ht,pn,nn,yt,je,gt,Mt,qt,Cn,En,fr){const Yn=new y.x,Qn=(0,te.of)(void 0).pipe((0,Be.Q)(yt.outsideAngular),(0,ie.w)(()=>nn.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,8775)))),(0,lt.U)(()=>(0,Nt.on)(Yt,nn,ht)),(0,lt.U)(br=>ze(br,nn,je,Mt,qt,Cn,gt,En)),le({bufferSize:1,refCount:!1}));if((0,he.PM)(pn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,te.of)(null);else{Qn.pipe((0,wt.P)()).subscribe();const Dr=Qn.pipe((0,ie.w)(mn=>mn.getRedirectResult().then(_n=>_n,()=>null)),At.iC,le({bufferSize:1,refCount:!1})),zn=Qn.pipe((0,ie.w)(mn=>new Ne.y(_n=>({unsubscribe:nn.runOutsideAngular(()=>mn.onAuthStateChanged(wn=>_n.next(wn),wn=>_n.error(wn),()=>_n.complete()))})))),en=Qn.pipe((0,ie.w)(mn=>new Ne.y(_n=>({unsubscribe:nn.runOutsideAngular(()=>mn.onIdTokenChanged(wn=>_n.next(wn),wn=>_n.error(wn),()=>_n.complete()))}))));this.authState=Dr.pipe(mt(zn),(0,Ze.R)(yt.outsideAngular),(0,Be.Q)(yt.insideAngular)),this.user=Dr.pipe(mt(en),(0,Ze.R)(yt.outsideAngular),(0,Be.Q)(yt.insideAngular)),this.idToken=this.user.pipe((0,ie.w)(mn=>mn?(0,Me.D)(mn.getIdToken()):(0,te.of)(null))),this.idTokenResult=this.user.pipe((0,ie.w)(mn=>mn?(0,Me.D)(mn.getIdTokenResult()):(0,te.of)(null))),this.credential=(0,Te.T)(Dr,Yn,this.authState.pipe((0,at.h)(mn=>!mn))).pipe((0,lt.U)(mn=>(null==mn?void 0:mn.user)?mn:null),(0,Ze.R)(yt.outsideAngular),(0,Be.Q)(yt.insideAngular))}return(0,Nt.pX)(this,Qn,nn,{spy:{apply:(br,Dr,zn)=>{(br.startsWith("signIn")||br.startsWith("createUser"))&&zn.then(en=>Yn.next(en))}}})}}return St.\u0275fac=function(Yt){return new(Yt||St)(m.LFG(Nt.Dh),m.LFG(Nt.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(At.HU),m.LFG(st,8),m.LFG(we,8),m.LFG(Qe,8),m.LFG(se,8),m.LFG(Re,8),m.LFG(fe,8),m.LFG(Xe.nm,8))},St.\u0275prov=m.Yz7({token:St,factory:St.\u0275fac,providedIn:"any"}),St})(),vt=(()=>{class St{constructor(){ut.Z.registerVersion("angularfire",At.q4.full,"auth-compat")}}return St.\u0275fac=function(Yt){return new(Yt||St)},St.\u0275mod=m.oAB({type:St}),St.\u0275inj=m.cJS({providers:[He]}),St})()},7566:(Ot,$e,B)=>{B.d($e,{ST:()=>ih});var m=B(5e3),y=B(4986),te=B(8306),Ne=B(8996),Me=B(9646),Te=B(5813),Le=B(4482),Ae=B(5403);function _e(){return(0,Le.e)((i,e)=>{let t,o=!1;i.subscribe((0,Ae.x)(e,u=>{const f=t;t=u,o&&e.next([f,u]),o=!0}))})}var le=B(4671);function be(i,e){return i===e}var se,mt=B(8675),Be=B(4004),lt=B(5026),wt=B(9300),Ze=B(2011),at=B(9808),Nt=(B(8775),B(3942)),he=B(5861),Xe=B(9681),ut=B(4859),We=B(1877),st=B(2090),we="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qe={},Re=Re||{},fe=we||self;function ze(){}function He(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function vt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Xt="closure_uid_"+(1e9*Math.random()>>>0),Yt=0;function ht(i,e,t){return i.call.apply(i.bind,arguments)}function pn(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function nn(i,e,t){return(nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ht:pn).apply(null,arguments)}function yt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function je(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(o,u,f){for(var v=Array(arguments.length-2),S=2;S<arguments.length;S++)v[S-2]=arguments[S];return e.prototype[u].apply(o,v)}}function gt(){this.s=this.s,this.o=this.o}var qt={};gt.prototype.s=!1,gt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function St(i){return Object.prototype.hasOwnProperty.call(i,Xt)&&i[Xt]||(i[Xt]=++Yt)}(this);delete qt[i]}},gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},En=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const o=i.length,u="string"==typeof i?i.split(""):i;for(let f=0;f<o;f++)f in u&&e.call(t,u[f],f,i)};function Yn(i){return Array.prototype.concat.apply([],arguments)}function Qn(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function br(i){return/^[\s\xa0]*$/.test(i)}var mn,Dr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zn(i,e){return-1!=i.indexOf(e)}function en(i,e){return i<e?-1:i>e?1:0}e:{var _n=fe.navigator;if(_n){var wn=_n.userAgent;if(wn){mn=wn;break e}}mn=""}function hi(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function vi(i){const e={};for(const t in i)e[t]=i[t];return e}var ii="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nr(i,e){let t,o;for(let u=1;u<arguments.length;u++){for(t in o=arguments[u],o)i[t]=o[t];for(let f=0;f<ii.length;f++)t=ii[f],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function si(i){return si[" "](i),i}si[" "]=ze;var zr,i,Ut=zn(mn,"Opera"),Qt=zn(mn,"Trident")||zn(mn,"MSIE"),Zt=zn(mn,"Edge"),Sr=Zt||Qt,Xr=zn(mn,"Gecko")&&!(zn(mn.toLowerCase(),"webkit")&&!zn(mn,"Edge"))&&!(zn(mn,"Trident")||zn(mn,"MSIE"))&&!zn(mn,"Edge"),Wn=zn(mn.toLowerCase(),"webkit")&&!zn(mn,"Edge");function Qi(){var i=fe.document;return i?i.documentMode:void 0}e:{var Vn="",pe=(i=mn,Xr?/rv:([^\);]+)(\)|;)/.exec(i):Zt?/Edge\/([\d\.]+)/.exec(i):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Wn?/WebKit\/(\S+)/.exec(i):Ut?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(pe&&(Vn=pe?pe[1]:""),Qt){var De=Qi();if(null!=De&&De>parseFloat(Vn)){zr=String(De);break e}}zr=Vn}var Ce={};var _t=fe.document&&Qt&&(Qi()||parseInt(zr,10))||void 0,Lt=function(){if(!fe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{fe.addEventListener("test",ze,e),fe.removeEventListener("test",ze,e)}catch(t){}return i}();function Bt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function on(i,e){if(Bt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Xr){e:{try{si(e.nodeName);var u=!0;break e}catch(f){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:yr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&on.Z.h.call(this)}}Bt.prototype.h=function(){this.defaultPrevented=!0},je(on,Bt);var yr={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),nr=0;function _r(i,e,t,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ia=u,this.key=++nr,this.ca=this.fa=!1}function Ei(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function jr(i){this.src=i,this.g={},this.h=0}function wi(i,e){var t=e.type;if(t in i.g){var f,o=i.g[t],u=Cn(o,e);(f=0<=u)&&Array.prototype.splice.call(o,u,1),f&&(Ei(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function cn(i,e,t,o){for(var u=0;u<i.length;++u){var f=i[u];if(!f.ca&&f.listener==e&&f.capture==!!t&&f.ia==o)return u}return-1}jr.prototype.add=function(i,e,t,o,u){var f=i.toString();(i=this.g[f])||(i=this.g[f]=[],this.h++);var v=cn(i,e,o,u);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new _r(e,this.src,f,!!o,u)).fa=t,i.push(e)),e};var it="closure_lm_"+(1e6*Math.random()|0),Mr={};function $r(i,e,t,o,u){if(o&&o.once)return Ss(i,e,t,o,u);if(Array.isArray(e)){for(var f=0;f<e.length;f++)$r(i,e[f],t,o,u);return null}return t=Pt(t),i&&i[hn]?i.N(e,t,vt(o)?!!o.capture:!!o,u):Pr(i,e,t,!1,o,u)}function Pr(i,e,t,o,u,f){if(!e)throw Error("Invalid event type");var v=vt(u)?!!u.capture:!!u,S=Wr(i);if(S||(i[it]=S=new jr(i)),(t=S.add(e,t,o,v,f)).proxy)return t;if(o=function fi(){var e=Or;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Lt||(u=v),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(ei(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Ss(i,e,t,o,u){if(Array.isArray(e)){for(var f=0;f<e.length;f++)Ss(i,e[f],t,o,u);return null}return t=Pt(t),i&&i[hn]?i.O(e,t,vt(o)?!!o.capture:!!o,u):Pr(i,e,t,!0,o,u)}function ls(i,e,t,o,u){if(Array.isArray(e))for(var f=0;f<e.length;f++)ls(i,e[f],t,o,u);else o=vt(o)?!!o.capture:!!o,t=Pt(t),i&&i[hn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=cn(f=i.g[e],t,o,u))&&(Ei(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete i.g[e],i.h--))):i&&(i=Wr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=cn(e,t,o,u)),(t=-1<i?e[i]:null)&&pi(t))}function pi(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[hn])wi(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(ei(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Wr(e))?(wi(t,i),0==t.h&&(t.src=null,e[it]=null)):Ei(i)}}}function ei(i){return i in Mr?Mr[i]:Mr[i]="on"+i}function Or(i,e){if(i.ca)i=!0;else{e=new on(e,this);var t=i.listener,o=i.ia||i.src;i.fa&&pi(i),i=t.call(o,e)}return i}function Wr(i){return(i=i[it])instanceof jr?i:null}var kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pt(i){return"function"==typeof i?i:(i[kr]||(i[kr]=function(e){return i.handleEvent(e)}),i[kr])}function kt(){gt.call(this),this.i=new jr(this),this.P=this,this.I=null}function yn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Bt(e,i);else if(e instanceof Bt)e.target=e.target||i;else{var u=e;Nr(e=new Bt(o,i),u)}if(u=!0,t)for(var f=t.length-1;0<=f;f--){var v=e.g=t[f];u=xr(v,o,!0,e)&&u}if(u=xr(v=e.g=i,o,!0,e)&&u,u=xr(v,o,!1,e)&&u,t)for(f=0;f<t.length;f++)u=xr(v=e.g=t[f],o,!1,e)&&u}function xr(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.ca&&v.capture==t){var S=v.listener,H=v.ia||v.src;v.fa&&wi(i.i,v),u=!1!==S.call(H,o)&&u}}return u&&!o.defaultPrevented}je(kt,gt),kt.prototype[hn]=!0,kt.prototype.removeEventListener=function(i,e,t,o){ls(this,i,e,t,o)},kt.prototype.M=function(){if(kt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Ei(t[o]);delete i.g[e],i.h--}}this.I=null},kt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},kt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var bi=fe.JSON.stringify;function $n(){var i=Ii;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Si,rr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ti,i=>i.reset());class ti{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Tr(i){fe.setTimeout(()=>{throw i},0)}function Sn(i,e){Si||function Zr(){var i=fe.Promise.resolve(void 0);Si=function(){i.then(Ur)}}(),cs||(Si(),cs=!0),Ii.add(i,e)}var cs=!1,Ii=new class gi{constructor(){this.h=this.g=null}add(e,t){const o=rr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Ur(){for(var i;i=$n();){try{i.h.call(i.g)}catch(t){Tr(t)}var e=rr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}cs=!1}function Fr(i,e){kt.call(this),this.h=i||1,this.g=e||fe,this.j=nn(this.kb,this),this.l=Date.now()}function Lr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function ir(i,e,t){if("function"==typeof i)t&&(i=nn(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=nn(i.handleEvent,i)}return 2147483647<Number(e)?-1:fe.setTimeout(i,e||0)}function or(i){i.g=ir(()=>{i.g=null,i.i&&(i.i=!1,or(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}je(Fr,kt),(se=Fr.prototype).da=!1,se.S=null,se.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yn(this,"tick"),this.da&&(Lr(this),this.start()))}},se.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},se.M=function(){Fr.Z.M.call(this),Lr(this),delete this.g};class Ms extends gt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:or(this)}M(){super.M(),this.g&&(fe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kr(i){gt.call(this),this.h=i,this.g={}}je(Kr,gt);var ni=[];function Fi(i,e,t,o){Array.isArray(t)||(t&&(ni[0]=t.toString()),t=ni);for(var u=0;u<t.length;u++){var f=$r(e,t[u],o||i.handleEvent,!1,i.h||i);if(!f)break;i.g[f.key]=f}}function Es(i){hi(i.g,function(e,t){this.g.hasOwnProperty(t)&&pi(e)},i),i.g={}}function xs(){this.g=!0}function $i(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Oo(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var f=u[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<u.length;v++)u[v]=""}}}return bi(t)}catch(S){return e}}(i,t)+(o?" "+o:"")})}Kr.prototype.M=function(){Kr.Z.M.call(this),Es(this)},Kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xs.prototype.Aa=function(){this.g=!1},xs.prototype.info=function(){};var vr={},Hi=null;function Ls(){return Hi=Hi||new kt}function Pe(i){Bt.call(this,vr.Ma,i)}function Ie(i){const e=Ls();yn(e,new Pe(e,i))}function qe(i,e){Bt.call(this,vr.STAT_EVENT,i),this.stat=e}function ct(i){const e=Ls();yn(e,new qe(e,i))}function xt(i,e){Bt.call(this,vr.Na,i),this.size=e}function Wt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return fe.setTimeout(function(){i()},e)}vr.Ma="serverreachability",je(Pe,Bt),vr.STAT_EVENT="statevent",je(qe,Bt),vr.Na="timingevent",je(xt,Bt);var Jn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zn(){}function lo(){}Zn.prototype.h=null;var Rs,oi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qs(){Bt.call(this,"d")}function hs(){Bt.call(this,"c")}function zs(){}function Ws(i,e,t,o){this.l=i,this.j=e,this.m=t,this.X=o||1,this.V=new Kr(this),this.P=Ns,this.W=new Fr(i=Sr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}je(qs,Bt),je(hs,Bt),je(zs,Zn),zs.prototype.g=function(){return new XMLHttpRequest},zs.prototype.i=function(){return{}},Rs=new zs;var Ns=45e3,Gi={},Ji={};function Zs(i,e,t){i.K=1,i.v=Ft(z(e)),i.s=t,i.U=!0,fs(i,null)}function fs(i,e){i.F=Date.now(),ui(i),i.A=z(i.v);var t=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),V(t.h,"t",o),i.C=0,t=i.l.H,i.h=new ai,i.g=da(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ms(nn(i.Ia,i,i.g),i.O)),Fi(i.V,i.g,"readystatechange",i.gb),e=i.H?vi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ie(1),function Mi(i,e,t,o,u,f){i.info(function(){if(i.g)if(f)for(var v="",S=f.split("&"),H=0;H<S.length;H++){var K=S[H].split("=");if(1<K.length){var de=K[0];K=K[1];var xe=de.split("_");v=2<=xe.length&&"type"==xe[1]?v+(de+"=")+K+"&":v+(de+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Go(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Di(i,e,t){let u,o=!0;for(;!i.I&&i.C<t.length;){if(u=Ks(i,t),u==Ji){4==e&&(i.o=4,ct(14),o=!1),$i(i.j,i.m,null,"[Incomplete Response]");break}if(u==Gi){i.o=4,ct(15),$i(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}$i(i.j,i.m,u,null),Ve(i,u)}Go(i)&&u!=Ji&&u!=Gi&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,ct(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ur(e),e.L=!0,ct(11))):($i(i.j,i.m,t,"[Invalid Chunked Response]"),me(i),ce(i))}function Ks(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ji:(t=Number(e.substring(t,o)),isNaN(t)?Gi:(o+=1)+t>e.length?Ji:(e=e.substr(o,t),i.C=o+t,e))}function ui(i){i.Y=Date.now()+i.P,Z(i,i.P)}function Z(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Wt(nn(i.eb,i),e)}function G(i){i.B&&(fe.clearTimeout(i.B),i.B=null)}function ce(i){0==i.l.G||i.I||Qs(i.l,i)}function me(i){G(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Lr(i.W),Es(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ve(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||zi(t.i,i)))if(t.I=i.N,!i.J&&zi(t.i,i)&&3==t.G){try{var o=t.Ca.g.parse(e)}catch(K){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=Wt(nn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Ta(t),mi(t)}Co(t),ct(18)}if(1>=sr(t.i)&&t.ka){try{t.ka()}catch(K){}t.ka=void 0}}else Vi(t,11)}else if((i.J||t.g==i)&&Ta(t),!br(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let K=u[e];if(t.U=K[0],K=K[1],2==t.G)if("c"==K[0]){t.J=K[1],t.la=K[2];const de=K[3];null!=de&&(t.ma=de,t.h.info("VER="+t.ma));const xe=K[4];null!=xe&&(t.za=xe,t.h.info("SVER="+t.za));const nt=K[5];null!=nt&&"number"==typeof nt&&0<nt&&(t.K=o=1.5*nt,t.h.info("backChannelRequestTimeoutMs_="+o)),o=t;const bt=i.g;if(bt){const Tt=bt.g?bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tt){var f=o.i;!f.g&&(zn(Tt,"spdy")||zn(Tt,"quic")||zn(Tt,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ws(f,f.h),f.h=null))}if(o.D){const ln=bt.g?bt.g.getResponseHeader("X-HTTP-Session-Id"):null;ln&&(o.sa=ln,Je(o.F,o.D,ln))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((o=t).oa=Os(o,o.H?o.la:null,o.W),v.J){Wi(o.i,v);var S=v,H=o.K;H&&S.setTimeout(H),S.B&&(G(S),ui(S)),o.g=v}else To(o);0<t.l.length&&wu(t)}else"stop"!=K[0]&&"close"!=K[0]||Vi(t,7);else 3==t.G&&("stop"==K[0]||"close"==K[0]?"stop"==K[0]?Vi(t,7):Do(t):"noop"!=K[0]&&t.j&&t.j.wa(K),t.A=0)}Ie(4)}catch(K){}}function Rt(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(He(i)||"string"==typeof i)En(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(He(i)||"string"==typeof i){t=[];for(var o=i.length,u=0;u<o;u++)t.push(u)}else for(u in t=[],o=0,i)t[o++]=u;o=function rt(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(He(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),u=o.length;for(var f=0;f<u;f++)e.call(void 0,o[f],t&&t[f],i)}}function Vt(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var o=0;o<t;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof Vt)for(t=i.T(),o=0;o<t.length;o++)this.set(t[o],i.get(t[o]));else for(o in i)this.set(o,i[o])}function jt(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var o=i.g[e];Dn(i.h,o)&&(i.g[t++]=o),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)Dn(u,o=i.g[e])||(i.g[t++]=o,u[o]=1),e++;i.g.length=t}}function Dn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(se=Ws.prototype).setTimeout=function(i){this.P=i},se.gb=function(i){i=i.target;const e=this.L;e&&3==Us(i)?e.l():this.Ia(i)},se.Ia=function(i){try{if(i==this.g)e:{const de=Us(this.g);var e=this.g.Da();const xe=this.g.ba();if(!(3>de)&&(3!=de||Sr||this.g&&(this.h.h||this.g.ga()||ms(this.g)))){this.I||4!=de||7==e||Ie(8==e||0>=xe?3:2),G(this);var t=this.g.ba();this.N=t;t:if(Go(this)){var o=ms(this.g);i="";var u=o.length,f=4==Us(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){me(this),ce(this);var v="";break t}this.h.i=new fe.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:f&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function ji(i,e,t,o,u,f,v){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.X,de,t),this.i){if(this.$&&!this.J){t:{if(this.g){var S,H=this.g;if((S=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!br(S)){var K=S;break t}}K=null}if(!(t=K)){this.i=!1,this.o=3,ct(12),me(this),ce(this);break e}$i(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ve(this,t)}this.U?(Di(this,de,v),Sr&&this.i&&3==de&&(Fi(this.V,this.W,"tick",this.fb),this.W.start())):($i(this.j,this.m,v,null),Ve(this,v)),4==de&&me(this),this.i&&!this.I&&(4==de?Qs(this.l,this):(this.i=!1,ui(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,ct(12)):(this.o=0,ct(13)),me(this),ce(this)}}}catch(de){}},se.fb=function(){if(this.g){var i=Us(this.g),e=this.g.ga();this.C<e.length&&(G(this),Di(this,i,e),this.i&&4!=i&&ui(this))}},se.cancel=function(){this.I=!0,me(this)},se.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Eo(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ie(3),ct(17)),me(this),this.o=2,ce(this)):Z(this,this.Y-i)},(se=Vt.prototype).R=function(){jt(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},se.T=function(){return jt(this),this.g.concat()},se.get=function(i,e){return Dn(this.h,i)?this.h[i]:e},se.set=function(i,e){Dn(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},se.forEach=function(i,e){for(var t=this.T(),o=0;o<t.length;o++){var u=t[o],f=this.get(u);i.call(e,f,u,this)}};var Xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function O(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof O){this.g=void 0!==e?e:i.g,k(this,i.j),this.s=i.s,ee(this,i.i),ye(this,i.m),this.l=i.l,e=i.h;var t=new xi;t.i=e.i,e.g&&(t.g=new Vt(e.g),t.h=e.h),Ke(this,t),this.o=i.o}else i&&(t=String(i).match(Xn))?(this.g=!!e,k(this,t[1]||"",!0),this.s=fn(t[2]||""),ee(this,t[3]||"",!0),ye(this,t[4]),this.l=fn(t[5]||"",!0),Ke(this,t[6]||"",!0),this.o=fn(t[7]||"")):(this.g=!!e,this.h=new xi(null,this.g))}function z(i){return new O(i)}function k(i,e,t){i.j=t?fn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ee(i,e,t){i.i=t?fn(e,!0):e}function ye(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Ke(i,e,t){e instanceof xi?(i.h=e,function R(i,e){e&&!i.j&&(Ps(i),i.i=null,i.g.forEach(function(t,o){var u=o.toLowerCase();o!=u&&(co(this,o),V(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Pn(e,ps)),i.h=new xi(e,i.g))}function Je(i,e,t){i.h.set(e,t)}function Ft(i){return Je(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function fn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Pn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,dr),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function dr(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}O.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Pn(e,Jt,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Pn(e,Jt,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Pn(t,"/"==t.charAt(0)?qi:Cr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Pn(t,An)),i.join("")};var Jt=/[#\/\?@]/g,Cr=/[#\?:]/g,qi=/[#\?]/g,ps=/[#\?@]/g,An=/#/g;function xi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ps(i){i.g||(i.g=new Vt,i.h=0,i.i&&function Mn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),u=null;if(0<=o){var f=i[t].substring(0,o);u=i[t].substring(o+1)}else f=i[t];e(f,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function co(i,e){Ps(i),e=P(i,e),Dn(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Dn((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&jt(i)))}function qo(i,e){return Ps(i),e=P(i,e),Dn(i.g.h,e)}function V(i,e,t){co(i,e),0<t.length&&(i.i=null,i.g.set(P(i,e),Qn(t)),i.h+=t.length)}function P(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ee(i){this.l=i||Et,i=fe.PerformanceNavigationTiming?0<(i=fe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(fe.g&&fe.g.Ea&&fe.g.Ea()&&fe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(se=xi.prototype).add=function(i,e){Ps(this),this.i=null,i=P(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},se.forEach=function(i,e){Ps(this),this.g.forEach(function(t,o){En(t,function(u){i.call(e,u,o,this)},this)},this)},se.T=function(){Ps(this);for(var i=this.g.R(),e=this.g.T(),t=[],o=0;o<e.length;o++)for(var u=i[o],f=0;f<u.length;f++)t.push(e[o]);return t},se.R=function(i){Ps(this);var e=[];if("string"==typeof i)qo(this,i)&&(e=Yn(e,this.g.get(P(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Yn(e,i[t])}return e},se.set=function(i,e){return Ps(this),this.i=null,qo(this,i=P(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},se.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},se.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var o=e[t],u=encodeURIComponent(String(o));o=this.R(o);for(var f=0;f<o.length;f++){var v=u;""!==o[f]&&(v+="="+encodeURIComponent(String(o[f]))),i.push(v)}}return this.i=i.join("&")};var Et=10;function ar(i){return!!i.h||!!i.g&&i.g.size>=i.j}function sr(i){return i.h?1:i.g?i.g.size:0}function zi(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ws(i,e){i.g?i.g.add(e):i.h=e}function Wi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ys(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Qn(i.i)}function aa(){}function Uu(){this.g=new aa}function Bu(i,e,t){const o=t||"";try{Rt(i,function(u,f){let v=u;vt(u)&&(v=bi(u)),e.push(o+f+"="+encodeURIComponent(v))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ho(i,e,t,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(f){}}function Li(i){this.l=i.$b||null,this.j=i.ib||!1}function bs(i,e){kt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ee.prototype.cancel=function(){if(this.i=Ys(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},aa.prototype.stringify=function(i){return fe.JSON.stringify(i,void 0)},aa.prototype.parse=function(i){return fe.JSON.parse(i,void 0)},je(Li,Zn),Li.prototype.g=function(){return new bs(this.l,this.j)},Li.prototype.i=function(i){return function(){return i}}({}),je(bs,kt);var Da=0;function ko(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function gs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ua(i)}function ua(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(se=bs.prototype).open=function(i,e){if(this.readyState!=Da)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ua(this)},se.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||fe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gs(this)),this.readyState=Da},se.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==fe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ko(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},se.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?gs(this):ua(this),3==this.readyState&&ko(this)}},se.Ua=function(i){this.g&&(this.response=this.responseText=i,gs(this))},se.Ta=function(i){this.g&&(this.response=i,gs(this))},se.ha=function(){this.g&&gs(this)},se.setRequestHeader=function(i,e){this.v.append(i,e)},se.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},se.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(bs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Za=fe.JSON.parse;function ci(i){kt.call(this),this.headers=new Vt,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ka,this.K=this.L=!1}je(ci,kt);var Ka="",Na=/^https?$/i,Pa=["POST","PUT"];function Ya(i){return"content-type"==i.toLowerCase()}function la(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Vs(i),ca(i)}function Vs(i){i.D||(i.D=!0,yn(i,"complete"),yn(i,"error"))}function wo(i){if(i.h&&void 0!==Re&&(!i.C[1]||4!=Us(i)||2!=i.ba()))if(i.v&&4==Us(i))ir(i.Fa,0,i);else if(yn(i,"readystatechange"),4==Us(i)){i.h=!1;try{const S=i.ba();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===S){var u=String(i.H).match(Xn)[1]||null;if(!u&&fe.self&&fe.self.location){var f=fe.self.location.protocol;u=f.substr(0,f.length-1)}o=!Na.test(u?u.toLowerCase():"")}t=o}if(t)yn(i,"complete"),yn(i,"success");else{i.m=6;try{var v=2<Us(i)?i.g.statusText:""}catch(H){v=""}i.j=v+" ["+i.ba()+"]",Vs(i)}}finally{ca(i)}}}function ca(i,e){if(i.g){bo(i);const t=i.g,o=i.C[0]?ze:null;i.g=null,i.C=null,e||yn(i,"ready");try{t.onreadystatechange=o}catch(u){}}}function bo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(fe.clearTimeout(i.A),i.A=null)}function Us(i){return i.g?i.g.readyState:0}function ms(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Ka:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Oa(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=function zo(i){let e="";return hi(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Je(i,e,t))}function Io(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Xi(i){this.za=0,this.l=[],this.h=new xs,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Io("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Io("baseRetryDelayMs",5e3,i),this.$a=Io("retryDelaySeedMs",1e4,i),this.Ya=Io("forwardChannelMaxRetries",2,i),this.ra=Io("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Ee(i&&i.concurrentRequestLimit),this.Ca=new Uu,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Do(i){if(ka(i),3==i.G){var e=i.V++,t=z(i.F);Je(t,"SID",i.J),Je(t,"RID",e),Je(t,"TYPE","terminate"),Fa(i,t),(e=new Ws(i,i.h,e,void 0)).K=2,e.v=Ft(z(t)),t=!1,fe.navigator&&fe.navigator.sendBeacon&&(t=fe.navigator.sendBeacon(e.v.toString(),"")),!t&&fe.Image&&((new Image).src=e.v,t=!0),t||(e.g=da(e.l,null),e.g.ea(e.v)),e.F=Date.now(),ui(e)}La(i)}function mi(i){i.g&&(ur(i),i.g.cancel(),i.g=null)}function ka(i){mi(i),i.u&&(fe.clearTimeout(i.u),i.u=null),Ta(i),i.i.cancel(),i.m&&("number"==typeof i.m&&fe.clearTimeout(i.m),i.m=null)}function Wo(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&wu(i)}function wu(i){ar(i.i)||i.m||(i.m=!0,Sn(i.Ha,i),i.C=0)}function ol(i,e){var t;t=e?e.m:i.V++;const o=z(i.F);Je(o,"SID",i.J),Je(o,"RID",t),Je(o,"AID",i.U),Fa(i,o),i.o&&i.s&&Oa(o,i.o,i.s),t=new Ws(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Fo(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ws(i.i,t),Zs(t,o,e)}function Fa(i,e){i.j&&Rt({},function(t,o){Je(e,o,t)})}function Fo(i,e,t){t=Math.min(i.l.length,t);var o=i.j?nn(i.j.Oa,i.j,i):null;e:{var u=i.l;let f=-1;for(;;){const v=["count="+t];-1==f?0<t?(f=u[0].h,v.push("ofs="+f)):f=0:v.push("ofs="+f);let S=!0;for(let H=0;H<t;H++){let K=u[H].h;const de=u[H].g;if(K-=f,0>K)f=Math.max(0,u[H].h-100),S=!1;else try{Bu(de,v,"req"+K+"_")}catch(xe){o&&o(de)}}if(S){o=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,o}function To(i){i.g||i.u||(i.Y=1,Sn(i.Ga,i),i.A=0)}function Co(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Wt(nn(i.Ga,i),Bs(i,i.A)),i.A++,0))}function ur(i){null!=i.B&&(fe.clearTimeout(i.B),i.B=null)}function Ja(i){i.g=new Ws(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=z(i.oa);Je(e,"RID","rpc"),Je(e,"SID",i.J),Je(e,"CI",i.N?"0":"1"),Je(e,"AID",i.U),Fa(i,e),Je(e,"TYPE","xmlhttp"),i.o&&i.s&&Oa(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Ft(z(e)),t.s=null,t.U=!0,fs(t,i)}function Ta(i){null!=i.v&&(fe.clearTimeout(i.v),i.v=null)}function Qs(i,e){var t=null;if(i.g==e){Ta(i),ur(i),i.g=null;var o=2}else{if(!zi(i.i,e))return;t=e.D,Wi(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;yn(o=Ls(),new xt(o,t,e,u)),wu(i)}else To(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function Qa(i,e){return!(sr(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Wt(nn(i.Ha,i,e),Bs(i,i.C)),i.C++,0)))}(i,e)||2==o&&Co(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Vi(i,5);break;case 4:Vi(i,10);break;case 3:Vi(i,6);break;default:Vi(i,2)}}function Bs(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Vi(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var o=nn(i.jb,i);t||(t=new O("//www.google.com/images/cleardot.gif"),fe.location&&"http"==fe.location.protocol||k(t,"https"),Ft(t)),function Il(i,e){const t=new xs;if(fe.Image){const o=new Image;o.onload=yt(ho,t,o,"TestLoadImage: loaded",!0,e),o.onerror=yt(ho,t,o,"TestLoadImage: error",!1,e),o.onabort=yt(ho,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=yt(ho,t,o,"TestLoadImage: timeout",!1,e),fe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else ct(2);i.G=0,i.j&&i.j.va(e),La(i),ka(i)}function La(i){i.G=0,i.I=-1,i.j&&((0!=Ys(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Qn(i.l),i.l.length=0),i.j.ua())}function Os(i,e,t){let o=function rn(i){return i instanceof O?z(i):new O(i,void 0)}(t);if(""!=o.i)e&&ee(o,e+"."+o.i),ye(o,o.m);else{const u=fe.location;o=function Hn(i,e,t,o){var u=new O(null,void 0);return i&&k(u,i),e&&ee(u,e),t&&ye(u,t),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&hi(i.aa,function(u,f){Je(o,f,u)}),t=i.sa,(e=i.D)&&t&&Je(o,e,t),Je(o,"VER",i.ma),Fa(i,o),o}function da(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ci(t&&i.Ba&&!i.qa?new Li({ib:!0}):i.qa)).L=i.H,e}function Xa(){}function fo(){if(Qt&&!(10<=Number(_t)))throw Error("Environmental error: no available transport.")}function Is(i,e){kt.call(this),this.g=new Xi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!br(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!br(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ts(this)}function es(i){qs.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ha(){hs.call(this),this.status=1}function ts(i){this.g=i}(se=ci.prototype).ea=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rs.g(),this.C=function ds(i){return i.h||(i.h=i.i())}(this.u?this.u:Rs),this.g.onreadystatechange=nn(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(f){return void la(this,f)}i=t||"";const u=new Vt(this.headers);o&&Rt(o,function(f,v){u.set(v,f)}),o=function fr(i){e:{var e=Ya;const t=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=fe.FormData&&i instanceof fe.FormData,!(0<=Cn(Pa,e))||o||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(f,v){this.g.setRequestHeader(v,f)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bo(this),0<this.B&&((this.K=function Eu(i){return Qt&&function ft(){return function Jr(i){var e=Ce;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Dr(String(zr)).split("."),t=Dr("9").split("."),o=Math.max(e.length,t.length);for(let v=0;0==i&&v<o;v++){var u=e[v]||"",f=t[v]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],0==u[0].length&&0==f[0].length)break;i=en(0==u[1].length?0:parseInt(u[1],10),0==f[1].length?0:parseInt(f[1],10))||en(0==u[2].length,0==f[2].length)||en(u[2],f[2]),u=u[3],f=f[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nn(this.pa,this)):this.A=ir(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(f){la(this,f)}},se.pa=function(){void 0!==Re&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yn(this,"timeout"),this.abort(8))},se.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,yn(this,"complete"),yn(this,"abort"),ca(this))},se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ca(this,!0)),ci.Z.M.call(this)},se.Fa=function(){this.s||(this.F||this.v||this.l?wo(this):this.cb())},se.cb=function(){wo(this)},se.ba=function(){try{return 2<Us(this)?this.g.status:-1}catch(i){return-1}},se.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},se.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Za(e)}},se.Da=function(){return this.m},se.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(se=Xi.prototype).ma=8,se.G=1,se.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},se.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new Ws(this,this.h,i,void 0);let f=this.s;if(this.P&&(f?(f=vi(f),Nr(f,this.P)):f=this.P),null===this.o&&(u.H=f),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var o=this.l[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fo(this,u,e),Je(t=z(this.F),"RID",i),Je(t,"CVER",22),this.D&&Je(t,"X-HTTP-Session-Id",this.D),Fa(this,t),this.o&&f&&Oa(t,this.o,f),ws(this.i,u),this.Ra&&Je(t,"TYPE","init"),this.ja?(Je(t,"$req",e),Je(t,"SID","null"),u.$=!0,Zs(u,t,null)):Zs(u,t,e),this.G=2}}else 3==this.G&&(i?ol(this,i):0==this.l.length||ar(this.i)||ol(this))},se.Ga=function(){if(this.u=null,Ja(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Wt(nn(this.bb,this),i)}},se.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ct(10),mi(this),Ja(this))},se.ab=function(){null!=this.v&&(this.v=null,mi(this),Co(this),ct(19))},se.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ct(2)):(this.h.info("Failed to ping google.com"),ct(1))},(se=Xa.prototype).xa=function(){},se.wa=function(){},se.va=function(){},se.ua=function(){},se.Oa=function(){},fo.prototype.g=function(i,e){return new Is(i,e)},je(Is,kt),Is.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Sn(nn(i.hb,i,e))),ct(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Os(i,null,i.W),wu(i)},Is.prototype.close=function(){Do(this.g)},Is.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Wo(this.g,e)}else this.v?((e={}).__data__=bi(i),Wo(this.g,e)):Wo(this.g,i)},Is.prototype.M=function(){this.g.j=null,delete this.j,Do(this.g),delete this.g,Is.Z.M.call(this)},je(es,qs),je(ha,hs),je(ts,Xa),ts.prototype.xa=function(){yn(this.g,"a")},ts.prototype.wa=function(i){yn(this.g,new es(i))},ts.prototype.va=function(i){yn(this.g,new ha(i))},ts.prototype.ua=function(){yn(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,Is.prototype.send=Is.prototype.u,Is.prototype.open=Is.prototype.m,Is.prototype.close=Is.prototype.close,Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Rr.COMPLETE="complete",lo.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",kt.prototype.listen=kt.prototype.N,ci.prototype.listenOnce=ci.prototype.O,ci.prototype.getLastError=ci.prototype.La,ci.prototype.getLastErrorCode=ci.prototype.Da,ci.prototype.getStatus=ci.prototype.ba,ci.prototype.getResponseJson=ci.prototype.Qa,ci.prototype.getResponseText=ci.prototype.ga,ci.prototype.send=ci.prototype.ea;var Js=Qe.createWebChannelTransport=function(){return new fo},Xs=Qe.getStatEventTarget=function(){return Ls()},Va=Qe.ErrorCode=Jn,fa=Qe.EventType=Rr,ns=Qe.Event=vr,Yr=Qe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eo=Qe.FetchXmlHttpFactory=Li,Ao=Qe.WebChannel=lo,Zo=Qe.XhrIo=ci;const eu="@firebase/firestore";class Ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let to="9.8.0";const Lo=new We.Yd("@firebase/firestore");function pa(){return Lo.logLevel}function Ct(i,...e){if(Lo.logLevel<=We.in.DEBUG){const t=e.map(T);Lo.debug(`Firestore (${to}): ${i}`,...t)}}function ri(i,...e){if(Lo.logLevel<=We.in.ERROR){const t=e.map(T);Lo.error(`Firestore (${to}): ${i}`,...t)}}function A(i,...e){if(Lo.logLevel<=We.in.WARN){const t=e.map(T);Lo.warn(`Firestore (${to}): ${i}`,...t)}}function T(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function E(i="Unexpected state"){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+i;throw ri(e),new Error(e)}function x(i,e){i||E()}function q(i,e){return i}const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends st.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class et{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Kt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ti.UNAUTHENTICATED))}shutdown(){}}class an{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ir{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let u=this.i;const f=K=>this.i!==u?(u=this.i,t(K)):Promise.resolve();let v=new et;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new et,e.enqueueRetryable(()=>f(this.currentUser))};const S=()=>{const K=v;e.enqueueRetryable((0,he.Z)(function*(){yield K.promise,yield f(o.currentUser)}))},H=K=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=K,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(K=>H(K)),setTimeout(()=>{if(!this.auth){const K=this.t.getImmediate({optional:!0});K?H(K):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new et)}},0),S()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(x("string"==typeof o.accessToken),new Kt(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return x(null===e||"string"==typeof e),new Ti(e)}}class pr{constructor(e,t,o){this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class Ri{constructor(e,t,o){this.h=e,this.l=t,this.m=o}getToken(){return Promise.resolve(new pr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class no{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ko{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const o=f=>{null!=f.error&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.p;return this.p=f.token,Ct("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>o(f))};const u=f=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.g.onInit(f=>u(f)),setTimeout(()=>{if(!this.appCheck){const f=this.g.getImmediate({optional:!0});f?u(f):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(x("string"==typeof t.token),this.p=t.token,new no(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Hr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.I(o),this.T=o=>t.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function ga(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}Hr.A=-1;class ma{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=ga(40);for(let f=0;f<u.length;++f)o.length<20&&u[f]<t&&(o+=e.charAt(u[f]%e.length))}return o}}function Gn(i,e){return i<e?-1:i>e?1:0}function Ca(i,e,t){return i.length===e.length&&i.every((o,u)=>t(o,e[u]))}function Ua(i){return i+"\0"}class Ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ni.fromMillis(Date.now())}static fromDate(e){return Ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Ni(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gn(this.nanoseconds,e.nanoseconds):Gn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xn(e)}static min(){return new xn(new Ni(0,0))}static max(){return new xn(new Ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Pi(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function So(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Dl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class nu{constructor(e,t,o){void 0===t?t=0:t>e.length&&E(),void 0===o?o=e.length-t:o>e.length-t&&E(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===nu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nu?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let u=0;u<o;u++){const f=e.get(u),v=t.get(u);if(f<v)return-1;if(f>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class hr extends nu{construct(e,t,o){return new hr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(u=>u.length>0))}return new hr(t)}static emptyPath(){return new hr([])}}const Tl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ys extends nu{construct(e,t,o){return new ys(e,t,o)}static isValidIdentifier(e){return Tl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ys.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ys(["__name__"])}static fromServerFormat(e){const t=[];let o="",u=0;const f=()=>{if(0===o.length)throw new re(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let v=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new re(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[u+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new re(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=H,u+=2}else"`"===S?(v=!v,u++):"."!==S||v?(o+=S,u++):(f(),u++)}if(f(),v)throw new re(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ys(t)}static emptyPath(){return new ys([])}}class bu{constructor(e){this.fields=e,e.sort(ys.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zi(t)}static fromUint8Array(e){const t=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zi.EMPTY_BYTE_STRING=new Zi("");const Ui=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mo(i){if(x(!!i),"string"==typeof i){let e=0;const t=Ui.exec(i);if(x(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Qr(i.seconds),nanos:Qr(i.nanos)}}function Qr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Yo(i){return"string"==typeof i?Zi.fromBase64String(i):Zi.fromUint8Array(i)}function ru(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ks(i){const e=i.mapValue.fields.__previous_value__;return ru(e)?ks(e):e}function _s(i){const e=Mo(i.mapValue.fields.__local_write_time__.timestampValue);return new Ni(e.seconds,e.nanos)}class ju{constructor(e,t,o,u,f,v,S,H){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=u,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=S,this.useFetchStreams=H}}class po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new po("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof po&&e.projectId===this.projectId&&e.database===this.database}}function js(i){return null==i}function Uo(i){return 0===i&&1/i==-1/0}function Qo(i){return"number"==typeof i&&Number.isInteger(i)&&!Uo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class $t{constructor(e){this.path=e}static fromPath(e){return new $t(hr.fromString(e))}static fromName(e){return new $t(hr.fromString(e).popFirst(5))}static empty(){return new $t(hr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $t(new hr(e.slice()))}}const ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iu={nullValue:"NULL_VALUE"};function _a(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ru(i)?4:Cl(i)?9007199254740991:10:E()}function yi(i,e){if(i===e)return!0;const t=_a(i);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _s(i).isEqual(_s(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Mo(o.timestampValue),v=Mo(u.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,Yo(i.bytesValue).isEqual(Yo(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Qr(o.geoPointValue.latitude)===Qr(u.geoPointValue.latitude)&&Qr(o.geoPointValue.longitude)===Qr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Qr(o.integerValue)===Qr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Qr(o.doubleValue),v=Qr(u.doubleValue);return f===v?Uo(f)===Uo(v):isNaN(f)&&isNaN(v)}return!1}(i,e);case 9:return Ca(i.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:return function(o,u){const f=o.mapValue.fields||{},v=u.mapValue.fields||{};if(Pi(f)!==Pi(v))return!1;for(const S in f)if(f.hasOwnProperty(S)&&(void 0===v[S]||!yi(f[S],v[S])))return!1;return!0}(i,e);default:return E()}var u}function Ba(i,e){return void 0!==(i.values||[]).find(t=>yi(t,e))}function go(i,e){if(i===e)return 0;const t=_a(i),o=_a(e);if(t!==o)return Gn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gn(i.booleanValue,e.booleanValue);case 2:return function(u,f){const v=Qr(u.integerValue||u.doubleValue),S=Qr(f.integerValue||f.doubleValue);return v<S?-1:v>S?1:v===S?0:isNaN(v)?isNaN(S)?0:-1:1}(i,e);case 3:return Jl(i.timestampValue,e.timestampValue);case 4:return Jl(_s(i),_s(e));case 5:return Gn(i.stringValue,e.stringValue);case 6:return function(u,f){const v=Yo(u),S=Yo(f);return v.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(u,f){const v=u.split("/"),S=f.split("/");for(let H=0;H<v.length&&H<S.length;H++){const K=Gn(v[H],S[H]);if(0!==K)return K}return Gn(v.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,f){const v=Gn(Qr(u.latitude),Qr(f.latitude));return 0!==v?v:Gn(Qr(u.longitude),Qr(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,f){const v=u.values||[],S=f.values||[];for(let H=0;H<v.length&&H<S.length;++H){const K=go(v[H],S[H]);if(K)return K}return Gn(v.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,f){if(u===ya.mapValue&&f===ya.mapValue)return 0;if(u===ya.mapValue)return 1;if(f===ya.mapValue)return-1;const v=u.fields||{},S=Object.keys(v),H=f.fields||{},K=Object.keys(H);S.sort(),K.sort();for(let de=0;de<S.length&&de<K.length;++de){const xe=Gn(S[de],K[de]);if(0!==xe)return xe;const nt=go(v[S[de]],H[K[de]]);if(0!==nt)return nt}return Gn(S.length,K.length)}(i.mapValue,e.mapValue);default:throw E()}}function Jl(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Gn(i,e);const t=Mo(i),o=Mo(e),u=Gn(t.seconds,o.seconds);return 0!==u?u:Gn(t.nanos,o.nanos)}function ro(i){return $u(i)}function $u(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=Mo(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Yo(i.bytesValue).toBase64():"referenceValue"in i?$t.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",f=!0;for(const v of o.values||[])f?f=!1:u+=",",u+=$u(v);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let f="{",v=!0;for(const S of u)v?v=!1:f+=",",f+=`${S}:${$u(o.fields[S])}`;return f+"}"}(i.mapValue):E();var e}function Jo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function al(i){return!!i&&"integerValue"in i}function mo(i){return!!i&&"arrayValue"in i}function Du(i){return!!i&&"nullValue"in i}function va(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xo(i){return!!i&&"mapValue"in i}function ja(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return So(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ja(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ja(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Cl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $a(i){return"nullValue"in i?iu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Jo(po.empty(),$t.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:E()}function Tu(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Jo(po.empty(),$t.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ya:E()}function Ha(i,e){const t=go(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function N(i,e){const t=go(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class L{constructor(e){this.value=e}static empty(){return new L({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!xo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ja(t)}setAll(e){let t=ys.emptyPath(),o={},u=[];e.forEach((v,S)=>{if(!t.isImmediateParentOf(S)){const H=this.getFieldsMap(t);this.applyChanges(H,o,u),o={},u=[],t=S.popLast()}v?o[S.lastSegment()]=ja(v):u.push(S.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,o,u)}delete(e){const t=this.field(e.popLast());xo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=t.mapValue.fields[e.get(o)];xo(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,o){So(t,(u,f)=>e[u]=f);for(const u of o)delete e[u]}clone(){return new L(ja(this.value))}}function J(i){const e=[];return So(i.fields,(t,o)=>{const u=new ys([t]);if(xo(o)){const f=J(o.mapValue).fields;if(0===f.length)e.push(u);else for(const v of f)e.push(u.child(v))}else e.push(u)}),new bu(e)}class oe{constructor(e,t,o,u,f,v){this.key=e,this.documentType=t,this.version=o,this.readTime=u,this.data=f,this.documentState=v}static newInvalidDocument(e){return new oe(e,0,xn.min(),xn.min(),L.empty(),0)}static newFoundDocument(e,t,o){return new oe(e,1,t,xn.min(),o,0)}static newNoDocument(e,t){return new oe(e,2,t,xn.min(),L.empty(),0)}static newUnknownDocument(e,t){return new oe(e,3,t,xn.min(),L.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=L.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=L.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oe(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ue{constructor(e,t,o,u){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=u}}function Ye(i){return i.fields.find(e=>2===e.kind)}function Dt(i){return i.fields.filter(e=>2!==e.kind)}Ue.UNKNOWN_ID=-1;class sn{constructor(e,t){this.fieldPath=e,this.kind=t}}class dn{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dn(0,Rn.min())}}function Fn(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=xn.fromTimestamp(1e9===o?new Ni(t+1,0):new Ni(t,o));return new Rn(u,$t.empty(),e)}function Er(i){return new Rn(i.readTime,i.key,-1)}class Rn{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Rn(xn.min(),$t.empty(),-1)}static max(){return new Rn(xn.max(),$t.empty(),-1)}}function Ki(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=$t.comparator(i.documentKey,e.documentKey),0!==t?t:Gn(i.largestBatchId,e.largestBatchId))}class lr{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return t+o.left.size;u<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xo(this.root,e,this.comparator,!0)}}class Xo{constructor(e,t,o,u){this.isReverse=u,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?o(e.key,t):1,t&&u&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,o,u,f){this.key=e,this.value=t,this.color=null!=o?o:Ar.RED,this.left=null!=u?u:Ar.EMPTY,this.right=null!=f?f:Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,u,f){return new Ar(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=f?f:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let u=this;const f=o(e,u.key);return u=f<0?u.copy(null,null,null,u.left.insert(e,t,o),null):0===f?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return Ar.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw E();const e=this.left.check();if(e!==this.right.check())throw E();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw E()}get value(){throw E()}get color(){throw E()}get left(){throw E()}get right(){throw E()}copy(i,e,t,o,u){return this}insert(i,e,t){return new Ar(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new lr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yo(this.data.getIterator())}getIteratorFrom(e){return new yo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(0!==this.comparator(u,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new er(this.comparator);return t.data=e,t}}class yo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function io(i){return i.hasNext()?i.getNext():void 0}class Ga{constructor(e,t=null,o=[],u=[],f=null,v=null,S=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=u,this.limit=f,this.startAt=v,this.endAt=S,this.P=null}}function Xl(i,e=null,t=[],o=[],u=null,f=null,v=null){return new Ga(i,e,t,o,u,f,v)}function Aa(i){const e=q(i);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+ro(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),js(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>ro(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>ro(o)).join(",")),e.P=t}return e.P}function su(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!Gu(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(o=e.filters[u]).op||!t.field.isEqual(o.field)||!yi(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Rc(i.startAt,e.startAt)&&Rc(i.endAt,e.endAt)}function Hu(i){return $t.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ou(i,e){return i.filters.filter(t=>t instanceof rs&&t.field.isEqual(e))}function Ac(i,e,t){let o=iu,u=!0;for(const f of ou(i,e)){let v=iu,S=!0;switch(f.op){case"<":case"<=":v=$a(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,S=!1;break;case"!=":case"not-in":v=iu}Ha({value:o,inclusive:u},{value:v,inclusive:S})<0&&(o=v,u=S)}if(null!==t)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=t.position[f];Ha({value:o,inclusive:u},{value:v,inclusive:t.inclusive})<0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}function au(i,e,t){let o=ya,u=!0;for(const f of ou(i,e)){let v=ya,S=!0;switch(f.op){case">=":case">":v=Tu(f.value),S=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,S=!1;break;case"!=":case"not-in":v=ya}N({value:o,inclusive:u},{value:v,inclusive:S})>0&&(o=v,u=S)}if(null!==t)for(let f=0;f<i.orderBy.length;++f)if(i.orderBy[f].field.isEqual(e)){const v=t.position[f];N({value:o,inclusive:u},{value:v,inclusive:t.inclusive})>0&&(o=v,u=t.inclusive);break}return{value:o,inclusive:u}}class rs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,o):new ec(e,t,o):"array-contains"===t?new tc(e,o):"in"===t?new ul(e,o):"not-in"===t?new _d(e,o):"array-contains-any"===t?new Mc(e,o):new rs(e,t,o)}static V(e,t,o){return"in"===t?new lh(e,o):new Sc(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(go(t,this.value)):null!==t&&_a(this.value)===_a(t)&&this.v(go(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return E()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ec extends rs{constructor(e,t,o){super(e,t,o),this.key=$t.fromName(o.referenceValue)}matches(e){const t=$t.comparator(e.key,this.key);return this.v(t)}}class lh extends rs{constructor(e,t){super(e,"in",t),this.keys=Al(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sc extends rs{constructor(e,t){super(e,"not-in",t),this.keys=Al(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Al(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>$t.fromName(o.referenceValue))}class tc extends rs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mo(t)&&Ba(t.arrayValue,this.value)}}class ul extends rs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ba(this.value.arrayValue,t)}}class _d extends rs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ba(this.value.arrayValue,t)}}class Mc extends rs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Ba(this.value.arrayValue,o))}}class Ea{constructor(e,t){this.position=e,this.inclusive=t}}class uu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function xc(i,e,t){let o=0;for(let u=0;u<i.position.length;u++){const f=e[u],v=i.position[u];if(o=f.field.isKeyField()?$t.comparator($t.fromName(v.referenceValue),t.key):go(v,t.data.field(f.field)),"desc"===f.dir&&(o*=-1),0!==o)break}return o}function Rc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yi(i.position[t],e.position[t]))return!1;return!0}class lu{constructor(e,t=null,o=[],u=[],f=null,v="F",S=null,H=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=u,this.limit=f,this.limitType=v,this.startAt=S,this.endAt=H,this.D=null,this.C=null}}function cu(i,e,t,o,u,f,v,S){return new lu(i,e,t,o,u,f,v,S)}function qa(i){return new lu(i)}function Sl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function nc(i){for(const e of i.filters)if(e.S())return e.field;return null}function Ml(i){return null!==i.collectionGroup}function Au(i){const e=q(i);if(null===e.D){e.D=[];const t=nc(e),o=Sl(e);if(null!==t&&null===o)t.isKeyField()||e.D.push(new uu(t)),e.D.push(new uu(ys.keyField(),"asc"));else{let u=!1;for(const f of e.explicitOrderBy)e.D.push(f),f.field.isKeyField()&&(u=!0);if(!u){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new uu(ys.keyField(),f))}}}return e.D}function b(i){const e=q(i);if(!e.C)if("F"===e.limitType)e.C=Xl(e.path,e.collectionGroup,Au(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Au(e))t.push(new uu(f.field,"desc"===f.dir?"asc":"desc"));const o=e.endAt?new Ea(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new Ea(e.startAt.position,e.startAt.inclusive):null;e.C=Xl(e.path,e.collectionGroup,t,e.filters,e.limit,o,u)}return e.C}function h(i,e,t){return new lu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function c(i,e){return su(b(i),b(e))&&i.limitType===e.limitType}function I(i){return`${Aa(b(i))}|lt:${i.limitType}`}function F(i){return`Query(target=${function Cu(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${ro(o.value)}`;var o}).join(", ")}]`),js(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ro(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ro(t)).join(",")),`Target(${e})`}(b(i))}; limitType=${i.limitType})`}function Y(i,e){return e.isFoundDocument()&&function(t,o){const u=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):$t.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,o){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(t,o){for(const u of t.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(u,f,v){const S=xc(u,f,v);return u.inclusive?S<=0:S<0}(t.startAt,Au(t),o)||t.endAt&&!function(u,f,v){const S=xc(u,f,v);return u.inclusive?S>=0:S>0}(t.endAt,Au(t),o)));var t,o}function ae(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ge(i){return(e,t)=>{let o=!1;for(const u of Au(i)){const f=Oe(u,e,t);if(0!==f)return f;o=o||u.field.isKeyField()}return 0}}function Oe(i,e,t){const o=i.field.isKeyField()?$t.comparator(e.key,t.key):function(u,f,v){const S=f.data.field(u),H=v.data.field(u);return null!==S&&null!==H?go(S,H):E()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return E()}}function ot(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uo(e)?"-0":e}}function Ht(i){return{integerValue:""+i}}function gn(i,e){return Qo(e)?Ht(e):ot(i,e)}class kn{constructor(){this._=void 0}}function gr(i,e,t){return i instanceof Vr?function(o,u){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(f.fields.__previous_value__=u),{mapValue:f}}(t,e):i instanceof Bi?Ci(i,e):i instanceof Oi?Ds(i,e):function(o,u){const f=tr(o,u),v=_o(f)+_o(o.k);return al(f)&&al(o.k)?Ht(v):ot(o.M,v)}(i,e)}function Ln(i,e,t){return i instanceof Bi?Ci(i,e):i instanceof Oi?Ds(i,e):t}function tr(i,e){return i instanceof Yi?al(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Vr extends kn{}class Bi extends kn{constructor(e){super(),this.elements=e}}function Ci(i,e){const t=Ts(e);for(const o of i.elements)t.some(u=>yi(u,o))||t.push(o);return{arrayValue:{values:t}}}class Oi extends kn{constructor(e){super(),this.elements=e}}function Ds(i,e){let t=Ts(e);for(const o of i.elements)t=t.filter(u=>!yi(u,o));return{arrayValue:{values:t}}}class Yi extends kn{constructor(e,t){super(),this.M=e,this.k=t}}function _o(i){return Qr(i.integerValue||i.doubleValue)}function Ts(i){return mo(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ro{constructor(e,t){this.field=e,this.transform=t}}class Ma{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Su(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class No{}function xl(i,e,t){i instanceof mr?function(o,u,f){const v=o.value.clone(),S=Po(o.fieldTransforms,u,f.transformResults);v.setAll(S),u.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(i,e,t):i instanceof _i?function(o,u,f){if(!Su(o.precondition,u))return void u.convertToUnknownDocument(f.version);const v=Po(o.fieldTransforms,u,f.transformResults),S=u.data;S.setAll(wa(o)),S.setAll(v),u.convertToFoundDocument(f.version,S).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function qu(i,e,t){var u;i instanceof mr?function(o,u,f){if(!Su(o.precondition,u))return;const v=o.value.clone(),S=ea(o.fieldTransforms,f,u);v.setAll(S),u.convertToFoundDocument(Un(u),v).setHasLocalMutations()}(i,e,t):i instanceof _i?function(o,u,f){if(!Su(o.precondition,u))return;const v=ea(o.fieldTransforms,f,u),S=u.data;S.setAll(wa(o)),S.setAll(v),u.convertToFoundDocument(Un(u),S).setHasLocalMutations()}(i,e,t):Su(i.precondition,u=e)&&u.convertToNoDocument(xn.min())}function bn(i,e){let t=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),f=tr(o.transform,u||null);null!=f&&(null==t&&(t=L.empty()),t.set(o.field,f))}return t||null}function On(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ca(t,o,(u,f)=>function Sa(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Bi&&o instanceof Bi||t instanceof Oi&&o instanceof Oi?Ca(t.elements,o.elements,yi):t instanceof Yi&&o instanceof Yi?yi(t.k,o.k):t instanceof Vr&&o instanceof Vr);var t,o}(u,f))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}function Un(i){return i.isFoundDocument()?i.version:xn.min()}class mr extends No{constructor(e,t,o,u=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=u,this.type=0}}class _i extends No{constructor(e,t,o,u,f=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=u,this.fieldTransforms=f,this.type=1}}function wa(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Po(i,e,t){const o=new Map;x(i.length===t.length);for(let u=0;u<t.length;u++){const f=i[u],v=f.transform,S=e.data.field(f.field);o.set(f.field,Ln(v,S,t[u]))}return o}function ea(i,e,t){const o=new Map;for(const u of i){const f=u.transform,v=t.data.field(u.field);o.set(u.field,gr(f,v,e))}return o}class Br extends No{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Rl extends No{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class rc{constructor(e){this.count=e}}var wr,Tn;function za(i){switch(i){default:return E();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function du(i){if(void 0===i)return ri("GRPC error has no .code"),W.UNKNOWN;switch(i){case wr.OK:return W.OK;case wr.CANCELLED:return W.CANCELLED;case wr.UNKNOWN:return W.UNKNOWN;case wr.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case wr.INTERNAL:return W.INTERNAL;case wr.UNAVAILABLE:return W.UNAVAILABLE;case wr.UNAUTHENTICATED:return W.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case wr.NOT_FOUND:return W.NOT_FOUND;case wr.ALREADY_EXISTS:return W.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return W.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case wr.ABORTED:return W.ABORTED;case wr.OUT_OF_RANGE:return W.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return W.UNIMPLEMENTED;case wr.DATA_LOSS:return W.DATA_LOSS;default:return E()}}(Tn=wr||(wr={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[u,f]of o)if(this.equalsFn(u,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,t]],void this.innerSize++;for(let f=0;f<u.length;f++)if(this.equalsFn(u[f][0],e))return void(u[f]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[t]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,(t,o)=>{for(const[u,f]of o)e(u,f)})}isEmpty(){return Dl(this.inner)}size(){return this.innerSize}}const ch=new lr($t.comparator);function xa(){return ch}const Pf=new lr($t.comparator);function Ed(...i){let e=Pf;for(const t of i)e=e.insert(t.key,t);return e}function Mu(){return new Bo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Of=new lr($t.comparator),kf=new er($t.comparator);function di(...i){let e=kf;for(const t of i)e=e.add(t);return e}const ic=new er(Gn);function so(){return ic}class ll{constructor(e,t,o,u,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t){const o=new Map;return o.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,t)),new ll(xn.min(),o,so(),xa(),di())}}class cl{constructor(e,t,o,u,f){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t){return new cl(Zi.EMPTY_BYTE_STRING,t,di(),di(),di())}}class dl{constructor(e,t,o,u){this.O=e,this.removedTargetIds=t,this.key=o,this.F=u}}class $s{constructor(e,t){this.targetId=e,this.$=t}}class hl{constructor(e,t,o=Zi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=u}}class Nc{constructor(){this.B=0,this.L=jo(),this.U=Zi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=di(),t=di(),o=di();return this.L.forEach((u,f)=>{switch(f){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:o=o.add(u);break;default:E()}}),new cl(this.U,this.q,e,t,o)}J(){this.K=!1,this.L=jo()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class wd{constructor(e){this.nt=e,this.st=new Map,this.it=xa(),this.rt=dh(),this.ot=new er(Gn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const o=this.lt(t);switch(e.state){case 0:this.ft(t)&&o.W(e.resumeToken);break;case 1:o.tt(),o.G||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.G||this.removeTarget(t);break;case 3:this.ft(t)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),o.W(e.resumeToken));break;default:E()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((o,u)=>{this.ft(u)&&t(u)})}_t(e){const t=e.targetId,o=e.$.count,u=this.wt(t);if(u){const f=u.target;if(Hu(f))if(0===o){const v=new $t(f.path);this.ct(t,v,oe.newNoDocument(v,xn.min()))}else x(1===o);else this.gt(t)!==o&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((f,v)=>{const S=this.wt(v);if(S){if(f.current&&Hu(S.target)){const H=new $t(S.target.path);null!==this.it.get(H)||this.It(v,H)||this.ct(v,H,oe.newNoDocument(H,e))}f.j&&(t.set(v,f.H()),f.J())}});let o=di();this.rt.forEach((f,v)=>{let S=!0;v.forEachWhile(H=>{const K=this.wt(H);return!K||2===K.purpose||(S=!1,!1)}),S&&(o=o.add(f))}),this.it.forEach((f,v)=>v.setReadTime(e));const u=new ll(e,t,this.ot,this.it,o);return this.it=xa(),this.rt=dh(),this.ot=new er(Gn),u}at(e,t){if(!this.ft(e))return;const o=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,o),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,t)?u.Y(t,1):u.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),o&&(this.it=this.it.insert(t,o))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Nc,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new er(Gn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Nc),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function dh(){return new lr($t.comparator)}function jo(){return new lr($t.comparator)}const sc={asc:"ASCENDING",desc:"DESCENDING"},bd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ff{constructor(e,t){this.databaseId=e,this.N=t}}function zu(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pc(i,e){return i.N?e.toBase64():e.toUint8Array()}function Lf(i,e){return zu(i,e.toTimestamp())}function Cs(i){return x(!!i),xn.fromTimestamp(function(e){const t=Mo(e);return new Ni(t.seconds,t.nanos)}(i))}function Id(i,e){return(t=i,new hr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xu(i){const e=hr.fromString(i);return x(ke(e)),e}function Wu(i,e){return Id(i.databaseId,e.path)}function hu(i,e){const t=xu(e);if(t.get(1)!==i.databaseId.projectId)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new re(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new $t($o(t))}function Dd(i,e){return Id(i.databaseId,e)}function oc(i){const e=xu(i);return 4===e.length?hr.emptyPath():$o(e)}function Nl(i){return new hr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function $o(i){return x(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Oc(i,e,t){return{name:Wu(i,e),fields:t.value.mapValue.fields}}function kc(i,e,t){const o=hu(i,e.name),u=Cs(e.updateTime),f=new L({mapValue:{fields:e.fields}}),v=oe.newFoundDocument(o,u,f);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Ru(i,e){let t;if(e instanceof mr)t={update:Oc(i,e.key,e.value)};else if(e instanceof Br)t={delete:Wu(i,e.key)};else if(e instanceof _i)t={update:Oc(i,e.key,e.data),updateMask:ne(e.fieldMask)};else{if(!(e instanceof Rl))return E();t={verify:Wu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(u,f){const v=f.transform;if(v instanceof Vr)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Bi)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Oi)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Yi)return{fieldPath:f.field.canonicalString(),increment:v.k};throw E()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:Lf(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:E()),t;var u}function Fc(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?vs.updateTime(Cs(u.updateTime)):void 0!==u.exists?vs.exists(u.exists):vs.none():vs.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(f,v){let S=null;"setToServerValue"in v?(x("REQUEST_TIME"===v.setToServerValue),S=new Vr):"appendMissingElements"in v?S=new Bi(v.appendMissingElements.values||[]):"removeAllFromArray"in v?S=new Oi(v.removeAllFromArray.values||[]):"increment"in v?S=new Yi(f,v.increment):E();const H=ys.fromServerFormat(v.fieldPath);return new Ro(H,S)}(i,u)):[];var u;if(e.update){const u=hu(i,e.update.name),f=new L({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new bu((e.updateMask.fieldPaths||[]).map(K=>ys.fromServerFormat(K)));return new _i(u,f,v,t,o)}return new mr(u,f,t,o)}if(e.delete){const u=hu(i,e.delete);return new Br(u,t)}if(e.verify){const u=hu(i,e.verify);return new Rl(u,t)}return E()}function fh(i,e){return{documents:[Dd(i,e.path)]}}function Lc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Dd(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dd(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(H){if(0===H.length)return;const K=H.map(de=>function(xe){if("=="===xe.op){if(va(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NAN"}};if(Du(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NULL"}}}else if("!="===xe.op){if(va(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NOT_NAN"}};if(Du(xe.value))return{unaryFilter:{field:d(xe.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:d(xe.field),op:_(xe.op),value:xe.value}}}(de));return 1===K.length?K[0]:{compositeFilter:{op:"AND",filters:K}}}(e.filters);u&&(t.structuredQuery.where=u);const f=function(H){if(0!==H.length)return H.map(K=>{return{field:d((de=K).field),direction:Pl(de.dir)};var de})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const v=(K=e.limit,i.N||js(K)?K:{value:K});var K,S,H;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(S=e.startAt).inclusive,values:S.position}),e.endAt&&(t.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),t}function ph(i){let e=oc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let u=null;if(o>0){x(1===o);const de=t.from[0];de.allDescendants?u=de.collectionId:e=e.child(de.collectionId)}let f=[];t.where&&(f=gh(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(de=>{return new uu(p((xe=de).field),function(nt){switch(nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(xe.direction));var xe}));let S=null;t.limit&&(S=function(de){let xe;return xe="object"==typeof de?de.value:de,js(xe)?null:xe}(t.limit));let H=null;var de;t.startAt&&(H=new Ea((de=t.startAt).values||[],!!de.before));let K=null;return t.endAt&&(K=function(de){return new Ea(de.values||[],!de.before)}(t.endAt)),cu(e,u,v,f,S,"F",H,K)}function gh(i){return i?void 0!==i.unaryFilter?[j(i)]:void 0!==i.fieldFilter?[D(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>gh(e)).reduce((e,t)=>e.concat(t)):E():[]}function Pl(i){return sc[i]}function _(i){return bd[i]}function d(i){return{fieldPath:i.canonicalString()}}function p(i){return ys.fromServerFormat(i.fieldPath)}function D(i){return rs.create(p(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return E()}}(i.fieldFilter.op),i.fieldFilter.value)}function j(i){switch(i.unaryFilter.op){case"IS_NAN":const e=p(i.unaryFilter.field);return rs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=p(i.unaryFilter.field);return rs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=p(i.unaryFilter.field);return rs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=p(i.unaryFilter.field);return rs.create(u,"!=",{nullValue:"NULL_VALUE"});default:return E()}}function ne(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ke(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function tt(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=un(e)),e=zt(i.get(t),e);return un(e)}function zt(i,e){let t=e;const o=i.length;for(let u=0;u<o;u++){const f=i.charAt(u);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function un(i){return i+"\x01\x01"}function vn(i){const e=i.length;if(x(e>=2),2===e)return x("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),hr.emptyPath();const t=e-2,o=[];let u="";for(let f=0;f<e;){const v=i.indexOf("\x01",f);switch((v<0||v>t)&&E(),i.charAt(v+1)){case"\x01":const S=i.substring(f,v);let H;0===u.length?H=S:(u+=S,H=u,u=""),o.push(H);break;case"\x10":u+=i.substring(f,v),u+="\0";break;case"\x11":u+=i.substring(f,v+1);break;default:E()}f=v+2}return new hr(o)}const Nn=["userId","batchId"];function is(i,e){return[i,tt(e)]}function ta(i,e,t){return[i,tt(e),t]}const Ol={},Td=["prefixPath","collectionGroup","readTime","documentId"],mh=["prefixPath","collectionGroup","documentId"],fl=["collectionGroup","readTime","prefixPath","documentId"],Vc=["canonicalId","targetId"],Uc=["targetId","path"],yh=["path","targetId"],Bc=["collectionId","parent"],Cd=["indexId","uid"],_h=["uid","sequenceNumber"],Bf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ad=["indexId","uid","orderedDocumentKey"],jf=["userId","collectionPath","documentId"],Ly=["userId","collectionPath","largestBatchId"],Cg=["userId","collectionGroup","largestBatchId"],vh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ag=[...vh,"documentOverlays"],Eh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vy=[...Eh,"indexConfiguration","indexState","indexEntries"],Sg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $f{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class dt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&E(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dt((o,u)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(o,u)},this.catchCallback=f=>{this.wrapFailure(t,f).next(o,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof dt?t:dt.resolve(t)}catch(t){return dt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dt.reject(t)}static resolve(e){return new dt((t,o)=>{t(e)})}static reject(e){return new dt((t,o)=>{o(e)})}static waitFor(e){return new dt((t,o)=>{let u=0,f=0,v=!1;e.forEach(S=>{++u,S.next(()=>{++f,v&&f===u&&t()},H=>o(H))}),v=!0,f===u&&t()})}static or(e){let t=dt.resolve(!1);for(const o of e)t=t.next(u=>u?dt.resolve(u):o());return t}static forEach(e,t){const o=[];return e.forEach((u,f)=>{o.push(t.call(this,u,f))}),this.waitFor(o)}}class Zu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new et,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Sd(e,t.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=wh(o.target.error);this.At.reject(new Sd(e,u))}}static open(e,t,o,u){try{return new Zu(t,e.transaction(u,o))}catch(f){throw new Sd(t,f)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ct("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Uy(t)}}class pu{constructor(e,t,o){this.name=e,this.version=t,this.Pt=o,12.2===pu.Vt((0,st.z$)())&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ct("SimpleDb","Removing database:",e),kl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,st.hl)())return!1;if(pu.St())return!0;const e=(0,st.z$)(),t=pu.Vt(e),o=0<t&&t<10,u=pu.Dt(e),f=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||f)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var t=this;return(0,he.Z)(function*(){return t.db||(Ct("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,u)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=v=>{o(v.target.result)},f.onblocked=()=>{u(new Sd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const S=v.target.error;u("VersionError"===S.name?new re(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new re(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new Sd(e,S))},f.onupgradeneeded=v=>{Ct("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.Pt.kt(v.target.result,f.transaction,v.oldVersion,t.version).next(()=>{Ct("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=o=>t.Mt(o)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,u){var f=this;return(0,he.Z)(function*(){const v="readonly"===t;let S=0;for(;;){++S;try{f.db=yield f.Nt(e);const H=Zu.open(f.db,e,v?"readonly":"readwrite",o),K=u(H).next(de=>(H.bt(),de)).catch(de=>(H.abort(de),dt.reject(de))).toPromise();return K.catch(()=>{}),yield H.Rt,K}catch(H){const K="FirebaseError"!==H.name&&S<3;if(Ct("SimpleDb","Transaction failed with error:",H.message,"Retrying:",K),f.close(),!K)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Mg{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return kl(this.Ft.delete())}}class Sd extends re{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ku(i){return"IndexedDbTransactionError"===i.name}class Uy{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Ct("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ct("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),kl(o)}add(e){return Ct("SimpleDb","ADD",this.store.name,e,e),kl(this.store.add(e))}get(e){return kl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ct("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ct("SimpleDb","DELETE",this.store.name,e),kl(this.store.delete(e))}count(){return Ct("SimpleDb","COUNT",this.store.name),kl(this.store.count())}qt(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),f=[];return this.Kt(u,(v,S)=>{f.push(S)}).next(()=>f)}{const u=this.store.getAll(o.range);return new dt((f,v)=>{u.onerror=S=>{v(S.target.error)},u.onsuccess=S=>{f(S.target.result)}})}}Gt(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new dt((u,f)=>{o.onerror=v=>{f(v.target.error)},o.onsuccess=v=>{u(v.target.result)}})}Qt(e,t){Ct("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.jt=!1;const u=this.cursor(o);return this.Kt(u,(f,v,S)=>S.delete())}Wt(e,t){let o;t?o=e:(o={},t=e);const u=this.cursor(o);return this.Kt(u,t)}zt(e){const t=this.cursor({});return new dt((o,u)=>{t.onerror=f=>{const v=wh(f.target.error);u(v)},t.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(S=>{S?v.continue():o()}):o()}})}Kt(e,t){const o=[];return new dt((u,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const S=v.target.result;if(!S)return void u();const H=new Mg(S),K=t(S.primaryKey,S.value,H);if(K instanceof dt){const de=K.catch(xe=>(H.done(),dt.reject(xe)));o.push(de)}H.isDone?u():null===H.Lt?S.continue():S.continue(H.Lt)}}).next(()=>dt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kl(i){return new dt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=wh(o.target.error);t(u)}})}let Hf=!1;function wh(i){const e=pu.Vt((0,st.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hf||(Hf=!0,setTimeout(()=>{throw o},0)),o}}return i}class bh extends $f{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function vo(i,e){const t=q(i);return pu.xt(t.Ht,e)}class jc{constructor(e,t,o,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const f=this.mutations[u];f.key.isEqual(e.key)&&xl(f,e,o[u])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&qu(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&qu(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const o=e.get(t.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(xn.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),di())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(t,o)=>On(t,o))&&Ca(this.baseMutations,e.baseMutations,(t,o)=>On(t,o))}}class $c{constructor(e,t,o,u){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=u}static from(e,t,o){x(e.mutations.length===o.length);let u=Of;const f=e.mutations;for(let v=0;v<f.length;v++)u=u.insert(f[v].key,o[v].version);return new $c(e,t,o,u)}}class Ih{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yu{constructor(e,t,o,u,f=xn.min(),v=xn.min(),S=Zi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=S}withSequenceNumber(e){return new Yu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Yu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Gf{constructor(e){this.Jt=e}}function Hc(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Dh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Wu(u=i.Jt,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:zu(u,f.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Fl(e.version)};else{if(!e.isUnknownDocument())return E();o.unknownDocument={path:t.path.toArray(),version:Fl(e.version)}}var u,f;return o}function Dh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Fl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ac(i){const e=new Ni(i.seconds,i.nanoseconds);return xn.fromTimestamp(e)}function Gc(i,e){const t=(e.baseMutations||[]).map(f=>Fc(i.Jt,f));for(let f=0;f<e.mutations.length-1;++f){const v=e.mutations[f];f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(v.updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f)}const o=e.mutations.map(f=>Fc(i.Jt,f)),u=Ni.fromMillis(e.localWriteTimeMs);return new jc(e.batchId,u,t,o)}function qc(i){const e=ac(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ac(i.lastLimboFreeSnapshotVersion):xn.min();let o;var u;return void 0!==i.query.documents?(x(1===(u=i.query).documents.length),o=b(qa(oc(u.documents[0])))):o=b(ph(i.query)),new Yu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Zi.fromBase64String(i.resumeToken))}function Th(i,e){const t=Fl(e.snapshotVersion),o=Fl(e.lastLimboFreeSnapshotVersion);let u;u=Hu(e.target)?fh(i.Jt,e.target):Lc(i.Jt,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Ch(i){const e=ph({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?h(e,e.limit,"L"):e}function xg(i,e){return new Ih(e.largestBatchId,Fc(i.Jt,e.overlayMutation))}function zf(i,e){const t=e.path.lastSegment();return[i,tt(e.path.popLast()),t]}class By{getBundleMetadata(e,t){return Wf(e).get(t).next(o=>{if(o)return{id:(u=o).bundleId,createTime:ac(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return Wf(e).put({bundleId:(o=t).id,createTime:Fl(Cs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Rg(e).get(t).next(o=>{if(o)return{name:(u=o).name,query:Ch(u.bundledQuery),readTime:ac(u.readTime)};var u})}saveNamedQuery(e,t){return Rg(e).put({name:(o=t).name,readTime:Fl(Cs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Wf(i){return vo(i,"bundles")}function Rg(i){return vo(i,"namedQueries")}class Zf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Zf(e,t.uid||"")}getOverlay(e,t){return ba(e).get(zf(this.userId,t)).next(o=>o?xg(this.M,o):null)}saveOverlays(e,t,o){const u=[];return o.forEach((f,v)=>{const S=new Ih(t,v);u.push(this.Xt(e,S))}),dt.waitFor(u)}removeOverlaysForBatchId(e,t,o){const u=new Set;t.forEach(v=>u.add(tt(v.getCollectionPath())));const f=[];return u.forEach(v=>{const S=IDBKeyRange.bound([this.userId,v,o],[this.userId,v,o+1],!1,!0);f.push(ba(e).Qt("collectionPathOverlayIndex",S))}),dt.waitFor(f)}getOverlaysForCollection(e,t,o){const u=Mu(),f=tt(t),v=IDBKeyRange.bound([this.userId,f,o],[this.userId,f,Number.POSITIVE_INFINITY],!0);return ba(e).qt("collectionPathOverlayIndex",v).next(S=>{for(const H of S){const K=xg(this.M,H);u.set(K.getKey(),K)}return u})}getOverlaysForCollectionGroup(e,t,o,u){const f=Mu();let v;const S=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ba(e).Wt({index:"collectionGroupOverlayIndex",range:S},(H,K,de)=>{const xe=xg(this.M,K);f.size()<u||xe.largestBatchId===v?(f.set(xe.getKey(),xe),v=xe.largestBatchId):de.done()}).next(()=>f)}Xt(e,t){return ba(e).put(function(o,u,f){const[v,S,H]=zf(u,f.mutation.key);return{userId:u,collectionPath:S,documentId:H,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Ru(o.Jt,f.mutation)}}(this.M,this.userId,t))}}function ba(i){return vo(i,"documentOverlays")}class uc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Qr(e.integerValue));else if("doubleValue"in e){const o=Qr(e.doubleValue);isNaN(o)?this.ne(t,13):(this.ne(t,15),Uo(o)?t.se(0):t.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(t,20),"string"==typeof o?t.ie(o):(t.ie(`${o.seconds||""}`),t.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Yo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(t,45),t.se(o.latitude||0),t.se(o.longitude||0)}else"mapValue"in e?Cl(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):E()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const o=e.fields||{};this.ne(t,55);for(const u of Object.keys(o))this.re(u,t),this.te(o[u],t)}he(e,t){const o=e.values||[];this.ne(t,50);for(const u of o)this.te(u,t)}ae(e,t){this.ne(t,37),$t.fromName(e).path.forEach(o=>{this.ne(t,60),this.le(o,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Ng(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Pg(i){const e=64-function(t){let o=0;for(let u=0;u<8;++u){const f=Ng(255&t[u]);if(o+=f,8!==f)break}return o}(i);return Math.ceil(e/8)}uc.fe=new uc;class jy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this._e(o.value),o=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.ge(o.value),o=t.next();this.ye()}pe(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(t<"\ud800"||"\udbff"<t)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=t.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=t.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const t=this.Ee(e),o=Pg(t);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=255&t[u]}Re(e){const t=this.Ee(e),o=Pg(t);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=t.length-o;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(u){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,u,!1),new Uint8Array(f.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let u=1;u<t.length;++u)t[u]^=o?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class $y{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Hy{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class zc{constructor(){this.De=new jy,this.Ce=new $y(this.De),this.xe=new Hy(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class lc{constructor(e,t,o,u){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new lc(this.indexId,this.documentKey,this.arrayValue,o)}}function cc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Og(i.arrayValue,e.arrayValue),0!==t?t:(t=Og(i.directionalValue,e.directionalValue),0!==t?t:$t.comparator(i.documentKey,e.documentKey)))}function Og(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class cr{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const o=t;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const t=Ye(e);if(void 0!==t&&!this.Be(t))return!1;const o=Dt(e);let u=0,f=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const v=o[u];if(!this.Le(this.Fe,v)||!this.Ue(this.Me[f++],v))return!1;++u}for(;u<o.length;++u){const v=o[u];if(f>=this.Me.length||!this.Ue(this.Me[f++],v))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kg{constructor(){this.qe=new Ah}addToCollectionParentIndex(e,t){return this.qe.add(t),dt.resolve()}getCollectionParents(e,t){return dt.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return dt.resolve()}deleteFieldIndex(e,t){return dt.resolve()}getDocumentsMatchingTarget(e,t){return dt.resolve(null)}getIndexType(e,t){return dt.resolve(0)}getFieldIndexes(e,t){return dt.resolve([])}getNextCollectionGroupToUpdate(e){return dt.resolve(null)}getMinOffset(e,t){return dt.resolve(Rn.min())}updateCollectionGroup(e,t,o){return dt.resolve()}updateIndexEntries(e,t){return dt.resolve()}}class Ah{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t]||new er(hr.comparator),f=!u.has(o);return this.index[t]=u.add(o),f}has(e){const t=e.lastSegment(),o=e.popLast(),u=this.index[t];return u&&u.has(o)}getEntries(e){return(this.index[e]||new er(hr.comparator)).toArray()}}const Md=new Uint8Array(0);class Sh{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Ah,this.Ge=new Bo(o=>Aa(o),(o,u)=>su(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const o=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const f={collectionId:o,parent:tt(u)};return gu(e).put(f)}return dt.resolve()}getCollectionParents(e,t){const o=[],u=IDBKeyRange.bound([t,""],[Ua(t),""],!1,!0);return gu(e).qt(u).next(f=>{for(const v of f){if(v.collectionId!==t)break;o.push(vn(v.parent))}return o})}addFieldIndex(e,t){const o=Mh(e),u={indexId:(f=t).indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(v=>[v.fieldPath.canonicalString(),v.kind])};var f;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,t){const o=Mh(e),u=Zc(e),f=Wc(e);return o.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Wc(e);let u=!0;const f=new Map;return dt.forEach(this.Qe(t),v=>this.je(e,v).next(S=>{u&&(u=!!S),f.set(v,S)})).next(()=>{if(u){let v=di();const S=[];return dt.forEach(f,(H,K)=>{var de;Ct("IndexedDbIndexManager",`Using index ${de=H,`id=${de.indexId}|cg=${de.collectionGroup}|f=${de.fields.map(li=>`${li.fieldPath}:${li.kind}`).join(",")}`} to execute ${Aa(t)}`);const xe=function(li,uo){const us=Ye(uo);if(void 0===us)return null;for(const As of ou(li,us.fieldPath))switch(As.op){case"array-contains-any":return As.value.arrayValue.values||[];case"array-contains":return[As.value]}return null}(K,H),nt=function(li,uo){const us=new Map;for(const As of Dt(uo))for(const oa of ou(li,As.fieldPath))switch(oa.op){case"==":case"in":us.set(As.fieldPath.canonicalString(),oa.value);break;case"not-in":case"!=":return us.set(As.fieldPath.canonicalString(),oa.value),Array.from(us.values())}return null}(K,H),bt=function(li,uo){const us=[];let As=!0;for(const oa of Dt(uo)){const sh=0===oa.kind?Ac(li,oa.fieldPath,li.startAt):au(li,oa.fieldPath,li.startAt);us.push(sh.value),As&&(As=sh.inclusive)}return new Ea(us,As)}(K,H),Tt=function(li,uo){const us=[];let As=!0;for(const oa of Dt(uo)){const sh=0===oa.kind?au(li,oa.fieldPath,li.endAt):Ac(li,oa.fieldPath,li.endAt);us.push(sh.value),As&&(As=sh.inclusive)}return new Ea(us,As)}(K,H),ln=this.We(H,K,bt),Kn=this.We(H,K,Tt),as=this.ze(H,K,nt),Fs=this.He(H.indexId,xe,ln,bt.inclusive,Kn,Tt.inclusive,as);return dt.forEach(Fs,li=>o.Gt(li,t.limit).next(uo=>{uo.forEach(us=>{const As=$t.fromSegments(us.documentKey);v.has(As)||(v=v.add(As),S.push(As))})}))}).next(()=>S)}return dt.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,o,u,f,v,S){const H=(null!=t?t.length:1)*Math.max(o.length,f.length),K=H/(null!=t?t.length:1),de=[];for(let xe=0;xe<H;++xe){const nt=t?this.Je(t[xe/K]):Md,bt=this.Ye(e,nt,o[xe%K],u),Tt=this.Xe(e,nt,f[xe%K],v),ln=S.map(Kn=>this.Ye(e,nt,Kn,!0));de.push(...this.createRange(bt,Tt,ln))}return de}Ye(e,t,o,u){const f=new lc(e,$t.empty(),t,o);return u?f:f.ke()}Xe(e,t,o,u){const f=new lc(e,$t.empty(),t,o);return u?f.ke():f}je(e,t){const o=new cr(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(f=>{let v=null;for(const S of f)o.$e(S)&&(!v||S.fields.length>v.fields.length)&&(v=S);return v})}getIndexType(e,t){let o=2;return dt.forEach(this.Qe(t),u=>this.je(e,u).next(f=>{f?0!==o&&f.fields.length<function(v){let S=new er(ys.comparator),H=!1;for(const K of v.filters){const de=K;de.field.isKeyField()||("array-contains"===de.op||"array-contains-any"===de.op?H=!0:S=S.add(de.field))}for(const K of v.orderBy)K.field.isKeyField()||(S=S.add(K.field));return S.size+(H?1:0)}(u)&&(o=1):o=0})).next(()=>o)}Ze(e,t){const o=new zc;for(const u of Dt(e)){const f=t.data.field(u.fieldPath);if(null==f)return null;const v=o.Ne(u.kind);uc.fe.Zt(f,v)}return o.Se()}Je(e){const t=new zc;return uc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const o=new zc;return uc.fe.Zt(Jo(this.databaseId,t),o.Ne(function(u){const f=Dt(u);return 0===f.length?0:f[f.length-1].kind}(e))),o.Se()}ze(e,t,o){if(null===o)return[];let u=[];u.push(new zc);let f=0;for(const v of Dt(e)){const S=o[f++];for(const H of u)if(this.en(t,v.fieldPath)&&mo(S))u=this.nn(u,v,S);else{const K=H.Ne(v.kind);uc.fe.Zt(S,K)}}return this.sn(u)}We(e,t,o){return this.ze(e,t,o.position)}sn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Se();return t}nn(e,t,o){const u=[...e],f=[];for(const v of o.arrayValue.values||[])for(const S of u){const H=new zc;H.seed(S.Se()),uc.fe.Zt(v,H.Ne(t.kind)),f.push(H)}return f}en(e,t){return!!e.filters.find(o=>o instanceof rs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Mh(e),u=Zc(e);return(t?o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.qt()).next(f=>{const v=[];return dt.forEach(f,S=>u.get([S.indexId,this.uid]).next(H=>{v.push(function(K,de){const xe=de?new dn(de.sequenceNumber,new Rn(ac(de.readTime),new $t(vn(de.documentKey)),de.largestBatchId)):dn.empty(),nt=K.fields.map(([bt,Tt])=>new sn(ys.fromServerFormat(bt),Tt));return new Ue(K.indexId,K.collectionGroup,nt,xe)}(S,H))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,u)=>{const f=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==f?f:Gn(o.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const u=Mh(e),f=Zc(e);return this.rn(e).next(v=>u.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(S=>dt.forEach(S,H=>{return f.put({indexId:H.indexId,uid:this.user.uid||"",sequenceNumber:v,readTime:Fl((nt=o).readTime),documentKey:tt(nt.documentKey.path),largestBatchId:nt.largestBatchId});var nt})))}updateIndexEntries(e,t){const o=new Map;return dt.forEach(t,(u,f)=>{const v=o.get(u.collectionGroup);return(v?dt.resolve(v):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(o.set(u.collectionGroup,S),dt.forEach(S,H=>this.on(e,u,H).next(K=>{const de=this.un(f,H);return K.isEqual(de)?dt.resolve():this.an(e,f,H,K,de)}))))})}cn(e,t,o,u){return Wc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.tn(o,t.key),documentKey:t.key.path.toArray()})}hn(e,t,o,u){return Wc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.tn(o,t.key),t.key.path.toArray()])}on(e,t,o){const u=Wc(e);let f=new er(cc);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.tn(o,t)])},(v,S)=>{f=f.add(new lc(o.indexId,t,S.arrayValue,S.directionalValue))}).next(()=>f)}un(e,t){let o=new er(cc);const u=this.Ze(t,e);if(null==u)return o;const f=Ye(t);if(null!=f){const v=e.data.field(f.fieldPath);if(mo(v))for(const S of v.arrayValue.values||[])o=o.add(new lc(t.indexId,e.key,this.Je(S),u))}else o=o.add(new lc(t.indexId,e.key,Md,u));return o}an(e,t,o,u,f){Ct("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(S,H,K,de,xe){const nt=S.getIterator(),bt=H.getIterator();let Tt=io(nt),ln=io(bt);for(;Tt||ln;){let Kn=!1,as=!1;if(Tt&&ln){const Fs=K(Tt,ln);Fs<0?as=!0:Fs>0&&(Kn=!0)}else null!=Tt?as=!0:Kn=!0;Kn?(de(ln),ln=io(bt)):as?(xe(Tt),Tt=io(nt)):(Tt=io(nt),ln=io(bt))}}(u,f,cc,S=>{v.push(this.cn(e,t,o,S))},S=>{v.push(this.hn(e,t,o,S))}),dt.waitFor(v)}rn(e){let t=1;return Zc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,f)=>{f.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((v,S)=>cc(v,S)).filter((v,S,H)=>!S||0!==cc(v,H[S-1]));const u=[];u.push(e);for(const v of o){const S=cc(v,e),H=cc(v,t);if(0===S)u[0]=e.ke();else if(S>0&&H<0)u.push(v),u.push(v.ke());else if(H>0)break}u.push(t);const f=[];for(let v=0;v<u.length;v+=2)f.push(IDBKeyRange.bound([u[v].indexId,this.uid,u[v].arrayValue,u[v].directionalValue,Md,[]],[u[v+1].indexId,this.uid,u[v+1].arrayValue,u[v+1].directionalValue,Md,[]]));return f}getMinOffset(e,t){let o;return dt.forEach(this.Qe(t),u=>this.je(e,u).next(f=>{f?(!o||Ki(f.indexState.offset,o)<0)&&(o=f.indexState.offset):o=Rn.min()})).next(()=>o)}}function gu(i){return vo(i,"collectionParents")}function Wc(i){return vo(i,"indexEntries")}function Mh(i){return vo(i,"indexConfiguration")}function Zc(i){return vo(i,"indexState")}const Qu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class na{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new na(e,na.DEFAULT_COLLECTION_PERCENTILE,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Kf(i,e,t){const o=i.store("mutations"),u=i.store("documentMutations"),f=[],v=IDBKeyRange.only(t.batchId);let S=0;const H=o.Wt({range:v},(de,xe,nt)=>(S++,nt.delete()));f.push(H.next(()=>{x(1===S)}));const K=[];for(const de of t.mutations){const xe=ta(e,de.key.path,t.batchId);f.push(u.delete(xe)),K.push(de.key)}return dt.waitFor(f).next(()=>K)}function Kc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw E();e=i.noDocument}return JSON.stringify(e).length}na.DEFAULT_COLLECTION_PERCENTILE=10,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,na.DEFAULT=new na(41943040,na.DEFAULT_COLLECTION_PERCENTILE,na.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),na.DISABLED=new na(-1,0,0);class Fg{constructor(e,t,o,u){this.userId=e,this.M=t,this.indexManager=o,this.referenceDelegate=u,this.ln={}}static Yt(e,t,o,u){x(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new Fg(f,t,o,u)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).Wt({index:"userMutationsIndex",range:o},(u,f,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,o,u){const f=pl(e),v=dc(e);return v.add({}).next(S=>{x("number"==typeof S);const H=new jc(S,t,o,u),K=function(nt,bt,Tt){const ln=Tt.baseMutations.map(as=>Ru(nt.Jt,as)),Kn=Tt.mutations.map(as=>Ru(nt.Jt,as));return{userId:bt,batchId:Tt.batchId,localWriteTimeMs:Tt.localWriteTime.toMillis(),baseMutations:ln,mutations:Kn}}(this.M,this.userId,H),de=[];let xe=new er((nt,bt)=>Gn(nt.canonicalString(),bt.canonicalString()));for(const nt of u){const bt=ta(this.userId,nt.key.path,S);xe=xe.add(nt.key.path.popLast()),de.push(v.put(K)),de.push(f.put(bt,Ol))}return xe.forEach(nt=>{de.push(this.indexManager.addToCollectionParentIndex(e,nt))}),e.addOnCommittedListener(()=>{this.ln[S]=H.keys()}),dt.waitFor(de).next(()=>H)})}lookupMutationBatch(e,t){return dc(e).get(t).next(o=>o?(x(o.userId===this.userId),Gc(this.M,o)):null)}fn(e,t){return this.ln[t]?dt.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const u=o.keys();return this.ln[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,u=IDBKeyRange.lowerBound([this.userId,o]);let f=null;return dc(e).Wt({index:"userMutationsIndex",range:u},(v,S,H)=>{S.userId===this.userId&&(x(S.batchId>=o),f=Gc(this.M,S)),H.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return dc(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(u,f,v)=>{o=f.batchId,v.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).qt("userMutationsIndex",t).next(o=>o.map(u=>Gc(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=is(this.userId,t.path),u=IDBKeyRange.lowerBound(o),f=[];return pl(e).Wt({range:u},(v,S,H)=>{const[K,de,xe]=v,nt=vn(de);if(K===this.userId&&t.path.isEqual(nt))return dc(e).get(xe).next(bt=>{if(!bt)throw E();x(bt.userId===this.userId),f.push(Gc(this.M,bt))});H.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new er(Gn);const u=[];return t.forEach(f=>{const v=is(this.userId,f.path),S=IDBKeyRange.lowerBound(v),H=pl(e).Wt({range:S},(K,de,xe)=>{const[nt,bt,Tt]=K,ln=vn(bt);nt===this.userId&&f.path.isEqual(ln)?o=o.add(Tt):xe.done()});u.push(H)}),dt.waitFor(u).next(()=>this.dn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1,f=is(this.userId,o),v=IDBKeyRange.lowerBound(f);let S=new er(Gn);return pl(e).Wt({range:v},(H,K,de)=>{const[xe,nt,bt]=H,Tt=vn(nt);xe===this.userId&&o.isPrefixOf(Tt)?Tt.length===u&&(S=S.add(bt)):de.done()}).next(()=>this.dn(e,S))}dn(e,t){const o=[],u=[];return t.forEach(f=>{u.push(dc(e).get(f).next(v=>{if(null===v)throw E();x(v.userId===this.userId),o.push(Gc(this.M,v))}))}),dt.waitFor(u).next(()=>o)}removeMutationBatch(e,t){return Kf(e.Ht,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),dt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return dt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return pl(e).Wt({range:o},(f,v,S)=>{if(f[0]===this.userId){const H=vn(f[1]);u.push(H)}else S.done()}).next(()=>{x(0===u.length)})})}containsKey(e,t){return Yf(e,this.userId,t)}wn(e){return xd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Yf(i,e,t){const o=is(e,t.path),u=o[1],f=IDBKeyRange.lowerBound(o);let v=!1;return pl(i).Wt({range:f,jt:!0},(S,H,K)=>{const[de,xe,nt]=S;de===e&&xe===u&&(v=!0),K.done()}).next(()=>v)}function dc(i){return vo(i,"mutations")}function pl(i){return vo(i,"documentMutations")}function xd(i){return vo(i,"mutationQueues")}class gl{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new gl(0)}static yn(){return new gl(-1)}}class Qf{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const o=new gl(t.highestTargetId);return t.highestTargetId=o.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>xn.fromTimestamp(new Ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.pn(e).next(u=>(u.highestListenSequenceNumber=t,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.In(e,u)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(o=>(o.targetCount+=1,this.En(t,o),this.In(e,o))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ll(e).delete(t.targetId)).next(()=>this.pn(e)).next(o=>(x(o.targetCount>0),o.targetCount-=1,this.In(e,o)))}removeTargets(e,t,o){let u=0;const f=[];return Ll(e).Wt((v,S)=>{const H=qc(S);H.sequenceNumber<=t&&null===o.get(H.targetId)&&(u++,f.push(this.removeTargetData(e,H)))}).next(()=>dt.waitFor(f)).next(()=>u)}forEachTarget(e,t){return Ll(e).Wt((o,u)=>{const f=qc(u);t(f)})}pn(e){return Gy(e).get("targetGlobalKey").next(t=>(x(null!==t),t))}In(e,t){return Gy(e).put("targetGlobalKey",t)}Tn(e,t){return Ll(e).put(Th(this.M,t))}En(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Aa(t),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let f=null;return Ll(e).Wt({range:u,index:"queryTargetsIndex"},(v,S,H)=>{const K=qc(S);su(t,K.target)&&(f=K,H.done())}).next(()=>f)}addMatchingKeys(e,t,o){const u=[],f=Vl(e);return t.forEach(v=>{const S=tt(v.path);u.push(f.put({targetId:o,path:S})),u.push(this.referenceDelegate.addReference(e,o,v))}),dt.waitFor(u)}removeMatchingKeys(e,t,o){const u=Vl(e);return dt.forEach(t,f=>{const v=tt(f.path);return dt.waitFor([u.delete([o,v]),this.referenceDelegate.removeReference(e,o,f)])})}removeMatchingKeysForTargetId(e,t){const o=Vl(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),u=Vl(e);let f=di();return u.Wt({range:o,jt:!0},(v,S,H)=>{const K=vn(v[1]),de=new $t(K);f=f.add(de)}).next(()=>f)}containsKey(e,t){const o=tt(t.path),u=IDBKeyRange.bound([o],[Ua(o)],!1,!0);let f=0;return Vl(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([v,S],H,K)=>{0!==v&&(f++,K.done())}).next(()=>f>0)}Et(e,t){return Ll(e).get(t).next(o=>o?qc(o):null)}}function Ll(i){return vo(i,"targets")}function Gy(i){return vo(i,"targetGlobal")}function Vl(i){return vo(i,"targetDocuments")}function hc(i){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,he.Z)(function*(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==Sg)throw i;Ct("LocalStore","Unexpectedly lost primary lease")}),Jf.apply(this,arguments)}function Lg([i,e],[t,o]){const u=Gn(i,t);return 0===u?Gn(e,o):u}class Vg{constructor(e){this.An=e,this.buffer=new er(Lg),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Lg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hv{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const o=this.Vn?3e5:6e4;Ct("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,he.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(u){Ku(u)?Ct("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield hc(u)}yield t.Sn(e)}))}}class qy{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return dt.resolve(Hr.A);const o=new Vg(t);return this.Dn.forEachTarget(e,u=>o.Pn(u.sequenceNumber)).next(()=>this.Dn.xn(e,u=>o.Pn(u))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Dn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(Qu)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qu):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let o,u,f,v,S,H,K;const de=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(xe=>(xe>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${xe}`),u=this.params.maximumSequenceNumbersToCollect):u=xe,v=Date.now(),this.nthSequenceNumber(e,u))).next(xe=>(o=xe,S=Date.now(),this.removeTargets(e,o,t))).next(xe=>(f=xe,H=Date.now(),this.removeOrphanedDocuments(e,o))).next(xe=>(K=Date.now(),pa()<=We.in.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-de}ms\n\tDetermined least recently used ${u} in `+(S-v)+`ms\n\tRemoved ${f} targets in `+(H-S)+`ms\n\tRemoved ${xe} documents in `+(K-H)+`ms\nTotal Duration: ${K-de}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:f,documentsRemoved:xe})))}}class Gv{constructor(e,t){this.db=e,this.garbageCollector=new qy(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(u=>o+u))}kn(e){let t=0;return this.xn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(o,u)=>t(u))}addReference(e,t,o){return Rd(e,o)}removeReference(e,t,o){return Rd(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Rd(e,t)}On(e,t){return function(o,u){let f=!1;return xd(o).zt(v=>Yf(o,v,u).next(S=>(S&&(f=!0),dt.resolve(!S)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let f=0;return this.Mn(e,(v,S)=>{if(S<=t){const H=this.On(e,v).next(K=>{if(!K)return f++,o.getEntry(e,v).next(()=>(o.removeEntry(v,xn.min()),Vl(e).delete([0,tt(v.path)])))});u.push(H)}}).next(()=>dt.waitFor(u)).next(()=>o.apply(e)).next(()=>f)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Rd(e,t)}Mn(e,t){const o=Vl(e);let u,f=Hr.A;return o.Wt({index:"documentTargetsIndex"},([v,S],{path:H,sequenceNumber:K})=>{0===v?(f!==Hr.A&&t(new $t(vn(u)),f),f=K,u=H):f=Hr.A}).next(()=>{f!==Hr.A&&t(new $t(vn(u)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Rd(i,e){return Vl(i).put((o=i.currentSequenceNumber,{targetId:0,path:tt(e.path),sequenceNumber:o}));var o}class Xf{constructor(){this.changes=new Bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oe.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?dt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zy{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Yc(e).put(o)}removeEntry(e,t,o){return Yc(e).delete(function(u,f){const v=u.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Dh(f),v[v.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Fn(e,o)))}getEntry(e,t){let o=oe.newInvalidDocument(t);return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xh(t))},(u,f)=>{o=this.$n(t,f)}).next(()=>o)}Bn(e,t){let o={size:0,document:oe.newInvalidDocument(t)};return Yc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(xh(t))},(u,f)=>{o={document:this.$n(t,f),size:Kc(f)}}).next(()=>o)}getEntries(e,t){let o=xa();return this.Ln(e,t,(u,f)=>{const v=this.$n(u,f);o=o.insert(u,v)}).next(()=>o)}Un(e,t){let o=xa(),u=new lr($t.comparator);return this.Ln(e,t,(f,v)=>{const S=this.$n(f,v);o=o.insert(f,S),u=u.insert(f,Kc(v))}).next(()=>({documents:o,qn:u}))}Ln(e,t,o){if(t.isEmpty())return dt.resolve();let u=new er(Ky);t.forEach(H=>u=u.add(H));const f=IDBKeyRange.bound(xh(u.first()),xh(u.last())),v=u.getIterator();let S=v.getNext();return Yc(e).Wt({index:"documentKeyIndex",range:f},(H,K,de)=>{const xe=$t.fromSegments([...K.prefixPath,K.collectionGroup,K.documentId]);for(;S&&Ky(S,xe)<0;)o(S,null),S=v.getNext();S&&S.isEqual(xe)&&(o(S,K),S=v.hasNext()?v.getNext():null),S?de.Ut(xh(S)):de.done()}).next(()=>{for(;S;)o(S,null),S=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,o){const u=[t.popLast().toArray(),t.lastSegment(),Dh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],f=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yc(e).qt(IDBKeyRange.bound(u,f,!0)).next(v=>{let S=xa();for(const H of v){const K=this.$n($t.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);S=S.insert(K.key,K)}return S})}getAllFromCollectionGroup(e,t,o,u){let f=xa();const v=Zy(t,o),S=Zy(t,Rn.max());return Yc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,S,!0)},(H,K,de)=>{const xe=this.$n($t.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);f=f.insert(xe.key,xe),f.size===u&&de.done()}).next(()=>f)}newChangeBuffer(e){return new ep(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Wy(e).get("remoteDocumentGlobalKey").next(t=>(x(!!t),t))}Fn(e,t){return Wy(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const o=function qf(i,e){let t;if(e.document)t=kc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=$t.fromSegments(e.noDocument.path),u=ac(e.noDocument.readTime);t=oe.newNoDocument(o,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return E();{const o=$t.fromSegments(e.unknownDocument.path),u=ac(e.unknownDocument.version);t=oe.newUnknownDocument(o,u)}}return e.readTime&&t.setReadTime(function(o){const u=new Ni(o[0],o[1]);return xn.fromTimestamp(u)}(e.readTime)),t}(this.M,t);if(!o.isNoDocument()||!o.version.isEqual(xn.min()))return o}return oe.newInvalidDocument(e)}}class ep extends Xf{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Bo(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const t=[];let o=0,u=new er((f,v)=>Gn(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const S=this.Gn.get(f);if(t.push(this.Kn.removeEntry(e,f,S.readTime)),v.isValidDocument()){const H=Hc(this.Kn.M,v);u=u.add(f.path.popLast()),o+=Kc(H)-S.size,t.push(this.Kn.addEntry(e,f,H))}else if(o-=S.size,this.trackRemovals){const H=Hc(this.Kn.M,v.convertToNoDocument(xn.min()));t.push(this.Kn.addEntry(e,f,H))}}),u.forEach(f=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.Kn.updateMetadata(e,o)),dt.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(o=>(this.Gn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:o,qn:u})=>(u.forEach((f,v)=>{this.Gn.set(f,{size:v,readTime:o.get(f).readTime})}),o))}}function Wy(i){return vo(i,"remoteDocumentGlobal")}function Yc(i){return vo(i,"remoteDocumentsV14")}function xh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zy(i,e){const t=e.documentKey.path.toArray();return[i,Dh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ky(i,e){const t=i.path.toArray(),o=e.path.toArray();let u=0;for(let f=0;f<t.length-2&&f<o.length-2;++f)if(u=Gn(t[f],o[f]),u)return u;return u=Gn(t.length,o.length),u||(u=Gn(t[t.length-2],o[o.length-2]),u||Gn(t[t.length-1],o[o.length-1]))}class qv{constructor(e){this.M=e}kt(e,t,o,u){const f=new Zu("createOrUpgrade",t);var S;o<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nn,{unique:!0}),S.createObjectStore("documentMutations"),Yy(e),function(S){S.createObjectStore("remoteDocuments")}(e));let v=dt.resolve();return o<3&&u>=3&&(0!==o&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),Yy(e)),v=v.next(()=>function(S){const H=S.store("targetGlobal"),K={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xn.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",K)}(f))),o<4&&u>=4&&(0!==o&&(v=v.next(()=>function(S,H){return H.store("mutations").qt().next(K=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nn,{unique:!0});const de=H.store("mutations"),xe=K.map(nt=>de.put(nt));return dt.waitFor(xe)})}(e,f))),v=v.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(v=v.next(()=>this.Qn(f))),o<6&&u>=6&&(v=v.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.jn(f)))),o<7&&u>=7&&(v=v.next(()=>this.Wn(f))),o<8&&u>=8&&(v=v.next(()=>this.zn(e,f))),o<9&&u>=9&&(v=v.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(v=v.next(()=>this.Hn(f))),o<11&&u>=11&&(v=v.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(v=v.next(()=>{!function(S){const H=S.createObjectStore("documentOverlays",{keyPath:jf});H.createIndex("collectionPathOverlayIndex",Ly,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Cg,{unique:!1})}(e)})),o<13&&u>=13&&(v=v.next(()=>function(S){const H=S.createObjectStore("remoteDocumentsV14",{keyPath:Td});H.createIndex("documentKeyIndex",mh),H.createIndex("collectionGroupIndex",fl)}(e)).next(()=>this.Jn(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(v=v.next(()=>{!function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:Cd}).createIndex("sequenceNumberIndex",_h,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:Bf}).createIndex("documentKeyIndex",Ad,{unique:!1})}(e)})),v}jn(e){let t=0;return e.store("remoteDocuments").Wt((o,u)=>{t+=Kc(u)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Qn(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.qt().next(u=>dt.forEach(u,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",v).next(S=>dt.forEach(S,H=>{x(H.userId===f.userId);const K=Gc(this.M,H);return Kf(e,f.userId,K).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const f=[];return o.Wt((v,S)=>{const H=new hr(v),K=[0,tt(H)];f.push(t.get(K).next(de=>de?dt.resolve():t.put({targetId:0,path:tt(H),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>dt.waitFor(f))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:Bc});const o=t.store("collectionParents"),u=new Ah,f=v=>{if(u.add(v)){const S=v.lastSegment(),H=v.popLast();return o.put({collectionId:S,parent:tt(H)})}};return t.store("remoteDocuments").Wt({jt:!0},(v,S)=>{const H=new hr(v);return f(H.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([v,S,H],K)=>{const de=vn(S);return f(de.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((o,u)=>{const f=qc(u),v=Th(this.M,f);return t.put(v)})}Jn(e,t){const o=t.store("remoteDocuments"),u=[];return o.Wt((f,v)=>{const S=t.store("remoteDocumentsV14"),H=(K=v,K.document?new $t(hr.fromString(K.document.name).popFirst(5)):K.noDocument?$t.fromSegments(K.noDocument.path):K.unknownDocument?$t.fromSegments(K.unknownDocument.path):E()).path.toArray();var K;const de={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};u.push(S.put(de))}).next(()=>dt.waitFor(u))}}function Yy(i){i.createObjectStore("targetDocuments",{keyPath:Uc}).createIndex("documentTargetsIndex",yh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vc,{unique:!0}),i.createObjectStore("targetGlobal")}const Ug="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bg{constructor(e,t,o,u,f,v,S,H,K,de,xe=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Yn=f,this.window=v,this.document=S,this.Xn=K,this.Zn=de,this.ts=xe,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=nt=>Promise.resolve(),!Bg.vt())throw new re(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Gv(this,u),this.hs=t+"main",this.M=new Gf(H),this.ls=new pu(this.hs,this.ts,new qv(this.M)),this.fs=new Qf(this.referenceDelegate,this.M),this.ds=new zy(this.M),this._s=new By,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===de&&ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(W.FAILED_PRECONDITION,Ug);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Hr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var o=(0,he.Z)(function*(u){if(t.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,he.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Ku(e))return Ct("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ct("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Rh(e).get("owner").next(t=>dt.resolve(this.Ps(t)))}Vs(e){return Nu(e).delete(this.clientId)}vs(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=vo(o,"clientMetadata");return u.qt().next(f=>{const v=e.Ds(f,18e5),S=f.filter(H=>-1===v.indexOf(H));return dt.forEach(S,H=>u.delete(H.clientId)).next(()=>S)})}).catch(()=>[]);if(e.ws)for(const o of t)e.ws.removeItem(e.Cs(o.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?dt.resolve(!0):Rh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new re(W.FAILED_PRECONDITION,Ug);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nu(e).qt().next(o=>void 0===this.Ds(o,5e3).find(u=>{if(this.clientId!==u.clientId){const v=!this.inForeground&&u.inForeground,S=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||v&&S)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ct("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new bh(t,Hr.A);return e.Rs(o).next(()=>e.Vs(o))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(o=>this.Ss(o.updateTimeMs,t)&&!this.xs(o.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Nu(e).qt().next(t=>this.Ds(t,18e5).map(o=>o.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Fg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Sh(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Zf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,o){Ct("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",f=14===(v=this.ts)?Vy:13===v?Eh:12===v?Ag:11===v?vh:void E();var v;let S;return this.ls.runTransaction(e,u,f,H=>(S=new bh(H,this.es?this.es.next():Hr.A),"readwrite-primary"===t?this.Es(S).next(K=>!!K||this.As(S)).next(K=>{if(!K)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new re(W.FAILED_PRECONDITION,Sg);return o(S)}).next(K=>this.bs(S).next(()=>K)):this.$s(S).next(()=>o(S)))).then(H=>(S.raiseOnCommittedEvent(),H))}$s(e){return Rh(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(W.FAILED_PRECONDITION,Ug)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rh(e).put("owner",t)}static vt(){return pu.vt()}Rs(e){const t=Rh(e);return t.get("owner").next(o=>this.Ps(o)?(Ct("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):dt.resolve())}Ss(e,t){const o=Date.now();return!(e<o-t||e>o&&(ri(`Detected an update time that is in the future: ${e} > ${o}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,st.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const o=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ct("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ri("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rh(i){return vo(i,"owner")}function Nu(i){return vo(i,"clientMetadata")}function Nd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Qy{constructor(e,t,o){this.ds=e,this.Bs=t,this.indexManager=o}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(o=>this.Us(e,t,o))}Us(e,t,o){return this.ds.getEntry(e,t).next(u=>{for(const f of o)f.applyToLocalView(u);return u})}qs(e,t){e.forEach((o,u)=>{for(const f of t)f.applyToLocalView(u)})}Ks(e,t){return this.ds.getEntries(e,t).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>this.qs(t,o))}Qs(e,t,o){return $t.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.js(e,t.path):Ml(t)?this.Ws(e,t,o):this.zs(e,t,o);var u}js(e,t){return this.Ls(e,new $t(t)).next(o=>{let u=Ed();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}Ws(e,t,o){const u=t.collectionGroup;let f=Ed();return this.indexManager.getCollectionParents(e,u).next(v=>dt.forEach(v,S=>{const H=(K=t,de=S.child(u),new lu(de,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,de;return this.zs(e,H,o).next(K=>{K.forEach((de,xe)=>{f=f.insert(de,xe)})})}).next(()=>f))}zs(e,t,o){let u;return this.ds.getAllFromCollection(e,t.path,o).next(f=>(u=f,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(f=>{for(const v of f)for(const S of v.mutations){const H=S.key;let K=u.get(H);null==K&&(K=oe.newInvalidDocument(H),u=u.insert(H,K)),qu(S,K,v.localWriteTime),K.isFoundDocument()||(u=u.remove(H))}}).next(()=>(u.forEach((f,v)=>{Y(t,v)||(u=u.remove(f))}),u))}}class Nh{constructor(e,t,o,u){this.targetId=e,this.fromCache=t,this.Hs=o,this.Js=u}static Ys(e,t){let o=di(),u=di();for(const f of t.docChanges)switch(f.type){case 0:o=o.add(f.doc.key);break;case 1:u=u.add(f.doc.key)}return new Nh(e,t.fromCache,o,u)}}class Ph{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,o,u){return this.ti(e,t).next(f=>f||this.ei(e,t,u,o)).next(f=>f||this.ni(e,t))}ti(e,t){return dt.resolve(null)}ei(e,t,o,u){return function vd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||u.isEqual(xn.min())?this.ni(e,t):this.Zs.Ks(e,o).next(f=>{const v=this.si(t,f);return this.ii(t,v,o,u)?this.ni(e,t):(pa()<=We.in.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),F(t)),this.ri(e,v,t,Fn(u,-1)))})}si(e,t){let o=new er(ge(e));return t.forEach((u,f)=>{Y(e,f)&&(o=o.add(f))}),o}ii(e,t,o,u){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(u)>0)}ni(e,t){return pa()<=We.in.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",F(t)),this.Zs.Qs(e,t,Rn.min())}ri(e,t,o,u){return this.Zs.Qs(e,o,u).next(f=>(t.forEach(v=>{f=f.insert(v.key,v)}),f))}}class jg{constructor(e,t,o,u){this.persistence=e,this.oi=t,this.M=u,this.ui=new lr(Gn),this.ai=new Bo(f=>Aa(f),su),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(o)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Qy(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Oh(i,e,t,o){return new jg(i,e,t,o)}function $g(i,e){return Ju.apply(this,arguments)}function Ju(){return Ju=(0,he.Z)(function*(i,e){const t=q(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let u;return t.Bs.getAllMutationBatches(o).next(f=>(u=f,t.li(e),t.Bs.getAllMutationBatches(o))).next(f=>{const v=[],S=[];let H=di();for(const K of u){v.push(K.batchId);for(const de of K.mutations)H=H.add(de.key)}for(const K of f){S.push(K.batchId);for(const de of K.mutations)H=H.add(de.key)}return t.fi.Ks(o,H).next(K=>({di:K,removedBatchIds:v,addedBatchIds:S}))})})}),Ju.apply(this,arguments)}function Hg(i,e){const t=q(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),f=t.hi.newChangeBuffer({trackRemovals:!0});return function(v,S,H,K){const de=H.batch,xe=de.keys();let nt=dt.resolve();return xe.forEach(bt=>{nt=nt.next(()=>K.getEntry(S,bt)).next(Tt=>{const ln=H.docVersions.get(bt);x(null!==ln),Tt.version.compareTo(ln)<0&&(de.applyToRemoteDocument(Tt,H),Tt.isValidDocument()&&(Tt.setReadTime(H.commitVersion),K.addEntry(Tt)))})}),nt.next(()=>v.Bs.removeMutationBatch(S,de))}(t,o,e,f).next(()=>f.apply(o)).next(()=>t.Bs.performConsistencyCheck(o)).next(()=>t.fi.Ks(o,u))})}function Gg(i){const e=q(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function tp(i,e){const t=q(i),o=e.snapshotVersion;let u=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=t.hi.newChangeBuffer({trackRemovals:!0});u=t.ui;const S=[];e.targetChanges.forEach((K,de)=>{const xe=u.get(de);if(!xe)return;S.push(t.fs.removeMatchingKeys(f,K.removedDocuments,de).next(()=>t.fs.addMatchingKeys(f,K.addedDocuments,de)));let nt=xe.withSequenceNumber(f.currentSequenceNumber);var bt,Tt,ln;e.targetMismatches.has(de)?nt=nt.withResumeToken(Zi.EMPTY_BYTE_STRING,xn.min()).withLastLimboFreeSnapshotVersion(xn.min()):K.resumeToken.approximateByteSize()>0&&(nt=nt.withResumeToken(K.resumeToken,o)),u=u.insert(de,nt),Tt=nt,ln=K,(0===(bt=xe).resumeToken.approximateByteSize()||Tt.snapshotVersion.toMicroseconds()-bt.snapshotVersion.toMicroseconds()>=3e8||ln.addedDocuments.size+ln.modifiedDocuments.size+ln.removedDocuments.size>0)&&S.push(t.fs.updateTargetData(f,nt))});let H=xa();if(e.documentUpdates.forEach(K=>{e.resolvedLimboDocuments.has(K)&&S.push(t.persistence.referenceDelegate.updateLimboDocument(f,K))}),S.push(qg(f,v,e.documentUpdates).next(K=>{H=K})),!o.isEqual(xn.min())){const K=t.fs.getLastRemoteSnapshotVersion(f).next(de=>t.fs.setTargetsMetadata(f,f.currentSequenceNumber,o));S.push(K)}return dt.waitFor(S).next(()=>v.apply(f)).next(()=>t.fi.Gs(f,H)).next(()=>H)}).then(f=>(t.ui=u,f))}function qg(i,e,t){let o=di();return t.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let f=xa();return t.forEach((v,S)=>{const H=u.get(v);S.isNoDocument()&&S.version.isEqual(xn.min())?(e.removeEntry(v,S.readTime),f=f.insert(v,S)):!H.isValidDocument()||S.version.compareTo(H.version)>0||0===S.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(S),f=f.insert(v,S)):Ct("LocalStore","Ignoring outdated watch update for ",v,". Current version:",H.version," Watch version:",S.version)}),f})}function zg(i,e){const t=q(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(o,e)))}function Qc(i,e){const t=q(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return t.fs.getTargetData(o,e).next(f=>f?(u=f,dt.resolve(u)):t.fs.allocateTargetId(o).next(v=>(u=new Yu(e,v,0,o.currentSequenceNumber),t.fs.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=t.ui.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.ui=t.ui.insert(o.targetId,o),t.ai.set(e,o.targetId)),o})}function Jc(i,e,t){return fc.apply(this,arguments)}function fc(){return fc=(0,he.Z)(function*(i,e,t){const o=q(i),u=o.ui.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",f,v=>o.persistence.referenceDelegate.removeTarget(v,u)))}catch(v){if(!Ku(v))throw v;Ct("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}o.ui=o.ui.remove(e),o.ai.delete(u.target)}),fc.apply(this,arguments)}function ml(i,e,t){const o=q(i);let u=xn.min(),f=di();return o.persistence.runTransaction("Execute query","readonly",v=>function(S,H,K){const de=q(S),xe=de.ai.get(K);return void 0!==xe?dt.resolve(de.ui.get(xe)):de.fs.getTargetData(H,K)}(o,v,b(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,o.fs.getMatchingKeysForTargetId(v,S.targetId).next(H=>{f=H})}).next(()=>o.oi.Qs(v,e,t?u:xn.min(),t?f:di())).next(S=>(Xc(o,ae(e),S),{documents:S,_i:f})))}function kh(i,e){const t=q(i),o=q(t.fs),u=t.ui.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",f=>o.Et(f,e).next(v=>v?v.target:null))}function pc(i,e){const t=q(i),o=t.ci.get(e)||xn.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.hi.getAllFromCollectionGroup(u,e,Fn(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Xc(t,e,u),u))}function Xc(i,e,t){let o=xn.min();t.forEach((u,f)=>{f.readTime.compareTo(o)>0&&(o=f.readTime)}),i.ci.set(e,o)}function np(){return np=(0,he.Z)(function*(i,e,t,o){const u=q(i);let f=di(),v=xa();for(const K of t){const de=e.wi(K.metadata.name);K.document&&(f=f.add(de));const xe=e.mi(K);xe.setReadTime(e.gi(K.metadata.readTime)),v=v.insert(de,xe)}const S=u.hi.newChangeBuffer({trackRemovals:!0}),H=yield Qc(u,(K=o,b(qa(hr.fromString(`__bundle__/docs/${K}`)))));var K;return u.persistence.runTransaction("Apply bundle documents","readwrite",K=>qg(K,S,v).next(de=>(S.apply(K),de)).next(de=>u.fs.removeMatchingKeysForTargetId(K,H.targetId).next(()=>u.fs.addMatchingKeys(K,f,H.targetId)).next(()=>u.fi.Gs(K,de)).next(()=>de)))}),np.apply(this,arguments)}function Wg(i,e){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,he.Z)(function*(i,e,t=di()){const o=yield Qc(i,b(Ch(e.bundledQuery))),u=q(i);return u.persistence.runTransaction("Save named query","readwrite",f=>{const v=Cs(e.readTime);if(o.snapshotVersion.compareTo(v)>=0)return u._s.saveNamedQuery(f,e);const S=o.withResumeToken(Zi.EMPTY_BYTE_STRING,v);return u.ui=u.ui.insert(S.targetId,S),u.fs.updateTargetData(f,S).next(()=>u.fs.removeMatchingKeysForTargetId(f,o.targetId)).next(()=>u.fs.addMatchingKeys(f,t,o.targetId)).next(()=>u._s.saveNamedQuery(f,e))})}),Fh.apply(this,arguments)}class rp{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return dt.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var o;return this.yi.set(t.id,{id:(o=t).id,version:o.version,createTime:Cs(o.createTime)}),dt.resolve()}getNamedQuery(e,t){return dt.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(o=t).name,query:Ch(o.bundledQuery),readTime:Cs(o.readTime)}),dt.resolve();var o}}class ip{constructor(){this.overlays=new lr($t.comparator),this.Ii=new Map}getOverlay(e,t){return dt.resolve(this.overlays.get(t))}saveOverlays(e,t,o){return o.forEach((u,f)=>{this.Xt(e,t,f)}),dt.resolve()}removeOverlaysForBatchId(e,t,o){const u=this.Ii.get(o);return void 0!==u&&(u.forEach(f=>this.overlays=this.overlays.remove(f)),this.Ii.delete(o)),dt.resolve()}getOverlaysForCollection(e,t,o){const u=Mu(),f=t.length+1,v=new $t(t.child("")),S=this.overlays.getIteratorFrom(v);for(;S.hasNext();){const H=S.getNext().value,K=H.getKey();if(!t.isPrefixOf(K.path))break;K.path.length===f&&H.largestBatchId>o&&u.set(H.getKey(),H)}return dt.resolve(u)}getOverlaysForCollectionGroup(e,t,o,u){let f=new lr((K,de)=>K-de);const v=this.overlays.getIterator();for(;v.hasNext();){const K=v.getNext().value;if(K.getKey().getCollectionGroup()===t&&K.largestBatchId>o){let de=f.get(K.largestBatchId);null===de&&(de=Mu(),f=f.insert(K.largestBatchId,de)),de.set(K.getKey(),K)}}const S=Mu(),H=f.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((K,de)=>S.set(K,de)),!(S.size()>=u)););return dt.resolve(S)}Xt(e,t,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const v=this.Ii.get(u.largestBatchId).delete(o.key);this.Ii.set(u.largestBatchId,v)}this.overlays=this.overlays.insert(o.key,new Ih(t,o));let f=this.Ii.get(t);void 0===f&&(f=di(),this.Ii.set(t,f)),this.Ii.set(t,f.add(o.key))}}class Lh{constructor(){this.Ti=new er(Hs.Ei),this.Ai=new er(Hs.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const o=new Hs(e,t);this.Ti=this.Ti.add(o),this.Ai=this.Ai.add(o)}bi(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Pi(new Hs(e,t))}Vi(e,t){e.forEach(o=>this.removeReference(o,t))}vi(e){const t=new $t(new hr([])),o=new Hs(t,e),u=new Hs(t,e+1),f=[];return this.Ai.forEachInRange([o,u],v=>{this.Pi(v),f.push(v.key)}),f}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new $t(new hr([])),o=new Hs(t,e),u=new Hs(t,e+1);let f=di();return this.Ai.forEachInRange([o,u],v=>{f=f.add(v.key)}),f}containsKey(e){const t=new Hs(e,0),o=this.Ti.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Hs{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return $t.comparator(e.key,t.key)||Gn(e.Ci,t.Ci)}static Ri(e,t){return Gn(e.Ci,t.Ci)||$t.comparator(e.key,t.key)}}class Jy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new er(Hs.Ei)}checkEmpty(e){return dt.resolve(0===this.Bs.length)}addMutationBatch(e,t,o,u){const f=this.xi;this.xi++;const v=new jc(f,t,o,u);this.Bs.push(v);for(const S of u)this.Ni=this.Ni.add(new Hs(S.key,f)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return dt.resolve(v)}lookupMutationBatch(e,t){return dt.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.Mi(t+1),f=u<0?0:u;return dt.resolve(this.Bs.length>f?this.Bs[f]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return dt.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Hs(t,0),u=new Hs(t,Number.POSITIVE_INFINITY),f=[];return this.Ni.forEachInRange([o,u],v=>{const S=this.ki(v.Ci);f.push(S)}),dt.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new er(Gn);return t.forEach(u=>{const f=new Hs(u,0),v=new Hs(u,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([f,v],S=>{o=o.add(S.Ci)})}),dt.resolve(this.Oi(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,u=o.length+1;let f=o;$t.isDocumentKey(f)||(f=f.child(""));const v=new Hs(new $t(f),0);let S=new er(Gn);return this.Ni.forEachWhile(H=>{const K=H.key.path;return!!o.isPrefixOf(K)&&(K.length===u&&(S=S.add(H.Ci)),!0)},v),dt.resolve(this.Oi(S))}Oi(e){const t=[];return e.forEach(o=>{const u=this.ki(o);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){x(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let o=this.Ni;return dt.forEach(t.mutations,u=>{const f=new Hs(u.key,t.batchId);return o=o.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Ni=o})}_n(e){}containsKey(e,t){const o=new Hs(t,0),u=this.Ni.firstAfterOrEqual(o);return dt.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return dt.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class Zg{constructor(e){this.$i=e,this.docs=new lr($t.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,u=this.docs.get(o),f=u?u.size:0,v=this.$i(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return dt.resolve(o?o.document.mutableCopy():oe.newInvalidDocument(t))}getEntries(e,t){let o=xa();return t.forEach(u=>{const f=this.docs.get(u);o=o.insert(u,f?f.document.mutableCopy():oe.newInvalidDocument(u))}),dt.resolve(o)}getAllFromCollection(e,t,o){let u=xa();const f=new $t(t.child("")),v=this.docs.getIteratorFrom(f);for(;v.hasNext();){const{key:S,value:{document:H}}=v.getNext();if(!t.isPrefixOf(S.path))break;S.path.length>t.length+1||Ki(Er(H),o)<=0||(u=u.insert(H.key,H.mutableCopy()))}return dt.resolve(u)}getAllFromCollectionGroup(e,t,o,u){E()}Bi(e,t){return dt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new zv(this)}getSize(e){return dt.resolve(this.size)}}class zv extends Xf{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?t.push(this.Kn.addEntry(e,u)):this.Kn.removeEntry(o)}),dt.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Kg{constructor(e){this.persistence=e,this.Li=new Bo(t=>Aa(t),su),this.lastRemoteSnapshotVersion=xn.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Lh,this.targetCount=0,this.Ki=gl.gn()}forEachTarget(e,t){return this.Li.forEach((o,u)=>t(u)),dt.resolve()}getLastRemoteSnapshotVersion(e){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dt.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Ui&&(this.Ui=t),dt.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,dt.resolve()}updateTargetData(e,t){return this.Tn(t),dt.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,dt.resolve()}removeTargets(e,t,o){let u=0;const f=[];return this.Li.forEach((v,S)=>{S.sequenceNumber<=t&&null===o.get(S.targetId)&&(this.Li.delete(v),f.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),dt.waitFor(f).next(()=>u)}getTargetCount(e){return dt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Li.get(t)||null;return dt.resolve(o)}addMatchingKeys(e,t,o){return this.qi.bi(t,o),dt.resolve()}removeMatchingKeys(e,t,o){this.qi.Vi(t,o);const u=this.persistence.referenceDelegate,f=[];return u&&t.forEach(v=>{f.push(u.markPotentiallyOrphaned(e,v))}),dt.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),dt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.qi.Di(t);return dt.resolve(o)}containsKey(e,t){return dt.resolve(this.qi.containsKey(t))}}class Yg{constructor(e,t){this.Gi={},this.overlays={},this.es=new Hr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Kg(this),this.indexManager=new kg,this.ds=new Zg(o=>this.referenceDelegate.Qi(o)),this.M=new Gf(t),this._s=new rp(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ip,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Gi[e.toKey()];return o||(o=new Jy(t,this.referenceDelegate),this.Gi[e.toKey()]=o),o}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,o){Ct("MemoryPersistence","Starting transaction:",e);const u=new Xy(this.es.next());return this.referenceDelegate.ji(),o(u).next(f=>this.referenceDelegate.Wi(u).next(()=>f)).toPromise().then(f=>(u.raiseOnCommittedEvent(),f))}zi(e,t){return dt.or(Object.values(this.Gi).map(o=>()=>o.containsKey(e,t)))}}class Xy extends $f{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Hi=new Lh,this.Ji=null}static Yi(e){return new Vh(e)}get Xi(){if(this.Ji)return this.Ji;throw E()}addReference(e,t,o){return this.Hi.addReference(o,t),this.Xi.delete(o.toString()),dt.resolve()}removeReference(e,t,o){return this.Hi.removeReference(o,t),this.Xi.add(o.toString()),dt.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),dt.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(u=>this.Xi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(f=>this.Xi.add(f.toString()))}).next(()=>o.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Xi,o=>{const u=$t.fromPath(o);return this.Zi(e,u).next(f=>{f||t.removeEntry(u,xn.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(o=>{o?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return dt.or([()=>dt.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Qg(i,e){return`firestore_clients_${i}_${e}`}function Jg(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Ia(i,e){return`firestore_targets_${i}_${e}`}class Uh{constructor(e,t,o,u){this.user=e,this.batchId=t,this.state=o,this.error=u}static tr(e,t,o){const u=JSON.parse(o);let f,v="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return v&&u.error&&(v="string"==typeof u.error.message&&"string"==typeof u.error.code,v&&(f=new re(u.error.code,u.error.message))),v?new Uh(e,t,u.state,f):(ri("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pd{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static tr(e,t){const o=JSON.parse(t);let u,f="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(u=new re(o.error.code,o.error.message))),f?new Pd(e,o.state,u):(ri("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const o=JSON.parse(t);let u="object"==typeof o&&o.activeTargetIds instanceof Array,f=so();for(let v=0;u&&v<o.activeTargetIds.length;++v)u=Qo(o.activeTargetIds[v]),f=f.add(o.activeTargetIds[v]);return u?new sp(e,f):(ri("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Xg{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Xg(t.clientId,t.onlineState):(ri("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bh{constructor(){this.activeTargetIds=so()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class em{constructor(e,t,o,u,f){this.window=e,this.Yn=t,this.persistenceKey=o,this.ir=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new lr(Gn),this.started=!1,this.cr=[];const v=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.hr=Qg(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Bh),this.dr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Fs();for(const u of t){if(u===e.ir)continue;const f=e.getItem(Qg(e.persistenceKey,u));if(f){const v=sp.tr(u,f);v&&(e.ar=e.ar.insert(v.clientId,v))}}e.yr();const o=e.storage.getItem(e.mr);if(o){const u=e.pr(o);u&&e.Ir(u)}for(const u of e.cr)e.ur(u);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((o,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,o){this.Er(e,t,o),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Ia(this.persistenceKey,e));if(o){const u=Pd.tr(e,o);u&&(t=u.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ia(this.persistenceKey,e))}updateQueryState(e,t,o){this.br(e,t,o)}handleUserChange(e,t,o){t.forEach(u=>{this.Ar(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ct("SharedClientState","READ",e,t),t}setItem(e,t){Ct("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ct("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const o=e;if(o.storageArea===this.storage){if(Ct("SharedClientState","EVENT",o.key,o.newValue),o.key===this.hr)return void ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==o.key)if(t.dr.test(o.key)){if(null==o.newValue){const u=t.vr(o.key);return t.Sr(u,null)}{const u=t.Dr(o.key,o.newValue);if(u)return t.Sr(u.clientId,u)}}else if(t._r.test(o.key)){if(null!==o.newValue){const u=t.Cr(o.key,o.newValue);if(u)return t.Nr(u)}}else if(t.wr.test(o.key)){if(null!==o.newValue){const u=t.kr(o.key,o.newValue);if(u)return t.Mr(u)}}else if(o.key===t.mr){if(null!==o.newValue){const u=t.pr(o.newValue);if(u)return t.Ir(u)}}else if(o.key===t.lr){const u=function(f){let v=Hr.A;if(null!=f)try{const S=JSON.parse(f);x("number"==typeof S),v=S}catch(S){ri("SharedClientState","Failed to read sequence number from WebStorage",S)}return v}(o.newValue);u!==Hr.A&&t.sequenceNumberHandler(u)}else if(o.key===t.gr){const u=t.Or(o.newValue);yield Promise.all(u.map(f=>t.syncEngine.Fr(f)))}}else t.cr.push(o)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,o){const u=new Uh(this.currentUser,e,t,o),f=Jg(this.persistenceKey,this.currentUser,e);this.setItem(f,u.er())}Ar(e){const t=Jg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,o){const u=Ia(this.persistenceKey,e),f=new Pd(e,t,o);this.setItem(u,f.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const o=this.vr(e);return sp.tr(o,t)}Cr(e,t){const o=this._r.exec(e),u=Number(o[1]);return Uh.tr(new Ti(void 0!==o[2]?o[2]:null),u,t)}kr(e,t){const o=this.wr.exec(e),u=Number(o[1]);return Pd.tr(u,t)}pr(e){return Xg.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ct("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const o=t?this.ar.insert(e,t):this.ar.remove(e),u=this.Tr(this.ar),f=this.Tr(o),v=[],S=[];return f.forEach(H=>{u.has(H)||v.push(H)}),u.forEach(H=>{f.has(H)||S.push(H)}),this.syncEngine.Lr(v,S).then(()=>{this.ar=o})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=so();return e.forEach((o,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class tm{constructor(){this.Ur=new Bh,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Bh,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class op{Kr(e){}shutdown(){}}class ap{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const e_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class t_{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class n_ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,o,u,f){const v=this.ho(e,t);Ct("RestConnection","Sending: ",v,o);const S={};return this.lo(S,u,f),this.fo(e,v,S,o).then(H=>(Ct("RestConnection","Received: ",H),H),H=>{throw A("RestConnection",`${e} failed with error: `,H,"url: ",v,"request:",o),H})}_o(e,t,o,u,f){return this.co(e,t,o,u,f)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,f)=>e[f]=u),o&&o.headers.forEach((u,f)=>e[f]=u)}ho(e,t){return`${this.uo}/v1/${t}:${e_[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,u){return new Promise((f,v)=>{const S=new Zo;S.listenOnce(fa.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Va.NO_ERROR:const K=S.getResponseJson();Ct("Connection","XHR received:",JSON.stringify(K)),f(K);break;case Va.TIMEOUT:Ct("Connection",'RPC "'+e+'" timed out'),v(new re(W.DEADLINE_EXCEEDED,"Request time out"));break;case Va.HTTP_ERROR:const de=S.getStatus();if(Ct("Connection",'RPC "'+e+'" failed with status:',de,"response text:",S.getResponseText()),de>0){const xe=S.getResponseJson().error;if(xe&&xe.status&&xe.message){const nt=function(bt){const Tt=bt.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(Tt)>=0?Tt:W.UNKNOWN}(xe.status);v(new re(nt,xe.message))}else v(new re(W.UNKNOWN,"Server responded with status "+S.getStatus()))}else v(new re(W.UNAVAILABLE,"Connection failed."));break;default:E()}}finally{Ct("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(u);S.send(t,"POST",H,o,15)})}wo(e,t,o){const u=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Js(),v=Xs(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(S.xmlHttpFactory=new eo({})),this.lo(S.initMessageHeaders,t,o),(0,st.uI)()||(0,st.b$)()||(0,st.d)()||(0,st.w1)()||(0,st.Mn)()||(0,st.ru)()||(S.httpHeadersOverwriteParam="$httpHeaders");const H=u.join("");Ct("Connection","Creating WebChannel: "+H,S);const K=f.createWebChannel(H,S);let de=!1,xe=!1;const nt=new t_({Jr:Tt=>{xe?Ct("Connection","Not sending because WebChannel is closed:",Tt):(de||(Ct("Connection","Opening WebChannel transport."),K.open(),de=!0),Ct("Connection","WebChannel sending:",Tt),K.send(Tt))},Yr:()=>K.close()}),bt=(Tt,ln,Kn)=>{Tt.listen(ln,as=>{try{Kn(as)}catch(Fs){setTimeout(()=>{throw Fs},0)}})};return bt(K,Ao.EventType.OPEN,()=>{xe||Ct("Connection","WebChannel transport opened.")}),bt(K,Ao.EventType.CLOSE,()=>{xe||(xe=!0,Ct("Connection","WebChannel transport closed"),nt.ro())}),bt(K,Ao.EventType.ERROR,Tt=>{xe||(xe=!0,A("Connection","WebChannel transport errored:",Tt),nt.ro(new re(W.UNAVAILABLE,"The operation could not be completed")))}),bt(K,Ao.EventType.MESSAGE,Tt=>{var ln;if(!xe){const Kn=Tt.data[0];x(!!Kn);const as=Kn,Fs=as.error||(null===(ln=as[0])||void 0===ln?void 0:ln.error);if(Fs){Ct("Connection","WebChannel received error:",Fs);const li=Fs.status;let uo=function(As){const oa=wr[As];if(void 0!==oa)return du(oa)}(li),us=Fs.message;void 0===uo&&(uo=W.INTERNAL,us="Unknown error status: "+li+" with message "+Fs.message),xe=!0,nt.ro(new re(uo,us)),K.close()}else Ct("Connection","WebChannel received:",Kn),nt.oo(Kn)}}),bt(v,ns.STAT_EVENT,Tt=>{Tt.stat===Yr.PROXY?Ct("Connection","Detected buffering proxy"):Tt.stat===Yr.NOPROXY&&Ct("Connection","Detected no buffering proxy")}),setTimeout(()=>{nt.io()},0),nt}}function up(){return"undefined"!=typeof window?window:null}function jh(){return"undefined"!=typeof document?document:null}function td(i){return new Ff(i,!0)}class lp{constructor(e,t,o=1e3,u=1.5,f=6e4){this.Yn=e,this.timerId=t,this.mo=o,this.yo=u,this.po=f,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),u=Math.max(0,t-o);u>0&&Ct("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,u,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class nm{constructor(e,t,o,u,f,v,S,H){this.Yn=e,this.Vo=o,this.vo=u,this.So=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=S,this.listener=H,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new lp(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,he.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,he.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var o=this;return(0,he.Z)(function*(){o.Uo(),o.qo(),o.No.cancel(),o.Do++,4!==e?o.No.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),o.No.Ao()):t&&t.code===W.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Ko(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Do===t&&this.Qo(o,u)},o=>{e(()=>{const u=new re(W.UNKNOWN,"Fetching auth token failed: "+o.message);return this.jo(u)})})}Qo(e,t){const o=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{o(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(u=>{o(()=>this.jo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Oo(){var e=this;this.state=5,this.No.Ro((0,he.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ct("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rm extends nm{constructor(e,t,o,u,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,u,v),this.M=f}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function fu(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:E(),u=e.targetChange.targetIds||[],f=function(H,K){return H.N?(x(void 0===K||"string"==typeof K),Zi.fromBase64String(K||"")):(x(void 0===K||K instanceof Uint8Array),Zi.fromUint8Array(K||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,S=v&&function(H){const K=void 0===H.code?W.UNKNOWN:du(H.code);return new re(K,H.message||"")}(v);t=new hl(o,u,f,S||null)}else if("documentChange"in e){const o=e.documentChange,u=hu(i,o.document.name),f=Cs(o.document.updateTime),v=new L({mapValue:{fields:o.document.fields}}),S=oe.newFoundDocument(u,f,v);t=new dl(o.targetIds||[],o.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const o=e.documentDelete,u=hu(i,o.document),f=o.readTime?Cs(o.readTime):xn.min(),v=oe.newNoDocument(u,f);t=new dl([],o.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const o=e.documentRemove,u=hu(i,o.document);t=new dl([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return E();{const o=e.filter,f=new rc(o.count||0);t=new $s(o.targetId,f)}}var H;return t}(this.M,e),o=function(u){if(!("targetChange"in u))return xn.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?xn.min():f.readTime?Cs(f.readTime):xn.min()}(e);return this.listener.zo(t,o)}Ho(e){const t={};t.database=Nl(this.M),t.addTarget=function(u,f){let v;const S=f.target;return v=Hu(S)?{documents:fh(u,S)}:{query:Lc(u,S)},v.targetId=f.targetId,f.resumeToken.approximateByteSize()>0?v.resumeToken=Pc(u,f.resumeToken):f.snapshotVersion.compareTo(xn.min())>0&&(v.readTime=zu(u,f.snapshotVersion.toTimestamp())),v}(this.M,e);const o=function Uf(i,e){const t=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return E()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Lo(t)}Jo(e){const t={};t.database=Nl(this.M),t.removeTarget=e,this.Lo(t)}}class im extends nm{constructor(e,t,o,u,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,u,v),this.M=f,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(x(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function hh(i,e){return i&&i.length>0?(x(void 0!==e),i.map(t=>function(o,u){let f=Cs(o.updateTime?o.updateTime:u);return f.isEqual(xn.min())&&(f=Cs(u)),new Ma(f,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.tu(o,t)}return x(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Nl(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Ru(this.M,o))};this.Lo(t)}}class r_ extends class{}{constructor(e,t,o,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=o,this.M=u,this.su=!1}iu(){if(this.su)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.So.co(e,t,o,u,f)).catch(u=>{throw"FirebaseError"===u.name?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(W.UNKNOWN,u.toString())})}_o(e,t,o){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.So._o(e,t,o,u,f)).catch(u=>{throw"FirebaseError"===u.name?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new re(W.UNKNOWN,u.toString())})}terminate(){this.su=!0}}class Xu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ri(t),this.uu=!1):Ct("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class cp{constructor(e,t,o,u,f){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=f,this.gu.Kr(S=>{o.enqueueAndForget((0,he.Z)(function*(){var H;Pu(v)&&(Ct("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,he.Z)(function*(K){const de=q(K);de.wu.add(4),yield kd(de),de.yu.set("Unknown"),de.wu.delete(4),yield Od(de)}),function(K){return H.apply(this,arguments)})(v))}))}),this.yu=new Xu(o,u)}}function Od(i){return dp.apply(this,arguments)}function dp(){return dp=(0,he.Z)(function*(i){if(Pu(i))for(const e of i.mu)yield e(!0)}),dp.apply(this,arguments)}function kd(i){return $h.apply(this,arguments)}function $h(){return $h=(0,he.Z)(function*(i){for(const e of i.mu)yield e(!1)}),$h.apply(this,arguments)}function Hh(i,e){const t=q(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),pp(t)?fp(t):yc(t).Mo()&&hp(t,e))}function Fd(i,e){const t=q(i),o=yc(t);t._u.delete(e),o.Mo()&&Gh(t,e),0===t._u.size&&(o.Mo()?o.$o():Pu(t)&&t.yu.set("Unknown"))}function hp(i,e){i.pu.Z(e.targetId),yc(i).Ho(e)}function Gh(i,e){i.pu.Z(e),yc(i).Jo(e)}function fp(i){i.pu=new wd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),yc(i).start(),i.yu.au()}function pp(i){return Pu(i)&&!yc(i).ko()&&i._u.size>0}function Pu(i){return 0===q(i).wu.size}function qh(i){i.pu=void 0}function i_(i){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,he.Z)(function*(i){i._u.forEach((e,t)=>{hp(i,e)})}),Ld.apply(this,arguments)}function gp(i,e){return zh.apply(this,arguments)}function zh(){return zh=(0,he.Z)(function*(i,e){qh(i),pp(i)?(i.yu.lu(e),fp(i)):i.yu.set("Unknown")}),zh.apply(this,arguments)}function Wv(i,e,t){return sm.apply(this,arguments)}function sm(){return sm=(0,he.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof hl&&2===e.state&&e.cause)try{yield(o=(0,he.Z)(function*(u,f){const v=f.cause;for(const S of f.targetIds)u._u.has(S)&&(yield u.remoteSyncer.rejectListen(S,v),u._u.delete(S),u.pu.removeTarget(S))}),function(u,f){return o.apply(this,arguments)})(i,e)}catch(o){Ct("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield nd(i,o)}else if(e instanceof dl?i.pu.ut(e):e instanceof $s?i.pu._t(e):i.pu.ht(e),!t.isEqual(xn.min()))try{const o=yield Gg(i.localStore);t.compareTo(o)>=0&&(yield function(u,f){const v=u.pu.yt(f);return v.targetChanges.forEach((S,H)=>{if(S.resumeToken.approximateByteSize()>0){const K=u._u.get(H);K&&u._u.set(H,K.withResumeToken(S.resumeToken,f))}}),v.targetMismatches.forEach(S=>{const H=u._u.get(S);if(!H)return;u._u.set(S,H.withResumeToken(Zi.EMPTY_BYTE_STRING,H.snapshotVersion)),Gh(u,S);const K=new Yu(H.target,S,1,H.sequenceNumber);hp(u,K)}),u.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(o){Ct("RemoteStore","Failed to raise snapshot:",o),yield nd(i,o)}var o}),sm.apply(this,arguments)}function nd(i,e,t){return om.apply(this,arguments)}function om(){return om=(0,he.Z)(function*(i,e,t){if(!Ku(e))throw e;i.wu.add(1),yield kd(i),i.yu.set("Offline"),t||(t=()=>Gg(i.localStore)),i.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Ct("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield Od(i)}))}),om.apply(this,arguments)}function am(i,e){return e().catch(t=>nd(i,t,e))}function gc(i){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,he.Z)(function*(i){const e=q(i),t=Ul(e);let o=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;um(e);)try{const u=yield zg(e.localStore,o);if(null===u){0===e.du.length&&t.$o();break}o=u.batchId,lm(e,u)}catch(u){yield nd(e,u)}mp(e)&&el(e)}),Wh.apply(this,arguments)}function um(i){return Pu(i)&&i.du.length<10}function lm(i,e){i.du.push(e);const t=Ul(i);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function mp(i){return Pu(i)&&!Ul(i).ko()&&i.du.length>0}function el(i){Ul(i).start()}function Zh(i){return yp.apply(this,arguments)}function yp(){return yp=(0,he.Z)(function*(i){Ul(i).nu()}),yp.apply(this,arguments)}function s_(i){return cm.apply(this,arguments)}function cm(){return cm=(0,he.Z)(function*(i){const e=Ul(i);for(const t of i.du)e.Zo(t.mutations)}),cm.apply(this,arguments)}function _p(i,e,t){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,he.Z)(function*(i,e,t){const o=i.du.shift(),u=$c.from(o,e,t);yield am(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield gc(i)}),Kh.apply(this,arguments)}function vp(i,e){return mc.apply(this,arguments)}function mc(){return mc=(0,he.Z)(function*(i,e){var t;e&&Ul(i).Xo&&(yield(t=(0,he.Z)(function*(o,u){if(za(f=u.code)&&f!==W.ABORTED){const v=o.du.shift();Ul(o).Fo(),yield am(o,()=>o.remoteSyncer.rejectFailedWrite(v.batchId,u)),yield gc(o)}var f}),function(o,u){return t.apply(this,arguments)})(i,e)),mp(i)&&el(i)}),mc.apply(this,arguments)}function dm(i,e){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,he.Z)(function*(i,e){const t=q(i);t.asyncQueue.verifyOperationInProgress(),Ct("RemoteStore","RemoteStore received new credentials");const o=Pu(t);t.wu.add(3),yield kd(t),o&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Od(t)}),Vd.apply(this,arguments)}function Yh(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,he.Z)(function*(i,e){const t=q(i);e?(t.wu.delete(2),yield Od(t)):e||(t.wu.add(2),yield kd(t),t.yu.set("Unknown"))}),Qh.apply(this,arguments)}function yc(i){return i.Iu||(i.Iu=function(e,t,o){const u=q(e);return u.iu(),new rm(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:i_.bind(null,i),eo:gp.bind(null,i),zo:Wv.bind(null,i)}),i.mu.push(function(){var e=(0,he.Z)(function*(t){t?(i.Iu.Fo(),pp(i)?fp(i):i.yu.set("Unknown")):(yield i.Iu.stop(),qh(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Ul(i){return i.Tu||(i.Tu=function(e,t,o){const u=q(e);return u.iu(),new im(t,u.So,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{Xr:Zh.bind(null,i),eo:vp.bind(null,i),eu:s_.bind(null,i),tu:_p.bind(null,i)}),i.mu.push(function(){var e=(0,he.Z)(function*(t){t?(i.Tu.Fo(),yield gc(i)):(yield i.Tu.stop(),i.du.length>0&&(Ct("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class Ud{constructor(e,t,o,u,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=u,this.removalCallback=f,this.deferred=new et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,o,u,f){const v=Date.now()+o,S=new Ud(e,t,v,u,f);return S.start(o),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new re(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(i,e){if(ri("AsyncQueue",`${e}: ${i}`),Ku(i))return new re(W.UNAVAILABLE,`${e}: ${i}`);throw i}class id{constructor(e){this.comparator=e?(t,o)=>e(t,o)||$t.comparator(t.key,o.key):(t,o)=>$t.comparator(t.key,o.key),this.keyedMap=Ed(),this.sortedSet=new lr(this.comparator)}static emptySet(e){return new id(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof id)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,f=o.getNext().key;if(!u.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new id;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Ep{constructor(){this.Eu=new lr($t.comparator)}track(e){const t=e.doc.key,o=this.Eu.get(t);o?0!==e.type&&3===o.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==o.type?this.Eu=this.Eu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Eu=this.Eu.remove(t):1===e.type&&2===o.type?this.Eu=this.Eu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):E():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Ou{constructor(e,t,o,u,f,v,S,H){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=S,this.excludesMetadataChanges=H}static fromInitialDocuments(e,t,o,u){const f=[];return t.forEach(v=>{f.push({type:0,doc:v})}),new Ou(e,t,id.emptySet(t),f,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==o[u].type||!t[u].doc.isEqual(o[u].doc))return!1;return!0}}class hm{constructor(){this.Ru=void 0,this.listeners=[]}}class o_{constructor(){this.queries=new Bo(e=>I(e),c),this.onlineState="Unknown",this.bu=new Set}}function wp(i,e){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,he.Z)(function*(i,e){const t=q(i),o=e.query;let u=!1,f=t.queries.get(o);if(f||(u=!0,f=new hm),u)try{f.Ru=yield t.onListen(o)}catch(v){const S=rd(v,`Initialization of query '${F(e.query)}' failed`);return void e.onError(S)}t.queries.set(o,f),f.listeners.push(e),e.Pu(t.onlineState),f.Ru&&e.Vu(f.Ru)&&mu(t)}),Bl.apply(this,arguments)}function bp(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,he.Z)(function*(i,e){const t=q(i),o=e.query;let u=!1;const f=t.queries.get(o);if(f){const v=f.listeners.indexOf(e);v>=0&&(f.listeners.splice(v,1),u=0===f.listeners.length)}if(u)return t.queries.delete(o),t.onUnlisten(o)}),Ip.apply(this,arguments)}function a_(i,e){const t=q(i);let o=!1;for(const u of e){const v=t.queries.get(u.query);if(v){for(const S of v.listeners)S.Vu(u)&&(o=!0);v.Ru=u}}o&&mu(t)}function u_(i,e,t){const o=q(i),u=o.queries.get(e);if(u)for(const f of u.listeners)f.onError(t);o.queries.delete(e)}function mu(i){i.bu.forEach(e=>{e.next()})}class Bd{constructor(e,t,o){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=o||{}}Vu(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Ou(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ou.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class fm{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Dp{constructor(e){this.M=e}wi(e){return hu(this.M,e)}mi(e){return e.metadata.exists?kc(this.M,e.document,!1):oe.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Cs(e)}}class pm{constructor(e,t,o){this.Ou=e,this.localStore=t,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const o=hr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new Dp(this.M);for(const u of e)if(u.metadata.queries){const f=o.wi(u.metadata.name);for(const v of u.metadata.queries){const S=(t.get(v)||di()).add(f);t.set(v,S)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function ed(i,e,t,o){return np.apply(this,arguments)}(e.localStore,new Dp(e.M),e.documents,e.Ou.id),o=e.$u(e.documents);for(const u of e.queries)yield Wg(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Tp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class gm{constructor(e){this.key=e}}class mm{constructor(e){this.key=e}}class ym{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=di(),this.mutatedKeys=di(),this.Gu=ge(e),this.Qu=new id(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new Ep,u=t?t.Qu:this.Qu;let f=t?t.mutatedKeys:this.mutatedKeys,v=u,S=!1;const H="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,K="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((de,xe)=>{const nt=u.get(de),bt=Y(this.query,xe)?xe:null,Tt=!!nt&&this.mutatedKeys.has(nt.key),ln=!!bt&&(bt.hasLocalMutations||this.mutatedKeys.has(bt.key)&&bt.hasCommittedMutations);let Kn=!1;nt&&bt?nt.data.isEqual(bt.data)?Tt!==ln&&(o.track({type:3,doc:bt}),Kn=!0):this.Hu(nt,bt)||(o.track({type:2,doc:bt}),Kn=!0,(H&&this.Gu(bt,H)>0||K&&this.Gu(bt,K)<0)&&(S=!0)):!nt&&bt?(o.track({type:0,doc:bt}),Kn=!0):nt&&!bt&&(o.track({type:1,doc:nt}),Kn=!0,(H||K)&&(S=!0)),Kn&&(bt?(v=v.add(bt),f=ln?f.add(de):f.delete(de)):(v=v.delete(de),f=f.delete(de)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const de="F"===this.query.limitType?v.last():v.first();v=v.delete(de.key),f=f.delete(de.key),o.track({type:1,doc:de})}return{Qu:v,zu:o,ii:S,mutatedKeys:f}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const u=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const f=e.zu.Au();f.sort((K,de)=>function(xe,nt){const bt=Tt=>{switch(Tt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return E()}};return bt(xe)-bt(nt)}(K.type,de.type)||this.Gu(K.doc,de.doc)),this.Ju(o);const v=t?this.Yu():[],S=0===this.Ku.size&&this.current?1:0,H=S!==this.qu;return this.qu=S,0!==f.length||H?{snapshot:new Ou(this.query,e.Qu,u,f,e.mutatedKeys,0===S,H,!1),Xu:v}:{Xu:v}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ep,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=di(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new mm(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new gm(o))}),t}ta(e){this.Uu=e._i,this.Ku=di();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ou.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class l_{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class _m{constructor(e){this.key=e,this.na=!1}}class Zv{constructor(e,t,o,u,f,v){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=u,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.sa={},this.ia=new Bo(S=>I(S),c),this.ra=new Map,this.oa=new Set,this.ua=new lr($t.comparator),this.aa=new Map,this.ca=new Lh,this.ha={},this.la=new Map,this.fa=gl.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function vm(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,he.Z)(function*(i,e){const t=ql(i);let o,u;const f=t.ia.get(e);if(f)o=f.targetId,t.sharedClientState.addLocalQueryTarget(o),u=f.view.ea();else{const v=yield Qc(t.localStore,b(e));t.isPrimaryClient&&Hh(t.remoteStore,v);const S=t.sharedClientState.addLocalQueryTarget(v.targetId);o=v.targetId,u=yield Ap(t,e,o,"current"===S)}return u}),Cp.apply(this,arguments)}function Ap(i,e,t,o){return Em.apply(this,arguments)}function Em(){return Em=(0,he.Z)(function*(i,e,t,o){i._a=(de,xe,nt)=>{return(bt=(0,he.Z)(function*(Tt,ln,Kn,as){let Fs=ln.view.Wu(Kn);Fs.ii&&(Fs=yield ml(Tt.localStore,ln.query,!1).then(({documents:us})=>ln.view.Wu(us,Fs)));const li=as&&as.targetChanges.get(ln.targetId),uo=ln.view.applyChanges(Fs,Tt.isPrimaryClient,li);return Rp(Tt,ln.targetId,uo.Xu),uo.snapshot}),function(Tt,ln,Kn,as){return bt.apply(this,arguments)})(i,de,xe,nt);var bt};const u=yield ml(i.localStore,e,!0),f=new ym(e,u._i),v=f.Wu(u.documents),S=cl.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState),H=f.applyChanges(v,i.isPrimaryClient,S);Rp(i,t,H.Xu);const K=new l_(e,t,f);return i.ia.set(e,K),i.ra.has(t)?i.ra.get(t).push(e):i.ra.set(t,[e]),H.snapshot}),Em.apply(this,arguments)}function Kv(i,e){return jd.apply(this,arguments)}function jd(){return jd=(0,he.Z)(function*(i,e){const t=q(i),o=t.ia.get(e),u=t.ra.get(o.targetId);if(u.length>1)return t.ra.set(o.targetId,u.filter(f=>!c(f,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Jc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Fd(t.remoteStore,o.targetId),jl(t,o.targetId)}).catch(hc))):(jl(t,o.targetId),yield Jc(t.localStore,o.targetId,!0))}),jd.apply(this,arguments)}function Jh(){return Jh=(0,he.Z)(function*(i,e,t){const o=zl(i);try{const u=yield function(f,v){const S=q(f),H=Ni.now(),K=v.reduce((xe,nt)=>xe.add(nt.key),di());let de;return S.persistence.runTransaction("Locally write mutations","readwrite",xe=>S.fi.Ks(xe,K).next(nt=>{de=nt;const bt=[];for(const Tt of v){const ln=bn(Tt,de.get(Tt.key));null!=ln&&bt.push(new _i(Tt.key,ln,J(ln.value.mapValue),vs.exists(!0)))}return S.Bs.addMutationBatch(xe,H,bt,v)})).then(xe=>(xe.applyToLocalDocumentSet(de),{batchId:xe.batchId,changes:de}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(f,v,S){let H=f.ha[f.currentUser.toKey()];H||(H=new lr(Gn)),H=H.insert(v,S),f.ha[f.currentUser.toKey()]=H}(o,u.batchId,t),yield yl(o,u.changes),yield gc(o.remoteStore)}catch(u){const f=rd(u,"Failed to persist write");t.reject(f)}}),Jh.apply(this,arguments)}function Sp(i,e){return wm.apply(this,arguments)}function wm(){return wm=(0,he.Z)(function*(i,e){const t=q(i);try{const o=yield tp(t.localStore,e);e.targetChanges.forEach((u,f)=>{const v=t.aa.get(f);v&&(x(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?v.na=!0:u.modifiedDocuments.size>0?x(v.na):u.removedDocuments.size>0&&(x(v.na),v.na=!1))}),yield yl(t,o,e)}catch(o){yield hc(o)}}),wm.apply(this,arguments)}function yu(i,e,t){const o=q(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const u=[];o.ia.forEach((f,v)=>{const S=v.view.Pu(e);S.snapshot&&u.push(S.snapshot)}),function(f,v){const S=q(f);S.onlineState=v;let H=!1;S.queries.forEach((K,de)=>{for(const xe of de.listeners)xe.Pu(v)&&(H=!0)}),H&&mu(S)}(o.eventManager,e),u.length&&o.sa.zo(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Yv(i,e,t){return bm.apply(this,arguments)}function bm(){return bm=(0,he.Z)(function*(i,e,t){const o=q(i);o.sharedClientState.updateQueryState(e,"rejected",t);const u=o.aa.get(e),f=u&&u.key;if(f){let v=new lr($t.comparator);v=v.insert(f,oe.newNoDocument(f,xn.min()));const S=di().add(f),H=new ll(xn.min(),new Map,new er(Gn),v,S);yield Sp(o,H),o.ua=o.ua.remove(f),o.aa.delete(e),Np(o)}else yield Jc(o.localStore,e,!1).then(()=>jl(o,e,t)).catch(hc)}),bm.apply(this,arguments)}function Im(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,he.Z)(function*(i,e){const t=q(i),o=e.batch.batchId;try{const u=yield Hg(t.localStore,e);xp(t,o,null),$d(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield yl(t,u)}catch(u){yield hc(u)}}),Xh.apply(this,arguments)}function Dm(i,e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,he.Z)(function*(i,e,t){const o=q(i);try{const u=yield function(f,v){const S=q(f);return S.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let K;return S.Bs.lookupMutationBatch(H,v).next(de=>(x(null!==de),K=de.keys(),S.Bs.removeMutationBatch(H,de))).next(()=>S.Bs.performConsistencyCheck(H)).next(()=>S.fi.Ks(H,K))})}(o.localStore,e);xp(o,e,t),$d(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield yl(o,u)}catch(u){yield hc(u)}}),Mp.apply(this,arguments)}function ef(){return ef=(0,he.Z)(function*(i,e){const t=q(i);Pu(t.remoteStore)||Ct("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(f){const v=q(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>v.Bs.getHighestUnacknowledgedBatchId(S))}(t.localStore);if(-1===o)return void e.resolve();const u=t.la.get(o)||[];u.push(e),t.la.set(o,u)}catch(o){const u=rd(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),ef.apply(this,arguments)}function $d(i,e){(i.la.get(e)||[]).forEach(t=>{t.resolve()}),i.la.delete(e)}function xp(i,e,t){const o=q(i);let u=o.ha[o.currentUser.toKey()];if(u){const f=u.get(e);f&&(t?f.reject(t):f.resolve(),u=u.remove(e)),o.ha[o.currentUser.toKey()]=u}}function jl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ra.get(e))i.ia.delete(o),t&&i.sa.wa(o,t);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(o=>{i.ca.containsKey(o)||Tm(i,o)})}function Tm(i,e){i.oa.delete(e.path.canonicalString());const t=i.ua.get(e);null!==t&&(Fd(i.remoteStore,t),i.ua=i.ua.remove(e),i.aa.delete(t),Np(i))}function Rp(i,e,t){for(const o of t)o instanceof gm?(i.ca.addReference(o.key,e),d_(i,o)):o instanceof mm?(Ct("SyncEngine","Document no longer in limbo: "+o.key),i.ca.removeReference(o.key,e),i.ca.containsKey(o.key)||Tm(i,o.key)):E()}function d_(i,e){const t=e.key,o=t.path.canonicalString();i.ua.get(t)||i.oa.has(o)||(Ct("SyncEngine","New document in limbo: "+t),i.oa.add(o),Np(i))}function Np(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const t=new $t(hr.fromString(e)),o=i.fa.next();i.aa.set(o,new _m(t)),i.ua=i.ua.insert(t,o),Hh(i.remoteStore,new Yu(b(qa(t.path)),o,2,Hr.A))}}function yl(i,e,t){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,he.Z)(function*(i,e,t){const o=q(i),u=[],f=[],v=[];var S;o.ia.isEmpty()||(o.ia.forEach((S,H)=>{v.push(o._a(H,e,t).then(K=>{if(K){o.isPrimaryClient&&o.sharedClientState.updateQueryState(H.targetId,K.fromCache?"not-current":"current"),u.push(K);const de=Nh.Ys(H.targetId,K);f.push(de)}}))}),yield Promise.all(v),o.sa.zo(u),yield(S=(0,he.Z)(function*(H,K){const de=q(H);try{yield de.persistence.runTransaction("notifyLocalViewChanges","readwrite",xe=>dt.forEach(K,nt=>dt.forEach(nt.Hs,bt=>de.persistence.referenceDelegate.addReference(xe,nt.targetId,bt)).next(()=>dt.forEach(nt.Js,bt=>de.persistence.referenceDelegate.removeReference(xe,nt.targetId,bt)))))}catch(xe){if(!Ku(xe))throw xe;Ct("LocalStore","Failed to update sequence numbers: "+xe)}for(const xe of K){const nt=xe.targetId;if(!xe.fromCache){const bt=de.ui.get(nt),ln=bt.withLastLimboFreeSnapshotVersion(bt.snapshotVersion);de.ui=de.ui.insert(nt,ln)}}}),function(H,K){return S.apply(this,arguments)})(o.localStore,f))}),Pp.apply(this,arguments)}function tf(i,e){return $l.apply(this,arguments)}function $l(){return $l=(0,he.Z)(function*(i,e){const t=q(i);if(!t.currentUser.isEqual(e)){Ct("SyncEngine","User change. New user:",e.toKey());const o=yield $g(t.localStore,e);t.currentUser=e,(u=t).la.forEach(v=>{v.forEach(S=>{S.reject(new re(W.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.la.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield yl(t,o.di)}var u}),$l.apply(this,arguments)}function h_(i,e){const t=q(i),o=t.aa.get(e);if(o&&o.na)return di().add(o.key);{let u=di();const f=t.ra.get(e);if(!f)return u;for(const v of f){const S=t.ia.get(v);u=u.unionWith(S.view.ju)}return u}}function Hd(i,e){return Op.apply(this,arguments)}function Op(){return Op=(0,he.Z)(function*(i,e){const t=q(i),o=yield ml(t.localStore,e.query,!0),u=e.view.ta(o);return t.isPrimaryClient&&Rp(t,e.targetId,u.Xu),u}),Op.apply(this,arguments)}function f_(i,e){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,he.Z)(function*(i,e){const t=q(i);return pc(t.localStore,e).then(o=>yl(t,o))}),Gd.apply(this,arguments)}function tl(i,e,t,o){return _c.apply(this,arguments)}function _c(){return _c=(0,he.Z)(function*(i,e,t,o){const u=q(i),f=yield function(v,S){const H=q(v),K=q(H.Bs);return H.persistence.runTransaction("Lookup mutation documents","readonly",de=>K.fn(de,S).next(xe=>xe?H.fi.Ks(de,xe):dt.resolve(null)))}(u.localStore,e);var S;null!==f?("pending"===t?yield gc(u.remoteStore):"acknowledged"===t||"rejected"===t?(xp(u,e,o||null),$d(u,e),S=e,q(q(u.localStore).Bs)._n(S)):E(),yield yl(u,f)):Ct("SyncEngine","Cannot apply mutation batch with id: "+e)}),_c.apply(this,arguments)}function _l(){return _l=(0,he.Z)(function*(i,e){const t=q(i);if(ql(t),zl(t),!0===e&&!0!==t.da){const o=t.sharedClientState.getAllActiveQueryTargets(),u=yield qd(t,o.toArray());t.da=!0,yield Yh(t.remoteStore,!0);for(const f of u)Hh(t.remoteStore,f)}else if(!1===e&&!1!==t.da){const o=[];let u=Promise.resolve();t.ra.forEach((f,v)=>{t.sharedClientState.isLocalQueryTarget(v)?o.push(v):u=u.then(()=>(jl(t,v),Jc(t.localStore,v,!0))),Fd(t.remoteStore,v)}),yield u,yield qd(t,o),function(f){const v=q(f);v.aa.forEach((S,H)=>{Fd(v.remoteStore,H)}),v.ca.Si(),v.aa=new Map,v.ua=new lr($t.comparator)}(t),t.da=!1,yield Yh(t.remoteStore,!1)}}),_l.apply(this,arguments)}function qd(i,e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,he.Z)(function*(i,e,t){const o=q(i),u=[],f=[];for(const v of e){let S;const H=o.ra.get(v);if(H&&0!==H.length){S=yield Qc(o.localStore,b(H[0]));for(const K of H){const de=o.ia.get(K),xe=yield Hd(o,de);xe.snapshot&&f.push(xe.snapshot)}}else{const K=yield kh(o.localStore,v);S=yield Qc(o.localStore,K),yield Ap(o,nf(K),v,!1)}u.push(S)}return o.sa.zo(f),u}),Ra.apply(this,arguments)}function nf(i){return cu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function sd(i){const e=q(i);return q(q(e.localStore).persistence).Fs()}function od(i,e,t,o){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,he.Z)(function*(i,e,t,o){const u=q(i);if(u.da)return void Ct("SyncEngine","Ignoring unexpected query state notification.");const f=u.ra.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const v=yield pc(u.localStore,ae(f[0])),S=ll.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield yl(u,v,S);break}case"rejected":yield Jc(u.localStore,e,!0),jl(u,e,o);break;default:E()}}),Hl.apply(this,arguments)}function ad(i,e,t){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,he.Z)(function*(i,e,t){const o=ql(i);if(o.da){for(const u of e){if(o.ra.has(u)){Ct("SyncEngine","Adding an already active target "+u);continue}const f=yield kh(o.localStore,u),v=yield Qc(o.localStore,f);yield Ap(o,nf(f),v.targetId,!1),Hh(o.remoteStore,v)}for(const u of t)o.ra.has(u)&&(yield Jc(o.localStore,u,!1).then(()=>{Fd(o.remoteStore,u),jl(o,u)}).catch(hc))}}),Gl.apply(this,arguments)}function ql(i){const e=q(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yv.bind(null,e),e.sa.zo=a_.bind(null,e.eventManager),e.sa.wa=u_.bind(null,e.eventManager),e}function zl(i){const e=q(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Im.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dm.bind(null,e),e}class vc{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.M=td(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Oh(this.persistence,new Ph,e.initialUser,this.M)}ya(e){return new Yg(Vh.Yi,this.M)}ga(e){return new tm}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class kp extends vc{constructor(e,t,o){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e),yield o.Ta.initialize(o,e),yield zl(o.Ta.syncEngine),yield gc(o.Ta.remoteStore),yield o.persistence.Ts(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ia(e){return Oh(this.persistence,new Ph,e.initialUser,this.M)}pa(e){return new Hv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Nd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?na.withCacheSize(this.cacheSizeBytes):na.DEFAULT;return new Bg(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,up(),jh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new tm}}class Cm extends kp{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,he.Z)(function*(){yield t().call(o,e);const u=o.Ta.syncEngine;o.sharedClientState instanceof em&&(o.sharedClientState.syncEngine={$r:tl.bind(null,u),Br:od.bind(null,u),Lr:ad.bind(null,u),Fs:sd.bind(null,u),Fr:f_.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Ts(function(){var f=(0,he.Z)(function*(v){yield function ra(i,e){return _l.apply(this,arguments)}(o.Ta.syncEngine,v),o.gcScheduler&&(v&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):v||o.gcScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}ga(e){const t=up();if(!em.vt(t))throw new re(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Nd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new em(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class rf{initialize(e,t){var o=this;return(0,he.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>yu(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=tf.bind(null,o.syncEngine),yield Yh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new o_}createDatastore(e){const t=td(e.databaseInfo.databaseId),o=new n_(e.databaseInfo);return new r_(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,u=e.asyncQueue,f=S=>yu(this.syncEngine,S,0),v=ap.vt()?new ap:new op,new cp(t,o,u,f,v);var t,o,u,f,v}createSyncEngine(e,t){return function(o,u,f,v,S,H,K){const de=new Zv(o,u,f,v,S,H);return K&&(de.da=!0),de}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const o=q(t);Ct("RemoteStore","RemoteStore shutting down."),o.wu.add(5),yield kd(o),o.gu.shutdown(),o.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Fp(i,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Am{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new et,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(o=>{o&&o.Mu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,he.Z)(function*(){const t=yield e.Va();if(null===t)return null;const o=e.ba.decode(t),u=Number(o);isNaN(u)&&e.va(`length string (${o}) is not valid number`);const f=yield e.Sa(u);return new fm(JSON.parse(f),t.length+u)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,he.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Sa(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const o=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,he.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Sm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new re(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,he.Z)(function*(f,v){const S=q(f),H=Nl(S.M)+"/documents",K={documents:v.map(bt=>Wu(S.M,bt))},de=yield S._o("BatchGetDocuments",H,K),xe=new Map;de.forEach(bt=>{const Tt=function Vf(i,e){return"found"in e?function(t,o){x(!!o.found);const u=hu(t,o.found.name),f=Cs(o.found.updateTime),v=new L({mapValue:{fields:o.found.fields}});return oe.newFoundDocument(u,f,v)}(i,e):"missing"in e?function(t,o){x(!!o.missing),x(!!o.readTime);const u=hu(t,o.missing),f=Cs(o.readTime);return oe.newNoDocument(u,f)}(i,e):E()}(S.M,bt);xe.set(Tt.key.toString(),Tt)});const nt=[];return v.forEach(bt=>{const Tt=xe.get(bt.toString());x(!!Tt),nt.push(Tt)}),nt}),function(f,v){return u.apply(this,arguments)})(t.datastore,e);var u;return o.forEach(u=>t.recordVersion(u)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Br(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,u)=>{const f=$t.fromPath(u);e.mutations.push(new Rl(f,e.precondition(f)))}),yield(o=(0,he.Z)(function*(u,f){const v=q(u),S=Nl(v.M)+"/documents",H={writes:f.map(K=>Ru(v.M,K))};yield v.co("Commit",S,H)}),function(u,f){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw E();t=xn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new re(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?vs.updateTime(t):vs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xn.min()))throw new re(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return vs.updateTime(t)}return vs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Mm{constructor(e,t,o,u,f){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=u,this.deferred=f,this.xa=o.maxAttempts,this.No=new lp(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,he.Z)(function*(){const t=new Sm(e.datastore),o=e.ka(t);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(f=>{e.Ma(f)}))}).catch(u=>{e.Ma(u)})}))}ka(e){try{const t=this.updateFunction(e);return!js(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!za(t)}return!1}}class xm{constructor(e,t,o,u){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=u,this.user=Ti.UNAUTHENTICATED,this.clientId=ma.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var v=(0,he.Z)(function*(S){Ct("FirestoreClient","Received user=",S.uid),yield f.authCredentialListener(S),f.user=S});return function(S){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(o,v=>(Ct("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new re(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const u=rd(o,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function Rm(i,e){return sf.apply(this,arguments)}function sf(){return sf=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ct("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,he.Z)(function*(f){o.isEqual(f)||(yield $g(e.localStore,f),o=f)});return function(f){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),sf.apply(this,arguments)}function Nm(i,e){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,he.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield af(i);Ct("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(u=>dm(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,f)=>dm(e.remoteStore,f)),i.onlineComponents=e}),Lp.apply(this,arguments)}function af(i){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,he.Z)(function*(i){return i.offlineComponents||(Ct("FirestoreClient","Using default OfflineComponentProvider"),yield Rm(i,new vc)),i.offlineComponents}),Vp.apply(this,arguments)}function uf(i){return lf.apply(this,arguments)}function lf(){return lf=(0,he.Z)(function*(i){return i.onlineComponents||(Ct("FirestoreClient","Using default OnlineComponentProvider"),yield Nm(i,new rf)),i.onlineComponents}),lf.apply(this,arguments)}function Pm(i){return af(i).then(e=>e.persistence)}function cf(i){return af(i).then(e=>e.localStore)}function Om(i){return uf(i).then(e=>e.remoteStore)}function Up(i){return uf(i).then(e=>e.syncEngine)}function Wd(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,he.Z)(function*(i){const e=yield uf(i),t=e.eventManager;return t.onListen=vm.bind(null,e.syncEngine),t.onUnlisten=Kv.bind(null,e.syncEngine),t}),Bp.apply(this,arguments)}function g_(i,e,t={}){const o=new et;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,f,v,S,H){const K=new zd({next:xe=>{f.enqueueAndForget(()=>bp(u,de));const nt=xe.docs.has(v);!nt&&xe.fromCache?H.reject(new re(W.UNAVAILABLE,"Failed to get document because the client is offline.")):nt&&xe.fromCache&&S&&"server"===S.source?H.reject(new re(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(xe)},error:xe=>H.reject(xe)}),de=new Bd(qa(v.path),K,{includeMetadataChanges:!0,ku:!0});return wp(u,de)}(yield Wd(i),i.asyncQueue,e,t,o)})),o.promise}function m_(i,e,t={}){const o=new et;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(u,f,v,S,H){const K=new zd({next:xe=>{f.enqueueAndForget(()=>bp(u,de)),xe.fromCache&&"server"===S.source?H.reject(new re(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(xe)},error:xe=>H.reject(xe)}),de=new Bd(v,K,{includeMetadataChanges:!0,ku:!0});return wp(u,de)}(yield Wd(i),i.asyncQueue,e,t,o)})),o.promise}const Ec=new Map;function Hp(i,e,t){if(!t)throw new re(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Gp(i,e,t,o){if(!0===e&&!0===o)throw new re(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Fm(i){if(!$t.isDocumentKey(i))throw new re(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qp(i){if($t.isDocumentKey(i))throw new re(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function wc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":E()}function Gr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new re(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wc(i);throw new re(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function zp(i,e){if(e<=0)throw new re(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Lm{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new re(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new re(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Gp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,t,o){this._authCredentials=t,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lm({}),this._settingsFrozen=!1,e instanceof po?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new re(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new po(u.options.projectId)}(e))}get app(){if(!this._app)throw new re(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lm(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qn;switch(t.type){case"gapi":const o=t.client;return x(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Ri(o,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new re(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ec.get(e);t&&(Ct("ComponentProvider","Removing Datastore"),Ec.delete(e),t.terminate())}(this),Promise.resolve()}}class ss{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ss(this.firestore,e,this._key)}}class ia{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class ku extends ia{constructor(e,t,o){super(e,t,qa(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ss(this.firestore,null,new $t(e))}withConverter(e){return new ku(this.firestore,e,this._path)}}function Vm(i,e,...t){if(i=(0,st.m9)(i),Hp("collection","path",e),i instanceof Zd){const o=hr.fromString(e,...t);return qp(o),new ku(i,null,o)}{if(!(i instanceof ss||i instanceof ku))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(hr.fromString(e,...t));return qp(o),new ku(i.firestore,null,o)}}function Kd(i,e,...t){if(i=(0,st.m9)(i),1===arguments.length&&(e=ma.R()),Hp("doc","path",e),i instanceof Zd){const o=hr.fromString(e,...t);return Fm(o),new ss(i,null,new $t(o))}{if(!(i instanceof ss||i instanceof ku))throw new re(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(hr.fromString(e,...t));return Fm(o),new ss(i.firestore,i instanceof ku?i.converter:null,new $t(o))}}function df(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),(i instanceof ss||i instanceof ku)&&(e instanceof ss||e instanceof ku)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function E_(i,e){return i=(0,st.m9)(i),e=(0,st.m9)(e),i instanceof ia&&e instanceof ia&&i.firestore===e.firestore&&c(i._query,e._query)&&i.converter===e.converter}class Wp{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new lp(this,"async_queue_retry"),this.Qa=()=>{const t=jh();t&&Ct("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=jh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=jh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new et;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,he.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Ku(t))throw t;Ct("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(o=>{throw this.Ua=o,this.qa=!1,ri("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(o)),o}).then(o=>(this.qa=!1,o))));return this.Fa=t,t}enqueueAfterDelay(e,t,o){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const u=Ud.createAndSchedule(this,e,t,o,f=>this.Ha(f));return this.La.push(u),u}ja(){this.Ua&&E()}verifyOperationInProgress(){}Ja(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function Zp(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class e0{constructor(){this._progressObserver={},this._taskCompletionResolver=new et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class os extends Zd{constructor(e,t,o){super(e,t,o),this.type="firestore",this._queue=new Wp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qd(this),this._firestoreClient.terminate()}}function oo(i){return i._firestoreClient||Qd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Qd(i){var e;const t=i._freezeSettings(),o=(f=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ju(i._databaseId,f,i._persistenceKey,(S=t).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,S.useFetchStreams));var f,S;i._firestoreClient=new xm(i._authCredentials,i._appCheckCredentials,i._queue,o)}function w_(i,e,t){const o=new et;return i.asyncQueue.enqueue((0,he.Z)(function*(){try{yield Rm(i,t),yield Nm(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(f=u).name?f.code===W.FAILED_PRECONDITION||f.code===W.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&f instanceof DOMException)||22===f.code||20===f.code||11===f.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var f})).then(()=>o.promise)}function Xp(i){if(i._initialized||i._terminated)throw new re(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new re(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(Zi.fromBase64String(e))}catch(t){throw new re(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nl(Zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wl{constructor(e){this._methodName=e}}class Jd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gn(this._lat,e._lat)||Gn(this._long,e._long)}}const eg=/^__.*__$/;class Gm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new _i(e,this.data,this.fieldMask,t,this.fieldTransforms):new mr(e,this.data,t,this.fieldTransforms)}}class qm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new _i(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw E()}}class ff{constructor(e,t,o,u,f,v){this.settings=e,this.databaseId=t,this.M=o,this.ignoreUndefinedProperties=u,void 0===f&&this.tc(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new ff(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.rc(e),u}oc(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.nc({path:o,ic:!1});return u.tc(),u}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return eh(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(zm(this.ec)&&eg.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class tg{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=o||td(e)}lc(e,t,o,u=!1){return new ff({ec:e,methodName:t,hc:o,path:ys.emptyPath(),ic:!1,cc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function vl(i){const e=i._freezeSettings(),t=td(i._databaseId);return new tg(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Xd(i,e,t,o,u,f={}){const v=i.lc(f.merge||f.mergeFields?2:0,e,t,u);Gs("Data must be an object, but it was:",v,o);const S=rg(o,v);let H,K;if(f.merge)H=new bu(v.fieldMask),K=v.fieldTransforms;else if(f.mergeFields){const de=[];for(const xe of f.mergeFields){const nt=mf(e,xe,t);if(!v.contains(nt))throw new re(W.INVALID_ARGUMENT,`Field '${nt}' is specified in your field mask but missing from your input data.`);Xm(de,nt)||de.push(nt)}H=new bu(de),K=v.fieldTransforms.filter(xe=>H.covers(xe.field))}else H=null,K=v.fieldTransforms;return new Gm(new L(S),H,K)}class ld extends Wl{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function ng(i,e,t){return new ff({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class pf extends Wl{_toFieldTransform(e){return new Ro(e.path,new Vr)}isEqual(e){return e instanceof pf}}class Wm extends Wl{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ng(this,e,!0),o=this.fc.map(f=>bc(f,t)),u=new Bi(o);return new Ro(e.path,u)}isEqual(e){return this===e}}class Zm extends Wl{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=ng(this,e,!0),o=this.fc.map(f=>bc(f,t)),u=new Oi(o);return new Ro(e.path,u)}isEqual(e){return this===e}}class Km extends Wl{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Yi(e.M,gn(e.M,this.dc));return new Ro(e.path,t)}isEqual(e){return this===e}}function gf(i,e,t,o){const u=i.lc(1,e,t);Gs("Data must be an object, but it was:",u,o);const f=[],v=L.empty();So(o,(H,K)=>{const de=yf(e,H,t);K=(0,st.m9)(K);const xe=u.oc(de);if(K instanceof ld)f.push(de);else{const nt=bc(K,xe);null!=nt&&(f.push(de),v.set(de,nt))}});const S=new bu(f);return new qm(v,S,u.fieldTransforms)}function Ym(i,e,t,o,u,f){const v=i.lc(1,e,t),S=[mf(e,o,t)],H=[u];if(f.length%2!=0)throw new re(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let nt=0;nt<f.length;nt+=2)S.push(mf(e,f[nt])),H.push(f[nt+1]);const K=[],de=L.empty();for(let nt=S.length-1;nt>=0;--nt)if(!Xm(K,S[nt])){const bt=S[nt];let Tt=H[nt];Tt=(0,st.m9)(Tt);const ln=v.oc(bt);if(Tt instanceof ld)K.push(bt);else{const Kn=bc(Tt,ln);null!=Kn&&(K.push(bt),de.set(bt,Kn))}}const xe=new bu(K);return new qm(de,xe,v.fieldTransforms)}function Qm(i,e,t,o=!1){return bc(t,i.lc(o?4:3,e))}function bc(i,e){if(Jm(i=(0,st.m9)(i)))return Gs("Unsupported field value:",e,i),rg(i,e);if(i instanceof Wl)return function(t,o){if(!zm(o.ec))throw o.ac(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ac(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,o){const u=[];let f=0;for(const v of t){let S=bc(v,o.uc(f));null==S&&(S={nullValue:"NULL_VALUE"}),u.push(S),f++}return{arrayValue:{values:u}}}(i,e)}return function(t,o){if(null===(t=(0,st.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gn(o.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Ni.fromDate(t);return{timestampValue:zu(o.M,u)}}if(t instanceof Ni){const u=new Ni(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zu(o.M,u)}}if(t instanceof Jd)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nl)return{bytesValue:Pc(o.M,t._byteString)};if(t instanceof ss){const u=o.databaseId,f=t.firestore._databaseId;if(!f.isEqual(u))throw o.ac(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Id(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ac(`Unsupported field value: ${wc(t)}`)}(i,e)}function rg(i,e){const t={};return Dl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(i,(o,u)=>{const f=bc(u,e.sc(o));null!=f&&(t[o]=f)}),{mapValue:{fields:t}}}function Jm(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ni||i instanceof Jd||i instanceof nl||i instanceof ss||i instanceof Wl)}function Gs(i,e,t){if(!Jm(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=wc(t);throw e.ac("an object"===o?i+" a custom object":i+" "+o)}var o}function mf(i,e,t){if((e=(0,st.m9)(e))instanceof Fu)return e._internalPath;if("string"==typeof e)return yf(i,e);throw eh("Field path arguments must be of type string or ",i,!1,void 0,t)}const T_=new RegExp("[~\\*/\\[\\]]");function yf(i,e,t){if(e.search(T_)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Fu(...e.split("."))._internalPath}catch(o){throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function eh(i,e,t,o,u){const f=o&&!o.isEmpty(),v=void 0!==u;let S=`Function ${e}() called with invalid data`;t&&(S+=" (via `toFirestore()`)"),S+=". ";let H="";return(f||v)&&(H+=" (found",f&&(H+=` in field ${o}`),v&&(H+=` in document ${u}`),H+=")"),new re(W.INVALID_ARGUMENT,S+i+H)}function Xm(i,e){return i.some(t=>t.isEqual(e))}class cd{constructor(e,t,o,u,f){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=u,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(El("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ey extends cd{data(){return super.data()}}function El(i,e){return"string"==typeof e?yf(i,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}class Ic{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wl extends cd{constructor(e,t,o,u,f,v){super(e,t,o,u,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(El("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class dd extends wl{data(e={}){return super.data(e)}}class Zl{constructor(e,t,o,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Ic(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new dd(this._firestore,this._userDataWriter,o.key,o,new Ic(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(v=>({type:"added",doc:new dd(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Ic(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:f++}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(v=>u||3!==v.type).map(v=>{const S=new dd(o._firestore,o._userDataWriter,v.doc.key,v.doc,new Ic(o._snapshot.mutatedKeys.has(v.doc.key),o._snapshot.fromCache),o.query.converter);let H=-1,K=-1;return 0!==v.type&&(H=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),1!==v.type&&(f=f.add(v.doc),K=f.indexOf(v.doc.key)),{type:ty(v.type),doc:S,oldIndex:H,newIndex:K}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ty(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return E()}}function C_(i,e){return i instanceof wl&&e instanceof wl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Zl&&e instanceof Zl&&i._firestore===e._firestore&&E_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function ig(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new re(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dc{}function Ho(i,...e){for(const t of e)i=t._apply(i);return i}class A_ extends Dc{constructor(e,t,o){super(),this._c=e,this.wc=t,this.mc=o,this.type="where"}_apply(e){const t=vl(e.firestore),o=function(u,f,v,S,H,K,de){let xe;if(H.isKeyField()){if("array-contains"===K||"array-contains-any"===K)throw new re(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${K}' queries on documentId().`);if("in"===K||"not-in"===K){ay(de,K);const bt=[];for(const Tt of de)bt.push(og(S,u,Tt));xe={arrayValue:{values:bt}}}else xe=og(S,u,de)}else"in"!==K&&"not-in"!==K&&"array-contains-any"!==K||ay(de,K),xe=Qm(v,"where",de,"in"===K||"not-in"===K);const nt=rs.create(H,K,xe);return function(bt,Tt){if(Tt.S()){const Kn=nc(bt);if(null!==Kn&&!Kn.isEqual(Tt.field))throw new re(W.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Kn.toString()}' and '${Tt.field.toString()}'`);const as=Sl(bt);null!==as&&ag(0,Tt.field,as)}const ln=function(Kn,as){for(const Fs of Kn.filters)if(as.indexOf(Fs.op)>=0)return Fs.op;return null}(bt,function(Kn){switch(Kn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Tt.op));if(null!==ln)throw new re(W.INVALID_ARGUMENT,ln===Tt.op?`Invalid query. You cannot use more than one '${Tt.op.toString()}' filter.`:`Invalid query. You cannot use '${Tt.op.toString()}' filters with '${ln.toString()}' filters.`)}(u,nt),nt}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ia(e.firestore,e.converter,function(u,f){const v=u.filters.concat([f]);return new lu(u.path,u.collectionGroup,u.explicitOrderBy.slice(),v,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}class rl extends Dc{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(o,u,f){if(null!==o.startAt)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new re(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new uu(u,f);return function(S,H){if(null===Sl(S)){const K=nc(S);null!==K&&ag(0,K,H.field)}}(o,v),v}(e._query,this._c,this.gc);return new ia(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new lu(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class _u extends Dc{constructor(e,t,o){super(),this.type=e,this.yc=t,this.Ic=o}_apply(e){return new ia(e.firestore,e.converter,h(e._query,this.yc,this.Ic))}}class iy extends Dc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=oy(e,this.type,this.Tc,this.Ec);return new ia(e.firestore,e.converter,(u=t,new lu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}class sy extends Dc{constructor(e,t,o){super(),this.type=e,this.Tc=t,this.Ec=o}_apply(e){const t=oy(e,this.type,this.Tc,this.Ec);return new ia(e.firestore,e.converter,(u=t,new lu((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function oy(i,e,t,o){if(t[0]=(0,st.m9)(t[0]),t[0]instanceof cd)return function(u,f,v,S,H){if(!S)throw new re(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const K=[];for(const de of Au(u))if(de.field.isKeyField())K.push(Jo(f,S.key));else{const xe=S.data.field(de.field);if(ru(xe))throw new re(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+de.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===xe){const nt=de.field.canonicalString();throw new re(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${nt}' (used as the orderBy) does not exist.`)}K.push(xe)}return new Ea(K,H)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const u=vl(i.firestore);return function(f,v,S,H,K,de){const xe=f.explicitOrderBy;if(K.length>xe.length)throw new re(W.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const nt=[];for(let bt=0;bt<K.length;bt++){const Tt=K[bt];if(xe[bt].field.isKeyField()){if("string"!=typeof Tt)throw new re(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Tt}`);if(!Ml(f)&&-1!==Tt.indexOf("/"))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Tt}' contains a slash.`);const ln=f.path.child(hr.fromString(Tt));if(!$t.isDocumentKey(ln))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${ln}' is not because it contains an odd number of segments.`);const Kn=new $t(ln);nt.push(Jo(v,Kn))}else{const ln=Qm(S,H,Tt);nt.push(ln)}}return new Ea(nt,de)}(i._query,i.firestore._databaseId,u,e,t,o)}}function og(i,e,t){if("string"==typeof(t=(0,st.m9)(t))){if(""===t)throw new re(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ml(e)&&-1!==t.indexOf("/"))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(hr.fromString(t));if(!$t.isDocumentKey(o))throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Jo(i,new $t(o))}if(t instanceof ss)return Jo(i,t._key);throw new re(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wc(t)}.`)}function ay(i,e){if(!Array.isArray(i)||0===i.length)throw new re(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new re(W.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ag(i,e,t){if(!t.isEqual(e))throw new re(W.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uy={maxAttempts:5};class hd{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw E()}}convertObject(e,t){const o={};return So(e.fields,(u,f)=>{o[u]=this.convertValue(f,t)}),o}convertGeoPoint(e){return new Jd(Qr(e.latitude),Qr(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=ks(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(_s(e));default:return null}}convertTimestamp(e){const t=Mo(e);return new Ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=hr.fromString(e);x(ke(o));const u=new po(o.get(1),o.get(3)),f=new $t(o.popFirst(5));return u.isEqual(t)||ri(`Document ${f} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function _f(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class ly extends hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,t)}}class ug{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vl(e)}set(e,t,o){this._verifyNotCommitted();const u=il(e,this._firestore),f=_f(u.converter,t,o),v=Xd(this._dataReader,"WriteBatch.set",u._key,f,null!==u.converter,o);return this._mutations.push(v.toMutation(u._key,vs.none())),this}update(e,t,o,...u){this._verifyNotCommitted();const f=il(e,this._firestore);let v;return v="string"==typeof(t=(0,st.m9)(t))||t instanceof Fu?Ym(this._dataReader,"WriteBatch.update",f._key,t,o,u):gf(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(v.toMutation(f._key,vs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=il(e,this._firestore);return this._mutations=this._mutations.concat(new Br(t._key,vs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function il(i,e){if((i=(0,st.m9)(i)).firestore!==e)throw new re(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Kl extends hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ss(this.firestore,null,t)}}function cg(i,e,t){i=Gr(i,ss);const o=Gr(i.firestore,os),u=_f(i.converter,e,t);return fd(o,[Xd(vl(o),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,vs.none())])}function dg(i,e,t,...o){i=Gr(i,ss);const u=Gr(i.firestore,os),f=vl(u);let v;return v="string"==typeof(e=(0,st.m9)(e))||e instanceof Fu?Ym(f,"updateDoc",i._key,e,t,o):gf(f,"updateDoc",i._key,e),fd(u,[v.toMutation(i._key,vs.exists(!0))])}function gy(i,...e){var t,o,u;i=(0,st.m9)(i);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Zp(e[v])||(f=e[v],v++);const S={includeMetadataChanges:f.includeMetadataChanges};if(Zp(e[v])){const xe=e[v];e[v]=null===(t=xe.next)||void 0===t?void 0:t.bind(xe),e[v+1]=null===(o=xe.error)||void 0===o?void 0:o.bind(xe),e[v+2]=null===(u=xe.complete)||void 0===u?void 0:u.bind(xe)}let H,K,de;if(i instanceof ss)K=Gr(i.firestore,os),de=qa(i._key.path),H={next:xe=>{e[v]&&e[v](hg(K,i,xe))},error:e[v+1],complete:e[v+2]};else{const xe=Gr(i,ia);K=Gr(xe.firestore,os),de=xe._query;const nt=new Kl(K);H={next:bt=>{e[v]&&e[v](new Zl(K,nt,xe,bt))},error:e[v+1],complete:e[v+2]},ig(i._query)}return function(xe,nt,bt,Tt){const ln=new zd(Tt),Kn=new Bd(nt,ln,bt);return xe.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return wp(yield Wd(xe),Kn)})),()=>{ln.Aa(),xe.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return bp(yield Wd(xe),Kn)}))}}(oo(K),de,S,H)}function fd(i,e){return function(t,o){const u=new et;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function c_(i,e,t){return Jh.apply(this,arguments)}(yield Up(t),o,u)})),u.promise}(oo(i),e)}function hg(i,e,t){const o=t.docs.get(e._key),u=new Kl(i);return new wl(i,u,e._key,o,new Ic(t.hasPendingWrites,t.fromCache),e.converter)}class O_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=vl(e)}get(e){const t=il(e,this._firestore),o=new ly(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return E();const f=u[0];if(f.isFoundDocument())return new cd(this._firestore,o,f.key,f,t.converter);if(f.isNoDocument())return new cd(this._firestore,o,t._key,null,t.converter);throw E()})}set(e,t,o){const u=il(e,this._firestore),f=_f(u.converter,t,o),v=Xd(this._dataReader,"Transaction.set",u._key,f,null!==u.converter,o);return this._transaction.set(u._key,v),this}update(e,t,o,...u){const f=il(e,this._firestore);let v;return v="string"==typeof(t=(0,st.m9)(t))||t instanceof Fu?Ym(this._dataReader,"Transaction.update",f._key,t,o,u):gf(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,v),this}delete(e){const t=il(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=il(e,this._firestore),o=new Kl(this._firestore);return super.get(e).then(u=>new wl(this._firestore,o,t._key,u._document,new Ic(!1,!1),t.converter))}}function vf(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new re("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function fg(){if("undefined"==typeof Uint8Array)throw new re("unimplemented","Uint8Arrays are not available in this environment.")}function pg(){if(!function Iu(){return"undefined"!=typeof atob}())throw new re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){to=Xe.SDK_VERSION,(0,Xe._registerComponent)(new ut.wA("firestore",(t,{options:o})=>{const u=t.getProvider("app").getImmediate(),f=new os(u,new Ir(t.getProvider("auth-internal")),new Ko(t.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),f._setSettings(o),f},"PUBLIC")),(0,Xe.registerVersion)(eu,"3.4.9",i),(0,Xe.registerVersion)(eu,"3.4.9","esm2017")}();class pd{constructor(e){this._delegate=e}static fromBase64String(e){return pg(),new pd(nl.fromBase64String(e))}static fromUint8Array(e){return fg(),new pd(nl.fromUint8Array(e))}toBase64(){return pg(),this._delegate.toBase64()}toUint8Array(){return fg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ef(i){return function yy(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class _y{enableIndexedDbPersistence(e,t){return function hf(i,e){Xp(i=Gr(i,os));const t=oo(i),o=i._freezeSettings(),u=new rf;return w_(t,u,new kp(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Kp(i){Xp(i=Gr(i,os));const e=oo(i),t=i._freezeSettings(),o=new rf;return w_(e,o,new Cm(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function b_(i){if(i._initialized&&!i._terminated)throw new re(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new et;return i._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(o){if(!pu.vt())return Promise.resolve();const u=o+"main";yield pu.delete(u)}),function(o){return t.apply(this,arguments)})(Nd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class gg{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof po||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&A("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function v_(i,e,t,o={}){var u;const f=(i=Gr(i,Zd))._getSettings();if("firestore.googleapis.com"!==f.host&&f.host!==e&&A("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},f),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let v,S;if("string"==typeof o.mockUserToken)v=o.mockUserToken,S=Ti.MOCK_USER;else{v=(0,st.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const H=o.mockUserToken.sub||o.mockUserToken.user_id;if(!H)throw new re(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ti(H)}i._authCredentials=new an(new Kt(v,S))}}(this._delegate,e,t,o)}enableNetwork(){return function Qp(i){return function jp(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield Pm(i),t=yield Om(i);return e.setNetworkEnabled(!0),function(o){const u=q(o);return u.wu.delete(0),Od(u)}(t)}))}(oo(i=Gr(i,os)))}(this._delegate)}disableNetwork(){return function $m(i){return function $p(i){return i.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield Pm(i),t=yield Om(i);return e.setNetworkEnabled(!1),(o=(0,he.Z)(function*(u){const f=q(u);f.wu.add(0),yield kd(f),f.yu.set("Offline")}),function(u){return o.apply(this,arguments)})(t);var o}))}(oo(i=Gr(i,os)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,Gp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Yp(i){return function(e){const t=new et;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function Qv(i,e){return ef.apply(this,arguments)}(yield Up(e),t)})),t.promise}(oo(i=Gr(i,os)))}(this._delegate)}onSnapshotsInSync(e){return function P_(i,e){return function y_(i,e){const t=new zd(e);return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Wd(i),u=t,q(o).bu.add(u),void u.next();var o,u})),()=>{t.Aa(),i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return o=yield Wd(i),u=t,void q(o).bu.delete(u);var o,u}))}}(oo(i=Gr(i,os)),Zp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new md(this,Vm(this._delegate,e))}catch(t){throw ao(t,"collection()","Firestore.collection()")}}doc(e){try{return new vu(this,Kd(this._delegate,e))}catch(t){throw ao(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sa(this,function Um(i,e){if(i=Gr(i,Zd),Hp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ia(i,null,(t=e,new lu(hr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ao(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function k_(i,e,t){i=Gr(i,os);const o=Object.assign(Object.assign({},uy),t);return function(u){if(u.maxAttempts<1)throw new re(W.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function km(i,e,t){const o=new et;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const u=yield(f=i,uf(f).then(v=>v.datastore));var f;new Mm(i.asyncQueue,u,t,e,o).run()})),o.promise}(oo(i),u=>e(new O_(i,u)),o)}(this._delegate,t=>e(new mg(this,t)))}batch(){return oo(this._delegate),new Yl(new ug(this._delegate,e=>fd(this._delegate,e)))}loadBundle(e){return function Jp(i,e){const t=oo(i=Gr(i,os)),o=new e0;return function Xv(i,e,t,o){const u=function(f,v){let S;return S="string"==typeof f?(new TextEncoder).encode(f):f,H=function(H,K){if(H instanceof Uint8Array)return Fp(H,K);if(H instanceof ArrayBuffer)return Fp(new Uint8Array(H),K);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new Am(H,v);var H}(t,td(e));i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function ud(i,e,t){const o=q(i);var u;(u=(0,he.Z)(function*(f,v,S){try{const H=yield v.getMetadata();if(yield function(nt,bt){const Tt=q(nt),ln=Cs(bt.createTime);return Tt.persistence.runTransaction("hasNewerBundle","readonly",Kn=>Tt._s.getBundleMetadata(Kn,bt.id)).then(Kn=>!!Kn&&Kn.createTime.compareTo(ln)>=0)}(f.localStore,H))return yield v.close(),S._completeWith({taskState:"Success",documentsLoaded:(nt=H).totalDocuments,bytesLoaded:nt.totalBytes,totalDocuments:nt.totalDocuments,totalBytes:nt.totalBytes}),Promise.resolve(new Set);S._updateProgress(Tp(H));const K=new pm(H,f.localStore,v.M);let de=yield v.ma();for(;de;){const nt=yield K.Fu(de);nt&&S._updateProgress(nt),de=yield v.ma()}const xe=yield K.complete();return yield yl(f,xe.Lu,void 0),yield function(nt,bt){const Tt=q(nt);return Tt.persistence.runTransaction("Save bundle","readwrite",ln=>Tt._s.saveBundleMetadata(ln,bt))}(f.localStore,H),S._completeWith(xe.progress),Promise.resolve(xe.Bu)}catch(H){return A("SyncEngine",`Loading bundle failed with ${H}`),S._failWith(H),Promise.resolve(new Set)}var nt}),function(f,v,S){return u.apply(this,arguments)})(o,e,t).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Up(i),u,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function Hm(i,e){return function __(i,e){return i.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,o){const u=q(t);return u.persistence.runTransaction("Get named query","readonly",f=>u._s.getNamedQuery(f,o))}(yield cf(i),e)}))}(oo(i=Gr(i,os)),e).then(t=>t?new ia(i,null,t.query):null)}(this._delegate,e).then(t=>t?new sa(this,t):null)}}class nh extends hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new pd(new nl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vu.forKey(t,this.firestore,null)}}class mg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nh(e)}get(e){const t=Cc(e);return this._delegate.get(t).then(o=>new bf(this._firestore,new wl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const u=Cc(e);return o?(vf("Transaction.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const f=Cc(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,o,...u),this}delete(e){const t=Cc(e);return this._delegate.delete(t),this}}class Yl{constructor(e){this._delegate=e}set(e,t,o){const u=Cc(e);return o?(vf("WriteBatch.set",o),this._delegate.set(u,t,o)):this._delegate.set(u,t),this}update(e,t,o,...u){const f=Cc(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,o,...u),this}delete(e){const t=Cc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tc{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new dd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gd(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Tc.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let f=u.get(t);return f||(f=new Tc(e,new nh(e),t),u.set(t,f)),f}}Tc.INSTANCES=new WeakMap;class vu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nh(e)}static forPath(e,t,o){if(e.length%2!=0)throw new re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vu(t,new ss(t._delegate,o,new $t(e)))}static forKey(e,t,o){return new vu(t,new ss(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new md(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new md(this.firestore,Vm(this._delegate,e))}catch(t){throw ao(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,st.m9)(e))instanceof ss&&df(this._delegate,e)}set(e,t){t=vf("DocumentReference.set",t);try{return t?cg(this._delegate,e,t):cg(this._delegate,e)}catch(o){throw ao(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?dg(this._delegate,e):dg(this._delegate,e,t,...o)}catch(u){throw ao(u,"updateDoc()","DocumentReference.update()")}}delete(){return function R_(i){return fd(Gr(i.firestore,os),[new Br(i._key,vs.none())])}(this._delegate)}onSnapshot(...e){const t=H_(e),o=wf(e,u=>new bf(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return gy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cy(i){i=Gr(i,ss);const e=Gr(i.firestore,os),t=oo(e),o=new Kl(e);return function p_(i,e){const t=new et;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,f,v){try{const S=yield function(H,K){const de=q(H);return de.persistence.runTransaction("read document","readonly",xe=>de.fi.Ls(xe,K))}(u,f);S.isFoundDocument()?v.resolve(S):S.isNoDocument()?v.resolve(null):v.reject(new re(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const H=rd(S,`Failed to get document '${f} from cache`);v.reject(H)}}),function(u,f,v){return o.apply(this,arguments)})(yield cf(i),e,t);var o})),t.promise}(t,i._key).then(u=>new wl(e,o,i._key,u,new Ic(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function dy(i){i=Gr(i,ss);const e=Gr(i.firestore,os);return g_(oo(e),i._key,{source:"server"}).then(t=>hg(e,i,t))}(this._delegate):function lg(i){i=Gr(i,ss);const e=Gr(i.firestore,os);return g_(oo(e),i._key).then(t=>hg(e,i,t))}(this._delegate),t.then(o=>new bf(this.firestore,new wl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new vu(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}function ao(i,e,t){return i.message=i.message.replace(e,t),i}function H_(i){for(const e of i)if("object"==typeof e&&!Ef(e))return e;return{}}function wf(i,e){var t,o;let u;return u=Ef(i[0])?i[0]:Ef(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:f=>{u.next&&u.next(e(f))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class bf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return C_(this._delegate,e._delegate)}}class gd extends bf{data(e){const t=this._delegate.data(e);return function U(i,e){i||E()}(void 0!==t),t}}class sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nh(e)}where(e,t,o){try{return new sa(this.firestore,Ho(this._delegate,function S_(i,e,t){const o=e,u=El("where",i);return new A_(u,o,t)}(e,t,o)))}catch(u){throw ao(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sa(this.firestore,Ho(this._delegate,function Lu(i,e="asc"){const t=e,o=El("orderBy",i);return new rl(o,t)}(e,t)))}catch(o){throw ao(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sa(this.firestore,Ho(this._delegate,function ny(i){return zp("limit",i),new _u("limit",i,"F")}(e)))}catch(t){throw ao(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sa(this.firestore,Ho(this._delegate,function ry(i){return zp("limitToLast",i),new _u("limitToLast",i,"L")}(e)))}catch(t){throw ao(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sa(this.firestore,Ho(this._delegate,function M_(...i){return new iy("startAt",i,!0)}(...e)))}catch(t){throw ao(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sa(this.firestore,Ho(this._delegate,function x_(...i){return new iy("startAfter",i,!1)}(...e)))}catch(t){throw ao(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sa(this.firestore,Ho(this._delegate,function sg(...i){return new sy("endBefore",i,!1)}(...e)))}catch(t){throw ao(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sa(this.firestore,Ho(this._delegate,function th(...i){return new sy("endAt",i,!0)}(...e)))}catch(t){throw ao(t,"endAt()","Query.endAt()")}}isEqual(e){return E_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fy(i){i=Gr(i,ia);const e=Gr(i.firestore,os),t=oo(e),o=new Kl(e);return function Jv(i,e){const t=new et;return i.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(o=(0,he.Z)(function*(u,f,v){try{const S=yield ml(u,f,!0),H=new ym(f,S._i),K=H.Wu(S.documents),de=H.applyChanges(K,!1);v.resolve(de.snapshot)}catch(S){const H=rd(S,`Failed to execute query '${f} against cache`);v.reject(H)}}),function(u,f,v){return o.apply(this,arguments)})(yield cf(i),e,t);var o})),t.promise}(t,i._query).then(u=>new Zl(e,o,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function py(i){i=Gr(i,ia);const e=Gr(i.firestore,os),t=oo(e),o=new Kl(e);return m_(t,i._query,{source:"server"}).then(u=>new Zl(e,o,i,u))}(this._delegate):function hy(i){i=Gr(i,ia);const e=Gr(i.firestore,os),t=oo(e),o=new Kl(e);return ig(i._query),m_(t,i._query).then(u=>new Zl(e,o,i,u))}(this._delegate),t.then(o=>new Bn(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=H_(e),o=wf(e,u=>new Bn(this.firestore,new Zl(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return gy(this._delegate,t,o)}withConverter(e){return new sa(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}class r0{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new gd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Bn{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gd(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new r0(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new gd(this._firestore,o))})}isEqual(e){return C_(this._delegate,e._delegate)}}class md extends sa{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vu(this.firestore,e):null}doc(e){try{return new vu(this.firestore,void 0===e?Kd(this._delegate):Kd(this._delegate,e))}catch(t){throw ao(t,"doc()","CollectionReference.doc()")}}add(e){return function N_(i,e){const t=Gr(i.firestore,os),o=Kd(i),u=_f(i.converter,e);return fd(t,[Xd(vl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,vs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new vu(this.firestore,t))}isEqual(e){return df(this._delegate,e._delegate)}withConverter(e){return new md(this.firestore,this._delegate.withConverter(e?Tc.getInstance(this.firestore,e):null))}}function Cc(i){return Gr(i,ss)}class yg{constructor(...e){this._delegate=new Fu(...e)}static documentId(){return new yg(ys.keyField().canonicalString())}isEqual(e){return(e=(0,st.m9)(e))instanceof Fu&&this._delegate._internalPath.isEqual(e._internalPath)}}class sl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function L_(){return new pf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new sl(e)}static delete(){const e=function F_(){return new ld("deleteField")}();return e._methodName="FieldValue.delete",new sl(e)}static arrayUnion(...e){const t=function V_(...i){return new Wm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new sl(t)}static arrayRemove(...e){const t=function U_(...i){return new Zm("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new sl(t)}static increment(e){const t=function B_(i){return new Km("increment",i)}(e);return t._methodName="FieldValue.increment",new sl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const G_={Firestore:gg,GeoPoint:Jd,Timestamp:Ni,Blob:pd,Transaction:mg,WriteBatch:Yl,DocumentReference:vu,DocumentSnapshot:bf,Query:sa,QueryDocumentSnapshot:gd,QuerySnapshot:Bn,CollectionReference:md,FieldPath:yg,FieldValue:sl,setLogLevel:function vy(i){!function Vo(i){Lo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Df(i){(function If(i,e){i.INTERNAL.registerComponent(new ut.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},G_)))})(i,(e,t)=>new gg(e,t,new _y)),i.registerVersion("@firebase/firestore-compat","0.1.18")}(Nt.Z);var Ai=B(1205),s0=B(440);function Ey(i,e){return function z_(i,e=y.z){return new te.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Tf(i,e){return Ey(i,e).pipe((0,Be.U)(t=>({payload:t,type:"query"})))}function rh(i,e){return Tf(i,e).pipe((0,mt.O)(void 0),_e(),(0,Be.U)(([t,o])=>{const u=o.payload.docChanges(),f=u.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((v,S)=>{const H=u.find(de=>de.doc.ref.isEqual(v.ref)),K=null==t?void 0:t.payload.docs.find(de=>de.ref.isEqual(v.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(v.metadata)||!H&&K&&JSON.stringify(K.metadata)===JSON.stringify(v.metadata)||f.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:v}})}),f}))}function _g(i,e,t){return rh(i,t).pipe((0,lt.R)((o,u)=>function W_(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function Z_(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return vg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(f=>f.payload),e),[]),function ie(i,e=le.y){return i=null!=i?i:be,(0,Le.e)((t,o)=>{let u,f=!0;t.subscribe((0,Ae.x)(o,v=>{const S=e(v);(f||!i(u,S))&&(f=!1,u=S,o.next(v))}))})}(),(0,Be.U)(o=>o.map(u=>({type:u.type,payload:u}))))}function vg(i,e,t,...o){const u=i.slice();return u.splice(e,t,...o),u}function yd(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}B(127);class by{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=rh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Be.U)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,mt.O)(void 0),_e(),(0,wt.h)(([o,u])=>u.length>0||!o),(0,Be.U)(([o,u])=>u),Te.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,lt.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=yd(e);return _g(this.query,t,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return Tf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),Te.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(Te.iC)}add(e){return this.ref.add(e)}doc(e){return new Iy(this.ref.doc(e),this.afs)}}class Iy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:u,query:f}=Ay(o,t);return new by(u,f,this.afs)}snapshotChanges(){return function wy(i,e){return Ey(i,e).pipe((0,mt.O)(void 0),_e(),(0,Be.U)(([t,o])=>o.exists?(null==t?void 0:t.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ne.D)(this.ref.get(e)).pipe(Te.iC)}}class K_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rh(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,wt.h)(t=>t.length>0),Te.iC):rh(this.query,this.afs.schedulers.outsideAngular).pipe(Te.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,lt.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=yd(e);return _g(this.query,t,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(e={}){return Tf(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(o=>o.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Te.iC)}get(e){return(0,Ne.D)(this.query.get(e)).pipe(Te.iC)}}const Cf=new m.OlP("angularfire2.enableFirestorePersistence"),Dy=new m.OlP("angularfire2.firestore.persistenceSettings"),Ty=new m.OlP("angularfire2.firestore.settings"),Cy=new m.OlP("angularfire2.firestore.use-emulator");function Ay(i,e=(t=>t)){return{query:e(i),ref:i}}let ih=(()=>{class i{constructor(t,o,u,f,v,S,H,K,de,xe,nt,bt,Tt,ln,Kn,as,Fs){this.schedulers=H;const li=(0,Ze.on)(t,S,o),uo=de;xe&&(0,Ai.nw)(li,S,nt,Tt,ln,Kn,bt,as),[this.firestore,this.persistenceEnabled$]=(0,Ze.cc)(`${li.name}.firestore`,"AngularFirestore",li.name,()=>{const us=S.runOutsideAngular(()=>li.firestore());if(f&&us.settings(f),uo&&us.useEmulator(...uo),u&&!(0,at.PM)(v)){const As=()=>{try{return(0,Ne.D)(us.enablePersistence(K||void 0).then(()=>!0,()=>!1))}catch(oa){return"undefined"!=typeof console&&console.warn(oa),(0,Me.of)(!1)}};return[us,S.runOutsideAngular(As)]}return[us,(0,Me.of)(!1)]},[f,uo,u])}collection(t,o){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:v}=Ay(u,o),S=this.schedulers.ngZone.run(()=>f);return new by(S,v,this)}collectionGroup(t,o){const u=o||(v=>v),f=this.firestore.collectionGroup(t);return new K_(u(f),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>o);return new Iy(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(m.LFG(Ze.Dh),m.LFG(Ze.xv,8),m.LFG(Cf,8),m.LFG(Ty,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Te.HU),m.LFG(Dy,8),m.LFG(Cy,8),m.LFG(Ai.zQ,8),m.LFG(Ai.Qv,8),m.LFG(Ai.L6,8),m.LFG(Ai._Q,8),m.LFG(Ai.rT,8),m.LFG(Ai.lh,8),m.LFG(Ai.f7,8),m.LFG(s0.nm,8))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},7385:(Ot,$e,B)=>{B.d($e,{Q1:()=>Yt});var m=B(8306),y=B(9646),te=B(8996),Ne=B(4986),Me=B(4482),Te=B(5403),Ae=B(4004),_e=B(3900),le=B(5813),ie=B(5e3),be=B(2011),mt=B(3942),Be=B(6961),lt=B(4859);class wt{constructor(je,gt,Mt){this._delegate=je,this.task=gt,this.ref=Mt}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ze{constructor(je,gt){this._delegate=je,this._ref=gt,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wt(this._delegate.snapshot,this,this._ref)}then(je,gt){return this._delegate.then(Mt=>{if(je)return je(new wt(Mt,this,this._ref))},gt)}on(je,gt,Mt,qt){let Cn;return gt&&(Cn="function"==typeof gt?En=>gt(new wt(En,this,this._ref)):{next:gt.next?En=>gt.next(new wt(En,this,this._ref)):void 0,complete:gt.complete||void 0,error:gt.error||void 0}),this._delegate.on(je,Cn,Mt||void 0,qt||void 0)}}class at{constructor(je,gt){this._delegate=je,this._service=gt}get prefixes(){return this._delegate.prefixes.map(je=>new At(je,this._service))}get items(){return this._delegate.items.map(je=>new At(je,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class At{constructor(je,gt){this._delegate=je,this.storage=gt}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(je){const gt=(0,Be.g6)(this._delegate,je);return new At(gt,this.storage)}get root(){return new At(this._delegate.root,this.storage)}get parent(){const je=this._delegate.parent;return null==je?null:new At(je,this.storage)}put(je,gt){return this._throwIfRoot("put"),new Ze((0,Be.B0)(this._delegate,je,gt),this)}putString(je,gt=Be.bm.RAW,Mt){this._throwIfRoot("putString");const qt=(0,Be.qm)(gt,je),Cn=Object.assign({},Mt);return null==Cn.contentType&&null!=qt.contentType&&(Cn.contentType=qt.contentType),new Ze(new Be.IX(this._delegate,new Be.UJ(qt.data,!0),Cn),this)}listAll(){return(0,Be.aF)(this._delegate).then(je=>new at(je,this.storage))}list(je){return(0,Be.pb)(this._delegate,je||void 0).then(gt=>new at(gt,this.storage))}getMetadata(){return(0,Be.sd)(this._delegate)}updateMetadata(je){return(0,Be.Ym)(this._delegate,je)}getDownloadURL(){return(0,Be.Jt)(this._delegate)}delete(){return this._throwIfRoot("delete"),(0,Be.oq)(this._delegate)}_throwIfRoot(je){if(""===this._delegate._location.path)throw(0,Be.y4)(je)}}class Nt{constructor(je,gt){this.app=je,this._delegate=gt}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(je){if(he(je))throw(0,Be.gH)("ref() expected a child path but got a URL, use refFromURL instead.");return new At((0,Be.iH)(this._delegate,je),this)}refFromURL(je){if(!he(je))throw(0,Be.gH)("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Be.gE.makeFromUrl(je,this._delegate.host)}catch(gt){throw(0,Be.gH)("refFromUrl() expected a valid full URL but got an invalid one.")}return new At((0,Be.iH)(this._delegate,je),this)}setMaxUploadRetryTime(je){this._delegate.maxUploadRetryTime=je}setMaxOperationRetryTime(je){this._delegate.maxOperationRetryTime=je}useEmulator(je,gt,Mt={}){(0,Be.a1)(this._delegate,je,gt,Mt)}}function he(yt){return/^[A-Za-z]+:\/\//.test(yt)}function st(yt,{instanceIdentifier:je}){const gt=yt.getProvider("app-compat").getImmediate(),Mt=yt.getProvider("storage").getImmediate({identifier:je});return new Nt(gt,Mt)}!function we(yt){const je={TaskState:Be.$Y,TaskEvent:Be.FN,StringFormat:Be.bm,Storage:Nt,Reference:At};yt.INTERNAL.registerComponent(new lt.wA("storage-compat",st,"PUBLIC").setServiceProps(je).setMultipleInstances(!0)),yt.registerVersion("@firebase/storage-compat","0.1.14")}(mt.Z);var Qe=B(440);function fe(yt){const je=function Re(yt){return new m.y(je=>{const gt=En=>je.next(En);gt(yt.snapshot);const Cn=yt.on("state_changed",gt);return yt.then(En=>{gt(En),je.complete()},En=>{gt(yt.snapshot),(En=>{je.error(En)})(En)}),function(){Cn()}}).pipe(function Le(yt,je=Ne.z){return(0,Me.e)((gt,Mt)=>{let qt=null,Cn=null,En=null;const fr=()=>{if(qt){qt.unsubscribe(),qt=null;const Qn=Cn;Cn=null,Mt.next(Qn)}};function Yn(){const Qn=En+yt,br=je.now();if(br<Qn)return qt=this.schedule(void 0,Qn-br),void Mt.add(qt);fr()}gt.subscribe((0,Te.x)(Mt,Qn=>{Cn=Qn,En=je.now(),qt||(qt=je.schedule(Yn,yt),Mt.add(qt))},()=>{fr(),Mt.complete()},void 0,()=>{Cn=qt=null}))})}(0))}(yt);return{task:yt,then:yt.then.bind(yt),catch:yt.catch.bind(yt),pause:yt.pause.bind(yt),cancel:yt.cancel.bind(yt),resume:yt.resume.bind(yt),snapshotChanges:()=>je,percentageChanges:()=>je.pipe((0,Ae.U)(gt=>gt.bytesTransferred/gt.totalBytes*100))}}function ze(yt){return{getDownloadURL:()=>(0,y.of)(void 0).pipe(le.fc,(0,_e.w)(()=>yt.getDownloadURL()),le.iC),getMetadata:()=>(0,y.of)(void 0).pipe(le.fc,(0,_e.w)(()=>yt.getMetadata()),le.iC),delete:()=>(0,te.D)(yt.delete()),child:je=>ze(yt.child(je)),updateMetadata:je=>(0,te.D)(yt.updateMetadata(je)),put:(je,gt)=>fe(yt.put(je,gt)),putString:(je,gt,Mt)=>fe(yt.putString(je,gt,Mt)),list:je=>(0,te.D)(yt.list(je)),listAll:()=>(0,te.D)(yt.listAll())}}B(127);const He=new ie.OlP("angularfire2.storageBucket"),vt=new ie.OlP("angularfire2.storage.maxUploadRetryTime"),St=new ie.OlP("angularfire2.storage.maxOperationRetryTime"),Xt=new ie.OlP("angularfire2.storage.use-emulator");let Yt=(()=>{class yt{constructor(gt,Mt,qt,Cn,En,fr,Yn,Qn,br,Dr){const zn=(0,be.on)(gt,En,Mt);this.storage=(0,be.cc)(`${zn.name}.storage.${qt}`,"AngularFireStorage",zn.name,()=>{const en=En.runOutsideAngular(()=>zn.storage(qt||void 0)),mn=br;return mn&&en.useEmulator(...mn),Yn&&en.setMaxUploadRetryTime(Yn),Qn&&en.setMaxOperationRetryTime(Qn),en},[Yn,Qn])}ref(gt){return ze(this.storage.ref(gt))}refFromURL(gt){return ze(this.storage.refFromURL(gt))}upload(gt,Mt,qt){return ze(this.storage.ref(gt)).put(Mt,qt)}}return yt.\u0275fac=function(gt){return new(gt||yt)(ie.LFG(be.Dh),ie.LFG(be.xv,8),ie.LFG(He,8),ie.LFG(ie.Lbi),ie.LFG(ie.R0b),ie.LFG(le.HU),ie.LFG(vt,8),ie.LFG(St,8),ie.LFG(Xt,8),ie.LFG(Qe.nm,8))},yt.\u0275prov=ie.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"any"}),yt})()},2011:(Ot,$e,B)=>{B.d($e,{Dh:()=>Ae,GT:()=>Te,cc:()=>Be,hO:()=>mt,on:()=>le,pX:()=>Me,xv:()=>_e});var m=B(5e3),y=B(127),te=B(5813);Ot=B.hmd(Ot);const Ne=["ngOnDestroy"],Me=(at,At,Nt,he={})=>new Proxy(at,{get:(Xe,ut)=>Nt.runOutsideAngular(()=>{var We;if(at[ut])return(null===(We=null==he?void 0:he.spy)||void 0===We?void 0:We.get)&&he.spy.get(ut,at[ut]),at[ut];if(Ne.indexOf(ut)>-1)return()=>{};const st=At.toPromise().then(we=>{const Qe=we&&we[ut];return"function"==typeof Qe?Qe.bind(we):Qe&&Qe.then?Qe.then(se=>Nt.run(()=>se)):Nt.run(()=>Qe)});return new Proxy(()=>{},{get:(we,Qe)=>st[Qe],apply:(we,Qe,se)=>st.then(Re=>{var fe;const ze=Re&&Re(...se);return(null===(fe=null==he?void 0:he.spy)||void 0===fe?void 0:fe.apply)&&he.spy.apply(ut,se,ze),ze})})})}),Te=(at,At)=>{At.forEach(Nt=>{Object.getOwnPropertyNames(Nt.prototype||Nt).forEach(he=>{Object.defineProperty(at.prototype,he,Object.getOwnPropertyDescriptor(Nt.prototype||Nt,he))})})};class Le{constructor(At){return At}}const Ae=new m.OlP("angularfire2.app.options"),_e=new m.OlP("angularfire2.app.name");function le(at,At,Nt){const Xe="object"==typeof Nt&&Nt||{};Xe.name=Xe.name||"string"==typeof Nt&&Nt||"[DEFAULT]";const We=y.Z.apps.filter(st=>st&&st.name===Xe.name)[0]||At.runOutsideAngular(()=>y.Z.initializeApp(at,Xe));try{JSON.stringify(at)!==JSON.stringify(We.options)&&ie("error",`${We.name} Firebase App already initialized with different options${Ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(st){}return new Le(We)}const ie=(at,...At)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[at](...At)},be={provide:Le,useFactory:le,deps:[Ae,m.R0b,[new m.FiY,_e]]};let mt=(()=>{class at{constructor(Nt){y.Z.registerVersion("angularfire",te.q4.full,"core"),y.Z.registerVersion("angularfire",te.q4.full,"app-compat"),y.Z.registerVersion("angular",m.q4F.full,Nt.toString())}static initializeApp(Nt,he){return{ngModule:at,providers:[{provide:Ae,useValue:Nt},{provide:_e,useValue:he}]}}}return at.\u0275fac=function(Nt){return new(Nt||at)(m.LFG(m.Lbi))},at.\u0275mod=m.oAB({type:at}),at.\u0275inj=m.cJS({providers:[be]}),at})();function Be(at,At,Nt,he,Xe){const[,ut,We]=globalThis.\u0275AngularfireInstanceCache.find(st=>st[0]===at)||[];if(ut)return function lt(at,At){try{return at.toString()===At.toString()}catch(Nt){return at===At}}(Xe,We)||(Ze("error",`${At} was already initialized on the ${Nt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),Ze("warn",{is:Xe,was:We})),ut;{const st=he();return globalThis.\u0275AngularfireInstanceCache.push([at,st,Xe]),st}}const wt=!!Ot.hot,Ze=(at,...At)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[at](...At)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ot,$e,B)=>{B.d($e,{q4:()=>ju,iC:()=>Cl,fc:()=>xo,HU:()=>al,vb:()=>Jl,JM:()=>go});var m=B(5e3),y=B(5867),te=B(5861),Ne=B(9681),Me=B(2090),Te=B(4859),Le=B(1877),Ae=B(8766);const _e="@firebase/installations",be="w:0.5.9",mt="FIS_v2",At=new Me.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Nt(N){return N instanceof Me.ZR&&N.code.includes("request-failed")}function he({projectId:N}){return`https://firebaseinstallations.googleapis.com/v1/projects/${N}/installations`}function Xe(N){return{token:N.token,requestStatus:2,expiresIn:Re(N.expiresIn),creationTime:Date.now()}}function ut(N,L){return We.apply(this,arguments)}function We(){return(We=(0,te.Z)(function*(N,L){const oe=(yield L.json()).error;return At.create("request-failed",{requestName:N,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function st({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function we(N,{refreshToken:L}){const J=st(N);return J.append("Authorization",function fe(N){return`${mt} ${N}`}(L)),J}function Qe(N){return se.apply(this,arguments)}function se(){return(se=(0,te.Z)(function*(N){const L=yield N();return L.status>=500&&L.status<600?N():L})).apply(this,arguments)}function Re(N){return Number(N.replace("s","000"))}function ze(N,L){return He.apply(this,arguments)}function He(){return(He=(0,te.Z)(function*({appConfig:N,heartbeatServiceProvider:L},{fid:J}){const oe=he(N),Ue=st(N),Ye=L.getImmediate({optional:!0});if(Ye){const Fn=yield Ye.getHeartbeatsHeader();Fn&&Ue.append("x-firebase-client",Fn)}const sn={method:"POST",headers:Ue,body:JSON.stringify({fid:J,authVersion:mt,appId:N.appId,sdkVersion:be})},dn=yield Qe(()=>fetch(oe,sn));if(dn.ok){const Fn=yield dn.json();return{fid:Fn.fid||J,registrationStatus:2,refreshToken:Fn.refreshToken,authToken:Xe(Fn.authToken)}}throw yield ut("Create Installation",dn)})).apply(this,arguments)}function vt(N){return new Promise(L=>{setTimeout(L,N)})}const Xt=/^[cdef][\w-]{21}$/;function ht(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const J=function pn(N){return function St(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return Xt.test(J)?J:""}catch(N){return""}}function nn(N){return`${N.appName}!${N.appId}`}const yt=new Map;function je(N,L){const J=nn(N);qt(J,L),function Cn(N,L){const J=function fr(){return!En&&"BroadcastChannel"in self&&(En=new BroadcastChannel("[Firebase] FID Change"),En.onmessage=N=>{qt(N.data.key,N.data.fid)}),En}();J&&J.postMessage({key:N,fid:L}),function Yn(){0===yt.size&&En&&(En.close(),En=null)}()}(J,L)}function qt(N,L){const J=yt.get(N);if(J)for(const oe of J)oe(L)}let En=null;const Dr="firebase-installations-store";let zn=null;function en(){return zn||(zn=(0,Ae.X3)("firebase-installations-database",1,{upgrade:(N,L)=>{0===L&&N.createObjectStore(Dr)}})),zn}function mn(N,L){return _n.apply(this,arguments)}function _n(){return(_n=(0,te.Z)(function*(N,L){const J=nn(N),Ue=(yield en()).transaction(Dr,"readwrite"),Ye=Ue.objectStore(Dr),Dt=yield Ye.get(J);return yield Ye.put(L,J),yield Ue.done,(!Dt||Dt.fid!==L.fid)&&je(N,L.fid),L})).apply(this,arguments)}function wn(N){return hi.apply(this,arguments)}function hi(){return(hi=(0,te.Z)(function*(N){const L=nn(N),oe=(yield en()).transaction(Dr,"readwrite");yield oe.objectStore(Dr).delete(L),yield oe.done})).apply(this,arguments)}function vi(N,L){return ii.apply(this,arguments)}function ii(){return(ii=(0,te.Z)(function*(N,L){const J=nn(N),Ue=(yield en()).transaction(Dr,"readwrite"),Ye=Ue.objectStore(Dr),Dt=yield Ye.get(J),sn=L(Dt);return void 0===sn?yield Ye.delete(J):yield Ye.put(sn,J),yield Ue.done,sn&&(!Dt||Dt.fid!==sn.fid)&&je(N,sn.fid),sn})).apply(this,arguments)}function Nr(N){return si.apply(this,arguments)}function si(){return(si=(0,te.Z)(function*(N){let L;const J=yield vi(N.appConfig,oe=>{const Ue=Jr(oe),Ye=Ut(N,Ue);return L=Ye.registrationPromise,Ye.installationEntry});return""===J.fid?{installationEntry:yield L}:{installationEntry:J,registrationPromise:L}})).apply(this,arguments)}function Jr(N){return Qi(N||{fid:ht(),registrationStatus:0})}function Ut(N,L){if(0===L.registrationStatus){if(!navigator.onLine)return{installationEntry:L,registrationPromise:Promise.reject(At.create("app-offline"))};const J={fid:L.fid,registrationStatus:1,registrationTime:Date.now()},oe=function Qt(N,L){return Zt.apply(this,arguments)}(N,J);return{installationEntry:J,registrationPromise:oe}}return 1===L.registrationStatus?{installationEntry:L,registrationPromise:Sr(N)}:{installationEntry:L}}function Zt(){return(Zt=(0,te.Z)(function*(N,L){try{const J=yield ze(N,L);return mn(N.appConfig,J)}catch(J){throw Nt(J)&&409===J.customData.serverCode?yield wn(N.appConfig):yield mn(N.appConfig,{fid:L.fid,registrationStatus:0}),J}})).apply(this,arguments)}function Sr(N){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,te.Z)(function*(N){let L=yield Wn(N.appConfig);for(;1===L.registrationStatus;)yield vt(100),L=yield Wn(N.appConfig);if(0===L.registrationStatus){const{installationEntry:J,registrationPromise:oe}=yield Nr(N);return oe||J}return L})).apply(this,arguments)}function Wn(N){return vi(N,L=>{if(!L)throw At.create("installation-not-found");return Qi(L)})}function Qi(N){return function zr(N){return 1===N.registrationStatus&&N.registrationTime+1e4<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function Vn(N,L){return pe.apply(this,arguments)}function pe(){return(pe=(0,te.Z)(function*({appConfig:N,heartbeatServiceProvider:L},J){const oe=De(N,J),Ue=we(N,J),Ye=L.getImmediate({optional:!0});if(Ye){const Fn=yield Ye.getHeartbeatsHeader();Fn&&Ue.append("x-firebase-client",Fn)}const sn={method:"POST",headers:Ue,body:JSON.stringify({installation:{sdkVersion:be,appId:N.appId}})},dn=yield Qe(()=>fetch(oe,sn));if(dn.ok)return Xe(yield dn.json());throw yield ut("Generate Auth Token",dn)})).apply(this,arguments)}function De(N,{fid:L}){return`${he(N)}/${L}/authTokens:generate`}function Ce(N){return ft.apply(this,arguments)}function ft(){return(ft=(0,te.Z)(function*(N,L=!1){let J;const oe=yield vi(N.appConfig,Ye=>{if(!on(Ye))throw At.create("not-registered");const Dt=Ye.authToken;if(!L&&yr(Dt))return Ye;if(1===Dt.requestStatus)return J=ve(N,L),Ye;{if(!navigator.onLine)throw At.create("app-offline");const sn=nr(Ye);return J=Lt(N,sn),sn}});return J?yield J:oe.authToken})).apply(this,arguments)}function ve(N,L){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,te.Z)(function*(N,L){let J=yield _t(N.appConfig);for(;1===J.authToken.requestStatus;)yield vt(100),J=yield _t(N.appConfig);const oe=J.authToken;return 0===oe.requestStatus?Ce(N,L):oe})).apply(this,arguments)}function _t(N){return vi(N,L=>{if(!on(L))throw At.create("not-registered");return function _r(N){return 1===N.requestStatus&&N.requestTime+1e4<Date.now()}(L.authToken)?Object.assign(Object.assign({},L),{authToken:{requestStatus:0}}):L})}function Lt(N,L){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,te.Z)(function*(N,L){try{const J=yield Vn(N,L),oe=Object.assign(Object.assign({},L),{authToken:J});return yield mn(N.appConfig,oe),J}catch(J){if(!Nt(J)||401!==J.customData.serverCode&&404!==J.customData.serverCode){const oe=Object.assign(Object.assign({},L),{authToken:{requestStatus:0}});yield mn(N.appConfig,oe)}else yield wn(N.appConfig);throw J}})).apply(this,arguments)}function on(N){return void 0!==N&&2===N.registrationStatus}function yr(N){return 2===N.requestStatus&&!function hn(N){const L=Date.now();return L<N.creationTime||N.creationTime+N.expiresIn<L+36e5}(N)}function nr(N){const L={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:L})}function jr(){return(jr=(0,te.Z)(function*(N){const L=N,{installationEntry:J,registrationPromise:oe}=yield Nr(L);return oe?oe.catch(console.error):Ce(L).catch(console.error),J.fid})).apply(this,arguments)}function cn(){return(cn=(0,te.Z)(function*(N,L=!1){const J=N;return yield it(J),(yield Ce(J,L)).token})).apply(this,arguments)}function it(N){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,te.Z)(function*(N){const{registrationPromise:L}=yield Nr(N);L&&(yield L)})).apply(this,arguments)}function Wr(N){return At.create("missing-app-config-values",{valueName:N})}const kr="installations",kt=N=>{const L=N.getProvider("app").getImmediate(),J=function Or(N){if(!N||!N.options)throw Wr("App Configuration");if(!N.name)throw Wr("App Name");const L=["projectId","apiKey","appId"];for(const J of L)if(!N.options[J])throw Wr(J);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}(L);return{app:L,appConfig:J,heartbeatServiceProvider:(0,Ne._getProvider)(L,"heartbeat"),_delete:()=>Promise.resolve()}},yn=N=>{const L=N.getProvider("app").getImmediate(),J=(0,Ne._getProvider)(L,kr).getImmediate();return{getId:()=>function Ei(N){return jr.apply(this,arguments)}(J),getToken:Ue=>function wi(N){return cn.apply(this,arguments)}(J,Ue)}};(function xr(){(0,Ne._registerComponent)(new Te.wA(kr,kt,"PUBLIC")),(0,Ne._registerComponent)(new Te.wA("installations-internal",yn,"PRIVATE"))})(),(0,Ne.registerVersion)(_e,"0.5.9"),(0,Ne.registerVersion)(_e,"0.5.9","esm2017");const bi="@firebase/remote-config",Tr=new Me.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Eo{constructor(L,J,oe,Ue){this.client=L,this.storage=J,this.storageCache=oe,this.logger=Ue}isCachedDataFresh(L,J){if(!J)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-J,Ue=oe<=L;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${L}. Is cache hit: ${Ue}.`),Ue}fetch(L){var J=this;return(0,te.Z)(function*(){const[oe,Ue]=yield Promise.all([J.storage.getLastSuccessfulFetchTimestampMillis(),J.storage.getLastSuccessfulFetchResponse()]);if(Ue&&J.isCachedDataFresh(L.cacheMaxAgeMillis,oe))return Ue;L.eTag=Ue&&Ue.eTag;const Ye=yield J.client.fetch(L),Dt=[J.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ye.status&&Dt.push(J.storage.setLastSuccessfulFetchResponse(Ye)),yield Promise.all(Dt),Ye})()}}function Oo(N=navigator){return N.languages&&N.languages[0]||N.language}class vr{constructor(L,J,oe,Ue,Ye,Dt){this.firebaseInstallations=L,this.sdkVersion=J,this.namespace=oe,this.projectId=Ue,this.apiKey=Ye,this.appId=Dt}fetch(L){var J=this;return(0,te.Z)(function*(){const[oe,Ue]=yield Promise.all([J.firebaseInstallations.getId(),J.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${J.projectId}/namespaces/${J.namespace}:fetch?key=${J.apiKey}`,sn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":L.eTag||"*"},dn={sdk_version:J.sdkVersion,app_instance_id:oe,app_instance_id_token:Ue,app_id:J.appId,language_code:Oo()},Fn={method:"POST",headers:sn,body:JSON.stringify(dn)},Er=fetch(Dt,Fn),Rn=new Promise((yo,io)=>{L.signal.addEventListener(()=>{const Ga=new Error("The operation was aborted.");Ga.name="AbortError",io(Ga)})});let Ki;try{yield Promise.race([Er,Rn]),Ki=yield Er}catch(yo){let io="fetch-client-network";throw"AbortError"===yo.name&&(io="fetch-timeout"),Tr.create(io,{originalErrorMessage:yo.message})}let lr=Ki.status;const Xo=Ki.headers.get("ETag")||void 0;let Ar,er;if(200===Ki.status){let yo;try{yo=yield Ki.json()}catch(io){throw Tr.create("fetch-client-parse",{originalErrorMessage:io.message})}Ar=yo.entries,er=yo.state}if("INSTANCE_STATE_UNSPECIFIED"===er?lr=500:"NO_CHANGE"===er?lr=304:("NO_TEMPLATE"===er||"EMPTY_CONFIG"===er)&&(Ar={}),304!==lr&&200!==lr)throw Tr.create("fetch-status",{httpStatus:lr});return{status:lr,eTag:Xo,config:Ar}})()}}class Pe{constructor(L,J){this.client=L,this.storage=J}fetch(L){var J=this;return(0,te.Z)(function*(){const oe=(yield J.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return J.attemptFetch(L,oe)})()}attemptFetch(L,{throttleEndTimeMillis:J,backoffCount:oe}){var Ue=this;return(0,te.Z)(function*(){yield function Hi(N,L){return new Promise((J,oe)=>{const Ue=Math.max(L-Date.now(),0),Ye=setTimeout(J,Ue);N.addEventListener(()=>{clearTimeout(Ye),oe(Tr.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}(L.signal,J);try{const Ye=yield Ue.client.fetch(L);return yield Ue.storage.deleteThrottleMetadata(),Ye}catch(Ye){if(!function Ls(N){if(!(N instanceof Me.ZR&&N.customData))return!1;const L=Number(N.customData.httpStatus);return 429===L||500===L||503===L||504===L}(Ye))throw Ye;const Dt={throttleEndTimeMillis:Date.now()+(0,Me.$s)(oe),backoffCount:oe+1};return yield Ue.storage.setThrottleMetadata(Dt),Ue.attemptFetch(L,Dt)}})()}}class ct{constructor(L,J,oe,Ue,Ye){this.app=L,this._client=J,this._storageCache=oe,this._storage=Ue,this._logger=Ye,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xt(N,L){const J=N.target.error||void 0;return Tr.create(L,{originalErrorMessage:J&&J.message})}const Wt="app_namespace_store";class ds{constructor(L,J,oe,Ue=function Zn(){return new Promise((N,L)=>{try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=oe=>{L(xt(oe,"storage-open"))},J.onsuccess=oe=>{N(oe.target.result)},J.onupgradeneeded=oe=>{0===oe.oldVersion&&oe.target.result.createObjectStore(Wt,{keyPath:"compositeKey"})}}catch(J){L(Tr.create("storage-open",{originalErrorMessage:J}))}})}()){this.appId=L,this.appName=J,this.namespace=oe,this.openDbPromise=Ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(L){return this.set("last_fetch_status",L)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(L){return this.set("last_successful_fetch_timestamp_millis",L)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(L){return this.set("last_successful_fetch_response",L)}getActiveConfig(){return this.get("active_config")}setActiveConfig(L){return this.set("active_config",L)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(L){return this.set("active_config_etag",L)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(L){return this.set("throttle_metadata",L)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(L){var J=this;return(0,te.Z)(function*(){const oe=yield J.openDbPromise;return new Promise((Ue,Ye)=>{const sn=oe.transaction([Wt],"readonly").objectStore(Wt),dn=J.createCompositeKey(L);try{const Fn=sn.get(dn);Fn.onerror=Er=>{Ye(xt(Er,"storage-get"))},Fn.onsuccess=Er=>{const Rn=Er.target.result;Ue(Rn?Rn.value:void 0)}}catch(Fn){Ye(Tr.create("storage-get",{originalErrorMessage:Fn&&Fn.message}))}})})()}set(L,J){var oe=this;return(0,te.Z)(function*(){const Ue=yield oe.openDbPromise;return new Promise((Ye,Dt)=>{const dn=Ue.transaction([Wt],"readwrite").objectStore(Wt),Fn=oe.createCompositeKey(L);try{const Er=dn.put({compositeKey:Fn,value:J});Er.onerror=Rn=>{Dt(xt(Rn,"storage-set"))},Er.onsuccess=()=>{Ye()}}catch(Er){Dt(Tr.create("storage-set",{originalErrorMessage:Er&&Er.message}))}})})()}delete(L){var J=this;return(0,te.Z)(function*(){const oe=yield J.openDbPromise;return new Promise((Ue,Ye)=>{const sn=oe.transaction([Wt],"readwrite").objectStore(Wt),dn=J.createCompositeKey(L);try{const Fn=sn.delete(dn);Fn.onerror=Er=>{Ye(xt(Er,"storage-delete"))},Fn.onsuccess=()=>{Ue()}}catch(Fn){Ye(Tr.create("storage-delete",{originalErrorMessage:Fn&&Fn.message}))}})})()}createCompositeKey(L){return[this.appId,this.appName,this.namespace,L].join()}}class lo{constructor(L){this.storage=L}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var L=this;return(0,te.Z)(function*(){const J=L.storage.getLastFetchStatus(),oe=L.storage.getLastSuccessfulFetchTimestampMillis(),Ue=L.storage.getActiveConfig(),Ye=yield J;Ye&&(L.lastFetchStatus=Ye);const Dt=yield oe;Dt&&(L.lastSuccessfulFetchTimestampMillis=Dt);const sn=yield Ue;sn&&(L.activeConfig=sn)})()}setLastFetchStatus(L){return this.lastFetchStatus=L,this.storage.setLastFetchStatus(L)}setLastSuccessfulFetchTimestampMillis(L){return this.lastSuccessfulFetchTimestampMillis=L,this.storage.setLastSuccessfulFetchTimestampMillis(L)}setActiveConfig(L){return this.activeConfig=L,this.storage.setActiveConfig(L)}}function Rs(){return zs.apply(this,arguments)}function zs(){return(zs=(0,te.Z)(function*(){if(!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(N){return!1}})).apply(this,arguments)}!function oi(){(0,Ne._registerComponent)(new Te.wA("remote-config",function N(L,{instanceIdentifier:J}){const oe=L.getProvider("app").getImmediate(),Ue=L.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Tr.create("registration-window");if(!(0,Me.hl)())throw Tr.create("indexed-db-unavailable");const{projectId:Ye,apiKey:Dt,appId:sn}=oe.options;if(!Ye)throw Tr.create("registration-project-id");if(!Dt)throw Tr.create("registration-api-key");if(!sn)throw Tr.create("registration-app-id");const dn=new ds(sn,oe.name,J=J||"firebase"),Fn=new lo(dn),Er=new Le.Yd(bi);Er.logLevel=Le.in.ERROR;const Rn=new vr(Ue,Ne.SDK_VERSION,J,Ye,Dt,sn),Ki=new Pe(Rn,dn),lr=new Eo(Ki,dn,Fn,Er),Xo=new ct(oe,lr,Fn,dn,Er);return function or(N){const L=(0,Me.m9)(N);L._initializePromise||(L._initializePromise=L._storageCache.loadFromStorage().then(()=>{L._isInitializationComplete=!0}))}(Xo),Xo},"PUBLIC").setMultipleInstances(!0)),(0,Ne.registerVersion)(bi,"0.3.8"),(0,Ne.registerVersion)(bi,"0.3.8","esm2017")}();const Ws="/firebase-messaging-sw.js",ai="/firebase-cloud-messaging-push-scope",Ns="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ji="google.c.a.c_id",Zs="google.c.a.c_l",fs="google.c.a.ts",Go="google.c.a.e";var Ks=(()=>{return(N=Ks||(Ks={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",Ks;var N})();function ui(N){const L=new Uint8Array(N);return btoa(String.fromCharCode(...L)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Z(N){const J=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(J),Ue=new Uint8Array(oe.length);for(let Ye=0;Ye<oe.length;++Ye)Ue[Ye]=oe.charCodeAt(Ye);return Ue}const G="fcm_token_details_db",me="fcm_token_object_Store";function Ve(N){return rt.apply(this,arguments)}function rt(){return rt=(0,te.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ye=>Ye.name).includes(G))return null;let L=null;return(yield(0,Ae.X3)(G,5,{upgrade:(oe=(0,te.Z)(function*(Ue,Ye,Dt,sn){var dn;if(Ye<2||!Ue.objectStoreNames.contains(me))return;const Fn=sn.objectStore(me),Er=yield Fn.index("fcmSenderId").get(N);if(yield Fn.clear(),Er)if(2===Ye){const Rn=Er;if(!Rn.auth||!Rn.p256dh||!Rn.endpoint)return;L={token:Rn.fcmToken,createTime:null!==(dn=Rn.createTime)&&void 0!==dn?dn:Date.now(),subscriptionOptions:{auth:Rn.auth,p256dh:Rn.p256dh,endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:"string"==typeof Rn.vapidKey?Rn.vapidKey:ui(Rn.vapidKey)}}}else if(3===Ye){const Rn=Er;L={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:ui(Rn.auth),p256dh:ui(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:ui(Rn.vapidKey)}}}else if(4===Ye){const Rn=Er;L={token:Rn.fcmToken,createTime:Rn.createTime,subscriptionOptions:{auth:ui(Rn.auth),p256dh:ui(Rn.p256dh),endpoint:Rn.endpoint,swScope:Rn.swScope,vapidKey:ui(Rn.vapidKey)}}}}),function(Ye,Dt,sn,dn){return oe.apply(this,arguments)})})).close(),yield(0,Ae.Lj)(G),yield(0,Ae.Lj)("fcm_vapid_details_db"),yield(0,Ae.Lj)("undefined"),Rt(L)?L:null;var oe}),rt.apply(this,arguments)}function Rt(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:L}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof L.auth&&L.auth.length>0&&"string"==typeof L.p256dh&&L.p256dh.length>0&&"string"==typeof L.endpoint&&L.endpoint.length>0&&"string"==typeof L.swScope&&L.swScope.length>0&&"string"==typeof L.vapidKey&&L.vapidKey.length>0}const Dn="firebase-messaging-store";let Xn=null;function Mn(){return Xn||(Xn=(0,Ae.X3)("firebase-messaging-database",1,{upgrade:(N,L)=>{0===L&&N.createObjectStore(Dn)}})),Xn}function O(N){return z.apply(this,arguments)}function z(){return(z=(0,te.Z)(function*(N){const L=Je(N),oe=yield(yield Mn()).transaction(Dn).objectStore(Dn).get(L);if(oe)return oe;{const Ue=yield Ve(N.appConfig.senderId);if(Ue)return yield k(N,Ue),Ue}})).apply(this,arguments)}function k(N,L){return ee.apply(this,arguments)}function ee(){return(ee=(0,te.Z)(function*(N,L){const J=Je(N),Ue=(yield Mn()).transaction(Dn,"readwrite");return yield Ue.objectStore(Dn).put(L,J),yield Ue.done,L})).apply(this,arguments)}function ye(N){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,te.Z)(function*(N){const L=Je(N),oe=(yield Mn()).transaction(Dn,"readwrite");yield oe.objectStore(Dn).delete(L),yield oe.done})).apply(this,arguments)}function Je({appConfig:N}){return N.appId}const rn=new Me.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hn(N,L){return fn.apply(this,arguments)}function fn(){return(fn=(0,te.Z)(function*(N,L){const J=yield ps(N),oe=xi(L),Ue={method:"POST",headers:J,body:JSON.stringify(oe)};let Ye;try{Ye=yield(yield fetch(qi(N.appConfig),Ue)).json()}catch(Dt){throw rn.create("token-subscribe-failed",{errorInfo:Dt})}if(Ye.error)throw rn.create("token-subscribe-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw rn.create("token-subscribe-no-token");return Ye.token})).apply(this,arguments)}function Pn(N,L){return dr.apply(this,arguments)}function dr(){return(dr=(0,te.Z)(function*(N,L){const J=yield ps(N),oe=xi(L.subscriptionOptions),Ue={method:"PATCH",headers:J,body:JSON.stringify(oe)};let Ye;try{Ye=yield(yield fetch(`${qi(N.appConfig)}/${L.token}`,Ue)).json()}catch(Dt){throw rn.create("token-update-failed",{errorInfo:Dt})}if(Ye.error)throw rn.create("token-update-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw rn.create("token-update-no-token");return Ye.token})).apply(this,arguments)}function Jt(N,L){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,te.Z)(function*(N,L){const oe={method:"DELETE",headers:yield ps(N)};try{const Ye=yield(yield fetch(`${qi(N.appConfig)}/${L}`,oe)).json();if(Ye.error)throw rn.create("token-unsubscribe-failed",{errorInfo:Ye.error.message})}catch(Ue){throw rn.create("token-unsubscribe-failed",{errorInfo:Ue})}})).apply(this,arguments)}function qi({projectId:N}){return`https://fcmregistrations.googleapis.com/v1/projects/${N}/registrations`}function ps(N){return An.apply(this,arguments)}function An(){return(An=(0,te.Z)(function*({appConfig:N,installations:L}){const J=yield L.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${J}`})})).apply(this,arguments)}function xi({p256dh:N,auth:L,endpoint:J,vapidKey:oe}){const Ue={web:{endpoint:J,auth:L,p256dh:N}};return oe!==Ns&&(Ue.web.applicationPubKey=oe),Ue}const Ps=6048e5;function co(N){return qo.apply(this,arguments)}function qo(){return(qo=(0,te.Z)(function*(N){const L=yield ar(N.swRegistration,N.vapidKey),J={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:L.endpoint,auth:ui(L.getKey("auth")),p256dh:ui(L.getKey("p256dh"))},oe=yield O(N.firebaseDependencies);if(oe){if(zi(oe.subscriptionOptions,J))return Date.now()>=oe.createTime+Ps?R(N,{token:oe.token,createTime:Date.now(),subscriptionOptions:J}):oe.token;try{yield Jt(N.firebaseDependencies,oe.token)}catch(Ue){console.warn(Ue)}return Ee(N.firebaseDependencies,J)}return Ee(N.firebaseDependencies,J)})).apply(this,arguments)}function V(N){return P.apply(this,arguments)}function P(){return(P=(0,te.Z)(function*(N){const L=yield O(N.firebaseDependencies);L&&(yield Jt(N.firebaseDependencies,L.token),yield ye(N.firebaseDependencies));const J=yield N.swRegistration.pushManager.getSubscription();return!J||J.unsubscribe()})).apply(this,arguments)}function R(N,L){return X.apply(this,arguments)}function X(){return(X=(0,te.Z)(function*(N,L){try{const J=yield Pn(N.firebaseDependencies,L),oe=Object.assign(Object.assign({},L),{token:J,createTime:Date.now()});return yield k(N.firebaseDependencies,oe),J}catch(J){throw yield V(N),J}})).apply(this,arguments)}function Ee(N,L){return Et.apply(this,arguments)}function Et(){return(Et=(0,te.Z)(function*(N,L){const oe={token:yield Hn(N,L),createTime:Date.now(),subscriptionOptions:L};return yield k(N,oe),oe.token})).apply(this,arguments)}function ar(N,L){return sr.apply(this,arguments)}function sr(){return(sr=(0,te.Z)(function*(N,L){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Z(L)})})).apply(this,arguments)}function zi(N,L){return L.vapidKey===N.vapidKey&&L.endpoint===N.endpoint&&L.auth===N.auth&&L.p256dh===N.p256dh}function ws(N){const L={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function Wi(N,L){if(!L.notification)return;N.notification={};const J=L.notification.title;J&&(N.notification.title=J);const oe=L.notification.body;oe&&(N.notification.body=oe);const Ue=L.notification.image;Ue&&(N.notification.image=Ue)}(L,N),function Ys(N,L){!L.data||(N.data=L.data)}(L,N),function aa(N,L){if(!L.fcmOptions)return;N.fcmOptions={};const J=L.fcmOptions.link;J&&(N.fcmOptions.link=J);const oe=L.fcmOptions.analytics_label;oe&&(N.fcmOptions.analyticsLabel=oe)}(L,N),L}function Uu(N){return"object"==typeof N&&!!N&&Ji in N}function Bu(N,L){const J=[];for(let oe=0;oe<N.length;oe++)J.push(N.charAt(oe)),oe<L.length&&J.push(L.charAt(oe));return J.join("")}function ho(N){return rn.create("missing-app-config-values",{valueName:N})}Bu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Li{constructor(L,J,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ue=function Il(N){if(!N||!N.options)throw ho("App Configuration Object");if(!N.name)throw ho("App Name");const L=["projectId","apiKey","appId","messagingSenderId"],{options:J}=N;for(const oe of L)if(!J[oe])throw ho(oe);return{appName:N.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(L);this.firebaseDependencies={app:L,appConfig:Ue,installations:J,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function bs(N){return Da.apply(this,arguments)}function Da(){return(Da=(0,te.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(Ws,{scope:ai}),N.swRegistration.update().catch(()=>{})}catch(L){throw rn.create("failed-service-worker-registration",{browserErrorMessage:L.message})}})).apply(this,arguments)}function ko(N,L){return gs.apply(this,arguments)}function gs(){return(gs=(0,te.Z)(function*(N,L){if(!L&&!N.swRegistration&&(yield bs(N)),L||!N.swRegistration){if(!(L instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");N.swRegistration=L}})).apply(this,arguments)}function ua(N,L){return Za.apply(this,arguments)}function Za(){return(Za=(0,te.Z)(function*(N,L){L?N.vapidKey=L:N.vapidKey||(N.vapidKey=Ns)})).apply(this,arguments)}function Ka(){return(Ka=(0,te.Z)(function*(N,L){if(!navigator)throw rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rn.create("permission-blocked");return yield ua(N,null==L?void 0:L.vapidKey),yield ko(N,null==L?void 0:L.serviceWorkerRegistration),co(N)})).apply(this,arguments)}function Na(N,L,J){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,te.Z)(function*(N,L,J){const oe=Eu(L);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:J[Ji],message_name:J[Zs],message_time:J[fs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Eu(N){switch(N){case Ks.NOTIFICATION_CLICKED:return"notification_open";case Ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function la(){return(la=(0,te.Z)(function*(N,L){const J=L.data;if(!J.isFirebaseMessaging)return;N.onMessageHandler&&J.messageType===Ks.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(ws(J)):N.onMessageHandler.next(ws(J)));const oe=J.data;Uu(oe)&&"1"===oe[Go]&&(yield Na(N,J.messageType,oe))})).apply(this,arguments)}const Vs="@firebase/messaging",ca=N=>{const L=new Li(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",J=>function Ya(N,L){return la.apply(this,arguments)}(L,J)),L},bo=N=>{const L=N.getProvider("messaging").getImmediate();return{getToken:oe=>function ci(N,L){return Ka.apply(this,arguments)}(L,oe)}};function ms(){return zo.apply(this,arguments)}function zo(){return(zo=(0,te.Z)(function*(){try{yield(0,Me.eu)()}catch(N){return!1}return"undefined"!=typeof window&&(0,Me.hl)()&&(0,Me.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Us(){(0,Ne._registerComponent)(new Te.wA("messaging",ca,"PUBLIC")),(0,Ne._registerComponent)(new Te.wA("messaging-internal",bo,"PRIVATE")),(0,Ne.registerVersion)(Vs,"0.9.13"),(0,Ne.registerVersion)(Vs,"0.9.13","esm2017")}();const Qa="analytics",ol="firebase_id",To="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Co="https://www.googletagmanager.com/gtag/js",ur=new Le.Yd("@firebase/analytics");function Ja(N){return Promise.all(N.map(L=>L.catch(J=>J)))}function Ta(N,L){const J=document.createElement("script");J.src=`${Co}?l=${N}&id=${L}`,J.async=!0,document.head.appendChild(J)}function Bs(N,L,J,oe,Ue,Ye){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,te.Z)(function*(N,L,J,oe,Ue,Ye){const Dt=oe[Ue];try{if(Dt)yield L[Dt];else{const dn=(yield Ja(J)).find(Fn=>Fn.measurementId===Ue);dn&&(yield L[dn.appId])}}catch(sn){ur.error(sn)}N("config",Ue,Ye)})).apply(this,arguments)}function La(N,L,J,oe,Ue){return Os.apply(this,arguments)}function Os(){return(Os=(0,te.Z)(function*(N,L,J,oe,Ue){try{let Ye=[];if(Ue&&Ue.send_to){let Dt=Ue.send_to;Array.isArray(Dt)||(Dt=[Dt]);const sn=yield Ja(J);for(const dn of Dt){const Fn=sn.find(Rn=>Rn.measurementId===dn),Er=Fn&&L[Fn.appId];if(!Er){Ye=[];break}Ye.push(Er)}}0===Ye.length&&(Ye=Object.values(L)),yield Promise.all(Ye),N("event",oe,Ue||{})}catch(Ye){ur.error(Ye)}})).apply(this,arguments)}function fo(){const N=window.document.getElementsByTagName("script");for(const L of Object.values(N))if(L.src&&L.src.includes(Co))return L;return null}const es=new Me.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xs=new class Js{constructor(L={},J=1e3){this.throttleMetadata=L,this.intervalMillis=J}getThrottleMetadata(L){return this.throttleMetadata[L]}setThrottleMetadata(L,J){this.throttleMetadata[L]=J}deleteThrottleMetadata(L){delete this.throttleMetadata[L]}};function Va(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function fa(N){return ns.apply(this,arguments)}function ns(){return(ns=(0,te.Z)(function*(N){var L;const{appId:J,apiKey:oe}=N,Ue={method:"GET",headers:Va(oe)},Ye=To.replace("{app-id}",J),Dt=yield fetch(Ye,Ue);if(200!==Dt.status&&304!==Dt.status){let sn="";try{const dn=yield Dt.json();(null===(L=dn.error)||void 0===L?void 0:L.message)&&(sn=dn.error.message)}catch(dn){}throw es.create("config-fetch-failed",{httpStatus:Dt.status,responseMessage:sn})}return Dt.json()})).apply(this,arguments)}function Yr(N){return eo.apply(this,arguments)}function eo(){return(eo=(0,te.Z)(function*(N,L=Xs,J){const{appId:oe,apiKey:Ue,measurementId:Ye}=N.options;if(!oe)throw es.create("no-app-id");if(!Ue){if(Ye)return{measurementId:Ye,appId:oe};throw es.create("no-api-key")}const Dt=L.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},sn=new to;return setTimeout((0,te.Z)(function*(){sn.abort()}),void 0!==J?J:6e4),Ao({appId:oe,apiKey:Ue,measurementId:Ye},Dt,sn,L)})).apply(this,arguments)}function Ao(N,L,J){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,te.Z)(function*(N,{throttleEndTimeMillis:L,backoffCount:J},oe,Ue=Xs){const{appId:Ye,measurementId:Dt}=N;try{yield eu(oe,L)}catch(sn){if(Dt)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${sn.message}]`),{appId:Ye,measurementId:Dt};throw sn}try{const sn=yield fa(N);return Ue.deleteThrottleMetadata(Ye),sn}catch(sn){if(!Ti(sn)){if(Ue.deleteThrottleMetadata(Ye),Dt)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Dt} provided in the "measurementId" field in the local Firebase config. [${sn.message}]`),{appId:Ye,measurementId:Dt};throw sn}const dn=503===Number(sn.customData.httpStatus)?(0,Me.$s)(J,Ue.intervalMillis,30):(0,Me.$s)(J,Ue.intervalMillis),Fn={throttleEndTimeMillis:Date.now()+dn,backoffCount:J+1};return Ue.setThrottleMetadata(Ye,Fn),ur.debug(`Calling attemptFetch again in ${dn} millis`),Ao(N,Fn,oe,Ue)}})).apply(this,arguments)}function eu(N,L){return new Promise((J,oe)=>{const Ue=Math.max(L-Date.now(),0),Ye=setTimeout(J,Ue);N.addEventListener(()=>{clearTimeout(Ye),oe(es.create("fetch-throttle",{throttleEndTimeMillis:L}))})})}function Ti(N){if(!(N instanceof Me.ZR&&N.customData))return!1;const L=Number(N.customData.httpStatus);return 429===L||500===L||503===L||504===L}class to{constructor(){this.listeners=[]}addEventListener(L){this.listeners.push(L)}abort(){this.listeners.forEach(L=>L())}}function Lo(){return pa.apply(this,arguments)}function pa(){return(pa=(0,te.Z)(function*(){if(!(0,Me.hl)())return ur.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Me.eu)()}catch(N){return ur.warn(es.create("indexeddb-unavailable",{errorInfo:N}).message),!1}return!0})).apply(this,arguments)}function Ct(){return(Ct=(0,te.Z)(function*(N,L,J,oe,Ue,Ye,Dt){var sn;const dn=Yr(N);dn.then(lr=>{J[lr.measurementId]=lr.appId,N.options.measurementId&&lr.measurementId!==N.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>ur.error(lr)),L.push(dn);const Fn=Lo().then(lr=>{if(lr)return oe.getId()}),[Er,Rn]=yield Promise.all([dn,Fn]);fo()||Ta(Ye,Er.measurementId),Ue("js",new Date);const Ki=null!==(sn=null==Dt?void 0:Dt.config)&&void 0!==sn?sn:{};return Ki.origin="firebase",Ki.update=!0,null!=Rn&&(Ki[ol]=Rn),Ue("config",Er.measurementId,Ki),Er.measurementId})).apply(this,arguments)}class ri{constructor(L){this.app=L}_delete(){return delete A[this.app.options.appId],Promise.resolve()}}let A={},T=[];const E={};let q,W,x="dataLayer",re=!1;function qn(N,L,J){!function Kt(){const N=[];if((0,Me.ru)()&&N.push("This is a browser extension environment."),(0,Me.zI)()||N.push("Cookies are not available."),N.length>0){const L=N.map((oe,Ue)=>`(${Ue+1}) ${oe}`).join(" "),J=es.create("invalid-analytics-context",{errorInfo:L});ur.warn(J.message)}}();const oe=N.options.appId;if(!oe)throw es.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw es.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=A[oe])throw es.create("already-exists",{id:oe});if(!re){!function Qs(N){let L=[];Array.isArray(window[N])?L=window[N]:window[N]=L}(x);const{wrappedGtag:Ye,gtagCore:Dt}=function Xa(N,L,J,oe,Ue){let Ye=function(...Dt){window[oe].push(arguments)};return window[Ue]&&"function"==typeof window[Ue]&&(Ye=window[Ue]),window[Ue]=function da(N,L,J,oe){function Ye(){return(Ye=(0,te.Z)(function*(Dt,sn,dn){try{"event"===Dt?yield La(N,L,J,sn,dn):"config"===Dt?yield Bs(N,L,J,oe,sn,dn):N("set",sn)}catch(Fn){ur.error(Fn)}})).apply(this,arguments)}return function Ue(Dt,sn,dn){return Ye.apply(this,arguments)}}(Ye,N,L,J),{gtagCore:Ye,wrappedGtag:window[Ue]}}(A,T,E,x,"gtag");W=Ye,q=Dt,re=!0}return A[oe]=function Vo(N,L,J,oe,Ue,Ye,Dt){return Ct.apply(this,arguments)}(N,T,E,L,q,x,J),new ri(N)}function Ir(){return(Ir=(0,te.Z)(function*(N,L,J,oe,Ue){if(Ue&&Ue.global)N("event",J,oe);else{const Ye=yield L;N("event",J,Object.assign(Object.assign({},oe),{send_to:Ye}))}})).apply(this,arguments)}function Ua(){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,te.Z)(function*(){if((0,Me.ru)()||!(0,Me.zI)()||!(0,Me.hl)())return!1;try{return yield(0,Me.eu)()}catch(N){return!1}})).apply(this,arguments)}const hr="@firebase/analytics";!function ys(){(0,Ne._registerComponent)(new Te.wA(Qa,(L,{options:J})=>qn(L.getProvider("app").getImmediate(),L.getProvider("installations-internal").getImmediate(),J),"PUBLIC")),(0,Ne._registerComponent)(new Te.wA("analytics-internal",function N(L){try{const J=L.getProvider(Qa).getImmediate();return{logEvent:(oe,Ue,Ye)=>function nu(N,L,J,oe){N=(0,Me.m9)(N),function an(N,L,J,oe,Ue){return Ir.apply(this,arguments)}(W,A[N.app.options.appId],L,J,oe).catch(Ue=>ur.error(Ue))}(J,oe,Ue,Ye)}}catch(J){throw es.create("interop-component-reg-failed",{reason:J})}},"PRIVATE")),(0,Ne.registerVersion)(hr,"0.7.9"),(0,Ne.registerVersion)(hr,"0.7.9","esm2017")}();var bu=B(4408),Zi=B(7565);const Mo=new class Ui extends Zi.v{}(class Iu extends bu.o{constructor(L,J){super(L,J),this.scheduler=L,this.work=J}schedule(L,J=0){return J>0?super.schedule(L,J):(this.delay=J,this.state=L,this.scheduler.flush(this),this)}execute(L,J){return J>0||this.closed?super.execute(L,J):this._execute(L,J)}requestAsyncId(L,J,oe=0){return null!=oe&&oe>0||null==oe&&this.delay>0?super.requestAsyncId(L,J,oe):L.flush(this)}});var Yo=B(4986),ru=B(8505),ks=B(5363),_s=B(9468);const ju=new m.GfV("7.3.0"),po="__angularfire_symbol__analyticsIsSupportedValue",js="__angularfire_symbol__analyticsIsSupported",Uo="__angularfire_symbol__remoteConfigIsSupportedValue",Qo="__angularfire_symbol__remoteConfigIsSupported",$t="__angularfire_symbol__messagingIsSupportedValue",ya="__angularfire_symbol__messagingIsSupported";function go(N,L,J){if(L){if(1===L.length)return L[0];const Ye=L.filter(Dt=>Dt.app===J);if(1===Ye.length)return Ye[0]}return J.container.getProvider(N).getImmediate({optional:!0})}globalThis[js]||(globalThis[js]=Ua().then(N=>globalThis[po]=N).catch(()=>globalThis[po]=!1)),globalThis[ya]||(globalThis[ya]=ms().then(N=>globalThis[$t]=N).catch(()=>globalThis[$t]=!1)),globalThis[Qo]||(globalThis[Qo]=Rs().then(N=>globalThis[Uo]=N).catch(()=>globalThis[Uo]=!1));const Jl=(N,L)=>{const J=L?[L]:(0,y.C6)(),oe=[];return J.forEach(Ue=>{Ue.container.getProvider(N).instances.forEach(Dt=>{oe.includes(Dt)||oe.push(Dt)})}),oe};function ro(){}class $u{constructor(L,J=Mo){this.zone=L,this.delegate=J}now(){return this.delegate.now()}schedule(L,J,oe){const Ue=this.zone;return this.delegate.schedule(function(Dt){Ue.runGuarded(()=>{L.apply(this,[Dt])})},J,oe)}}class Jo{constructor(L){this.zone=L,this.task=null}call(L,J){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ro,{},ro,ro)),J.pipe((0,ru.b)({next:oe,complete:oe,error:oe})).subscribe(L).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let al=(()=>{class N{constructor(J){this.ngZone=J,this.outsideAngular=J.runOutsideAngular(()=>new $u(Zone.current)),this.insideAngular=J.run(()=>new $u(Zone.current,Yo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(J){return new(J||N)(m.LFG(m.R0b))},N.\u0275prov=m.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function mo(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function xo(N){return N.pipe((0,ks.Q)(mo().outsideAngular))}function Cl(N){return mo(),function $a(N){return function(J){return(J=J.lift(new Jo(N.ngZone))).pipe((0,_s.R)(N.outsideAngular),(0,ks.Q)(N.insideAngular))}}(mo())(N)}},6961:(Ot,$e,B)=>{B.d($e,{$Y:()=>$n,B0:()=>qs,FN:()=>bi,IX:()=>Lr,Jt:()=>ai,UJ:()=>Zt,Ym:()=>Rs,a1:()=>fs,aF:()=>Ws,bm:()=>_n,cF:()=>Zs,g6:()=>Ji,gE:()=>fe,gH:()=>st,iH:()=>Gi,oq:()=>Ns,pb:()=>zs,qm:()=>hi,sd:()=>hs,y4:()=>Qe});var m=B(5861),y=B(9681),te=B(2090),Ne=B(4859);const Me="firebasestorage.googleapis.com",Te="storageBucket";class _e extends te.ZR{constructor(G,ce){super(le(G),`Firebase Storage: ${ce} (${le(G)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_e.prototype)}_codeEquals(G){return le(G)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(G){this.customData.serverResponse=G,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function le(Z){return"storage/"+Z}function ie(){return new _e("unknown","An unknown error occurred, please check the error payload for server response.")}function at(){return new _e("canceled","User canceled the upload/download.")}function Xe(){return new _e("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function st(Z){return new _e("invalid-argument",Z)}function we(){return new _e("app-deleted","The Firebase app was deleted.")}function Qe(Z){return new _e("invalid-root-operation","The operation '"+Z+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function se(Z,G){return new _e("invalid-format","String does not match format '"+Z+"': "+G)}function Re(Z){throw new _e("internal-error","Internal error: "+Z)}class fe{constructor(G,ce){this.bucket=G,this.path_=ce}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const G=encodeURIComponent;return"/b/"+G(this.bucket)+"/o/"+G(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(G,ce){let me;try{me=fe.makeFromUrl(G,ce)}catch(Ve){return new fe(G,"")}if(""===me.path)return me;throw function Nt(Z){return new _e("invalid-default-bucket","Invalid default bucket '"+Z+"'.")}(G)}static makeFromUrl(G,ce){let me=null;const Ve="([A-Za-z0-9.\\-_]+)",Vt=new RegExp("^gs://"+Ve+"(/(.*))?$","i");function Dn(rn){rn.path_=decodeURIComponent(rn.path)}const Mn=ce.replace(/[.]/g,"\\."),Ft=[{regex:Vt,indices:{bucket:1,path:3},postModify:function rt(rn){"/"===rn.path.charAt(rn.path.length-1)&&(rn.path_=rn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Mn}/v[A-Za-z0-9_]+/b/${Ve}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Dn},{regex:new RegExp(`^https?://${ce===Me?"(?:storage.googleapis.com|storage.cloud.google.com)":ce}/${Ve}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Dn}];for(let rn=0;rn<Ft.length;rn++){const Hn=Ft[rn],fn=Hn.regex.exec(G);if(fn){let dr=fn[Hn.indices.path];dr||(dr=""),me=new fe(fn[Hn.indices.bucket],dr),Hn.postModify(me);break}}if(null==me)throw function At(Z){return new _e("invalid-url","Invalid URL '"+Z+"'.")}(G);return me}}class ze{constructor(G){this.promise_=Promise.reject(G)}getPromise(){return this.promise_}cancel(G=!1){}}function ht(Z){return"string"==typeof Z||Z instanceof String}function pn(Z){return nn()&&Z instanceof Blob}function nn(){return"undefined"!=typeof Blob}function yt(Z,G,ce,me){if(me<G)throw st(`Invalid value for '${Z}'. Expected ${G} or greater.`);if(me>ce)throw st(`Invalid value for '${Z}'. Expected ${ce} or less.`)}function je(Z,G,ce){let me=G;return null==ce&&(me=`https://${G}`),`${ce}://${me}/v0${Z}`}function gt(Z){const G=encodeURIComponent;let ce="?";for(const me in Z)Z.hasOwnProperty(me)&&(ce=ce+(G(me)+"=")+G(Z[me])+"&");return ce=ce.slice(0,-1),ce}var Mt=(()=>{return(Z=Mt||(Mt={}))[Z.NO_ERROR=0]="NO_ERROR",Z[Z.NETWORK_ERROR=1]="NETWORK_ERROR",Z[Z.ABORT=2]="ABORT",Mt;var Z})();class qt{constructor(G,ce,me,Ve,rt,Rt,Vt,jt,Dn,Xn,Mn){this.url_=G,this.method_=ce,this.headers_=me,this.body_=Ve,this.successCodes_=rt,this.additionalRetryCodes_=Rt,this.callback_=Vt,this.errorCallback_=jt,this.timeout_=Dn,this.progressCallback_=Xn,this.connectionFactory_=Mn,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,z)=>{this.resolve_=O,this.reject_=z,this.start_()})}start_(){const ce=(me,Ve)=>{const rt=this.resolve_,Rt=this.reject_,Vt=Ve.connection;if(Ve.wasSuccessCode)try{const jt=this.callback_(Vt,Vt.getResponse());!function St(Z){return void 0!==Z}(jt)?rt():rt(jt)}catch(jt){Rt(jt)}else if(null!==Vt){const jt=ie();jt.serverResponse=Vt.getErrorText(),Rt(this.errorCallback_?this.errorCallback_(Vt,jt):jt)}else Rt(Ve.canceled?this.appDelete_?we():at():function Ze(){return new _e("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?ce(0,new Cn(!1,null,!0)):this.backoffId_=function He(Z,G,ce){let me=1,Ve=null,rt=null,Rt=!1,Vt=0;function jt(){return 2===Vt}let Dn=!1;function Xn(...ye){Dn||(Dn=!0,G.apply(null,ye))}function Mn(ye){Ve=setTimeout(()=>{Ve=null,Z(z,jt())},ye)}function O(){rt&&clearTimeout(rt)}function z(ye,...Ke){if(Dn)return void O();if(ye)return O(),void Xn.call(null,ye,...Ke);if(jt()||Rt)return O(),void Xn.call(null,ye,...Ke);let Ft;me<64&&(me*=2),1===Vt?(Vt=2,Ft=0):Ft=1e3*(me+Math.random()),Mn(Ft)}let k=!1;function ee(ye){k||(k=!0,O(),!Dn&&(null!==Ve?(ye||(Vt=2),clearTimeout(Ve),Mn(0)):ye||(Vt=1)))}return Mn(0),rt=setTimeout(()=>{Rt=!0,ee(!0)},ce),ee}((me,Ve)=>{if(Ve)return void me(!1,new Cn(!1,null,!0));const rt=this.connectionFactory_();this.pendingConnection_=rt;const Rt=Vt=>{null!==this.progressCallback_&&this.progressCallback_(Vt.loaded,Vt.lengthComputable?Vt.total:-1)};null!==this.progressCallback_&&rt.addUploadProgressListener(Rt),rt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&rt.removeUploadProgressListener(Rt),this.pendingConnection_=null;const Vt=rt.getErrorCode()===Mt.NO_ERROR,jt=rt.getStatus();if(!Vt||this.isRetryStatusCode_(jt)){const Xn=rt.getErrorCode()===Mt.ABORT;return void me(!1,new Cn(!1,null,Xn))}const Dn=-1!==this.successCodes_.indexOf(jt);me(!0,new Cn(Dn,rt))})},ce,this.timeout_)}getPromise(){return this.promise_}cancel(G){this.canceled_=!0,this.appDelete_=G||!1,null!==this.backoffId_&&function vt(Z){Z(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(G){const ce=G>=500&&G<600,Ve=-1!==[408,429].indexOf(G),rt=-1!==this.additionalRetryCodes_.indexOf(G);return ce||Ve||rt}}class Cn{constructor(G,ce,me){this.wasSuccessCode=G,this.connection=ce,this.canceled=!!me}}function zn(...Z){const G=function Dr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==G){const ce=new G;for(let me=0;me<Z.length;me++)ce.append(Z[me]);return ce.getBlob()}if(nn())return new Blob(Z);throw new _e("unsupported-environment","This browser doesn't seem to support creating Blobs")}const _n={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wn{constructor(G,ce){this.data=G,this.contentType=ce||null}}function hi(Z,G){switch(Z){case _n.RAW:return new wn(vi(G));case _n.BASE64:case _n.BASE64URL:return new wn(Nr(Z,G));case _n.DATA_URL:return new wn(function Jr(Z){const G=new si(Z);return G.base64?Nr(_n.BASE64,G.rest):function ii(Z){let G;try{G=decodeURIComponent(Z)}catch(ce){throw se(_n.DATA_URL,"Malformed data URL.")}return vi(G)}(G.rest)}(G),function Ut(Z){return new si(Z).contentType}(G))}throw ie()}function vi(Z){const G=[];for(let ce=0;ce<Z.length;ce++){let me=Z.charCodeAt(ce);me<=127?G.push(me):me<=2047?G.push(192|me>>6,128|63&me):55296==(64512&me)?ce<Z.length-1&&56320==(64512&Z.charCodeAt(ce+1))?(me=65536|(1023&me)<<10|1023&Z.charCodeAt(++ce),G.push(240|me>>18,128|me>>12&63,128|me>>6&63,128|63&me)):G.push(239,191,189):56320==(64512&me)?G.push(239,191,189):G.push(224|me>>12,128|me>>6&63,128|63&me)}return new Uint8Array(G)}function Nr(Z,G){switch(Z){case _n.BASE64:{const Ve=-1!==G.indexOf("-"),rt=-1!==G.indexOf("_");if(Ve||rt)throw se(Z,"Invalid character '"+(Ve?"-":"_")+"' found: is it base64url encoded?");break}case _n.BASE64URL:{const Ve=-1!==G.indexOf("+"),rt=-1!==G.indexOf("/");if(Ve||rt)throw se(Z,"Invalid character '"+(Ve?"+":"/")+"' found: is it base64 encoded?");G=G.replace(/-/g,"+").replace(/_/g,"/");break}}let ce;try{ce=function mn(Z){return atob(Z)}(G)}catch(Ve){throw se(Z,"Invalid character found")}const me=new Uint8Array(ce.length);for(let Ve=0;Ve<ce.length;Ve++)me[Ve]=ce.charCodeAt(Ve);return me}class si{constructor(G){this.base64=!1,this.contentType=null;const ce=G.match(/^data:([^,]+)?,/);if(null===ce)throw se(_n.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const me=ce[1]||null;null!=me&&(this.base64=function Qt(Z,G){return Z.length>=G.length&&Z.substring(Z.length-G.length)===G}(me,";base64"),this.contentType=this.base64?me.substring(0,me.length-7):me),this.rest=G.substring(G.indexOf(",")+1)}}class Zt{constructor(G,ce){let me=0,Ve="";pn(G)?(this.data_=G,me=G.size,Ve=G.type):G instanceof ArrayBuffer?(ce?this.data_=new Uint8Array(G):(this.data_=new Uint8Array(G.byteLength),this.data_.set(new Uint8Array(G))),me=this.data_.length):G instanceof Uint8Array&&(ce?this.data_=G:(this.data_=new Uint8Array(G.length),this.data_.set(G)),me=G.length),this.size_=me,this.type_=Ve}size(){return this.size_}type(){return this.type_}slice(G,ce){if(pn(this.data_)){const Ve=function en(Z,G,ce){return Z.webkitSlice?Z.webkitSlice(G,ce):Z.mozSlice?Z.mozSlice(G,ce):Z.slice?Z.slice(G,ce):null}(this.data_,G,ce);return null===Ve?null:new Zt(Ve)}{const me=new Uint8Array(this.data_.buffer,G,ce-G);return new Zt(me,!0)}}static getBlob(...G){if(nn()){const ce=G.map(me=>me instanceof Zt?me.data_:me);return new Zt(zn.apply(null,ce))}{const ce=G.map(Rt=>ht(Rt)?hi(_n.RAW,Rt).data:Rt.data_);let me=0;ce.forEach(Rt=>{me+=Rt.byteLength});const Ve=new Uint8Array(me);let rt=0;return ce.forEach(Rt=>{for(let Vt=0;Vt<Rt.length;Vt++)Ve[rt++]=Rt[Vt]}),new Zt(Ve,!0)}}uploadData(){return this.data_}}function Sr(Z){let G;try{G=JSON.parse(Z)}catch(ce){return null}return function Yt(Z){return"object"==typeof Z&&!Array.isArray(Z)}(G)?G:null}function Qi(Z){const G=Z.lastIndexOf("/",Z.length-2);return-1===G?Z:Z.slice(G+1)}function zr(Z,G){return G}class Vn{constructor(G,ce,me,Ve){this.server=G,this.local=ce||G,this.writable=!!me,this.xform=Ve||zr}}let pe=null;function Ce(){if(pe)return pe;const Z=[];Z.push(new Vn("bucket")),Z.push(new Vn("generation")),Z.push(new Vn("metageneration")),Z.push(new Vn("name","fullPath",!0));const ce=new Vn("name");ce.xform=function G(rt,Rt){return function De(Z){return!ht(Z)||Z.length<2?Z:Qi(Z)}(Rt)},Z.push(ce);const Ve=new Vn("size");return Ve.xform=function me(rt,Rt){return void 0!==Rt?Number(Rt):Rt},Z.push(Ve),Z.push(new Vn("timeCreated")),Z.push(new Vn("updated")),Z.push(new Vn("md5Hash",null,!0)),Z.push(new Vn("cacheControl",null,!0)),Z.push(new Vn("contentDisposition",null,!0)),Z.push(new Vn("contentEncoding",null,!0)),Z.push(new Vn("contentLanguage",null,!0)),Z.push(new Vn("contentType",null,!0)),Z.push(new Vn("metadata","customMetadata",!0)),pe=Z,pe}function Fe(Z,G,ce){const me=Sr(G);return null===me?null:function ve(Z,G,ce){const me={type:"file"},Ve=ce.length;for(let rt=0;rt<Ve;rt++){const Rt=ce[rt];me[Rt.local]=Rt.xform(me,G[Rt.server])}return function ft(Z,G){Object.defineProperty(Z,"ref",{get:function ce(){const rt=new fe(Z.bucket,Z.fullPath);return G._makeStorageReference(rt)}})}(me,Z),me}(Z,me,ce)}function Lt(Z,G){const ce={},me=G.length;for(let Ve=0;Ve<me;Ve++){const rt=G[Ve];rt.writable&&(ce[rt.server]=Z[rt.local])}return JSON.stringify(ce)}const Bt="prefixes";class nr{constructor(G,ce,me,Ve){this.url=G,this.method=ce,this.handler=me,this.timeout=Ve,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _r(Z){if(!Z)throw ie()}function Ei(Z,G){return function ce(me,Ve){const rt=Fe(Z,Ve,G);return _r(null!==rt),rt}}function cn(Z){return function G(ce,me){let Ve;return Ve=401===ce.getStatus()?ce.getErrorText().includes("Firebase App Check token is invalid")?function lt(){return new _e("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Be(){return new _e("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===ce.getStatus()?function mt(Z){return new _e("quota-exceeded","Quota for bucket '"+Z+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(Z.bucket):403===ce.getStatus()?function wt(Z){return new _e("unauthorized","User does not have permission to access '"+Z+"'.")}(Z.path):me,Ve.serverResponse=me.serverResponse,Ve}}function it(Z){const G=cn(Z);return function ce(me,Ve){let rt=G(me,Ve);return 404===me.getStatus()&&(rt=function be(Z){return new _e("object-not-found","Object '"+Z+"' does not exist.")}(Z.path)),rt.serverResponse=Ve.serverResponse,rt}}function Mr(Z,G,ce){const Ve=je(G.fullServerUrl(),Z.host,Z._protocol),Rt=Z.maxOperationRetryTime,Vt=new nr(Ve,"GET",Ei(Z,ce),Rt);return Vt.errorHandler=it(G),Vt}function $r(Z,G,ce,me,Ve){const rt={};rt.prefix=G.isRoot?"":G.path+"/",ce&&ce.length>0&&(rt.delimiter=ce),me&&(rt.pageToken=me),Ve&&(rt.maxResults=Ve);const Vt=je(G.bucketOnlyServerUrl(),Z.host,Z._protocol),Dn=Z.maxOperationRetryTime,Xn=new nr(Vt,"GET",function jr(Z,G){return function ce(me,Ve){const rt=function hn(Z,G,ce){const me=Sr(ce);return null===me?null:function yr(Z,G,ce){const me={prefixes:[],items:[],nextPageToken:ce.nextPageToken};if(ce[Bt])for(const Ve of ce[Bt]){const rt=Ve.replace(/\/$/,""),Rt=Z._makeStorageReference(new fe(G,rt));me.prefixes.push(Rt)}if(ce.items)for(const Ve of ce.items){const rt=Z._makeStorageReference(new fe(G,Ve.name));me.items.push(rt)}return me}(Z,G,me)}(Z,G,Ve);return _r(null!==rt),rt}}(Z,G.bucket),Dn);return Xn.urlParams=rt,Xn.errorHandler=cn(G),Xn}function ei(Z,G,ce){const me=Object.assign({},ce);return me.fullPath=Z.path,me.size=G.size(),me.contentType||(me.contentType=function pi(Z,G){return Z&&Z.contentType||G&&G.type()||"application/octet-stream"}(null,G)),me}class Wr{constructor(G,ce,me,Ve){this.current=G,this.total=ce,this.finalized=!!me,this.metadata=Ve||null}}function kr(Z,G){let ce=null;try{ce=Z.getResponseHeader("X-Goog-Upload-Status")}catch(Ve){_r(!1)}return _r(!!ce&&-1!==(G||["active"]).indexOf(ce)),ce}const bi={STATE_CHANGED:"state_changed"},$n={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gi(Z){switch(Z){case"running":case"pausing":case"canceling":return $n.RUNNING;case"paused":return $n.PAUSED;case"success":return $n.SUCCESS;case"canceled":return $n.CANCELED;default:return $n.ERROR}}class rr{constructor(G,ce,me){if(function Xt(Z){return"function"==typeof Z}(G)||null!=ce||null!=me)this.next=G,this.error=null!=ce?ce:void 0,this.complete=null!=me?me:void 0;else{const rt=G;this.next=rt.next,this.error=rt.error,this.complete=rt.complete}}}function ti(Z){return(...G)=>{Promise.resolve().then(()=>Z(...G))}}class Si extends class Sn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mt.NO_ERROR,this.sendPromise_=new Promise(G=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mt.ABORT,G()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mt.NETWORK_ERROR,G()}),this.xhr_.addEventListener("load",()=>{G()})})}send(G,ce,me,Ve){if(this.sent_)throw Re("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(ce,G,!0),void 0!==Ve)for(const rt in Ve)Ve.hasOwnProperty(rt)&&this.xhr_.setRequestHeader(rt,Ve[rt].toString());return void 0!==me?this.xhr_.send(me):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Re("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Re("cannot .getStatus() before sending");try{return this.xhr_.status}catch(G){return-1}}getResponse(){if(!this.sent_)throw Re("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Re("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(G){return this.xhr_.getResponseHeader(G)}addUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",G)}removeUploadProgressListener(G){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",G)}}{initXhr(){this.xhr_.responseType="text"}}function Zr(){return new Si}class Lr{constructor(G,ce,me=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=G,this._blob=ce,this._metadata=me,this._mappings=Ce(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ve=>{this._request=void 0,this._chunkMultiplier=1,Ve._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Ve,this._transition("error"))},this._metadataErrorHandler=Ve=>{this._request=void 0,Ve._codeEquals("canceled")?this.completeTransitions_():(this._error=Ve,this._transition("error"))},this._promise=new Promise((Ve,rt)=>{this._resolve=Ve,this._reject=rt,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const G=this._transferred;return ce=>this._updateProgress(G+ce)}_shouldDoResumable(G){return G.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(G){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([ce,me])=>{switch(this._state){case"running":G(ce,me);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((G,ce)=>{const me=function Pt(Z,G,ce,me,Ve){const rt=G.bucketOnlyServerUrl(),Rt=ei(G,me,Ve),Vt={name:Rt.fullPath},jt=je(rt,Z.host,Z._protocol),Xn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${me.size()}`,"X-Goog-Upload-Header-Content-Type":Rt.contentType,"Content-Type":"application/json; charset=utf-8"},Mn=Lt(Rt,ce),k=new nr(jt,"POST",function z(ee){let ye;kr(ee);try{ye=ee.getResponseHeader("X-Goog-Upload-URL")}catch(Ke){_r(!1)}return _r(ht(ye)),ye},Z.maxUploadRetryTime);return k.urlParams=Vt,k.headers=Xn,k.body=Mn,k.errorHandler=cn(G),k}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ve=this._ref.storage._makeRequest(me,Zr,G,ce);this._request=Ve,Ve.getPromise().then(rt=>{this._request=void 0,this._uploadUrl=rt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const G=this._uploadUrl;this._resolveToken((ce,me)=>{const Ve=function kt(Z,G,ce,me){const jt=new nr(ce,"POST",function rt(Dn){const Xn=kr(Dn,["active","final"]);let Mn=null;try{Mn=Dn.getResponseHeader("X-Goog-Upload-Size-Received")}catch(z){_r(!1)}Mn||_r(!1);const O=Number(Mn);return _r(!isNaN(O)),new Wr(O,me.size(),"final"===Xn)},Z.maxUploadRetryTime);return jt.headers={"X-Goog-Upload-Command":"query"},jt.errorHandler=cn(G),jt}(this._ref.storage,this._ref._location,G,this._blob),rt=this._ref.storage._makeRequest(Ve,Zr,ce,me);this._request=rt,rt.getPromise().then(Rt=>{Rt=Rt,this._request=void 0,this._updateProgress(Rt.current),this._needToFetchStatus=!1,Rt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const G=262144*this._chunkMultiplier,ce=new Wr(this._transferred,this._blob.size()),me=this._uploadUrl;this._resolveToken((Ve,rt)=>{let Rt;try{Rt=function xr(Z,G,ce,me,Ve,rt,Rt,Vt){const jt=new Wr(0,0);if(Rt?(jt.current=Rt.current,jt.total=Rt.total):(jt.current=0,jt.total=me.size()),me.size()!==jt.total)throw function ut(){return new _e("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const Dn=jt.total-jt.current;let Xn=Dn;Ve>0&&(Xn=Math.min(Xn,Ve));const Mn=jt.current,k={"X-Goog-Upload-Command":Xn===Dn?"upload, finalize":"upload","X-Goog-Upload-Offset":`${jt.current}`},ee=me.slice(Mn,Mn+Xn);if(null===ee)throw Xe();const Ft=new nr(ce,"POST",function ye(rn,Hn){const fn=kr(rn,["active","final"]),Pn=jt.current+Xn,dr=me.size();let Jt;return Jt="final"===fn?Ei(G,rt)(rn,Hn):null,new Wr(Pn,dr,"final"===fn,Jt)},G.maxUploadRetryTime);return Ft.headers=k,Ft.body=ee.uploadData(),Ft.progressCallback=Vt||null,Ft.errorHandler=cn(Z),Ft}(this._ref._location,this._ref.storage,me,this._blob,G,this._mappings,ce,this._makeProgressCallback())}catch(jt){return this._error=jt,void this._transition("error")}const Vt=this._ref.storage._makeRequest(Rt,Zr,Ve,rt);this._request=Vt,Vt.getPromise().then(jt=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(jt.current),jt.finalized?(this._metadata=jt.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((G,ce)=>{const me=Mr(this._ref.storage,this._ref._location,this._mappings),Ve=this._ref.storage._makeRequest(me,Zr,G,ce);this._request=Ve,Ve.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((G,ce)=>{const me=function Or(Z,G,ce,me,Ve){const rt=G.bucketOnlyServerUrl(),Rt={"X-Goog-Upload-Protocol":"multipart"},jt=function Vt(){let Ft="";for(let rn=0;rn<2;rn++)Ft+=Math.random().toString().slice(2);return Ft}();Rt["Content-Type"]="multipart/related; boundary="+jt;const Dn=ei(G,me,Ve),Xn=Lt(Dn,ce),z=Zt.getBlob("--"+jt+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Xn+"\r\n--"+jt+"\r\nContent-Type: "+Dn.contentType+"\r\n\r\n",me,"\r\n--"+jt+"--");if(null===z)throw Xe();const k={name:Dn.fullPath},ee=je(rt,Z.host,Z._protocol),Ke=Z.maxUploadRetryTime,Je=new nr(ee,"POST",Ei(Z,ce),Ke);return Je.urlParams=k,Je.headers=Rt,Je.body=z.uploadData(),Je.errorHandler=cn(G),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ve=this._ref.storage._makeRequest(me,Zr,G,ce);this._request=Ve,Ve.getPromise().then(rt=>{this._request=void 0,this._metadata=rt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(G){const ce=this._transferred;this._transferred=G,this._transferred!==ce&&this._notifyObservers()}_transition(G){if(this._state!==G)switch(G){case"canceling":case"pausing":this._state=G,void 0!==this._request&&this._request.cancel();break;case"running":const ce="paused"===this._state;this._state=G,ce&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=G,this._notifyObservers();break;case"canceled":this._error=at(),this._state=G,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const G=gi(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:G,metadata:this._metadata,task:this,ref:this._ref}}on(G,ce,me,Ve){const rt=new rr(ce||void 0,me||void 0,Ve||void 0);return this._addObserver(rt),()=>{this._removeObserver(rt)}}then(G,ce){return this._promise.then(G,ce)}catch(G){return this.then(null,G)}_addObserver(G){this._observers.push(G),this._notifyObserver(G)}_removeObserver(G){const ce=this._observers.indexOf(G);-1!==ce&&this._observers.splice(ce,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(ce=>{this._notifyObserver(ce)})}_finishPromise(){if(void 0!==this._resolve){let G=!0;switch(gi(this._state)){case $n.SUCCESS:ti(this._resolve.bind(null,this.snapshot))();break;case $n.CANCELED:case $n.ERROR:ti(this._reject.bind(null,this._error))();break;default:G=!1}G&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(G){switch(gi(this._state)){case $n.RUNNING:case $n.PAUSED:G.next&&ti(G.next.bind(G,this.snapshot))();break;case $n.SUCCESS:G.complete&&ti(G.complete.bind(G))();break;default:G.error&&ti(G.error.bind(G,this._error))()}}resume(){const G="paused"===this._state||"pausing"===this._state;return G&&this._transition("running"),G}pause(){const G="running"===this._state;return G&&this._transition("pausing"),G}cancel(){const G="running"===this._state||"pausing"===this._state;return G&&this._transition("canceling"),G}}class ir{constructor(G,ce){this._service=G,this._location=ce instanceof fe?ce:fe.makeFromUrl(ce,G.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(G,ce){return new ir(G,ce)}get root(){const G=new fe(this._location.bucket,"");return this._newRef(this._service,G)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qi(this._location.path)}get storage(){return this._service}get parent(){const G=function Xr(Z){if(0===Z.length)return null;const G=Z.lastIndexOf("/");return-1===G?"":Z.slice(0,G)}(this._location.path);if(null===G)return null;const ce=new fe(this._location.bucket,G);return new ir(this._service,ce)}_throwIfRoot(G){if(""===this._location.path)throw Qe(G)}}function xs(Z,G,ce){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(Z,G,ce){const Ve=yield ji(Z,{pageToken:ce});G.prefixes.push(...Ve.prefixes),G.items.push(...Ve.items),null!=Ve.nextPageToken&&(yield xs(Z,G,Ve.nextPageToken))})).apply(this,arguments)}function ji(Z,G){null!=G&&"number"==typeof G.maxResults&&yt("options.maxResults",1,1e3,G.maxResults);const ce=G||{},me=$r(Z.storage,Z._location,"/",ce.pageToken,ce.maxResults);return Z.storage.makeRequestWithTokens(me,Zr)}function Oo(Z){Z._throwIfRoot("getDownloadURL");const G=function fi(Z,G,ce){const Ve=je(G.fullServerUrl(),Z.host,Z._protocol),Rt=Z.maxOperationRetryTime,Vt=new nr(Ve,"GET",function wi(Z,G){return function ce(me,Ve){const rt=Fe(Z,Ve,G);return _r(null!==rt),function _t(Z,G,ce,me){const Ve=Sr(G);if(null===Ve||!ht(Ve.downloadTokens))return null;const rt=Ve.downloadTokens;if(0===rt.length)return null;const Rt=encodeURIComponent;return rt.split(",").map(Dn=>{const Mn=Z.fullPath;return je("/b/"+Rt(Z.bucket)+"/o/"+Rt(Mn),ce,me)+gt({alt:"media",token:Dn})})[0]}(rt,Ve,Z.host,Z._protocol)}}(Z,ce),Rt);return Vt.errorHandler=it(G),Vt}(Z.storage,Z._location,Ce());return Z.storage.makeRequestWithTokens(G,Zr).then(ce=>{if(null===ce)throw function We(){return new _e("no-download-url","The given file does not have any download URLs.")}();return ce})}function Hi(Z,G){const ce=function Wn(Z,G){const ce=G.split("/").filter(me=>me.length>0).join("/");return 0===Z.length?ce:Z+"/"+ce}(Z._location.path,G),me=new fe(Z._location.bucket,ce);return new ir(Z.storage,me)}function Ie(Z,G){if(Z instanceof Wt){const ce=Z;if(null==ce._bucket)throw function he(){return new _e("no-default-bucket","No default bucket found. Did you set the '"+Te+"' property when initializing the app?")}();const me=new ir(ce,ce._bucket);return null!=G?Ie(me,G):me}return void 0!==G?Hi(Z,G):Z}function qe(Z,G){if(G&&function Ls(Z){return/^[A-Za-z]+:\/\//.test(Z)}(G)){if(Z instanceof Wt)return function Pe(Z,G){return new ir(Z,G)}(Z,G);throw st("To use ref(service, url), the first argument must be a Storage instance.")}return Ie(Z,G)}function ct(Z,G){const ce=null==G?void 0:G[Te];return null==ce?null:fe.makeFromBucketSpec(ce,Z)}class Wt{constructor(G,ce,me,Ve,rt){this.app=G,this._authProvider=ce,this._appCheckProvider=me,this._url=Ve,this._firebaseVersion=rt,this._bucket=null,this._host=Me,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ve?fe.makeFromBucketSpec(Ve,this._host):ct(this._host,this.app.options)}get host(){return this._host}set host(G){this._host=G,this._bucket=null!=this._url?fe.makeFromBucketSpec(this._url,G):ct(G,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(G){yt("time",0,Number.POSITIVE_INFINITY,G),this._maxUploadRetryTime=G}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(G){yt("time",0,Number.POSITIVE_INFINITY,G),this._maxOperationRetryTime=G}_getAuthToken(){var G=this;return(0,m.Z)(function*(){if(G._overrideAuthToken)return G._overrideAuthToken;const ce=G._authProvider.getImmediate({optional:!0});if(ce){const me=yield ce.getToken();if(null!==me)return me.accessToken}return null})()}_getAppCheckToken(){var G=this;return(0,m.Z)(function*(){const ce=G._appCheckProvider.getImmediate({optional:!0});return ce?(yield ce.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(G=>G.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(G){return new ir(this,G)}_makeRequest(G,ce,me,Ve){if(this._deleted)return new ze(we());{const rt=function br(Z,G,ce,me,Ve,rt){const Rt=gt(Z.urlParams),Vt=Z.url+Rt,jt=Object.assign({},Z.headers);return function Yn(Z,G){G&&(Z["X-Firebase-GMPID"]=G)}(jt,G),function En(Z,G){null!==G&&G.length>0&&(Z.Authorization="Firebase "+G)}(jt,ce),function fr(Z,G){Z["X-Firebase-Storage-Version"]="webjs/"+(null!=G?G:"AppManager")}(jt,rt),function Qn(Z,G){null!==G&&(Z["X-Firebase-AppCheck"]=G)}(jt,me),new qt(Vt,Z.method,jt,Z.body,Z.successCodes,Z.additionalRetryCodes,Z.handler,Z.errorHandler,Z.timeout,Z.progressCallback,Ve)}(G,this._appId,me,Ve,ce,this._firebaseVersion);return this._requests.add(rt),rt.getPromise().then(()=>this._requests.delete(rt),()=>this._requests.delete(rt)),rt}}makeRequestWithTokens(G,ce){var me=this;return(0,m.Z)(function*(){const[Ve,rt]=yield Promise.all([me._getAuthToken(),me._getAppCheckToken()]);return me._makeRequest(G,ce,Ve,rt).getPromise()})()}}const Jn="@firebase/storage",Zn="storage";function qs(Z,G,ce){return function ni(Z,G,ce){return Z._throwIfRoot("uploadBytesResumable"),new Lr(Z,new Zt(G),ce)}(Z=(0,te.m9)(Z),G,ce)}function hs(Z){return function $i(Z){Z._throwIfRoot("getMetadata");const G=Mr(Z.storage,Z._location,Ce());return Z.storage.makeRequestWithTokens(G,Zr)}(Z=(0,te.m9)(Z))}function Rs(Z,G){return function Eo(Z,G){Z._throwIfRoot("updateMetadata");const ce=function Ss(Z,G,ce,me){const rt=je(G.fullServerUrl(),Z.host,Z._protocol),Vt=Lt(ce,me),Dn=Z.maxOperationRetryTime,Xn=new nr(rt,"PATCH",Ei(Z,me),Dn);return Xn.headers={"Content-Type":"application/json; charset=utf-8"},Xn.body=Vt,Xn.errorHandler=it(G),Xn}(Z.storage,Z._location,G,Ce());return Z.storage.makeRequestWithTokens(ce,Zr)}(Z=(0,te.m9)(Z),G)}function zs(Z,G){return ji(Z=(0,te.m9)(Z),G)}function Ws(Z){return function Es(Z){const G={prefixes:[],items:[]};return xs(Z,G).then(()=>G)}(Z=(0,te.m9)(Z))}function ai(Z){return Oo(Z=(0,te.m9)(Z))}function Ns(Z){return function vr(Z){Z._throwIfRoot("deleteObject");const G=function ls(Z,G){const me=je(G.fullServerUrl(),Z.host,Z._protocol),Vt=new nr(me,"DELETE",function Rt(jt,Dn){},Z.maxOperationRetryTime);return Vt.successCodes=[200,204],Vt.errorHandler=it(G),Vt}(Z.storage,Z._location);return Z.storage.makeRequestWithTokens(G,Zr)}(Z=(0,te.m9)(Z))}function Gi(Z,G){return qe(Z=(0,te.m9)(Z),G)}function Ji(Z,G){return Hi(Z,G)}function Zs(Z=(0,y.getApp)(),G){return Z=(0,te.m9)(Z),(0,y._getProvider)(Z,Zn).getImmediate({identifier:G})}function fs(Z,G,ce,me={}){!function xt(Z,G,ce,me={}){Z.host=`${G}:${ce}`,Z._protocol="http";const{mockUserToken:Ve}=me;Ve&&(Z._overrideAuthToken="string"==typeof Ve?Ve:(0,te.Sg)(Ve,Z.app.options.projectId))}(Z,G,ce,me)}function Ks(Z,{instanceIdentifier:G}){const ce=Z.getProvider("app").getImmediate(),me=Z.getProvider("auth-internal"),Ve=Z.getProvider("app-check-internal");return new Wt(ce,me,Ve,G,y.SDK_VERSION)}!function ui(){(0,y._registerComponent)(new Ne.wA(Zn,Ks,"PUBLIC").setMultipleInstances(!0)),(0,y.registerVersion)(Jn,"0.9.6",""),(0,y.registerVersion)(Jn,"0.9.6","esm2017")}()},2090:(Ot,$e,B)=>{B.d($e,{$s:()=>Wn,BH:()=>mt,G6:()=>st,L:()=>Ae,LL:()=>He,Mn:()=>ut,Sg:()=>Be,UG:()=>Ze,US:()=>Te,ZB:()=>ie,ZR:()=>ze,b$:()=>Nt,d:()=>he,eu:()=>Qe,hl:()=>we,jU:()=>at,m9:()=>Vn,ne:()=>zn,pd:()=>br,r3:()=>gt,ru:()=>At,tV:()=>_e,uI:()=>wt,vZ:()=>En,w1:()=>Xe,xO:()=>Yn,xb:()=>qt,z$:()=>lt,zI:()=>se,zd:()=>Qn});const Ne=function(pe){const De=[];let Ce=0;for(let ft=0;ft<pe.length;ft++){let ve=pe.charCodeAt(ft);ve<128?De[Ce++]=ve:ve<2048?(De[Ce++]=ve>>6|192,De[Ce++]=63&ve|128):55296==(64512&ve)&&ft+1<pe.length&&56320==(64512&pe.charCodeAt(ft+1))?(ve=65536+((1023&ve)<<10)+(1023&pe.charCodeAt(++ft)),De[Ce++]=ve>>18|240,De[Ce++]=ve>>12&63|128,De[Ce++]=ve>>6&63|128,De[Ce++]=63&ve|128):(De[Ce++]=ve>>12|224,De[Ce++]=ve>>6&63|128,De[Ce++]=63&ve|128)}return De},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,De){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ce=De?this.byteToCharMapWebSafe_:this.byteToCharMap_,ft=[];for(let ve=0;ve<pe.length;ve+=3){const Fe=pe[ve],_t=ve+1<pe.length,Lt=_t?pe[ve+1]:0,Bt=ve+2<pe.length,on=Bt?pe[ve+2]:0;let nr=(15&Lt)<<2|on>>6,_r=63&on;Bt||(_r=64,_t||(nr=64)),ft.push(Ce[Fe>>2],Ce[(3&Fe)<<4|Lt>>4],Ce[nr],Ce[_r])}return ft.join("")},encodeString(pe,De){return this.HAS_NATIVE_SUPPORT&&!De?btoa(pe):this.encodeByteArray(Ne(pe),De)},decodeString(pe,De){return this.HAS_NATIVE_SUPPORT&&!De?atob(pe):function(pe){const De=[];let Ce=0,ft=0;for(;Ce<pe.length;){const ve=pe[Ce++];if(ve<128)De[ft++]=String.fromCharCode(ve);else if(ve>191&&ve<224){const Fe=pe[Ce++];De[ft++]=String.fromCharCode((31&ve)<<6|63&Fe)}else if(ve>239&&ve<365){const Bt=((7&ve)<<18|(63&pe[Ce++])<<12|(63&pe[Ce++])<<6|63&pe[Ce++])-65536;De[ft++]=String.fromCharCode(55296+(Bt>>10)),De[ft++]=String.fromCharCode(56320+(1023&Bt))}else{const Fe=pe[Ce++],_t=pe[Ce++];De[ft++]=String.fromCharCode((15&ve)<<12|(63&Fe)<<6|63&_t)}}return De.join("")}(this.decodeStringToByteArray(pe,De))},decodeStringToByteArray(pe,De){this.init_();const Ce=De?this.charToByteMapWebSafe_:this.charToByteMap_,ft=[];for(let ve=0;ve<pe.length;){const Fe=Ce[pe.charAt(ve++)],Lt=ve<pe.length?Ce[pe.charAt(ve)]:0;++ve;const on=ve<pe.length?Ce[pe.charAt(ve)]:64;++ve;const hn=ve<pe.length?Ce[pe.charAt(ve)]:64;if(++ve,null==Fe||null==Lt||null==on||null==hn)throw Error();ft.push(Fe<<2|Lt>>4),64!==on&&(ft.push(Lt<<4&240|on>>2),64!==hn&&ft.push(on<<6&192|hn))}return ft},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},Ae=function(pe){return function(pe){const De=Ne(pe);return Te.encodeByteArray(De,!0)}(pe).replace(/\./g,"")},_e=function(pe){try{return Te.decodeString(pe,!0)}catch(De){console.error("base64Decode failed: ",De)}return null};function ie(pe,De){if(!(De instanceof Object))return De;switch(De.constructor){case Date:return new Date(De.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return De}for(const Ce in De)!De.hasOwnProperty(Ce)||!be(Ce)||(pe[Ce]=ie(pe[Ce],De[Ce]));return pe}function be(pe){return"__proto__"!==pe}class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((De,Ce)=>{this.resolve=De,this.reject=Ce})}wrapCallback(De){return(Ce,ft)=>{Ce?this.reject(Ce):this.resolve(ft),"function"==typeof De&&(this.promise.catch(()=>{}),1===De.length?De(Ce):De(Ce,ft))}}}function Be(pe,De){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ft=De||"demo-project",ve=pe.iat||0,Fe=pe.sub||pe.user_id;if(!Fe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _t=Object.assign({iss:`https://securetoken.google.com/${ft}`,aud:ft,iat:ve,exp:ve+3600,auth_time:ve,sub:Fe,user_id:Fe,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(_t)),""].join(".")}function lt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function Ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(pe){return!1}}function at(){return"object"==typeof self&&self.self===self}function At(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function Nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return lt().indexOf("Electron/")>=0}function Xe(){const pe=lt();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function ut(){return lt().indexOf("MSAppHost/")>=0}function st(){return!Ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function we(){return"object"==typeof indexedDB}function Qe(){return new Promise((pe,De)=>{try{let Ce=!0;const ft="validate-browser-context-for-indexeddb-analytics-module",ve=self.indexedDB.open(ft);ve.onsuccess=()=>{ve.result.close(),Ce||self.indexedDB.deleteDatabase(ft),pe(!0)},ve.onupgradeneeded=()=>{Ce=!1},ve.onerror=()=>{var Fe;De((null===(Fe=ve.error)||void 0===Fe?void 0:Fe.message)||"")}}catch(Ce){De(Ce)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ze extends Error{constructor(De,Ce,ft){super(Ce),this.code=De,this.customData=ft,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(De,Ce,ft){this.service=De,this.serviceName=Ce,this.errors=ft}create(De,...Ce){const ft=Ce[0]||{},ve=`${this.service}/${De}`,Fe=this.errors[De],_t=Fe?function vt(pe,De){return pe.replace(St,(Ce,ft)=>{const ve=De[ft];return null!=ve?String(ve):`<${ft}?>`})}(Fe,ft):"Error";return new ze(ve,`${this.serviceName}: ${_t} (${ve}).`,ft)}}const St=/\{\$([^}]+)}/g;function gt(pe,De){return Object.prototype.hasOwnProperty.call(pe,De)}function qt(pe){for(const De in pe)if(Object.prototype.hasOwnProperty.call(pe,De))return!1;return!0}function En(pe,De){if(pe===De)return!0;const Ce=Object.keys(pe),ft=Object.keys(De);for(const ve of Ce){if(!ft.includes(ve))return!1;const Fe=pe[ve],_t=De[ve];if(fr(Fe)&&fr(_t)){if(!En(Fe,_t))return!1}else if(Fe!==_t)return!1}for(const ve of ft)if(!Ce.includes(ve))return!1;return!0}function fr(pe){return null!==pe&&"object"==typeof pe}function Yn(pe){const De=[];for(const[Ce,ft]of Object.entries(pe))Array.isArray(ft)?ft.forEach(ve=>{De.push(encodeURIComponent(Ce)+"="+encodeURIComponent(ve))}):De.push(encodeURIComponent(Ce)+"="+encodeURIComponent(ft));return De.length?"&"+De.join("&"):""}function Qn(pe){const De={};return pe.replace(/^\?/,"").split("&").forEach(ft=>{if(ft){const[ve,Fe]=ft.split("=");De[decodeURIComponent(ve)]=decodeURIComponent(Fe)}}),De}function br(pe){const De=pe.indexOf("?");if(!De)return"";const Ce=pe.indexOf("#",De);return pe.substring(De,Ce>0?Ce:void 0)}function zn(pe,De){const Ce=new en(pe,De);return Ce.subscribe.bind(Ce)}class en{constructor(De,Ce){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ce,this.task.then(()=>{De(this)}).catch(ft=>{this.error(ft)})}next(De){this.forEachObserver(Ce=>{Ce.next(De)})}error(De){this.forEachObserver(Ce=>{Ce.error(De)}),this.close(De)}complete(){this.forEachObserver(De=>{De.complete()}),this.close()}subscribe(De,Ce,ft){let ve;if(void 0===De&&void 0===Ce&&void 0===ft)throw new Error("Missing Observer.");ve=function _n(pe,De){if("object"!=typeof pe||null===pe)return!1;for(const Ce of De)if(Ce in pe&&"function"==typeof pe[Ce])return!0;return!1}(De,["next","error","complete"])?De:{next:De,error:Ce,complete:ft},void 0===ve.next&&(ve.next=wn),void 0===ve.error&&(ve.error=wn),void 0===ve.complete&&(ve.complete=wn);const Fe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ve.error(this.finalError):ve.complete()}catch(_t){}}),this.observers.push(ve),Fe}unsubscribeOne(De){void 0===this.observers||void 0===this.observers[De]||(delete this.observers[De],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(De){if(!this.finalized)for(let Ce=0;Ce<this.observers.length;Ce++)this.sendOne(Ce,De)}sendOne(De,Ce){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[De])try{Ce(this.observers[De])}catch(ft){"undefined"!=typeof console&&console.error&&console.error(ft)}})}close(De){this.finalized||(this.finalized=!0,void 0!==De&&(this.finalError=De),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wn(){}function Wn(pe,De=1e3,Ce=2){const ft=De*Math.pow(Ce,pe),ve=Math.round(.5*ft*(Math.random()-.5)*2);return Math.min(144e5,ft+ve)}function Vn(pe){return pe&&pe._delegate?pe._delegate:pe}},5848:(Ot,$e,B)=>{B.d($e,{u:()=>y});var m=B(5e3);let y=(()=>{class te{constructor(){this.especialidades=["PEDIATRA","ODONTOLOGO","PSICOLOGO"]}}return te.\u0275fac=function(Me){return new(Me||te)},te.\u0275prov=m.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"}),te})()},4215:(Ot,$e,B)=>{B.d($e,{W:()=>Me});var m=B(5861),y=B(590),te=B(5e3),Ne=B(1205);let Me=(()=>{class Te{constructor(Ae){this.afAuth=Ae}login(Ae,_e){return this.afAuth.signInWithEmailAndPassword(Ae,_e)}registrar(Ae,_e){var le=this;return(0,m.Z)(function*(){var ie;return yield null===(ie=(yield le.afAuth.createUserWithEmailAndPassword(Ae,_e)).user)||void 0===ie?void 0:ie.sendEmailVerification(),"Check your email for verification mail before logging in"})()}singOut(){var Ae=this;return(0,m.Z)(function*(){Ae.afAuth.signOut()})()}Logueado(){var Ae=this;return(0,m.Z)(function*(){return Ae.afAuth.authState})()}getCurrentUser(){return this.afAuth.authState.pipe((0,y.P)()).toPromise()}}return Te.\u0275fac=function(Ae){return new(Ae||Te)(te.LFG(Ne.zQ))},Te.\u0275prov=te.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},5493:(Ot,$e,B)=>{B.d($e,{$:()=>Me});var m=B(5e3),y=B(7566),te=B(4215),Ne=B(7385);let Me=(()=>{class Te{constructor(Ae,_e,le){this.db=Ae,this.serviceLogin=_e,this.storage=le}createPaciente(Ae,_e){let le="";this.serviceLogin.afAuth.user.subscribe(ie=>{null!=(null==ie?void 0:ie.uid)&&(le=null==ie?void 0:ie.uid),this.db.collection("paciente").doc(le).set({nombre:_e.nombre,apellido:_e.apellido,edad:_e.edad,DNI:_e.DNI,obraSocial:_e.obraSocial,mail:_e.mail,password:_e.password,tipo:_e.tipo});for(let be=0;be<_e.imagenes.length;be++){const mt=_e.mail+"/"+be+".jpg";this.storage.ref(mt),this.storage.upload(mt,_e.imagenes[be])}})}createEspecialista(Ae,_e){this.serviceLogin.afAuth.user.subscribe(le=>{this.db.collection("especialista").doc(null==le?void 0:le.uid).set({nombre:_e.nombre,apellido:_e.apellido,edad:_e.edad,DNI:_e.DNI,mail:_e.mail,password:_e.password,especialidad:_e.especialidad,tipo:_e.tipo,habilitado:_e.habilitado})});for(let le=0;le<_e.imagenes.length;le++){const ie=_e.mail+"/"+le+".jpg";this.storage.ref(ie),this.storage.upload(ie,_e.imagenes[le])}}createUsuario(Ae){let _e="";this.serviceLogin.afAuth.user.subscribe(le=>{null!=(null==le?void 0:le.uid)&&(console.log(le.uid),_e=null==le?void 0:le.uid),this.db.collection("usuarios").doc(_e).set({mail:Ae.mail,tipo:Ae.tipo})})}createAdministrador(Ae,_e){this.serviceLogin.afAuth.user.subscribe(le=>{this.db.collection("administradores").doc(null==le?void 0:le.uid).set({nombre:_e.nombre,apellido:_e.apellido,edad:_e.edad,DNI:_e.DNI,mail:_e.mail,password:_e.password,tipo:_e.tipo})})}createTurno(Ae){this.db.collection("turnos").doc(this.db.createId()).set({dia:Ae.dia,horario:Ae.horario,especialidad:Ae.especialidad,estado:"falta",idEspecialista:Ae.idEspecialista,idPaciente:Ae.idPaciente})}}return Te.\u0275fac=function(Ae){return new(Ae||Te)(m.LFG(y.ST),m.LFG(te.W),m.LFG(Ne.Q1))},Te.\u0275prov=m.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},956:(Ot,$e,B)=>{B.d($e,{k:()=>Ae});var m=B(5861),y=B(4004),te=B(6961),Ne=B(5e3),Me=B(7566),Te=B(4215),Le=B(7385);let Ae=(()=>{class _e{constructor(ie,be,mt){this.db=ie,this.serciceLogin=be,this.storage=mt}traeDatosEspecialista(){var ie=this;return(0,m.Z)(function*(){yield ie.serciceLogin.getCurrentUser().then(be=>null==be?void 0:be.email).then(be=>{if(null!=be)return console.log(be),ie.filtrarPorMailEspecialista(be)})})()}filtrarPorMailEspecialista(ie){return this.getAllEspecialista()}getAllPacientes(){return this.db.collection("paciente").snapshotChanges().pipe((0,y.U)(ie=>ie.map(be=>Object.assign({id:be.payload.doc.id},be.payload.doc.data()))))}getAllEspecialista(){return this.db.collection("especialista").snapshotChanges().pipe((0,y.U)(ie=>ie.map(be=>Object.assign({id:be.payload.doc.id},be.payload.doc.data()))))}actualizarEspecialista(ie){return this.db.collection("especialista").doc(ie.id).set(ie)}traeDatosAdministradores(){var ie=this;return(0,m.Z)(function*(){yield ie.serciceLogin.getCurrentUser().then(be=>null==be?void 0:be.email).then(be=>{if(null!=be)return console.log(be),ie.filtrarPorMailAdministradores(be)})})()}filtrarPorMailAdministradores(ie){var be=this;return(0,m.Z)(function*(){(yield be.getAllAdministradores()).subscribe(mt=>{let Be=mt.find(lt=>lt.mail===ie);console.log(Be),Be&&(be.datosAdminConectado=Be)})})()}getAllAdministradores(){return this.db.collection("administradores").snapshotChanges().pipe((0,y.U)(ie=>ie.map(be=>Object.assign({id:be.payload.doc.id},be.payload.doc.data()))))}getAll(){var ie=this;return(0,m.Z)(function*(){return ie.db.collection("usuarios").snapshotChanges().pipe((0,y.U)(be=>be.map(mt=>Object.assign({id:mt.payload.doc.id},mt.payload.doc.data()))))})()}traerTurnosDoc(ie,be){var mt=this;return(0,m.Z)(function*(){return mt.db.collection("turnos",Be=>Be.where("idEspecialista","==",ie).where("dia",">=",be)).valueChanges()})()}traerImagenes(ie){const be=(0,te.cF)();return(0,te.Jt)((0,te.iH)(be,ie+"/0.jpg"))}}return _e.\u0275fac=function(ie){return new(ie||_e)(Ne.LFG(Me.ST),Ne.LFG(Te.W),Ne.LFG(Le.Q1))},_e.\u0275prov=Ne.Yz7({token:_e,factory:_e.\u0275fac,providedIn:"root"}),_e})()},7273:(Ot,$e,B)=>{var m=B(9808),y=B(5e3);class te extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ne extends te{static makeCurrent(){(0,m.HT)(new Ne)}onAndCancel(h,c,I){return h.addEventListener(c,I,!1),()=>{h.removeEventListener(c,I,!1)}}dispatchEvent(h,c){h.dispatchEvent(c)}remove(h){h.parentNode&&h.parentNode.removeChild(h)}createElement(h,c){return(c=c||this.getDefaultDocument()).createElement(h)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(h){return h.nodeType===Node.ELEMENT_NODE}isShadowRoot(h){return h instanceof DocumentFragment}getGlobalEventTarget(h,c){return"window"===c?window:"document"===c?h:"body"===c?h.body:null}getBaseHref(h){const c=function Te(){return Me=Me||document.querySelector("base"),Me?Me.getAttribute("href"):null}();return null==c?null:function Ae(b){Le=Le||document.createElement("a"),Le.setAttribute("href",b);const h=Le.pathname;return"/"===h.charAt(0)?h:`/${h}`}(c)}resetBaseElement(){Me=null}getUserAgent(){return window.navigator.userAgent}getCookie(h){return(0,m.Mx)(document.cookie,h)}}let Le,Me=null;const _e=new y.OlP("TRANSITION_ID"),ie=[{provide:y.ip1,useFactory:function le(b,h,c){return()=>{c.get(y.CZH).donePromise.then(()=>{const I=(0,m.q)(),F=h.querySelectorAll(`style[ng-transition="${b}"]`);for(let Y=0;Y<F.length;Y++)I.remove(F[Y])})}},deps:[_e,m.K0,y.zs3],multi:!0}];class be{static init(){(0,y.VLi)(new be)}addToWindow(h){y.dqk.getAngularTestability=(I,F=!0)=>{const Y=h.findTestabilityInTree(I,F);if(null==Y)throw new Error("Could not find testability for element.");return Y},y.dqk.getAllAngularTestabilities=()=>h.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>h.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(I=>{const F=y.dqk.getAllAngularTestabilities();let Y=F.length,ae=!1;const ge=function(Oe){ae=ae||Oe,Y--,0==Y&&I(ae)};F.forEach(function(Oe){Oe.whenStable(ge)})})}findTestabilityInTree(h,c,I){if(null==c)return null;const F=h.getTestability(c);return null!=F?F:I?(0,m.q)().isShadowRoot(c)?this.findTestabilityInTree(h,c.host,!0):this.findTestabilityInTree(h,c.parentElement,!0):null}}let mt=(()=>{class b{build(){return new XMLHttpRequest}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();const Be=new y.OlP("EventManagerPlugins");let lt=(()=>{class b{constructor(c,I){this._zone=I,this._eventNameToPlugin=new Map,c.forEach(F=>F.manager=this),this._plugins=c.slice().reverse()}addEventListener(c,I,F){return this._findPluginFor(I).addEventListener(c,I,F)}addGlobalEventListener(c,I,F){return this._findPluginFor(I).addGlobalEventListener(c,I,F)}getZone(){return this._zone}_findPluginFor(c){const I=this._eventNameToPlugin.get(c);if(I)return I;const F=this._plugins;for(let Y=0;Y<F.length;Y++){const ae=F[Y];if(ae.supports(c))return this._eventNameToPlugin.set(c,ae),ae}throw new Error(`No event manager plugin found for event ${c}`)}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(Be),y.LFG(y.R0b))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class wt{constructor(h){this._doc=h}addGlobalEventListener(h,c,I){const F=(0,m.q)().getGlobalEventTarget(this._doc,h);if(!F)throw new Error(`Unsupported event target ${F} for event ${c}`);return this.addEventListener(F,c,I)}}let Ze=(()=>{class b{constructor(){this._stylesSet=new Set}addStyles(c){const I=new Set;c.forEach(F=>{this._stylesSet.has(F)||(this._stylesSet.add(F),I.add(F))}),this.onStylesAdded(I)}onStylesAdded(c){}getAllStyles(){return Array.from(this._stylesSet)}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})(),at=(()=>{class b extends Ze{constructor(c){super(),this._doc=c,this._hostNodes=new Map,this._hostNodes.set(c.head,[])}_addStylesToHost(c,I,F){c.forEach(Y=>{const ae=this._doc.createElement("style");ae.textContent=Y,F.push(I.appendChild(ae))})}addHost(c){const I=[];this._addStylesToHost(this._stylesSet,c,I),this._hostNodes.set(c,I)}removeHost(c){const I=this._hostNodes.get(c);I&&I.forEach(At),this._hostNodes.delete(c)}onStylesAdded(c){this._hostNodes.forEach((I,F)=>{this._addStylesToHost(c,F,I)})}ngOnDestroy(){this._hostNodes.forEach(c=>c.forEach(At))}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(m.K0))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();function At(b){(0,m.q)().remove(b)}const Nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},he=/%COMP%/g;function se(b,h,c){for(let I=0;I<h.length;I++){let F=h[I];Array.isArray(F)?se(b,F,c):(F=F.replace(he,b),c.push(F))}return c}function Re(b){return h=>{if("__ngUnwrap__"===h)return b;!1===b(h)&&(h.preventDefault(),h.returnValue=!1)}}let ze=(()=>{class b{constructor(c,I,F){this.eventManager=c,this.sharedStylesHost=I,this.appId=F,this.rendererByCompId=new Map,this.defaultRenderer=new He(c)}createRenderer(c,I){if(!c||!I)return this.defaultRenderer;switch(I.encapsulation){case y.ifc.Emulated:{let F=this.rendererByCompId.get(I.id);return F||(F=new Xt(this.eventManager,this.sharedStylesHost,I,this.appId),this.rendererByCompId.set(I.id,F)),F.applyToHost(c),F}case 1:case y.ifc.ShadowDom:return new Yt(this.eventManager,this.sharedStylesHost,c,I);default:if(!this.rendererByCompId.has(I.id)){const F=se(I.id,I.styles,[]);this.sharedStylesHost.addStyles(F),this.rendererByCompId.set(I.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(lt),y.LFG(at),y.LFG(y.AFp))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class He{constructor(h){this.eventManager=h,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(h,c){return c?document.createElementNS(Nt[c]||c,h):document.createElement(h)}createComment(h){return document.createComment(h)}createText(h){return document.createTextNode(h)}appendChild(h,c){h.appendChild(c)}insertBefore(h,c,I){h&&h.insertBefore(c,I)}removeChild(h,c){h&&h.removeChild(c)}selectRootElement(h,c){let I="string"==typeof h?document.querySelector(h):h;if(!I)throw new Error(`The selector "${h}" did not match any elements`);return c||(I.textContent=""),I}parentNode(h){return h.parentNode}nextSibling(h){return h.nextSibling}setAttribute(h,c,I,F){if(F){c=F+":"+c;const Y=Nt[F];Y?h.setAttributeNS(Y,c,I):h.setAttribute(c,I)}else h.setAttribute(c,I)}removeAttribute(h,c,I){if(I){const F=Nt[I];F?h.removeAttributeNS(F,c):h.removeAttribute(`${I}:${c}`)}else h.removeAttribute(c)}addClass(h,c){h.classList.add(c)}removeClass(h,c){h.classList.remove(c)}setStyle(h,c,I,F){F&(y.JOm.DashCase|y.JOm.Important)?h.style.setProperty(c,I,F&y.JOm.Important?"important":""):h.style[c]=I}removeStyle(h,c,I){I&y.JOm.DashCase?h.style.removeProperty(c):h.style[c]=""}setProperty(h,c,I){h[c]=I}setValue(h,c){h.nodeValue=c}listen(h,c,I){return"string"==typeof h?this.eventManager.addGlobalEventListener(h,c,Re(I)):this.eventManager.addEventListener(h,c,Re(I))}}class Xt extends He{constructor(h,c,I,F){super(h),this.component=I;const Y=se(F+"-"+I.id,I.styles,[]);c.addStyles(Y),this.contentAttr=function we(b){return"_ngcontent-%COMP%".replace(he,b)}(F+"-"+I.id),this.hostAttr=function Qe(b){return"_nghost-%COMP%".replace(he,b)}(F+"-"+I.id)}applyToHost(h){super.setAttribute(h,this.hostAttr,"")}createElement(h,c){const I=super.createElement(h,c);return super.setAttribute(I,this.contentAttr,""),I}}class Yt extends He{constructor(h,c,I,F){super(h),this.sharedStylesHost=c,this.hostEl=I,this.shadowRoot=I.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Y=se(F.id,F.styles,[]);for(let ae=0;ae<Y.length;ae++){const ge=document.createElement("style");ge.textContent=Y[ae],this.shadowRoot.appendChild(ge)}}nodeOrShadowRoot(h){return h===this.hostEl?this.shadowRoot:h}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(h,c){return super.appendChild(this.nodeOrShadowRoot(h),c)}insertBefore(h,c,I){return super.insertBefore(this.nodeOrShadowRoot(h),c,I)}removeChild(h,c){return super.removeChild(this.nodeOrShadowRoot(h),c)}parentNode(h){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(h)))}}let ht=(()=>{class b extends wt{constructor(c){super(c)}supports(c){return!0}addEventListener(c,I,F){return c.addEventListener(I,F,!1),()=>this.removeEventListener(c,I,F)}removeEventListener(c,I,F){return c.removeEventListener(I,F)}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(m.K0))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();const pn=["alt","control","meta","shift"],yt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},je={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gt={alt:b=>b.altKey,control:b=>b.ctrlKey,meta:b=>b.metaKey,shift:b=>b.shiftKey};let Mt=(()=>{class b extends wt{constructor(c){super(c)}supports(c){return null!=b.parseEventName(c)}addEventListener(c,I,F){const Y=b.parseEventName(I),ae=b.eventCallback(Y.fullKey,F,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(c,Y.domEventName,ae))}static parseEventName(c){const I=c.toLowerCase().split("."),F=I.shift();if(0===I.length||"keydown"!==F&&"keyup"!==F)return null;const Y=b._normalizeKey(I.pop());let ae="";if(pn.forEach(Oe=>{const ot=I.indexOf(Oe);ot>-1&&(I.splice(ot,1),ae+=Oe+".")}),ae+=Y,0!=I.length||0===Y.length)return null;const ge={};return ge.domEventName=F,ge.fullKey=ae,ge}static getEventFullKey(c){let I="",F=function qt(b){let h=b.key;if(null==h){if(h=b.keyIdentifier,null==h)return"Unidentified";h.startsWith("U+")&&(h=String.fromCharCode(parseInt(h.substring(2),16)),3===b.location&&je.hasOwnProperty(h)&&(h=je[h]))}return yt[h]||h}(c);return F=F.toLowerCase()," "===F?F="space":"."===F&&(F="dot"),pn.forEach(Y=>{Y!=F&&gt[Y](c)&&(I+=Y+".")}),I+=F,I}static eventCallback(c,I,F){return Y=>{b.getEventFullKey(Y)===c&&F.runGuarded(()=>I(Y))}}static _normalizeKey(c){return"esc"===c?"escape":c}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(m.K0))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();const Qn=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:m.bD},{provide:y.g9A,useValue:function Cn(){Ne.makeCurrent(),be.init()},multi:!0},{provide:m.K0,useFactory:function fr(){return(0,y.RDi)(document),document},deps:[]}]),br=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function En(){return new y.qLn},deps:[]},{provide:Be,useClass:ht,multi:!0,deps:[m.K0,y.R0b,y.Lbi]},{provide:Be,useClass:Mt,multi:!0,deps:[m.K0]},{provide:ze,useClass:ze,deps:[lt,at,y.AFp]},{provide:y.FYo,useExisting:ze},{provide:Ze,useExisting:at},{provide:at,useClass:at,deps:[m.K0]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b]},{provide:lt,useClass:lt,deps:[Be,y.R0b]},{provide:m.JF,useClass:mt,deps:[]}];let Dr=(()=>{class b{constructor(c){if(c)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(c){return{ngModule:b,providers:[{provide:y.AFp,useValue:c.appId},{provide:_e,useExisting:y.AFp},ie]}}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(b,12))},b.\u0275mod=y.oAB({type:b}),b.\u0275inj=y.cJS({providers:br,imports:[m.ez,y.hGG]}),b})();"undefined"!=typeof window&&window;var jr=B(5839);let wi=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-home"]],decls:2,vars:0,template:function(c,I){1&c&&(y.TgZ(0,"p"),y._uU(1,"home works!"),y.qZA())},styles:[""]}),b})();var cn=B(5861),it=B(2382),Mr=B(4215),$r=B(956);let Pr=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-captchat"]],decls:6,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center"],[1,"d-flex","justify-content-center"],["type","checkbox","name","","id",""]],template:function(c,I){1&c&&(y.TgZ(0,"div",0)(1,"div")(2,"p"),y._uU(3,"Verifique que no es un robot"),y.qZA()(),y.TgZ(4,"div",1),y._UZ(5,"input",2),y.qZA()())},styles:["input[_ngcontent-%COMP%]{width:50px;height:50px}"]}),b})(),fi=(()=>{class b{constructor(){}ngOnInit(){}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-loading"]],decls:1,vars:0,consts:[[1,"spinner"]],template:function(c,I){1&c&&y._UZ(0,"div",0)},styles:[".spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:5px solid rgba(0,0,0,.3);border-radius:50%;border-left-color:#7d47ff}.spinner[_ngcontent-%COMP%]{width:36px;height:36px;border:5px solid rgba(0,0,0,.3);border-radius:50%;border-left-color:#7d47ff;animation:spin 1s ease infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),b})();function Ss(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"button",14),y.NdJ("click",function(){const Y=y.CHM(c).$implicit;return y.oxw().clickRapido(Y)}),y._UZ(1,"img",15),y._uU(2),y.qZA()}if(2&b){const c=h.$implicit;y.xp6(1),y.s9C("src",c.imagenes[0],y.LSH),y.xp6(1),y.Oqu(c.nombre)}}function ls(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"button",14),y.NdJ("click",function(){const Y=y.CHM(c).$implicit;return y.oxw().clickRapido(Y)}),y._UZ(1,"img",15),y._uU(2),y.qZA()}if(2&b){const c=h.$implicit;y.xp6(1),y.s9C("src",c.imagenes[0],y.LSH),y.xp6(1),y.Oqu(c.nombre)}}function pi(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"button",14),y.NdJ("click",function(){const Y=y.CHM(c).$implicit;return y.oxw().clickRapido(Y)}),y._UZ(1,"img",15),y._uU(2),y.qZA()}if(2&b){const c=h.$implicit;y.xp6(1),y.s9C("src",c.imagenes[0],y.LSH),y.xp6(1),y.Oqu(c.nombre)}}function ei(b,h){1&b&&(y.TgZ(0,"div",1),y._UZ(1,"app-loading"),y.qZA())}let Or=(()=>{class b{constructor(c,I,F,Y){this.fb=c,this.serviceLogin=I,this.route=F,this.serviceTraerDatos=Y,this.muestroSpiner=!1,this.arrayUsuario=[],this.arrayEspecialista=[],this.arrayAdmin=[]}ngOnInit(){this.form=this.fb.group({email:["",[it.kI.required,it.kI.minLength(3),it.kI.maxLength(100)]],password:[]}),this.traerPacientes(),this.traerEspecialista()}ingresar(){var c=this;return(0,cn.Z)(function*(){try{c.muestroSpiner=!0,yield c.serviceLogin.login(c.form.value.email,c.form.value.password).then(function(){var F=(0,cn.Z)(function*(Y){yield c.serviceTraerDatos.getAllEspecialista().subscribe(function(){var ae=(0,cn.Z)(function*(ge){let Oe=ge.find(ot=>ot.mail==c.form.value.email);null!=Oe?(null==Oe?void 0:Oe.habilitado)?c.route.navigate(["/home"]):(c.serviceLogin.singOut(),c.mensajeError="Usuario no habilitado"):c.route.navigate(["/home"])});return function(ge){return ae.apply(this,arguments)}}()),c.muestroSpiner=!1});return function(Y){return F.apply(this,arguments)}}())}catch(I){I instanceof Error&&(c.mensajeError=I.message)}})()}inicioRapido(){var c=this;return(0,cn.Z)(function*(){yield c.serviceLogin.login("thomasciarlo18@gmail.com","123456").then(()=>{c.route.navigate(["/home"])})})()}traerPacientes(){this.arrayUsuario=[],this.serviceTraerDatos.getAllPacientes().subscribe(I=>{I.forEach(F=>{F.imagenes=[],this.serviceTraerDatos.traerImagenes(F.mail).then(Y=>{F.imagenes.push(Y)}),this.arrayUsuario.push(F)})})}traerEspecialista(){this.arrayUsuario=[],this.serviceTraerDatos.getAllEspecialista().subscribe(I=>{I.forEach(F=>{F.imagenes=[],this.serviceTraerDatos.traerImagenes(F.mail).then(Y=>{F.imagenes.push(Y)}),this.arrayEspecialista.push(F)})})}clickRapido(c){var I=this;return(0,cn.Z)(function*(){yield I.serviceLogin.login(c.mail,c.password).then(()=>{I.route.navigate(["/home"])})})()}}return b.\u0275fac=function(c){return new(c||b)(y.Y36(it.qu),y.Y36(Mr.W),y.Y36(jr.F0),y.Y36($r.k))},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-login"]],decls:29,vars:6,consts:[[1,"login","d-flex","flex-column","justify-content-center"],[1,"d-flex","justify-content-center"],["class","btn btn-light",3,"click",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","formControlName","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","password","id","exampleInputPassword1",1,"form-control"],[1,"d-flex","column","justify-content-center"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"d-flex","column","justify-content-center","m-2"],["for",""],["class","d-flex justify-content-center",4,"ngIf"],[1,"btn","btn-light",3,"click"],["alt","",3,"src"]],template:function(c,I){1&c&&(y.TgZ(0,"div",0)(1,"div",1),y.YNc(2,Ss,3,2,"button",2),y.qZA(),y.TgZ(3,"div",1),y.YNc(4,ls,3,2,"button",2),y.qZA(),y.TgZ(5,"div",1),y.YNc(6,pi,3,2,"button",2),y.qZA(),y.TgZ(7,"div",1)(8,"form",3)(9,"div",4)(10,"label",5),y._uU(11,"Email"),y.qZA(),y._UZ(12,"input",6),y.qZA(),y.TgZ(13,"div",4)(14,"label",7),y._uU(15,"Contrase\xf1a"),y.qZA(),y._UZ(16,"input",8),y.qZA(),y.TgZ(17,"div",1),y._UZ(18,"app-captchat"),y.qZA(),y.TgZ(19,"div",9)(20,"button",10),y.NdJ("click",function(){return I.ingresar()}),y._uU(21,"Conectar"),y.qZA()(),y.TgZ(22,"div",11)(23,"button",10),y.NdJ("click",function(){return I.inicioRapido()}),y._uU(24,"Inicio Rapido"),y.qZA()(),y.TgZ(25,"div",1)(26,"label",12),y._uU(27),y.qZA()(),y.YNc(28,ei,2,0,"div",13),y.qZA()()()),2&c&&(y.xp6(2),y.Q6J("ngForOf",I.arrayUsuario),y.xp6(2),y.Q6J("ngForOf",I.arrayEspecialista),y.xp6(2),y.Q6J("ngForOf",I.arrayAdmin),y.xp6(2),y.Q6J("formGroup",I.form),y.xp6(19),y.Oqu(I.mensajeError),y.xp6(1),y.Q6J("ngIf",I.muestroSpiner))},directives:[m.sg,it._Y,it.JL,it.sg,it.Fj,it.JJ,it.u,Pr,m.O5,fi],styles:["form[_ngcontent-%COMP%]{max-height:500px;max-width:500px;background-color:#fff;padding:15px;margin:20px;border-radius:10px}img[_ngcontent-%COMP%]{width:50px;height:50px;margin:5px}.btn[_ngcontent-%COMP%]{margin:10px}"]}),b})();class Wr{}var kr=B(5493);function Pt(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre es requerido. "),y.qZA())}function kt(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre minimo 3 caracteres. "),y.qZA())}function yn(b,h){if(1&b&&(y.TgZ(0,"div",19),y.YNc(1,Pt,2,0,"div",20),y.YNc(2,kt,2,0,"div",20),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.minlength)}}function xr(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido es requerido. "),y.qZA())}function bi(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido minimo 3 caracteres. "),y.qZA())}function $n(b,h){if(1&b&&(y.TgZ(0,"div",19),y.YNc(1,xr,2,0,"div",20),y.YNc(2,bi,2,0,"div",20),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.minlength)}}function gi(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Email es requerido. "),y.qZA())}function rr(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Emial minimo 10 caracteres. "),y.qZA())}function ti(b,h){if(1&b&&(y.TgZ(0,"div",19),y.YNc(1,gi,2,0,"div",20),y.YNc(2,rr,2,0,"div",20),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.minlength)}}function Tr(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"form",2),y.NdJ("ngSubmit",function(){return y.CHM(c),y.oxw().aceptar()}),y.TgZ(1,"div",3)(2,"label",4),y._uU(3,"Nombre"),y.qZA(),y._UZ(4,"input",5),y.YNc(5,yn,3,2,"div",6),y.TgZ(6,"label",7),y._uU(7,"Apellido"),y.qZA(),y._UZ(8,"input",8),y.YNc(9,$n,3,2,"div",6),y.qZA(),y.TgZ(10,"div",3)(11,"label",9),y._uU(12,"Edad"),y.qZA(),y._UZ(13,"input",10),y.TgZ(14,"label",11),y._uU(15,"Dni"),y.qZA(),y._UZ(16,"input",12),y.qZA(),y.TgZ(17,"label",13),y._uU(18,"Email"),y.qZA(),y._UZ(19,"input",14),y.YNc(20,ti,3,2,"div",6),y.TgZ(21,"div",3)(22,"label",15),y._uU(23,"Password"),y.qZA(),y._UZ(24,"input",16),y.qZA(),y.TgZ(25,"button",17),y._uU(26,"Enviar"),y.qZA(),y._UZ(27,"label",18),y.qZA()}if(2&b){const c=y.oxw();y.Q6J("formGroup",c.form),y.xp6(5),y.Q6J("ngIf",(null==c.nombre?null:c.nombre.invalid)&&((null==c.nombre?null:c.nombre.dirty)||(null==c.nombre?null:c.nombre.touched))),y.xp6(4),y.Q6J("ngIf",(null==c.apellido?null:c.apellido.invalid)&&((null==c.apellido?null:c.apellido.dirty)||(null==c.apellido?null:c.apellido.touched))),y.xp6(11),y.Q6J("ngIf",(null==c.mail?null:c.mail.invalid)&&((null==c.mail?null:c.mail.dirty)||(null==c.mail?null:c.mail.touched)))}}function Sn(b,h){1&b&&(y.TgZ(0,"div",21)(1,"p"),y._uU(2,"Verifique su email para activar la cuenta"),y.qZA()())}let Si=(()=>{class b{constructor(c,I,F){this.fb=c,this.serviceLogin=I,this.serviceRegister=F,this.seRegistroOk=!1}ngOnInit(){this.form=this.fb.group({nombre:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],apellido:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],edad:[0,[it.kI.required]],dni:[0,[it.kI.required]],mail:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(100)])],password:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])]})}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}aceptar(){const{nombre:c,apellido:I,edad:F,dni:Y,password:ae,mail:ge}=this.form.value;this.user=new Wr,this.user.nombre=c,this.user.apellido=I,this.user.edad=F,this.user.DNI=Y,this.user.password=ae,this.user.mail=ge,this.user.tipo="admin";const Oe=document.getElementById("errorLogin");null!=Oe&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(ot=>{this.serviceRegister.createUsuario(this.user),this.serviceRegister.createAdministrador(this.user.mail,this.user),this.seRegistroOk=!0,this.form.reset()}).catch(ot=>Oe.textContent=ot.message)}}return b.\u0275fac=function(c){return new(c||b)(y.Y36(it.qu),y.Y36(Mr.W),y.Y36(kr.$))},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-form-register-admin"]],decls:2,vars:2,consts:[["class","text-center",3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],[1,"alert","alert-danger"],[4,"ngIf"],[1,"d-flex","justify-content-center","pop"]],template:function(c,I){1&c&&(y.YNc(0,Tr,28,4,"form",0),y.YNc(1,Sn,3,0,"div",1)),2&c&&(y.Q6J("ngIf",!I.seRegistroOk),y.xp6(1),y.Q6J("ngIf",I.seRegistroOk))},directives:[m.O5,it._Y,it.JL,it.sg,it.Fj,it.JJ,it.u,it.Q7,it.wV],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),b})();function Zr(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre es requerido. "),y.qZA())}function cs(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre minimo 3 caracteres. "),y.qZA())}function Ii(b,h){if(1&b&&(y.TgZ(0,"div",25),y.YNc(1,Zr,2,0,"div",26),y.YNc(2,cs,2,0,"div",26),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.minlength)}}function Ur(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido es requerido. "),y.qZA())}function Fr(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido minimo 3 caracteres. "),y.qZA())}function Lr(b,h){if(1&b&&(y.TgZ(0,"div",25),y.YNc(1,Ur,2,0,"div",26),y.YNc(2,Fr,2,0,"div",26),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.minlength)}}function ir(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Obra Social es requerido. "),y.qZA())}function or(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Obra Social minimo 3 caracteres. "),y.qZA())}function Ms(b,h){if(1&b&&(y.TgZ(0,"div",25),y.YNc(1,ir,2,0,"div",26),y.YNc(2,or,2,0,"div",26),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.obrasocial||null==c.obrasocial.errors?null:c.obrasocial.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.obrasocial||null==c.obrasocial.errors?null:c.obrasocial.errors.minlength)}}function Kr(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Email es requerido. "),y.qZA())}function ni(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Emial minimo 10 caracteres. "),y.qZA())}function Fi(b,h){if(1&b&&(y.TgZ(0,"div",25),y.YNc(1,Kr,2,0,"div",26),y.YNc(2,ni,2,0,"div",26),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.minlength)}}function Es(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"form",2),y.NdJ("ngSubmit",function(){return y.CHM(c),y.oxw().aceptar()}),y.TgZ(1,"div",3)(2,"label",4),y._uU(3,"Nombre"),y.qZA(),y._UZ(4,"input",5),y.YNc(5,Ii,3,2,"div",6),y.TgZ(6,"label",7),y._uU(7,"Apellido"),y.qZA(),y._UZ(8,"input",8),y.YNc(9,Lr,3,2,"div",6),y.qZA(),y.TgZ(10,"div",3)(11,"label",9),y._uU(12,"edad"),y.qZA(),y._UZ(13,"input",10),y.TgZ(14,"label",11),y._uU(15,"dni"),y.qZA(),y._UZ(16,"input",12),y.qZA(),y.TgZ(17,"div",3)(18,"div")(19,"label",13),y._uU(20,"obrasocial"),y.qZA(),y._UZ(21,"input",14),y.YNc(22,Ms,3,2,"div",6),y.qZA(),y.TgZ(23,"label",15),y._uU(24,"mail"),y.qZA(),y._UZ(25,"input",16),y.YNc(26,Fi,3,2,"div",6),y.qZA(),y.TgZ(27,"div",3)(28,"label",17),y._uU(29,"password"),y.qZA(),y._UZ(30,"input",18),y.TgZ(31,"div")(32,"label",19),y._uU(33,"imagen uno"),y.qZA(),y.TgZ(34,"input",20),y.NdJ("change",function(F){return y.CHM(c),y.oxw().UploadImag(F)}),y.qZA()()(),y.TgZ(35,"div",3)(36,"label",21),y._uU(37,"imagen dos"),y.qZA(),y.TgZ(38,"input",22),y.NdJ("change",function(F){return y.CHM(c),y.oxw().UploadImagDos(F)}),y.qZA()(),y.TgZ(39,"button",23),y._uU(40,"Enviar"),y.qZA(),y._UZ(41,"label",24),y.qZA()}if(2&b){const c=y.oxw();y.Q6J("formGroup",c.form),y.xp6(5),y.Q6J("ngIf",(null==c.nombre?null:c.nombre.invalid)&&((null==c.nombre?null:c.nombre.dirty)||(null==c.nombre?null:c.nombre.touched))),y.xp6(4),y.Q6J("ngIf",(null==c.apellido?null:c.apellido.invalid)&&((null==c.apellido?null:c.apellido.dirty)||(null==c.apellido?null:c.apellido.touched))),y.xp6(13),y.Q6J("ngIf",(null==c.obrasocial?null:c.obrasocial.invalid)&&((null==c.obrasocial?null:c.obrasocial.dirty)||(null==c.obrasocial?null:c.obrasocial.touched))),y.xp6(4),y.Q6J("ngIf",(null==c.mail?null:c.mail.invalid)&&((null==c.mail?null:c.mail.dirty)||(null==c.mail?null:c.mail.touched)))}}function xs(b,h){1&b&&(y.TgZ(0,"div",27),y._UZ(1,"app-loading"),y.qZA())}function Mi(b,h){1&b&&(y.TgZ(0,"div",27)(1,"p"),y._uU(2,"Verifique su email para activar la cuenta"),y.qZA()())}let ji=(()=>{class b{constructor(c,I,F){this.fb=c,this.serviceLogin=I,this.serviceRegister=F,this.seRegistroOk=!1,this.cargando=!1}ngOnInit(){this.form=this.fb.group({nombre:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],apellido:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],edad:[0,[it.kI.required]],dni:[0,[it.kI.required]],obrasocial:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],mail:["asd123@gmail.com",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(100)])],password:["123456",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],imagenuno:new it.NI(Image,[it.kI.required]),imagendos:new it.NI(Image,[it.kI.required])})}aceptar(){this.cargando=!0;const{nombre:c,apellido:I,edad:F,dni:Y,obrasocial:ae,password:ge,mail:Oe,imagenuno:ot}=this.form.value;this.user=new Wr,this.user.nombre=c,this.user.apellido=I,this.user.edad=F,this.user.DNI=Y,this.user.obraSocial=ae,this.user.password=ge,this.user.mail=Oe,console.log(ot),this.user.imagenes=[this.imgUno,this.imgdos],this.user.tipo="paciente";const gn=document.getElementById("errorLogin");null!=gn&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(kn=>{this.serviceRegister.createUsuario(this.user),this.serviceRegister.createPaciente(this.user.mail,this.user),this.seRegistroOk=!0,this.cargando=!1,this.form.reset()}).catch(kn=>gn.textContent=kn.message)}UploadImag(c){this.imgUno=null==c?void 0:c.target.files[0],console.log(this.imgUno)}UploadImagDos(c){this.imgdos=null==c?void 0:c.target.files[0],console.log(this.imgdos)}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}}return b.\u0275fac=function(c){return new(c||b)(y.Y36(it.qu),y.Y36(Mr.W),y.Y36(kr.$))},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-form-register"]],decls:3,vars:3,consts:[["class","text-center",3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","obrasocial",1,"form-label"],["type","text","formControlName","obrasocial","id","obrasocial",1,"form-control"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagenuno","id","imagen1",1,"form-control",3,"change"],["for","imagen2",1,"form-label"],["type","file","formControlName","imagendos","id","imagen2",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],[1,"alert","alert-danger"],[4,"ngIf"],[1,"d-flex","justify-content-center","pop"]],template:function(c,I){1&c&&(y.YNc(0,Es,42,5,"form",0),y.YNc(1,xs,2,0,"div",1),y.YNc(2,Mi,3,0,"div",1)),2&c&&(y.Q6J("ngIf",!I.seRegistroOk),y.xp6(1),y.Q6J("ngIf",I.cargando),y.xp6(1),y.Q6J("ngIf",I.seRegistroOk))},directives:[m.O5,it._Y,it.JL,it.sg,it.Fj,it.JJ,it.u,it.Q7,it.wV,fi],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}input[_ngcontent-%COMP%]{width:300px;margin:5px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),b})();var $i=B(5848);function Eo(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre es requerido. "),y.qZA())}function Oo(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Nombre minimo 3 caracteres. "),y.qZA())}function vr(b,h){if(1&b&&(y.TgZ(0,"div",23),y.YNc(1,Eo,2,0,"div",24),y.YNc(2,Oo,2,0,"div",24),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.nombre||null==c.nombre.errors?null:c.nombre.errors.minlength)}}function Hi(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido es requerido. "),y.qZA())}function Ls(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Apellido minimo 3 caracteres. "),y.qZA())}function Pe(b,h){if(1&b&&(y.TgZ(0,"div",23),y.YNc(1,Hi,2,0,"div",24),y.YNc(2,Ls,2,0,"div",24),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.apellido||null==c.apellido.errors?null:c.apellido.errors.minlength)}}function Ie(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Obra Social es requerido. "),y.qZA())}function qe(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Obra Social minimo 3 caracteres. "),y.qZA())}function ct(b,h){if(1&b&&(y.TgZ(0,"div",23),y.YNc(1,Ie,2,0,"div",24),y.YNc(2,qe,2,0,"div",24),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.obrasocial||null==c.obrasocial.errors?null:c.obrasocial.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.obrasocial||null==c.obrasocial.errors?null:c.obrasocial.errors.minlength)}}function xt(b,h){if(1&b&&(y.TgZ(0,"div",25),y._UZ(1,"input",26),y.TgZ(2,"label",27),y._uU(3),y.qZA()()),2&b){const c=h.$implicit;y.xp6(1),y.s9C("value",c),y.xp6(2),y.Oqu(c)}}function Wt(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Email es requerido. "),y.qZA())}function Jn(b,h){1&b&&(y.TgZ(0,"div"),y._uU(1," Emial minimo 10 caracteres. "),y.qZA())}function Rr(b,h){if(1&b&&(y.TgZ(0,"div",23),y.YNc(1,Wt,2,0,"div",24),y.YNc(2,Jn,2,0,"div",24),y.qZA()),2&b){const c=y.oxw(2);y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.required),y.xp6(1),y.Q6J("ngIf",null==c.mail||null==c.mail.errors?null:c.mail.errors.minlength)}}function Zn(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"form",2),y.NdJ("ngSubmit",function(){return y.CHM(c),y.oxw().aceptar()}),y.TgZ(1,"div",3)(2,"label",4),y._uU(3,"Nombre"),y.qZA(),y._UZ(4,"input",5),y.YNc(5,vr,3,2,"div",6),y.TgZ(6,"label",7),y._uU(7,"Apellido"),y.qZA(),y._UZ(8,"input",8),y.YNc(9,Pe,3,2,"div",6),y.qZA(),y.TgZ(10,"div",3)(11,"label",9),y._uU(12,"edad"),y.qZA(),y._UZ(13,"input",10),y.TgZ(14,"label",11),y._uU(15,"dni"),y.qZA(),y._UZ(16,"input",12),y.qZA(),y.TgZ(17,"div",3),y.YNc(18,ct,3,2,"div",6),y.qZA(),y.TgZ(19,"div")(20,"label",13),y._uU(21,"espelicidad"),y.qZA(),y.YNc(22,xt,4,2,"div",14),y.qZA(),y.TgZ(23,"label",15),y._uU(24,"mail"),y.qZA(),y._UZ(25,"input",16),y.YNc(26,Rr,3,2,"div",6),y.TgZ(27,"div",3)(28,"label",17),y._uU(29,"password"),y.qZA(),y._UZ(30,"input",18),y.TgZ(31,"label",19),y._uU(32,"imagen uno"),y.qZA(),y.TgZ(33,"input",20),y.NdJ("change",function(F){return y.CHM(c),y.oxw().UploadImag(F)}),y.qZA()(),y.TgZ(34,"button",21),y._uU(35,"Enviar"),y.qZA(),y._UZ(36,"label",22),y.qZA()}if(2&b){const c=y.oxw();y.Q6J("formGroup",c.form),y.xp6(5),y.Q6J("ngIf",(null==c.nombre?null:c.nombre.invalid)&&((null==c.nombre?null:c.nombre.dirty)||(null==c.nombre?null:c.nombre.touched))),y.xp6(4),y.Q6J("ngIf",(null==c.apellido?null:c.apellido.invalid)&&((null==c.apellido?null:c.apellido.dirty)||(null==c.apellido?null:c.apellido.touched))),y.xp6(9),y.Q6J("ngIf",(null==c.obrasocial?null:c.obrasocial.invalid)&&((null==c.obrasocial?null:c.obrasocial.dirty)||(null==c.obrasocial?null:c.obrasocial.touched))),y.xp6(4),y.Q6J("ngForOf",c.serviceEspecialidad.especialidades),y.xp6(4),y.Q6J("ngIf",(null==c.mail?null:c.mail.invalid)&&((null==c.mail?null:c.mail.dirty)||(null==c.mail?null:c.mail.touched)))}}function ds(b,h){1&b&&(y.TgZ(0,"div",28)(1,"p"),y._uU(2,"Verifique su email para activar la cuenta"),y.qZA()())}let lo=(()=>{class b{constructor(c,I,F,Y){this.serviceEspecialidad=c,this.fb=I,this.serviceLogin=F,this.serviceRegister=Y,this.seRegistroOk=!1,this.cargando=!1}ngOnInit(){this.form=this.fb.group({nombre:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],apellido:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],edad:[0,[it.kI.required]],dni:[0,[it.kI.required]],mail:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(100)])],password:["",it.kI.compose([it.kI.required,it.kI.minLength(3),it.kI.maxLength(15)])],especialidad:["",it.kI.nullValidator],imagenuno:["",it.kI.nullValidator]})}aceptar(){const{nombre:c,apellido:I,edad:F,dni:Y,password:ae,mail:ge}=this.form.value;this.user=new Wr,this.user.nombre=c,this.user.apellido=I,this.user.edad=F,this.user.DNI=Y,this.user.password=ae,this.user.mail=ge,this.user.especialidad=this.form.value.especialidad,this.user.imagenes=[this.imgUno],this.user.tipo="especialista",this.user.habilitado=!1;const ot=document.getElementById("errorLogin");null!=ot&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(Ht=>{this.serviceRegister.createUsuario(this.user),this.serviceRegister.createEspecialista(this.user.mail,this.user),this.seRegistroOk=!0,this.form.reset()}).catch(Ht=>ot.textContent=Ht.message)}UploadImag(c){this.imgUno=null==c?void 0:c.target.files[0],console.log(this.imgUno)}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}}return b.\u0275fac=function(c){return new(c||b)(y.Y36($i.u),y.Y36(it.qu),y.Y36(Mr.W),y.Y36(kr.$))},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-form-register-especialista"]],decls:2,vars:2,consts:[["class","text-center",3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","especialidad",1,"form-label"],["class","form-check form-switch",4,"ngFor","ngForOf"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagenuno","id","imagen1",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],[1,"alert","alert-danger"],[4,"ngIf"],[1,"form-check","form-switch"],["type","radio","formControlName","especialidad","role","switch",1,"form-check-input",3,"value"],["for","flexSwitchCheckDefault",1,"form-check-label"],[1,"d-flex","justify-content-center","pop"]],template:function(c,I){1&c&&(y.YNc(0,Zn,37,6,"form",0),y.YNc(1,ds,3,0,"div",1)),2&c&&(y.Q6J("ngIf",!I.seRegistroOk),y.xp6(1),y.Q6J("ngIf",I.seRegistroOk))},directives:[m.O5,it._Y,it.JL,it.sg,it.Fj,it.JJ,it.u,it.Q7,it.wV,m.sg,it._],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),b})();function oi(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"div",3)(1,"div",4)(2,"div",5),y._uU(3," Pacientes "),y.qZA(),y.TgZ(4,"div",6)(5,"button",7),y.NdJ("click",function(){y.CHM(c);const F=y.oxw();return F.mostrarRegister=!0,F.tipo="paciente"}),y.qZA(),y.TgZ(6,"p"),y._uU(7,"Intranet para la salud de paciente"),y.qZA()()(),y.TgZ(8,"div",4)(9,"div",5),y._uU(10," Especialistas "),y.qZA(),y.TgZ(11,"div",6)(12,"button",8),y.NdJ("click",function(){y.CHM(c);const F=y.oxw();return F.mostrarRegister=!0,F.tipo="especialista"}),y.qZA(),y.TgZ(13,"p"),y._uU(14,"Intranet para el personal del hospital"),y.qZA()()(),y.TgZ(15,"div",4)(16,"div",5),y._uU(17," Administradores "),y.qZA(),y.TgZ(18,"div",6)(19,"button",9),y.NdJ("click",function(){y.CHM(c);const F=y.oxw();return F.tipo="admin",F.mostrarRegister=!0}),y._uU(20,"Administrador"),y.qZA(),y.TgZ(21,"p"),y._uU(22,"Intranet para el personal del hospital"),y.qZA()()()()}}function qs(b,h){1&b&&(y.TgZ(0,"div"),y._UZ(1,"app-form-register-admin"),y.qZA())}function hs(b,h){1&b&&(y.TgZ(0,"div"),y._UZ(1,"app-form-register"),y.qZA())}function Rs(b,h){1&b&&(y.TgZ(0,"div"),y._UZ(1,"app-form-register-especialista"),y.qZA())}const Ns=[{path:"",component:wi},{path:"home",component:wi},{path:"registrar",component:(()=>{class b{constructor(){this.mostrarRegister=!1,this.tipo=""}ngOnInit(){}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-register"]],decls:5,vars:4,consts:[[1,"register","d-flex","justify-content-center"],["class","container d-flex row justify-content-center m-3",4,"ngIf"],[4,"ngIf"],[1,"container","d-flex","row","justify-content-center","m-3"],[1,"card","m-2"],[1,"card-header"],[1,"card-body"],[1,"btn","btn-light","btnPaciente",3,"click"],[1,"btn","btn-light","btnEspecialista",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(c,I){1&c&&(y.TgZ(0,"div",0),y.YNc(1,oi,23,0,"div",1),y.YNc(2,qs,2,0,"div",2),y.YNc(3,hs,2,0,"div",2),y.YNc(4,Rs,2,0,"div",2),y.qZA()),2&c&&(y.xp6(1),y.Q6J("ngIf",!I.mostrarRegister),y.xp6(1),y.Q6J("ngIf","admin"==I.tipo),y.xp6(1),y.Q6J("ngIf","paciente"==I.tipo),y.xp6(1),y.Q6J("ngIf","especialista"==I.tipo))},directives:[m.O5,Si,ji,lo],styles:[".register[_ngcontent-%COMP%]{max-width:900px;max-height:900px;margin:0 auto}.btnPaciente[_ngcontent-%COMP%]{background-image:url(btnpaciente.59411b86008ed944.png);background-repeat:no-repeat;height:60px;width:70px;background-size:50px 50px;background-position:center}.btnEspecialista[_ngcontent-%COMP%]{background-image:url(imgbtndoc.93df223faf985fa7.png);background-repeat:no-repeat;height:60px;width:70px;background-size:50px 50px;background-position:center}"]}),b})()},{path:"ingresar",component:Or},{path:"usuarios",loadChildren:()=>B.e(957).then(B.bind(B,3957)).then(b=>b.UsuariosModule),canActivate:[(()=>{class b{constructor(c,I,F){this.serviceTraerDatos=c,this.route=I,this.loginservice=F,this.retorno=!1}canActivate(c,I){var F=this;return new Promise((Y,ae)=>{this.loginservice.getCurrentUser().then(function(){var ge=(0,cn.Z)(function*(Oe){(yield F.serviceTraerDatos.getAll()).subscribe(ot=>{let Ht=ot.find(gn=>gn.mail==(null==Oe?void 0:Oe.email));Y("admin"==(null==Ht?void 0:Ht.tipo))})});return function(Oe){return ge.apply(this,arguments)}}())})}}return b.\u0275fac=function(c){return new(c||b)(y.LFG($r.k),y.LFG(jr.F0),y.LFG(Mr.W))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()]},{path:"pacientes",loadChildren:()=>B.e(797).then(B.bind(B,6797)).then(b=>b.PacientesModule),canActivate:[(()=>{class b{constructor(c,I,F){this.serviceTraerDatos=c,this.route=I,this.loginservice=F}canActivate(c,I){var F=this;return new Promise((Y,ae)=>{this.loginservice.getCurrentUser().then(function(){var ge=(0,cn.Z)(function*(Oe){(yield F.serviceTraerDatos.getAll()).subscribe(ot=>{let Ht=ot.find(gn=>gn.mail==(null==Oe?void 0:Oe.email));"paciente"==(null==Ht?void 0:Ht.tipo)?(console.log("entro"),Y(!0)):(console.log("aca tambien entro"),Y(!1))})});return function(Oe){return ge.apply(this,arguments)}}())})}}return b.\u0275fac=function(c){return new(c||b)(y.LFG($r.k),y.LFG(jr.F0),y.LFG(Mr.W))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()]}];let Gi=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=y.oAB({type:b}),b.\u0275inj=y.cJS({imports:[[jr.Bz.forRoot(Ns)],jr.Bz]}),b})();const Ji=function(){return["ingresar"]},Zs=function(){return["registrar"]};function fs(b,h){1&b&&(y.TgZ(0,"div",10)(1,"ul",6)(2,"li",7)(3,"a",8),y._uU(4,"Ingresar"),y.qZA()(),y.TgZ(5,"li",11)(6,"a",12),y._uU(7," Registrar "),y.qZA()()()()),2&b&&(y.xp6(3),y.Q6J("routerLink",y.DdM(2,Ji)),y.xp6(3),y.Q6J("routerLink",y.DdM(3,Zs)))}function Go(b,h){if(1&b){const c=y.EpF();y.TgZ(0,"div",10)(1,"ul",6)(2,"li",7)(3,"a",13),y.NdJ("click",function(){return y.CHM(c),y.oxw().Desloguear()}),y._uU(4,"Cerrar sesion"),y.qZA()()()()}}const Di=function(){return["home"]},Ks=function(){return["usuarios"]},ui=function(){return["pacientes"]};let Z=(()=>{class b{constructor(c,I){this.loginservice=c,this.serviceDatos=I,this.login=!1,this.register=!1,this.estaLogeado=!1,this.email="",this.usuarioConectado=new Wr,this.usuario=this.loginservice.afAuth.user}ngOnInit(){this.usuario.subscribe(c=>{this.estaLogeado=!!c})}Desloguear(){this.loginservice.singOut()}traerUsuario(){var c=this;return(0,cn.Z)(function*(){return(yield c.serviceDatos.getAll()).subscribe(I=>{let F=I.find(Y=>Y.mail==c.email);null!=F&&(c.usuarioConectado=F,c.estaLogeado=!0)})})()}}return b.\u0275fac=function(c){return new(c||b)(y.Y36(Mr.W),y.Y36($r.k))},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-bienvenida"]],decls:17,vars:8,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"routerLink"],[1,"navbar-toggler-icon"],[1,"d-flex","justify-content-center"],[1,"navbar-nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],["class","collapse navbar-collapse justify-content-end","id","navbarNav",4,"ngIf"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav-item","dropdown"],["role","button","id","navbarDropdownMenuLink",1,"nav-link",3,"routerLink"],["role","button",1,"nav-link",3,"click"]],template:function(c,I){1&c&&(y.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),y._uU(3,"Home"),y.qZA(),y.TgZ(4,"button",3),y._UZ(5,"span",4),y.qZA(),y.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),y._uU(10,"Usuarios"),y.qZA()()(),y.TgZ(11,"ul",6)(12,"li",7)(13,"a",8),y._uU(14,"Turnos"),y.qZA()()()(),y.YNc(15,fs,8,4,"div",9),y.YNc(16,Go,5,0,"div",9),y.qZA()()),2&c&&(y.xp6(4),y.Q6J("routerLink",y.DdM(5,Di)),y.xp6(5),y.Q6J("routerLink",y.DdM(6,Ks)),y.xp6(4),y.Q6J("routerLink",y.DdM(7,ui)),y.xp6(2),y.Q6J("ngIf",!I.estaLogeado),y.xp6(1),y.Q6J("ngIf",I.estaLogeado))},directives:[jr.rH,jr.yS,m.O5],styles:["nav[_ngcontent-%COMP%]{margin-bottom:50px}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.logreg[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}"]}),b})(),G=(()=>{class b{constructor(){this.title="clinicafinal"}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275cmp=y.Xpm({type:b,selectors:[["app-root"]],decls:2,vars:0,template:function(c,I){1&c&&y._UZ(0,"app-bienvenida")(1,"router-outlet")},directives:[Z,jr.lC],styles:[""]}),b})();var ce=B(1205),me=B(2011);const Ve_firebaseConfig={apiKey:"AIzaSyBGJbZPSzr2qQI0tSDcZJIcvj5xLwo05kw",authDomain:"clinicafinal.firebaseapp.com",projectId:"clinicafinal",storageBucket:"clinicafinal.appspot.com",messagingSenderId:"146126855144",appId:"1:146126855144:web:385ae78bb032c50fa0e25d",measurementId:"G-5848TY8HST"};class rt{}const Vt="*";function Mn(b,h=null){return{type:2,steps:b,options:h}}function O(b){return{type:6,styles:b,offset:null}}function Hn(b){Promise.resolve(null).then(b)}class fn{constructor(h=0,c=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=h+c}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}onStart(h){this._onStartFns.push(h)}onDone(h){this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Hn(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(h=>h()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(h){this._position=this.totalTime?h*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(h){const c="start"==h?this._onStartFns:this._onDoneFns;c.forEach(I=>I()),c.length=0}}class Pn{constructor(h){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=h;let c=0,I=0,F=0;const Y=this.players.length;0==Y?Hn(()=>this._onFinish()):this.players.forEach(ae=>{ae.onDone(()=>{++c==Y&&this._onFinish()}),ae.onDestroy(()=>{++I==Y&&this._onDestroy()}),ae.onStart(()=>{++F==Y&&this._onStart()})}),this.totalTime=this.players.reduce((ae,ge)=>Math.max(ae,ge.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(h=>h()),this._onDoneFns=[])}init(){this.players.forEach(h=>h.init())}onStart(h){this._onStartFns.push(h)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(h=>h()),this._onStartFns=[])}onDone(h){this._onDoneFns.push(h)}onDestroy(h){this._onDestroyFns.push(h)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(h=>h.play())}pause(){this.players.forEach(h=>h.pause())}restart(){this.players.forEach(h=>h.restart())}finish(){this._onFinish(),this.players.forEach(h=>h.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(h=>h.destroy()),this._onDestroyFns.forEach(h=>h()),this._onDestroyFns=[])}reset(){this.players.forEach(h=>h.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(h){const c=h*this.totalTime;this.players.forEach(I=>{const F=I.totalTime?Math.min(1,c/I.totalTime):1;I.setPosition(F)})}getPosition(){const h=this.players.reduce((c,I)=>null===c||I.totalTime>c.totalTime?I:c,null);return null!=h?h.getPosition():0}beforeDestroy(){this.players.forEach(h=>{h.beforeDestroy&&h.beforeDestroy()})}triggerCallback(h){const c="start"==h?this._onStartFns:this._onDoneFns;c.forEach(I=>I()),c.length=0}}const Jt=!1;function qi(b){return new y.vHH(3e3,Jt)}function Ya(){return"undefined"!=typeof window&&void 0!==window.document}function la(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Vs(b){switch(b.length){case 0:return new fn;case 1:return b[0];default:return new Pn(b)}}function wo(b,h,c,I,F={},Y={}){const ae=[],ge=[];let Oe=-1,ot=null;if(I.forEach(Ht=>{const gn=Ht.offset,kn=gn==Oe,gr=kn&&ot||{};Object.keys(Ht).forEach(Ln=>{let tr=Ln,Vr=Ht[Ln];if("offset"!==Ln)switch(tr=h.normalizePropertyName(tr,ae),Vr){case"!":Vr=F[Ln];break;case Vt:Vr=Y[Ln];break;default:Vr=h.normalizeStyleValue(Ln,tr,Vr,ae)}gr[tr]=Vr}),kn||ge.push(gr),ot=gr,Oe=gn}),ae.length)throw function Li(b){return new y.vHH(3502,Jt)}();return ge}function ca(b,h,c,I){switch(h){case"start":b.onStart(()=>I(c&&bo(c,"start",b)));break;case"done":b.onDone(()=>I(c&&bo(c,"done",b)));break;case"destroy":b.onDestroy(()=>I(c&&bo(c,"destroy",b)))}}function bo(b,h,c){const I=c.totalTime,Y=Us(b.element,b.triggerName,b.fromState,b.toState,h||b.phaseName,null==I?b.totalTime:I,!!c.disabled),ae=b._data;return null!=ae&&(Y._data=ae),Y}function Us(b,h,c,I,F="",Y=0,ae){return{element:b,triggerName:h,fromState:c,toState:I,phaseName:F,totalTime:Y,disabled:!!ae}}function ms(b,h,c){let I;return b instanceof Map?(I=b.get(h),I||b.set(h,I=c)):(I=b[h],I||(I=b[h]=c)),I}function zo(b){const h=b.indexOf(":");return[b.substring(1,h),b.substr(h+1)]}let Oa=(b,h)=>!1,Io=(b,h,c)=>[],Xi=null;function Do(b){const h=b.parentNode||b.host;return h===Xi?null:h}(la()||"undefined"!=typeof Element)&&(Ya()?(Xi=(()=>document.documentElement)(),Oa=(b,h)=>{for(;h;){if(h===b)return!0;h=Do(h)}return!1}):Oa=(b,h)=>b.contains(h),Io=(b,h,c)=>{if(c)return Array.from(b.querySelectorAll(h));const I=b.querySelector(h);return I?[I]:[]});let Wo=null,wu=!1;function Qa(b){Wo||(Wo=function ol(){return"undefined"!=typeof document?document.body:null}()||{},wu=!!Wo.style&&"WebkitAppearance"in Wo.style);let h=!0;return Wo.style&&!function ka(b){return"ebkit"==b.substring(1,6)}(b)&&(h=b in Wo.style,!h&&wu&&(h="Webkit"+b.charAt(0).toUpperCase()+b.substr(1)in Wo.style)),h}const Fa=Oa,Fo=Io;let Co=(()=>{class b{validateStyleProperty(c){return Qa(c)}matchesElement(c,I){return!1}containsElement(c,I){return Fa(c,I)}getParentElement(c){return Do(c)}query(c,I,F){return Fo(c,I,F)}computeStyle(c,I,F){return F||""}animate(c,I,F,Y,ae,ge=[],Oe){return new fn(F,Y)}}return b.\u0275fac=function(c){return new(c||b)},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})(),ur=(()=>{class b{}return b.NOOP=new Co,b})();const Bs="ng-enter",Vi="ng-leave",La="ng-trigger",Os=".ng-trigger",da="ng-animating",Xa=".ng-animating";function fo(b){if("number"==typeof b)return b;const h=b.match(/^(-?[\.\d]+)(m?s)/);return!h||h.length<2?0:Is(parseFloat(h[1]),h[2])}function Is(b,h){return"s"===h?1e3*b:b}function es(b,h,c){return b.hasOwnProperty("duration")?b:function ha(b,h,c){let F,Y=0,ae="";if("string"==typeof b){const ge=b.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ge)return h.push(qi()),{duration:0,delay:0,easing:""};F=Is(parseFloat(ge[1]),ge[2]);const Oe=ge[3];null!=Oe&&(Y=Is(parseFloat(Oe),ge[4]));const ot=ge[5];ot&&(ae=ot)}else F=b;if(!c){let ge=!1,Oe=h.length;F<0&&(h.push(function ps(){return new y.vHH(3100,Jt)}()),ge=!0),Y<0&&(h.push(function An(){return new y.vHH(3101,Jt)}()),ge=!0),ge&&h.splice(Oe,0,qi())}return{duration:F,delay:Y,easing:ae}}(b,h,c)}function ts(b,h={}){return Object.keys(b).forEach(c=>{h[c]=b[c]}),h}function Xs(b,h,c={}){if(h)for(let I in b)c[I]=b[I];else ts(b,c);return c}function Va(b,h,c){return c?h+":"+c+";":""}function fa(b){let h="";for(let c=0;c<b.style.length;c++){const I=b.style.item(c);h+=Va(0,I,b.style.getPropertyValue(I))}for(const c in b.style)b.style.hasOwnProperty(c)&&!c.startsWith("_")&&(h+=Va(0,Vo(c),b.style[c]));b.setAttribute("style",h)}function ns(b,h,c){b.style&&(Object.keys(h).forEach(I=>{const F=pa(I);c&&!c.hasOwnProperty(I)&&(c[I]=b.style[F]),b.style[F]=h[I]}),la()&&fa(b))}function Yr(b,h){b.style&&(Object.keys(h).forEach(c=>{const I=pa(c);b.style[I]=""}),la()&&fa(b))}function eo(b){return Array.isArray(b)?1==b.length?b[0]:Mn(b):b}const Zo=new RegExp("{{\\s*(.+?)\\s*}}","g");function eu(b){let h=[];if("string"==typeof b){let c;for(;c=Zo.exec(b);)h.push(c[1]);Zo.lastIndex=0}return h}function Ti(b,h,c){const I=b.toString(),F=I.replace(Zo,(Y,ae)=>{let ge=h[ae];return h.hasOwnProperty(ae)||(c.push(function Ps(b){return new y.vHH(3003,Jt)}()),ge=""),ge.toString()});return F==I?b:F}function to(b){const h=[];let c=b.next();for(;!c.done;)h.push(c.value),c=b.next();return h}const Lo=/-+([a-z0-9])/g;function pa(b){return b.replace(Lo,(...h)=>h[1].toUpperCase())}function Vo(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function A(b,h,c){switch(h.type){case 7:return b.visitTrigger(h,c);case 0:return b.visitState(h,c);case 1:return b.visitTransition(h,c);case 2:return b.visitSequence(h,c);case 3:return b.visitGroup(h,c);case 4:return b.visitAnimate(h,c);case 5:return b.visitKeyframes(h,c);case 6:return b.visitStyle(h,c);case 8:return b.visitReference(h,c);case 9:return b.visitAnimateChild(h,c);case 10:return b.visitAnimateRef(h,c);case 11:return b.visitQuery(h,c);case 12:return b.visitStagger(h,c);default:throw function co(b){return new y.vHH(3004,Jt)}()}}function qn(b,h){const c=[];return"string"==typeof b?b.split(/\s*,\s*/).forEach(I=>function an(b,h,c){if(":"==b[0]){const Oe=function Ir(b,h){switch(b){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(c,I)=>parseFloat(I)>parseFloat(c);case":decrement":return(c,I)=>parseFloat(I)<parseFloat(c);default:return h.push(function Uu(b){return new y.vHH(3016,Jt)}()),"* => *"}}(b,c);if("function"==typeof Oe)return void h.push(Oe);b=Oe}const I=b.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==I||I.length<4)return c.push(function aa(b){return new y.vHH(3015,Jt)}()),h;const F=I[1],Y=I[2],ae=I[3];h.push(no(F,ae));"<"==Y[0]&&!("*"==F&&"*"==ae)&&h.push(no(ae,F))}(I,c,h)):c.push(b),c}const pr=new Set(["true","1"]),Ri=new Set(["false","0"]);function no(b,h){const c=pr.has(b)||Ri.has(b),I=pr.has(h)||Ri.has(h);return(F,Y)=>{let ae="*"==b||b==F,ge="*"==h||h==Y;return!ae&&c&&"boolean"==typeof F&&(ae=F?pr.has(b):Ri.has(b)),!ge&&I&&"boolean"==typeof Y&&(ge=Y?pr.has(h):Ri.has(h)),ae&&ge}}const tu=new RegExp("s*:selfs*,?","g");function Hr(b,h,c,I){return new ma(b).build(h,c,I)}class ma{constructor(h){this._driver=h}build(h,c,I){const F=new Ua(c);this._resetContextStyleTimingState(F);const Y=A(this,eo(h),F);return F.unsupportedCSSPropertiesFound.size&&F.unsupportedCSSPropertiesFound.keys(),Y}_resetContextStyleTimingState(h){h.currentQuerySelector="",h.collectedStyles={},h.collectedStyles[""]={},h.currentTime=0}visitTrigger(h,c){let I=c.queryCount=0,F=c.depCount=0;const Y=[],ae=[];return"@"==h.name.charAt(0)&&c.errors.push(function V(){return new y.vHH(3006,Jt)}()),h.definitions.forEach(ge=>{if(this._resetContextStyleTimingState(c),0==ge.type){const Oe=ge,ot=Oe.name;ot.toString().split(/\s*,\s*/).forEach(Ht=>{Oe.name=Ht,Y.push(this.visitState(Oe,c))}),Oe.name=ot}else if(1==ge.type){const Oe=this.visitTransition(ge,c);I+=Oe.queryCount,F+=Oe.depCount,ae.push(Oe)}else c.errors.push(function P(){return new y.vHH(3007,Jt)}())}),{type:7,name:h.name,states:Y,transitions:ae,queryCount:I,depCount:F,options:null}}visitState(h,c){const I=this.visitStyle(h.styles,c),F=h.options&&h.options.params||null;if(I.containsDynamicStyles){const Y=new Set,ae=F||{};I.styles.forEach(ge=>{if(xn(ge)){const Oe=ge;Object.keys(Oe).forEach(ot=>{eu(Oe[ot]).forEach(Ht=>{ae.hasOwnProperty(Ht)||Y.add(Ht)})})}}),Y.size&&(to(Y.values()),c.errors.push(function R(b,h){return new y.vHH(3008,Jt)}()))}return{type:0,name:h.name,style:I,options:F?{params:F}:null}}visitTransition(h,c){c.queryCount=0,c.depCount=0;const I=A(this,eo(h.animation),c);return{type:1,matchers:qn(h.expr,c.errors),animation:I,queryCount:c.queryCount,depCount:c.depCount,options:So(h.options)}}visitSequence(h,c){return{type:2,steps:h.steps.map(I=>A(this,I,c)),options:So(h.options)}}visitGroup(h,c){const I=c.currentTime;let F=0;const Y=h.steps.map(ae=>{c.currentTime=I;const ge=A(this,ae,c);return F=Math.max(F,c.currentTime),ge});return c.currentTime=F,{type:3,steps:Y,options:So(h.options)}}visitAnimate(h,c){const I=function Pi(b,h){if(b.hasOwnProperty("duration"))return b;if("number"==typeof b)return Dl(es(b,h).duration,0,"");const c=b;if(c.split(/\s+/).some(Y=>"{"==Y.charAt(0)&&"{"==Y.charAt(1))){const Y=Dl(0,0,"");return Y.dynamic=!0,Y.strValue=c,Y}const F=es(c,h);return Dl(F.duration,F.delay,F.easing)}(h.timings,c.errors);c.currentAnimateTimings=I;let F,Y=h.styles?h.styles:O({});if(5==Y.type)F=this.visitKeyframes(Y,c);else{let ae=h.styles,ge=!1;if(!ae){ge=!0;const ot={};I.easing&&(ot.easing=I.easing),ae=O(ot)}c.currentTime+=I.duration+I.delay;const Oe=this.visitStyle(ae,c);Oe.isEmptyStep=ge,F=Oe}return c.currentAnimateTimings=null,{type:4,timings:I,style:F,options:null}}visitStyle(h,c){const I=this._makeStyleAst(h,c);return this._validateStyleAst(I,c),I}_makeStyleAst(h,c){const I=[];Array.isArray(h.styles)?h.styles.forEach(ae=>{"string"==typeof ae?ae==Vt?I.push(ae):c.errors.push(function X(b){return new y.vHH(3002,Jt)}()):I.push(ae)}):I.push(h.styles);let F=!1,Y=null;return I.forEach(ae=>{if(xn(ae)){const ge=ae,Oe=ge.easing;if(Oe&&(Y=Oe,delete ge.easing),!F)for(let ot in ge)if(ge[ot].toString().indexOf("{{")>=0){F=!0;break}}}),{type:6,styles:I,easing:Y,offset:h.offset,containsDynamicStyles:F,options:null}}_validateStyleAst(h,c){const I=c.currentAnimateTimings;let F=c.currentTime,Y=c.currentTime;I&&Y>0&&(Y-=I.duration+I.delay),h.styles.forEach(ae=>{"string"!=typeof ae&&Object.keys(ae).forEach(ge=>{if(!this._driver.validateStyleProperty(ge))return delete ae[ge],void c.unsupportedCSSPropertiesFound.add(ge);const Oe=c.collectedStyles[c.currentQuerySelector],ot=Oe[ge];let Ht=!0;ot&&(Y!=F&&Y>=ot.startTime&&F<=ot.endTime&&(c.errors.push(function Et(b,h,c,I,F){return new y.vHH(3010,Jt)}()),Ht=!1),Y=ot.startTime),Ht&&(Oe[ge]={startTime:Y,endTime:F}),c.options&&function Ao(b,h,c){const I=h.params||{},F=eu(b);F.length&&F.forEach(Y=>{I.hasOwnProperty(Y)||c.push(function xi(b){return new y.vHH(3001,Jt)}())})}(ae[ge],c.options,c.errors)})})}visitKeyframes(h,c){const I={type:5,styles:[],options:null};if(!c.currentAnimateTimings)return c.errors.push(function ar(){return new y.vHH(3011,Jt)}()),I;let Y=0;const ae=[];let ge=!1,Oe=!1,ot=0;const Ht=h.steps.map(Bi=>{const Ci=this._makeStyleAst(Bi,c);let Oi=null!=Ci.offset?Ci.offset:function Ni(b){if("string"==typeof b)return null;let h=null;if(Array.isArray(b))b.forEach(c=>{if(xn(c)&&c.hasOwnProperty("offset")){const I=c;h=parseFloat(I.offset),delete I.offset}});else if(xn(b)&&b.hasOwnProperty("offset")){const c=b;h=parseFloat(c.offset),delete c.offset}return h}(Ci.styles),Ds=0;return null!=Oi&&(Y++,Ds=Ci.offset=Oi),Oe=Oe||Ds<0||Ds>1,ge=ge||Ds<ot,ot=Ds,ae.push(Ds),Ci});Oe&&c.errors.push(function sr(){return new y.vHH(3012,Jt)}()),ge&&c.errors.push(function zi(){return new y.vHH(3200,Jt)}());const gn=h.steps.length;let kn=0;Y>0&&Y<gn?c.errors.push(function ws(){return new y.vHH(3202,Jt)}()):0==Y&&(kn=1/(gn-1));const gr=gn-1,Ln=c.currentTime,tr=c.currentAnimateTimings,Vr=tr.duration;return Ht.forEach((Bi,Ci)=>{const Oi=kn>0?Ci==gr?1:kn*Ci:ae[Ci],Ds=Oi*Vr;c.currentTime=Ln+tr.delay+Ds,tr.duration=Ds,this._validateStyleAst(Bi,c),Bi.offset=Oi,I.styles.push(Bi)}),I}visitReference(h,c){return{type:8,animation:A(this,eo(h.animation),c),options:So(h.options)}}visitAnimateChild(h,c){return c.depCount++,{type:9,options:So(h.options)}}visitAnimateRef(h,c){return{type:10,animation:this.visitReference(h.animation,c),options:So(h.options)}}visitQuery(h,c){const I=c.currentQuerySelector,F=h.options||{};c.queryCount++,c.currentQuery=h;const[Y,ae]=function Gn(b){const h=!!b.split(/\s*,\s*/).find(c=>":self"==c);return h&&(b=b.replace(tu,"")),b=b.replace(/@\*/g,Os).replace(/@\w+/g,c=>Os+"-"+c.substr(1)).replace(/:animating/g,Xa),[b,h]}(h.selector);c.currentQuerySelector=I.length?I+" "+Y:Y,ms(c.collectedStyles,c.currentQuerySelector,{});const ge=A(this,eo(h.animation),c);return c.currentQuery=null,c.currentQuerySelector=I,{type:11,selector:Y,limit:F.limit||0,optional:!!F.optional,includeSelf:ae,animation:ge,originalSelector:h.selector,options:So(h.options)}}visitStagger(h,c){c.currentQuery||c.errors.push(function Wi(){return new y.vHH(3013,Jt)}());const I="full"===h.timings?{duration:0,delay:0,easing:"full"}:es(h.timings,c.errors,!0);return{type:12,animation:A(this,eo(h.animation),c),timings:I,options:null}}}class Ua{constructor(h){this.errors=h,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function xn(b){return!Array.isArray(b)&&"object"==typeof b}function So(b){return b?(b=ts(b)).params&&(b.params=function Ca(b){return b?ts(b):null}(b.params)):b={},b}function Dl(b,h,c){return{duration:b,delay:h,easing:c}}function nu(b,h,c,I,F,Y,ae=null,ge=!1){return{type:1,element:b,keyframes:h,preStyleProps:c,postStyleProps:I,duration:F,delay:Y,totalTime:F+Y,easing:ae,subTimeline:ge}}class hr{constructor(){this._map=new Map}get(h){return this._map.get(h)||[]}append(h,c){let I=this._map.get(h);I||this._map.set(h,I=[]),I.push(...c)}has(h){return this._map.has(h)}clear(){this._map.clear()}}const bu=new RegExp(":enter","g"),Zi=new RegExp(":leave","g");function Ui(b,h,c,I,F,Y={},ae={},ge,Oe,ot=[]){return(new Mo).buildKeyframes(b,h,c,I,F,Y,ae,ge,Oe,ot)}class Mo{buildKeyframes(h,c,I,F,Y,ae,ge,Oe,ot,Ht=[]){ot=ot||new hr;const gn=new Yo(h,c,ot,F,Y,Ht,[]);gn.options=Oe,gn.currentTimeline.setStyles([ae],null,gn.errors,Oe),A(this,I,gn);const kn=gn.timelines.filter(gr=>gr.containsAnimation());if(Object.keys(ge).length){let gr;for(let Ln=kn.length-1;Ln>=0;Ln--){const tr=kn[Ln];if(tr.element===c){gr=tr;break}}gr&&!gr.allowOnlyTimelineStyles()&&gr.setStyles([ge],null,gn.errors,Oe)}return kn.length?kn.map(gr=>gr.buildKeyframes()):[nu(c,[],[],[],0,0,"",!1)]}visitTrigger(h,c){}visitState(h,c){}visitTransition(h,c){}visitAnimateChild(h,c){const I=c.subInstructions.get(c.element);if(I){const F=c.createSubContext(h.options),Y=c.currentTimeline.currentTime,ae=this._visitSubInstructions(I,F,F.options);Y!=ae&&c.transformIntoNewTimeline(ae)}c.previousNode=h}visitAnimateRef(h,c){const I=c.createSubContext(h.options);I.transformIntoNewTimeline(),this.visitReference(h.animation,I),c.transformIntoNewTimeline(I.currentTimeline.currentTime),c.previousNode=h}_visitSubInstructions(h,c,I){let Y=c.currentTimeline.currentTime;const ae=null!=I.duration?fo(I.duration):null,ge=null!=I.delay?fo(I.delay):null;return 0!==ae&&h.forEach(Oe=>{const ot=c.appendInstructionToTimeline(Oe,ae,ge);Y=Math.max(Y,ot.duration+ot.delay)}),Y}visitReference(h,c){c.updateOptions(h.options,!0),A(this,h.animation,c),c.previousNode=h}visitSequence(h,c){const I=c.subContextCount;let F=c;const Y=h.options;if(Y&&(Y.params||Y.delay)&&(F=c.createSubContext(Y),F.transformIntoNewTimeline(),null!=Y.delay)){6==F.previousNode.type&&(F.currentTimeline.snapshotCurrentStyles(),F.previousNode=Qr);const ae=fo(Y.delay);F.delayNextStep(ae)}h.steps.length&&(h.steps.forEach(ae=>A(this,ae,F)),F.currentTimeline.applyStylesToKeyframe(),F.subContextCount>I&&F.transformIntoNewTimeline()),c.previousNode=h}visitGroup(h,c){const I=[];let F=c.currentTimeline.currentTime;const Y=h.options&&h.options.delay?fo(h.options.delay):0;h.steps.forEach(ae=>{const ge=c.createSubContext(h.options);Y&&ge.delayNextStep(Y),A(this,ae,ge),F=Math.max(F,ge.currentTimeline.currentTime),I.push(ge.currentTimeline)}),I.forEach(ae=>c.currentTimeline.mergeTimelineCollectedStyles(ae)),c.transformIntoNewTimeline(F),c.previousNode=h}_visitTiming(h,c){if(h.dynamic){const I=h.strValue;return es(c.params?Ti(I,c.params,c.errors):I,c.errors)}return{duration:h.duration,delay:h.delay,easing:h.easing}}visitAnimate(h,c){const I=c.currentAnimateTimings=this._visitTiming(h.timings,c),F=c.currentTimeline;I.delay&&(c.incrementTime(I.delay),F.snapshotCurrentStyles());const Y=h.style;5==Y.type?this.visitKeyframes(Y,c):(c.incrementTime(I.duration),this.visitStyle(Y,c),F.applyStylesToKeyframe()),c.currentAnimateTimings=null,c.previousNode=h}visitStyle(h,c){const I=c.currentTimeline,F=c.currentAnimateTimings;!F&&I.getCurrentStyleProperties().length&&I.forwardFrame();const Y=F&&F.easing||h.easing;h.isEmptyStep?I.applyEmptyStep(Y):I.setStyles(h.styles,Y,c.errors,c.options),c.previousNode=h}visitKeyframes(h,c){const I=c.currentAnimateTimings,F=c.currentTimeline.duration,Y=I.duration,ge=c.createSubContext().currentTimeline;ge.easing=I.easing,h.styles.forEach(Oe=>{ge.forwardTime((Oe.offset||0)*Y),ge.setStyles(Oe.styles,Oe.easing,c.errors,c.options),ge.applyStylesToKeyframe()}),c.currentTimeline.mergeTimelineCollectedStyles(ge),c.transformIntoNewTimeline(F+Y),c.previousNode=h}visitQuery(h,c){const I=c.currentTimeline.currentTime,F=h.options||{},Y=F.delay?fo(F.delay):0;Y&&(6===c.previousNode.type||0==I&&c.currentTimeline.getCurrentStyleProperties().length)&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=Qr);let ae=I;const ge=c.invokeQuery(h.selector,h.originalSelector,h.limit,h.includeSelf,!!F.optional,c.errors);c.currentQueryTotal=ge.length;let Oe=null;ge.forEach((ot,Ht)=>{c.currentQueryIndex=Ht;const gn=c.createSubContext(h.options,ot);Y&&gn.delayNextStep(Y),ot===c.element&&(Oe=gn.currentTimeline),A(this,h.animation,gn),gn.currentTimeline.applyStylesToKeyframe(),ae=Math.max(ae,gn.currentTimeline.currentTime)}),c.currentQueryIndex=0,c.currentQueryTotal=0,c.transformIntoNewTimeline(ae),Oe&&(c.currentTimeline.mergeTimelineCollectedStyles(Oe),c.currentTimeline.snapshotCurrentStyles()),c.previousNode=h}visitStagger(h,c){const I=c.parentContext,F=c.currentTimeline,Y=h.timings,ae=Math.abs(Y.duration),ge=ae*(c.currentQueryTotal-1);let Oe=ae*c.currentQueryIndex;switch(Y.duration<0?"reverse":Y.easing){case"reverse":Oe=ge-Oe;break;case"full":Oe=I.currentStaggerTime}const Ht=c.currentTimeline;Oe&&Ht.delayNextStep(Oe);const gn=Ht.currentTime;A(this,h.animation,c),c.previousNode=h,I.currentStaggerTime=F.currentTime-gn+(F.startTime-I.currentTimeline.startTime)}}const Qr={};class Yo{constructor(h,c,I,F,Y,ae,ge,Oe){this._driver=h,this.element=c,this.subInstructions=I,this._enterClassName=F,this._leaveClassName=Y,this.errors=ae,this.timelines=ge,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Qr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Oe||new ru(this._driver,c,0),ge.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(h,c){if(!h)return;const I=h;let F=this.options;null!=I.duration&&(F.duration=fo(I.duration)),null!=I.delay&&(F.delay=fo(I.delay));const Y=I.params;if(Y){let ae=F.params;ae||(ae=this.options.params={}),Object.keys(Y).forEach(ge=>{(!c||!ae.hasOwnProperty(ge))&&(ae[ge]=Ti(Y[ge],ae,this.errors))})}}_copyOptions(){const h={};if(this.options){const c=this.options.params;if(c){const I=h.params={};Object.keys(c).forEach(F=>{I[F]=c[F]})}}return h}createSubContext(h=null,c,I){const F=c||this.element,Y=new Yo(this._driver,F,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(F,I||0));return Y.previousNode=this.previousNode,Y.currentAnimateTimings=this.currentAnimateTimings,Y.options=this._copyOptions(),Y.updateOptions(h),Y.currentQueryIndex=this.currentQueryIndex,Y.currentQueryTotal=this.currentQueryTotal,Y.parentContext=this,this.subContextCount++,Y}transformIntoNewTimeline(h){return this.previousNode=Qr,this.currentTimeline=this.currentTimeline.fork(this.element,h),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(h,c,I){const F={duration:null!=c?c:h.duration,delay:this.currentTimeline.currentTime+(null!=I?I:0)+h.delay,easing:""},Y=new ks(this._driver,h.element,h.keyframes,h.preStyleProps,h.postStyleProps,F,h.stretchStartingKeyframe);return this.timelines.push(Y),F}incrementTime(h){this.currentTimeline.forwardTime(this.currentTimeline.duration+h)}delayNextStep(h){h>0&&this.currentTimeline.delayNextStep(h)}invokeQuery(h,c,I,F,Y,ae){let ge=[];if(F&&ge.push(this.element),h.length>0){h=(h=h.replace(bu,"."+this._enterClassName)).replace(Zi,"."+this._leaveClassName);let ot=this._driver.query(this.element,h,1!=I);0!==I&&(ot=I<0?ot.slice(ot.length+I,ot.length):ot.slice(0,I)),ge.push(...ot)}return!Y&&0==ge.length&&ae.push(function Ys(b){return new y.vHH(3014,Jt)}()),ge}}class ru{constructor(h,c,I,F){this._driver=h,this.element=c,this.startTime=I,this._elementTimelineStylesLookup=F,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(c),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(c,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(h){const c=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||c?(this.forwardTime(this.currentTime+h),c&&this.snapshotCurrentStyles()):this.startTime+=h}fork(h,c){return this.applyStylesToKeyframe(),new ru(this._driver,h,c||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(h){this.applyStylesToKeyframe(),this.duration=h,this._loadKeyframe()}_updateStyle(h,c){this._localTimelineStyles[h]=c,this._globalTimelineStyles[h]=c,this._styleSummary[h]={time:this.currentTime,value:c}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(h){h&&(this._previousKeyframe.easing=h),Object.keys(this._globalTimelineStyles).forEach(c=>{this._backFill[c]=this._globalTimelineStyles[c]||Vt,this._currentKeyframe[c]=Vt}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(h,c,I,F){c&&(this._previousKeyframe.easing=c);const Y=F&&F.params||{},ae=function ju(b,h){const c={};let I;return b.forEach(F=>{"*"===F?(I=I||Object.keys(h),I.forEach(Y=>{c[Y]=Vt})):Xs(F,!1,c)}),c}(h,this._globalTimelineStyles);Object.keys(ae).forEach(ge=>{const Oe=Ti(ae[ge],Y,I);this._pendingStyles[ge]=Oe,this._localTimelineStyles.hasOwnProperty(ge)||(this._backFill[ge]=this._globalTimelineStyles.hasOwnProperty(ge)?this._globalTimelineStyles[ge]:Vt),this._updateStyle(ge,Oe)})}applyStylesToKeyframe(){const h=this._pendingStyles,c=Object.keys(h);0!=c.length&&(this._pendingStyles={},c.forEach(I=>{this._currentKeyframe[I]=h[I]}),Object.keys(this._localTimelineStyles).forEach(I=>{this._currentKeyframe.hasOwnProperty(I)||(this._currentKeyframe[I]=this._localTimelineStyles[I])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(h=>{const c=this._localTimelineStyles[h];this._pendingStyles[h]=c,this._updateStyle(h,c)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const h=[];for(let c in this._currentKeyframe)h.push(c);return h}mergeTimelineCollectedStyles(h){Object.keys(h._styleSummary).forEach(c=>{const I=this._styleSummary[c],F=h._styleSummary[c];(!I||F.time>I.time)&&this._updateStyle(c,F.value)})}buildKeyframes(){this.applyStylesToKeyframe();const h=new Set,c=new Set,I=1===this._keyframes.size&&0===this.duration;let F=[];this._keyframes.forEach((ge,Oe)=>{const ot=Xs(ge,!0);Object.keys(ot).forEach(Ht=>{const gn=ot[Ht];"!"==gn?h.add(Ht):gn==Vt&&c.add(Ht)}),I||(ot.offset=Oe/this.duration),F.push(ot)});const Y=h.size?to(h.values()):[],ae=c.size?to(c.values()):[];if(I){const ge=F[0],Oe=ts(ge);ge.offset=0,Oe.offset=1,F=[ge,Oe]}return nu(this.element,F,Y,ae,this.duration,this.startTime,this.easing,!1)}}class ks extends ru{constructor(h,c,I,F,Y,ae,ge=!1){super(h,c,ae.delay),this.keyframes=I,this.preStyleProps=F,this.postStyleProps=Y,this._stretchStartingKeyframe=ge,this.timings={duration:ae.duration,delay:ae.delay,easing:ae.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let h=this.keyframes,{delay:c,duration:I,easing:F}=this.timings;if(this._stretchStartingKeyframe&&c){const Y=[],ae=I+c,ge=c/ae,Oe=Xs(h[0],!1);Oe.offset=0,Y.push(Oe);const ot=Xs(h[0],!1);ot.offset=_s(ge),Y.push(ot);const Ht=h.length-1;for(let gn=1;gn<=Ht;gn++){let kn=Xs(h[gn],!1);kn.offset=_s((c+kn.offset*I)/ae),Y.push(kn)}I=ae,c=0,F="",h=Y}return nu(this.element,h,this.preStyleProps,this.postStyleProps,I,c,F,!0)}}function _s(b,h=3){const c=Math.pow(10,h-1);return Math.round(b*c)/c}class js{}class Qo extends js{normalizePropertyName(h,c){return pa(h)}normalizeStyleValue(h,c,I,F){let Y="";const ae=I.toString().trim();if($t[c]&&0!==I&&"0"!==I)if("number"==typeof I)Y="px";else{const ge=I.match(/^[+-]?[\d\.]+([a-z]*)$/);ge&&0==ge[1].length&&F.push(function qo(b,h){return new y.vHH(3005,Jt)}())}return ae+Y}}const $t=(()=>function ya(b){const h={};return b.forEach(c=>h[c]=!0),h}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function iu(b,h,c,I,F,Y,ae,ge,Oe,ot,Ht,gn,kn){return{type:0,element:b,triggerName:h,isRemovalTransition:F,fromState:c,fromStyles:Y,toState:I,toStyles:ae,timelines:ge,queriedElements:Oe,preStyleProps:ot,postStyleProps:Ht,totalTime:gn,errors:kn}}const _a={};class yi{constructor(h,c,I){this._triggerName=h,this.ast=c,this._stateStyles=I}match(h,c,I,F){return function Ba(b,h,c,I,F){return b.some(Y=>Y(h,c,I,F))}(this.ast.matchers,h,c,I,F)}buildStyles(h,c,I){const F=this._stateStyles["*"],Y=this._stateStyles[h],ae=F?F.buildStyles(c,I):{};return Y?Y.buildStyles(c,I):ae}build(h,c,I,F,Y,ae,ge,Oe,ot,Ht){const gn=[],kn=this.ast.options&&this.ast.options.params||_a,Ln=this.buildStyles(I,ge&&ge.params||_a,gn),tr=Oe&&Oe.params||_a,Vr=this.buildStyles(F,tr,gn),Bi=new Set,Ci=new Map,Oi=new Map,Ds="void"===F,Yi={params:Object.assign(Object.assign({},kn),tr)},_o=Ht?[]:Ui(h,c,this.ast.animation,Y,ae,Ln,Vr,Yi,ot,gn);let Ts=0;if(_o.forEach(Sa=>{Ts=Math.max(Sa.duration+Sa.delay,Ts)}),gn.length)return iu(c,this._triggerName,I,F,Ds,Ln,Vr,[],[],Ci,Oi,Ts,gn);_o.forEach(Sa=>{const Ma=Sa.element,vs=ms(Ci,Ma,{});Sa.preStyleProps.forEach(No=>vs[No]=!0);const Su=ms(Oi,Ma,{});Sa.postStyleProps.forEach(No=>Su[No]=!0),Ma!==c&&Bi.add(Ma)});const Ro=to(Bi.values());return iu(c,this._triggerName,I,F,Ds,Ln,Vr,_o,Ro,Ci,Oi,Ts)}}class go{constructor(h,c,I){this.styles=h,this.defaultParams=c,this.normalizer=I}buildStyles(h,c){const I={},F=ts(this.defaultParams);return Object.keys(h).forEach(Y=>{const ae=h[Y];null!=ae&&(F[Y]=ae)}),this.styles.styles.forEach(Y=>{if("string"!=typeof Y){const ae=Y;Object.keys(ae).forEach(ge=>{let Oe=ae[ge];Oe.length>1&&(Oe=Ti(Oe,F,c));const ot=this.normalizer.normalizePropertyName(ge,c);Oe=this.normalizer.normalizeStyleValue(ge,ot,Oe,c),I[ot]=Oe})}}),I}}class ro{constructor(h,c,I){this.name=h,this.ast=c,this._normalizer=I,this.transitionFactories=[],this.states={},c.states.forEach(F=>{this.states[F.name]=new go(F.style,F.options&&F.options.params||{},I)}),Jo(this.states,"true","1"),Jo(this.states,"false","0"),c.transitions.forEach(F=>{this.transitionFactories.push(new yi(h,F,this.states))}),this.fallbackTransition=function $u(b,h,c){return new yi(b,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ae,ge)=>!0],options:null,queryCount:0,depCount:0},h)}(h,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(h,c,I,F){return this.transitionFactories.find(ae=>ae.match(h,c,I,F))||null}matchStyles(h,c,I){return this.fallbackTransition.buildStyles(h,c,I)}}function Jo(b,h,c){b.hasOwnProperty(h)?b.hasOwnProperty(c)||(b[c]=b[h]):b.hasOwnProperty(c)&&(b[h]=b[c])}const al=new hr;class mo{constructor(h,c,I){this.bodyNode=h,this._driver=c,this._normalizer=I,this._animations={},this._playersById={},this.players=[]}register(h,c){const I=[],Y=Hr(this._driver,c,I,[]);if(I.length)throw function bs(b){return new y.vHH(3503,Jt)}();this._animations[h]=Y}_buildPlayer(h,c,I){const F=h.element,Y=wo(0,this._normalizer,0,h.keyframes,c,I);return this._driver.animate(F,Y,h.duration,h.delay,h.easing,[],!0)}create(h,c,I={}){const F=[],Y=this._animations[h];let ae;const ge=new Map;if(Y?(ae=Ui(this._driver,c,Y,Bs,Vi,{},{},I,al,F),ae.forEach(Ht=>{const gn=ms(ge,Ht.element,{});Ht.postStyleProps.forEach(kn=>gn[kn]=null)})):(F.push(function Da(){return new y.vHH(3300,Jt)}()),ae=[]),F.length)throw function ko(b){return new y.vHH(3504,Jt)}();ge.forEach((Ht,gn)=>{Object.keys(Ht).forEach(kn=>{Ht[kn]=this._driver.computeStyle(gn,kn,Vt)})});const ot=Vs(ae.map(Ht=>{const gn=ge.get(Ht.element);return this._buildPlayer(Ht,{},gn)}));return this._playersById[h]=ot,ot.onDestroy(()=>this.destroy(h)),this.players.push(ot),ot}destroy(h){const c=this._getPlayer(h);c.destroy(),delete this._playersById[h];const I=this.players.indexOf(c);I>=0&&this.players.splice(I,1)}_getPlayer(h){const c=this._playersById[h];if(!c)throw function gs(b){return new y.vHH(3301,Jt)}();return c}listen(h,c,I,F){const Y=Us(c,"","","");return ca(this._getPlayer(h),I,Y,F),()=>{}}command(h,c,I,F){if("register"==I)return void this.register(h,F[0]);if("create"==I)return void this.create(h,c,F[0]||{});const Y=this._getPlayer(h);switch(I){case"play":Y.play();break;case"pause":Y.pause();break;case"reset":Y.reset();break;case"restart":Y.restart();break;case"finish":Y.finish();break;case"init":Y.init();break;case"setPosition":Y.setPosition(parseFloat(F[0]));break;case"destroy":this.destroy(h)}}}const Du="ng-animate-queued",xo="ng-animate-disabled",Tu=[],Ha={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},N={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},L="__ng_removed";class J{constructor(h,c=""){this.namespaceId=c;const I=h&&h.hasOwnProperty("value");if(this.value=function Fn(b){return null!=b?b:null}(I?h.value:h),I){const Y=ts(h);delete Y.value,this.options=Y}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(h){const c=h.params;if(c){const I=this.options.params;Object.keys(c).forEach(F=>{null==I[F]&&(I[F]=c[F])})}}}const oe="void",Ue=new J(oe);class Ye{constructor(h,c,I){this.id=h,this.hostElement=c,this._engine=I,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+h,Ar(c,this._hostClassName)}listen(h,c,I,F){if(!this._triggers.hasOwnProperty(c))throw function ua(b,h){return new y.vHH(3302,Jt)}();if(null==I||0==I.length)throw function Za(b){return new y.vHH(3303,Jt)}();if(!function Rn(b){return"start"==b||"done"==b}(I))throw function ci(b,h){return new y.vHH(3400,Jt)}();const Y=ms(this._elementListeners,h,[]),ae={name:c,phase:I,callback:F};Y.push(ae);const ge=ms(this._engine.statesByElement,h,{});return ge.hasOwnProperty(c)||(Ar(h,La),Ar(h,La+"-"+c),ge[c]=Ue),()=>{this._engine.afterFlush(()=>{const Oe=Y.indexOf(ae);Oe>=0&&Y.splice(Oe,1),this._triggers[c]||delete ge[c]})}}register(h,c){return!this._triggers[h]&&(this._triggers[h]=c,!0)}_getTrigger(h){const c=this._triggers[h];if(!c)throw function Ka(b){return new y.vHH(3401,Jt)}();return c}trigger(h,c,I,F=!0){const Y=this._getTrigger(c),ae=new sn(this.id,c,h);let ge=this._engine.statesByElement.get(h);ge||(Ar(h,La),Ar(h,La+"-"+c),this._engine.statesByElement.set(h,ge={}));let Oe=ge[c];const ot=new J(I,this.id);if(!(I&&I.hasOwnProperty("value"))&&Oe&&ot.absorbOptions(Oe.options),ge[c]=ot,Oe||(Oe=Ue),ot.value!==oe&&Oe.value===ot.value){if(!function Xl(b,h){const c=Object.keys(b),I=Object.keys(h);if(c.length!=I.length)return!1;for(let F=0;F<c.length;F++){const Y=c[F];if(!h.hasOwnProperty(Y)||b[Y]!==h[Y])return!1}return!0}(Oe.params,ot.params)){const tr=[],Vr=Y.matchStyles(Oe.value,Oe.params,tr),Bi=Y.matchStyles(ot.value,ot.params,tr);tr.length?this._engine.reportError(tr):this._engine.afterFlush(()=>{Yr(h,Vr),ns(h,Bi)})}return}const kn=ms(this._engine.playersByElement,h,[]);kn.forEach(tr=>{tr.namespaceId==this.id&&tr.triggerName==c&&tr.queued&&tr.destroy()});let gr=Y.matchTransition(Oe.value,ot.value,h,ot.params),Ln=!1;if(!gr){if(!F)return;gr=Y.fallbackTransition,Ln=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:c,transition:gr,fromState:Oe,toState:ot,player:ae,isFallbackTransition:Ln}),Ln||(Ar(h,Du),ae.onStart(()=>{er(h,Du)})),ae.onDone(()=>{let tr=this.players.indexOf(ae);tr>=0&&this.players.splice(tr,1);const Vr=this._engine.playersByElement.get(h);if(Vr){let Bi=Vr.indexOf(ae);Bi>=0&&Vr.splice(Bi,1)}}),this.players.push(ae),kn.push(ae),ae}deregister(h){delete this._triggers[h],this._engine.statesByElement.forEach((c,I)=>{delete c[h]}),this._elementListeners.forEach((c,I)=>{this._elementListeners.set(I,c.filter(F=>F.name!=h))})}clearElementCache(h){this._engine.statesByElement.delete(h),this._elementListeners.delete(h);const c=this._engine.playersByElement.get(h);c&&(c.forEach(I=>I.destroy()),this._engine.playersByElement.delete(h))}_signalRemovalForInnerTriggers(h,c){const I=this._engine.driver.query(h,Os,!0);I.forEach(F=>{if(F[L])return;const Y=this._engine.fetchNamespacesByElement(F);Y.size?Y.forEach(ae=>ae.triggerLeaveAnimation(F,c,!1,!0)):this.clearElementCache(F)}),this._engine.afterFlushAnimationsDone(()=>I.forEach(F=>this.clearElementCache(F)))}triggerLeaveAnimation(h,c,I,F){const Y=this._engine.statesByElement.get(h),ae=new Map;if(Y){const ge=[];if(Object.keys(Y).forEach(Oe=>{if(ae.set(Oe,Y[Oe].value),this._triggers[Oe]){const ot=this.trigger(h,Oe,oe,F);ot&&ge.push(ot)}}),ge.length)return this._engine.markElementAsRemoved(this.id,h,!0,c,ae),I&&Vs(ge).onDone(()=>this._engine.processLeaveNode(h)),!0}return!1}prepareLeaveAnimationListeners(h){const c=this._elementListeners.get(h),I=this._engine.statesByElement.get(h);if(c&&I){const F=new Set;c.forEach(Y=>{const ae=Y.name;if(F.has(ae))return;F.add(ae);const Oe=this._triggers[ae].fallbackTransition,ot=I[ae]||Ue,Ht=new J(oe),gn=new sn(this.id,ae,h);this._engine.totalQueuedPlayers++,this._queue.push({element:h,triggerName:ae,transition:Oe,fromState:ot,toState:Ht,player:gn,isFallbackTransition:!0})})}}removeNode(h,c){const I=this._engine;if(h.childElementCount&&this._signalRemovalForInnerTriggers(h,c),this.triggerLeaveAnimation(h,c,!0))return;let F=!1;if(I.totalAnimations){const Y=I.players.length?I.playersByQueriedElement.get(h):[];if(Y&&Y.length)F=!0;else{let ae=h;for(;ae=ae.parentNode;)if(I.statesByElement.get(ae)){F=!0;break}}}if(this.prepareLeaveAnimationListeners(h),F)I.markElementAsRemoved(this.id,h,!1,c);else{const Y=h[L];(!Y||Y===Ha)&&(I.afterFlush(()=>this.clearElementCache(h)),I.destroyInnerAnimations(h),I._onRemovalComplete(h,c))}}insertNode(h,c){Ar(h,this._hostClassName)}drainQueuedTransitions(h){const c=[];return this._queue.forEach(I=>{const F=I.player;if(F.destroyed)return;const Y=I.element,ae=this._elementListeners.get(Y);ae&&ae.forEach(ge=>{if(ge.name==I.triggerName){const Oe=Us(Y,I.triggerName,I.fromState.value,I.toState.value);Oe._data=h,ca(I.player,ge.phase,Oe,ge.callback)}}),F.markedForDestroy?this._engine.afterFlush(()=>{F.destroy()}):c.push(I)}),this._queue=[],c.sort((I,F)=>{const Y=I.transition.ast.depCount,ae=F.transition.ast.depCount;return 0==Y||0==ae?Y-ae:this._engine.driver.containsElement(I.element,F.element)?1:-1})}destroy(h){this.players.forEach(c=>c.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,h)}elementContainsData(h){let c=!1;return this._elementListeners.has(h)&&(c=!0),c=!!this._queue.find(I=>I.element===h)||c,c}}class Dt{constructor(h,c,I){this.bodyNode=h,this.driver=c,this._normalizer=I,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(F,Y)=>{}}_onRemovalComplete(h,c){this.onRemovalComplete(h,c)}get queuedPlayers(){const h=[];return this._namespaceList.forEach(c=>{c.players.forEach(I=>{I.queued&&h.push(I)})}),h}createNamespace(h,c){const I=new Ye(h,c,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,c)?this._balanceNamespaceList(I,c):(this.newHostElements.set(c,I),this.collectEnterElement(c)),this._namespaceLookup[h]=I}_balanceNamespaceList(h,c){const I=this._namespaceList,F=this.namespacesByHostElement,Y=I.length-1;if(Y>=0){let ae=!1;if(void 0!==this.driver.getParentElement){let ge=this.driver.getParentElement(c);for(;ge;){const Oe=F.get(ge);if(Oe){const ot=I.indexOf(Oe);I.splice(ot+1,0,h),ae=!0;break}ge=this.driver.getParentElement(ge)}}else for(let ge=Y;ge>=0;ge--)if(this.driver.containsElement(I[ge].hostElement,c)){I.splice(ge+1,0,h),ae=!0;break}ae||I.unshift(h)}else I.push(h);return F.set(c,h),h}register(h,c){let I=this._namespaceLookup[h];return I||(I=this.createNamespace(h,c)),I}registerTrigger(h,c,I){let F=this._namespaceLookup[h];F&&F.register(c,I)&&this.totalAnimations++}destroy(h,c){if(!h)return;const I=this._fetchNamespace(h);this.afterFlush(()=>{this.namespacesByHostElement.delete(I.hostElement),delete this._namespaceLookup[h];const F=this._namespaceList.indexOf(I);F>=0&&this._namespaceList.splice(F,1)}),this.afterFlushAnimationsDone(()=>I.destroy(c))}_fetchNamespace(h){return this._namespaceLookup[h]}fetchNamespacesByElement(h){const c=new Set,I=this.statesByElement.get(h);if(I){const F=Object.keys(I);for(let Y=0;Y<F.length;Y++){const ae=I[F[Y]].namespaceId;if(ae){const ge=this._fetchNamespace(ae);ge&&c.add(ge)}}}return c}trigger(h,c,I,F){if(Er(c)){const Y=this._fetchNamespace(h);if(Y)return Y.trigger(c,I,F),!0}return!1}insertNode(h,c,I,F){if(!Er(c))return;const Y=c[L];if(Y&&Y.setForRemoval){Y.setForRemoval=!1,Y.setForMove=!0;const ae=this.collectedLeaveElements.indexOf(c);ae>=0&&this.collectedLeaveElements.splice(ae,1)}if(h){const ae=this._fetchNamespace(h);ae&&ae.insertNode(c,I)}F&&this.collectEnterElement(c)}collectEnterElement(h){this.collectedEnterElements.push(h)}markElementAsDisabled(h,c){c?this.disabledNodes.has(h)||(this.disabledNodes.add(h),Ar(h,xo)):this.disabledNodes.has(h)&&(this.disabledNodes.delete(h),er(h,xo))}removeNode(h,c,I,F){if(Er(c)){const Y=h?this._fetchNamespace(h):null;if(Y?Y.removeNode(c,F):this.markElementAsRemoved(h,c,!1,F),I){const ae=this.namespacesByHostElement.get(c);ae&&ae.id!==h&&ae.removeNode(c,F)}}else this._onRemovalComplete(c,F)}markElementAsRemoved(h,c,I,F,Y){this.collectedLeaveElements.push(c),c[L]={namespaceId:h,setForRemoval:F,hasAnimation:I,removedBeforeQueried:!1,previousTriggersValues:Y}}listen(h,c,I,F,Y){return Er(c)?this._fetchNamespace(h).listen(c,I,F,Y):()=>{}}_buildInstruction(h,c,I,F,Y){return h.transition.build(this.driver,h.element,h.fromState.value,h.toState.value,I,F,h.fromState.options,h.toState.options,c,Y)}destroyInnerAnimations(h){let c=this.driver.query(h,Os,!0);c.forEach(I=>this.destroyActiveAnimationsForElement(I)),0!=this.playersByQueriedElement.size&&(c=this.driver.query(h,Xa,!0),c.forEach(I=>this.finishActiveQueriedAnimationOnElement(I)))}destroyActiveAnimationsForElement(h){const c=this.playersByElement.get(h);c&&c.forEach(I=>{I.queued?I.markedForDestroy=!0:I.destroy()})}finishActiveQueriedAnimationOnElement(h){const c=this.playersByQueriedElement.get(h);c&&c.forEach(I=>I.finish())}whenRenderingDone(){return new Promise(h=>{if(this.players.length)return Vs(this.players).onDone(()=>h());h()})}processLeaveNode(h){var c;const I=h[L];if(I&&I.setForRemoval){if(h[L]=Ha,I.namespaceId){this.destroyInnerAnimations(h);const F=this._fetchNamespace(I.namespaceId);F&&F.clearElementCache(h)}this._onRemovalComplete(h,I.setForRemoval)}(null===(c=h.classList)||void 0===c?void 0:c.contains(xo))&&this.markElementAsDisabled(h,!1),this.driver.query(h,".ng-animate-disabled",!0).forEach(F=>{this.markElementAsDisabled(F,!1)})}flush(h=-1){let c=[];if(this.newHostElements.size&&(this.newHostElements.forEach((I,F)=>this._balanceNamespaceList(I,F)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let I=0;I<this.collectedEnterElements.length;I++)Ar(this.collectedEnterElements[I],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const I=[];try{c=this._flushAnimations(I,h)}finally{for(let F=0;F<I.length;F++)I[F]()}}else for(let I=0;I<this.collectedLeaveElements.length;I++)this.processLeaveNode(this.collectedLeaveElements[I]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(I=>I()),this._flushFns=[],this._whenQuietFns.length){const I=this._whenQuietFns;this._whenQuietFns=[],c.length?Vs(c).onDone(()=>{I.forEach(F=>F())}):I.forEach(F=>F())}}reportError(h){throw function Na(b){return new y.vHH(3402,Jt)}()}_flushAnimations(h,c){const I=new hr,F=[],Y=new Map,ae=[],ge=new Map,Oe=new Map,ot=new Map,Ht=new Set;this.disabledNodes.forEach(bn=>{Ht.add(bn);const On=this.driver.query(bn,".ng-animate-queued",!0);for(let Un=0;Un<On.length;Un++)Ht.add(On[Un])});const gn=this.bodyNode,kn=Array.from(this.statesByElement.keys()),gr=Xo(kn,this.collectedEnterElements),Ln=new Map;let tr=0;gr.forEach((bn,On)=>{const Un=Bs+tr++;Ln.set(On,Un),bn.forEach(mr=>Ar(mr,Un))});const Vr=[],Bi=new Set,Ci=new Set;for(let bn=0;bn<this.collectedLeaveElements.length;bn++){const On=this.collectedLeaveElements[bn],Un=On[L];Un&&Un.setForRemoval&&(Vr.push(On),Bi.add(On),Un.hasAnimation?this.driver.query(On,".ng-star-inserted",!0).forEach(mr=>Bi.add(mr)):Ci.add(On))}const Oi=new Map,Ds=Xo(kn,Array.from(Bi));Ds.forEach((bn,On)=>{const Un=Vi+tr++;Oi.set(On,Un),bn.forEach(mr=>Ar(mr,Un))}),h.push(()=>{gr.forEach((bn,On)=>{const Un=Ln.get(On);bn.forEach(mr=>er(mr,Un))}),Ds.forEach((bn,On)=>{const Un=Oi.get(On);bn.forEach(mr=>er(mr,Un))}),Vr.forEach(bn=>{this.processLeaveNode(bn)})});const Yi=[],_o=[];for(let bn=this._namespaceList.length-1;bn>=0;bn--)this._namespaceList[bn].drainQueuedTransitions(c).forEach(Un=>{const mr=Un.player,_i=Un.element;if(Yi.push(mr),this.collectedEnterElements.length){const wr=_i[L];if(wr&&wr.setForMove){if(wr.previousTriggersValues&&wr.previousTriggersValues.has(Un.triggerName)){const Tn=wr.previousTriggersValues.get(Un.triggerName),za=this.statesByElement.get(Un.element);za&&za[Un.triggerName]&&(za[Un.triggerName].value=Tn)}return void mr.destroy()}}const wa=!gn||!this.driver.containsElement(gn,_i),Po=Oi.get(_i),ea=Ln.get(_i),Br=this._buildInstruction(Un,I,ea,Po,wa);if(Br.errors&&Br.errors.length)return void _o.push(Br);if(wa)return mr.onStart(()=>Yr(_i,Br.fromStyles)),mr.onDestroy(()=>ns(_i,Br.toStyles)),void F.push(mr);if(Un.isFallbackTransition)return mr.onStart(()=>Yr(_i,Br.fromStyles)),mr.onDestroy(()=>ns(_i,Br.toStyles)),void F.push(mr);const Rl=[];Br.timelines.forEach(wr=>{wr.stretchStartingKeyframe=!0,this.disabledNodes.has(wr.element)||Rl.push(wr)}),Br.timelines=Rl,I.append(_i,Br.timelines),ae.push({instruction:Br,player:mr,element:_i}),Br.queriedElements.forEach(wr=>ms(ge,wr,[]).push(mr)),Br.preStyleProps.forEach((wr,Tn)=>{const za=Object.keys(wr);if(za.length){let du=Oe.get(Tn);du||Oe.set(Tn,du=new Set),za.forEach(Bo=>du.add(Bo))}}),Br.postStyleProps.forEach((wr,Tn)=>{const za=Object.keys(wr);let du=ot.get(Tn);du||ot.set(Tn,du=new Set),za.forEach(Bo=>du.add(Bo))})});if(_o.length){const bn=[];_o.forEach(On=>{bn.push(function Eu(b,h){return new y.vHH(3505,Jt)}())}),Yi.forEach(On=>On.destroy()),this.reportError(bn)}const Ts=new Map,Ro=new Map;ae.forEach(bn=>{const On=bn.element;I.has(On)&&(Ro.set(On,On),this._beforeAnimationBuild(bn.player.namespaceId,bn.instruction,Ts))}),F.forEach(bn=>{const On=bn.element;this._getPreviousPlayers(On,!1,bn.namespaceId,bn.triggerName,null).forEach(mr=>{ms(Ts,On,[]).push(mr),mr.destroy()})});const Sa=Vr.filter(bn=>Aa(bn,Oe,ot)),Ma=new Map;lr(Ma,this.driver,Ci,ot,Vt).forEach(bn=>{Aa(bn,Oe,ot)&&Sa.push(bn)});const Su=new Map;gr.forEach((bn,On)=>{lr(Su,this.driver,new Set(bn),Oe,"!")}),Sa.forEach(bn=>{const On=Ma.get(bn),Un=Su.get(bn);Ma.set(bn,Object.assign(Object.assign({},On),Un))});const No=[],xl=[],qu={};ae.forEach(bn=>{const{element:On,player:Un,instruction:mr}=bn;if(I.has(On)){if(Ht.has(On))return Un.onDestroy(()=>ns(On,mr.toStyles)),Un.disabled=!0,Un.overrideTotalTime(mr.totalTime),void F.push(Un);let _i=qu;if(Ro.size>1){let Po=On;const ea=[];for(;Po=Po.parentNode;){const Br=Ro.get(Po);if(Br){_i=Br;break}ea.push(Po)}ea.forEach(Br=>Ro.set(Br,_i))}const wa=this._buildAnimation(Un.namespaceId,mr,Ts,Y,Su,Ma);if(Un.setRealPlayer(wa),_i===qu)No.push(Un);else{const Po=this.playersByElement.get(_i);Po&&Po.length&&(Un.parentPlayer=Vs(Po)),F.push(Un)}}else Yr(On,mr.fromStyles),Un.onDestroy(()=>ns(On,mr.toStyles)),xl.push(Un),Ht.has(On)&&F.push(Un)}),xl.forEach(bn=>{const On=Y.get(bn.element);if(On&&On.length){const Un=Vs(On);bn.setRealPlayer(Un)}}),F.forEach(bn=>{bn.parentPlayer?bn.syncPlayerEvents(bn.parentPlayer):bn.destroy()});for(let bn=0;bn<Vr.length;bn++){const On=Vr[bn],Un=On[L];if(er(On,Vi),Un&&Un.hasAnimation)continue;let mr=[];if(ge.size){let wa=ge.get(On);wa&&wa.length&&mr.push(...wa);let Po=this.driver.query(On,Xa,!0);for(let ea=0;ea<Po.length;ea++){let Br=ge.get(Po[ea]);Br&&Br.length&&mr.push(...Br)}}const _i=mr.filter(wa=>!wa.destroyed);_i.length?yo(this,On,_i):this.processLeaveNode(On)}return Vr.length=0,No.forEach(bn=>{this.players.push(bn),bn.onDone(()=>{bn.destroy();const On=this.players.indexOf(bn);this.players.splice(On,1)}),bn.play()}),No}elementContainsData(h,c){let I=!1;const F=c[L];return F&&F.setForRemoval&&(I=!0),this.playersByElement.has(c)&&(I=!0),this.playersByQueriedElement.has(c)&&(I=!0),this.statesByElement.has(c)&&(I=!0),this._fetchNamespace(h).elementContainsData(c)||I}afterFlush(h){this._flushFns.push(h)}afterFlushAnimationsDone(h){this._whenQuietFns.push(h)}_getPreviousPlayers(h,c,I,F,Y){let ae=[];if(c){const ge=this.playersByQueriedElement.get(h);ge&&(ae=ge)}else{const ge=this.playersByElement.get(h);if(ge){const Oe=!Y||Y==oe;ge.forEach(ot=>{ot.queued||!Oe&&ot.triggerName!=F||ae.push(ot)})}}return(I||F)&&(ae=ae.filter(ge=>!(I&&I!=ge.namespaceId||F&&F!=ge.triggerName))),ae}_beforeAnimationBuild(h,c,I){const Y=c.element,ae=c.isRemovalTransition?void 0:h,ge=c.isRemovalTransition?void 0:c.triggerName;for(const Oe of c.timelines){const ot=Oe.element,Ht=ot!==Y,gn=ms(I,ot,[]);this._getPreviousPlayers(ot,Ht,ae,ge,c.toState).forEach(gr=>{const Ln=gr.getRealPlayer();Ln.beforeDestroy&&Ln.beforeDestroy(),gr.destroy(),gn.push(gr)})}Yr(Y,c.fromStyles)}_buildAnimation(h,c,I,F,Y,ae){const ge=c.triggerName,Oe=c.element,ot=[],Ht=new Set,gn=new Set,kn=c.timelines.map(Ln=>{const tr=Ln.element;Ht.add(tr);const Vr=tr[L];if(Vr&&Vr.removedBeforeQueried)return new fn(Ln.duration,Ln.delay);const Bi=tr!==Oe,Ci=function io(b){const h=[];return Ga(b,h),h}((I.get(tr)||Tu).map(Ts=>Ts.getRealPlayer())).filter(Ts=>!!Ts.element&&Ts.element===tr),Oi=Y.get(tr),Ds=ae.get(tr),Yi=wo(0,this._normalizer,0,Ln.keyframes,Oi,Ds),_o=this._buildPlayer(Ln,Yi,Ci);if(Ln.subTimeline&&F&&gn.add(tr),Bi){const Ts=new sn(h,ge,tr);Ts.setRealPlayer(_o),ot.push(Ts)}return _o});ot.forEach(Ln=>{ms(this.playersByQueriedElement,Ln.element,[]).push(Ln),Ln.onDone(()=>function dn(b,h,c){let I;if(b instanceof Map){if(I=b.get(h),I){if(I.length){const F=I.indexOf(c);I.splice(F,1)}0==I.length&&b.delete(h)}}else if(I=b[h],I){if(I.length){const F=I.indexOf(c);I.splice(F,1)}0==I.length&&delete b[h]}return I}(this.playersByQueriedElement,Ln.element,Ln))}),Ht.forEach(Ln=>Ar(Ln,da));const gr=Vs(kn);return gr.onDestroy(()=>{Ht.forEach(Ln=>er(Ln,da)),ns(Oe,c.toStyles)}),gn.forEach(Ln=>{ms(F,Ln,[]).push(gr)}),gr}_buildPlayer(h,c,I){return c.length>0?this.driver.animate(h.element,c,h.duration,h.delay,h.easing,I):new fn(h.duration,h.delay)}}class sn{constructor(h,c,I){this.namespaceId=h,this.triggerName=c,this.element=I,this._player=new fn,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(h){this._containsRealPlayer||(this._player=h,Object.keys(this._queuedCallbacks).forEach(c=>{this._queuedCallbacks[c].forEach(I=>ca(h,c,void 0,I))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(h.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(h){this.totalTime=h}syncPlayerEvents(h){const c=this._player;c.triggerCallback&&h.onStart(()=>c.triggerCallback("start")),h.onDone(()=>this.finish()),h.onDestroy(()=>this.destroy())}_queueEvent(h,c){ms(this._queuedCallbacks,h,[]).push(c)}onDone(h){this.queued&&this._queueEvent("done",h),this._player.onDone(h)}onStart(h){this.queued&&this._queueEvent("start",h),this._player.onStart(h)}onDestroy(h){this.queued&&this._queueEvent("destroy",h),this._player.onDestroy(h)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(h){this.queued||this._player.setPosition(h)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(h){const c=this._player;c.triggerCallback&&c.triggerCallback(h)}}function Er(b){return b&&1===b.nodeType}function Ki(b,h){const c=b.style.display;return b.style.display=null!=h?h:"none",c}function lr(b,h,c,I,F){const Y=[];c.forEach(Oe=>Y.push(Ki(Oe)));const ae=[];I.forEach((Oe,ot)=>{const Ht={};Oe.forEach(gn=>{const kn=Ht[gn]=h.computeStyle(ot,gn,F);(!kn||0==kn.length)&&(ot[L]=N,ae.push(ot))}),b.set(ot,Ht)});let ge=0;return c.forEach(Oe=>Ki(Oe,Y[ge++])),ae}function Xo(b,h){const c=new Map;if(b.forEach(ge=>c.set(ge,[])),0==h.length)return c;const F=new Set(h),Y=new Map;function ae(ge){if(!ge)return 1;let Oe=Y.get(ge);if(Oe)return Oe;const ot=ge.parentNode;return Oe=c.has(ot)?ot:F.has(ot)?1:ae(ot),Y.set(ge,Oe),Oe}return h.forEach(ge=>{const Oe=ae(ge);1!==Oe&&c.get(Oe).push(ge)}),c}function Ar(b,h){var c;null===(c=b.classList)||void 0===c||c.add(h)}function er(b,h){var c;null===(c=b.classList)||void 0===c||c.remove(h)}function yo(b,h,c){Vs(c).onDone(()=>b.processLeaveNode(h))}function Ga(b,h){for(let c=0;c<b.length;c++){const I=b[c];I instanceof Pn?Ga(I.players,h):h.push(I)}}function Aa(b,h,c){const I=c.get(b);if(!I)return!1;let F=h.get(b);return F?I.forEach(Y=>F.add(Y)):h.set(b,I),c.delete(b),!0}class Cu{constructor(h,c,I){this.bodyNode=h,this._driver=c,this._normalizer=I,this._triggerCache={},this.onRemovalComplete=(F,Y)=>{},this._transitionEngine=new Dt(h,c,I),this._timelineEngine=new mo(h,c,I),this._transitionEngine.onRemovalComplete=(F,Y)=>this.onRemovalComplete(F,Y)}registerTrigger(h,c,I,F,Y){const ae=h+"-"+F;let ge=this._triggerCache[ae];if(!ge){const Oe=[],Ht=Hr(this._driver,Y,Oe,[]);if(Oe.length)throw function ho(b,h){return new y.vHH(3404,Jt)}();ge=function Jl(b,h,c){return new ro(b,h,c)}(F,Ht,this._normalizer),this._triggerCache[ae]=ge}this._transitionEngine.registerTrigger(c,F,ge)}register(h,c){this._transitionEngine.register(h,c)}destroy(h,c){this._transitionEngine.destroy(h,c)}onInsert(h,c,I,F){this._transitionEngine.insertNode(h,c,I,F)}onRemove(h,c,I,F){this._transitionEngine.removeNode(h,c,F||!1,I)}disableAnimations(h,c){this._transitionEngine.markElementAsDisabled(h,c)}process(h,c,I,F){if("@"==I.charAt(0)){const[Y,ae]=zo(I);this._timelineEngine.command(Y,c,ae,F)}else this._transitionEngine.trigger(h,c,I,F)}listen(h,c,I,F,Y){if("@"==I.charAt(0)){const[ae,ge]=zo(I);return this._timelineEngine.listen(ae,c,ge,Y)}return this._transitionEngine.listen(h,c,I,F,Y)}flush(h=-1){this._transitionEngine.flush(h)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ec=(()=>{class b extends rt{constructor(c,I){super(),this._nextAnimationId=0,this._renderer=c.createRenderer(I.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(c){const I=this._nextAnimationId.toString();this._nextAnimationId++;const F=Array.isArray(c)?Mn(c):c;return Al(this._renderer,null,I,"register",[F]),new lh(I,this._renderer)}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(y.FYo),y.LFG(m.K0))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class lh extends class Rt{}{constructor(h,c){super(),this._id=h,this._renderer=c}create(h,c){return new Sc(this._id,h,c||{},this._renderer)}}class Sc{constructor(h,c,I,F){this.id=h,this.element=c,this._renderer=F,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",I)}_listen(h,c){return this._renderer.listen(this.element,`@@${this.id}:${h}`,c)}_command(h,...c){return Al(this._renderer,this.element,this.id,h,c)}onDone(h){this._listen("done",h)}onStart(h){this._listen("start",h)}onDestroy(h){this._listen("destroy",h)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(h){this._command("setPosition",h)}getPosition(){var h,c;return null!==(c=null===(h=this._renderer.engine.players[+this.id])||void 0===h?void 0:h.getPosition())&&void 0!==c?c:0}}function Al(b,h,c,I,F){return b.setProperty(h,`@@${c}:${I}`,F)}const ul="@.disabled";let _d=(()=>{class b{constructor(c,I,F){this.delegate=c,this.engine=I,this._zone=F,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),I.onRemovalComplete=(Y,ae)=>{const ge=null==ae?void 0:ae.parentNode(Y);ge&&ae.removeChild(ge,Y)}}createRenderer(c,I){const Y=this.delegate.createRenderer(c,I);if(!(c&&I&&I.data&&I.data.animation)){let Ht=this._rendererCache.get(Y);return Ht||(Ht=new Mc("",Y,this.engine),this._rendererCache.set(Y,Ht)),Ht}const ae=I.id,ge=I.id+"-"+this._currentId;this._currentId++,this.engine.register(ge,c);const Oe=Ht=>{Array.isArray(Ht)?Ht.forEach(Oe):this.engine.registerTrigger(ae,ge,c,Ht.name,Ht)};return I.data.animation.forEach(Oe),new Ea(this,ge,Y,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(c,I,F){c>=0&&c<this._microtaskId?this._zone.run(()=>I(F)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(Y=>{const[ae,ge]=Y;ae(ge)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([I,F]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(y.FYo),y.LFG(Cu),y.LFG(y.R0b))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();class Mc{constructor(h,c,I){this.namespaceId=h,this.delegate=c,this.engine=I,this.destroyNode=this.delegate.destroyNode?F=>c.destroyNode(F):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(h,c){return this.delegate.createElement(h,c)}createComment(h){return this.delegate.createComment(h)}createText(h){return this.delegate.createText(h)}appendChild(h,c){this.delegate.appendChild(h,c),this.engine.onInsert(this.namespaceId,c,h,!1)}insertBefore(h,c,I,F=!0){this.delegate.insertBefore(h,c,I),this.engine.onInsert(this.namespaceId,c,h,F)}removeChild(h,c,I){this.engine.onRemove(this.namespaceId,c,this.delegate,I)}selectRootElement(h,c){return this.delegate.selectRootElement(h,c)}parentNode(h){return this.delegate.parentNode(h)}nextSibling(h){return this.delegate.nextSibling(h)}setAttribute(h,c,I,F){this.delegate.setAttribute(h,c,I,F)}removeAttribute(h,c,I){this.delegate.removeAttribute(h,c,I)}addClass(h,c){this.delegate.addClass(h,c)}removeClass(h,c){this.delegate.removeClass(h,c)}setStyle(h,c,I,F){this.delegate.setStyle(h,c,I,F)}removeStyle(h,c,I){this.delegate.removeStyle(h,c,I)}setProperty(h,c,I){"@"==c.charAt(0)&&c==ul?this.disableAnimations(h,!!I):this.delegate.setProperty(h,c,I)}setValue(h,c){this.delegate.setValue(h,c)}listen(h,c,I){return this.delegate.listen(h,c,I)}disableAnimations(h,c){this.engine.disableAnimations(h,c)}}class Ea extends Mc{constructor(h,c,I,F){super(c,I,F),this.factory=h,this.namespaceId=c}setProperty(h,c,I){"@"==c.charAt(0)?"."==c.charAt(1)&&c==ul?this.disableAnimations(h,I=void 0===I||!!I):this.engine.process(this.namespaceId,h,c.substr(1),I):this.delegate.setProperty(h,c,I)}listen(h,c,I){if("@"==c.charAt(0)){const F=function uu(b){switch(b){case"body":return document.body;case"document":return document;case"window":return window;default:return b}}(h);let Y=c.substr(1),ae="";return"@"!=Y.charAt(0)&&([Y,ae]=function Gu(b){const h=b.indexOf(".");return[b.substring(0,h),b.substr(h+1)]}(Y)),this.engine.listen(this.namespaceId,F,Y,ae,ge=>{this.factory.scheduleListenerCallback(ge._data||-1,I,ge)})}return this.delegate.listen(h,c,I)}}let xc=(()=>{class b extends Cu{constructor(c,I,F){super(c.body,I,F)}ngOnDestroy(){this.flush()}}return b.\u0275fac=function(c){return new(c||b)(y.LFG(m.K0),y.LFG(ur),y.LFG(js))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})();const Sl=[{provide:ur,useClass:Co},{provide:new y.OlP("AnimationModuleType"),useValue:"NoopAnimations"},...[{provide:rt,useClass:ec},{provide:js,useFactory:function Rc(){return new Qo}},{provide:Cu,useClass:xc},{provide:y.FYo,useFactory:function lu(b,h,c){return new _d(b,h,c)},deps:[ze,Cu,y.R0b]}]];let Ml=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=y.oAB({type:b}),b.\u0275inj=y.cJS({providers:Sl,imports:[Dr]}),b})(),Au=(()=>{class b{}return b.\u0275fac=function(c){return new(c||b)},b.\u0275mod=y.oAB({type:b,bootstrap:[G]}),b.\u0275inj=y.cJS({providers:[],imports:[[Dr,Gi,me.hO.initializeApp(Ve_firebaseConfig),ce.ww,it.UX,Ml]]}),b})();(0,y.G48)(),Qn().bootstrapModule(Au).catch(b=>console.error(b))},5867:(Ot,$e,B)=>{B.d($e,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=B(9681);(0,m.registerVersion)("firebase","9.8.2","app")},127:(Ot,$e,B)=>{B.d($e,{Z:()=>m.Z});var m=B(3942);m.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Ot,$e,B)=>{B.r($e);var m=B(5861),y=B(3942),te=B(2090),Ne=B(9681),Me=B(655),Te=B(1877),Le=B(4859);const lt=function mt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wt=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),At=new Te.Yd("@firebase/auth");function Nt(_,...d){At.logLevel<=Te.in.ERROR&&At.error(`Auth (${Ne.SDK_VERSION}): ${_}`,...d)}function he(_,...d){throw st(_,...d)}function Xe(_,...d){return st(_,...d)}function ut(_,d,p){const D=Object.assign(Object.assign({},wt()),{[d]:p});return new te.LL("auth","Firebase",D).create(d,{appName:_.name})}function We(_,d,p){if(!(d instanceof p))throw p.name!==d.constructor.name&&he(_,"argument-error"),ut(_,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(_,...d){if("string"!=typeof _){const p=d[0],D=[...d.slice(1)];return D[0]&&(D[0].appName=_.name),_._errorFactory.create(p,...D)}return Ze.create(_,...d)}function we(_,d,...p){if(!_)throw st(d,...p)}function Qe(_){const d="INTERNAL ASSERTION FAILED: "+_;throw Nt(d),new Error(d)}function se(_,d){_||Qe(d)}const Re=new Map;function fe(_){se(_ instanceof Function,"Expected a class definition");let d=Re.get(_);return d?(se(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,Re.set(_,d),d)}function vt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function St(){return"http:"===Xt()||"https:"===Xt()}function Xt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class pn{constructor(d,p){this.shortDelay=d,this.longDelay=p,se(p>d,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return function Yt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,te.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function nn(_,d){se(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return d?`${p}${d.startsWith("/")?d.slice(1):d}`:p}class yt{static initialize(d,p,D){this.fetchImpl=d,p&&(this.headersImpl=p),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gt=new pn(3e4,6e4);function Mt(_,d){return _.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:_.tenantId}):d}function qt(_,d,p,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,m.Z)(function*(_,d,p,D,j={}){return En(_,j,(0,m.Z)(function*(){let ne={},ke={};D&&("GET"===d?ke=D:ne={body:JSON.stringify(D)});const tt=(0,te.xO)(Object.assign({key:_.config.apiKey},ke)).slice(1),zt=yield _._getAdditionalHeaders();return zt["Content-Type"]="application/json",_.languageCode&&(zt["X-Firebase-Locale"]=_.languageCode),yt.fetch()(br(_,_.config.apiHost,p,tt),Object.assign({method:d,headers:zt,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function En(_,d,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,m.Z)(function*(_,d,p){_._canInitEmulator=!1;const D=Object.assign(Object.assign({},je),d);try{const j=new Dr(_),ne=yield Promise.race([p(),j.promise]);j.clearNetworkTimeout();const ke=yield ne.json();if("needConfirmation"in ke)throw zn(_,"account-exists-with-different-credential",ke);if(ne.ok&&!("errorMessage"in ke))return ke;{const tt=ne.ok?ke.errorMessage:ke.error.message,[zt,un]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===zt)throw zn(_,"credential-already-in-use",ke);if("EMAIL_EXISTS"===zt)throw zn(_,"email-already-in-use",ke);if("USER_DISABLED"===zt)throw zn(_,"user-disabled",ke);const vn=D[zt]||zt.toLowerCase().replace(/[_\s]+/g,"-");if(un)throw ut(_,vn,un);he(_,vn)}}catch(j){if(j instanceof te.ZR)throw j;he(_,"network-request-failed")}})).apply(this,arguments)}function Yn(_,d,p,D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(function*(_,d,p,D,j={}){const ne=yield qt(_,d,p,D,j);return"mfaPendingCredential"in ne&&he(_,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function br(_,d,p,D){const j=`${d}${p}?${D}`;return _.config.emulator?nn(_.config,j):`${_.config.apiScheme}://${j}`}class Dr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((p,D)=>{this.timer=setTimeout(()=>D(Xe(this.auth,"network-request-failed")),gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(_,d,p){const D={appName:_.name};p.email&&(D.email=p.email),p.phoneNumber&&(D.phoneNumber=p.phoneNumber);const j=Xe(_,d,D);return j.customData._tokenResponse=p,j}function mn(){return(mn=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function _n(_,d){return wn.apply(this,arguments)}function wn(){return(wn=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function hi(_,d){return vi.apply(this,arguments)}function vi(){return(vi=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function ii(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Jr(){return(Jr=(0,m.Z)(function*(_,d=!1){const p=(0,te.m9)(_),D=yield p.getIdToken(d),j=Qt(D);we(j&&j.exp&&j.auth_time&&j.iat,p.auth,"internal-error");const ne="object"==typeof j.firebase?j.firebase:void 0,ke=null==ne?void 0:ne.sign_in_provider;return{claims:j,token:D,authTime:ii(Ut(j.auth_time)),issuedAtTime:ii(Ut(j.iat)),expirationTime:ii(Ut(j.exp)),signInProvider:ke||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function Ut(_){return 1e3*Number(_)}function Qt(_){const[d,p,D]=_.split(".");if(void 0===d||void 0===p||void 0===D)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const j=(0,te.tV)(p);return j?JSON.parse(j):(Nt("Failed to decode base64 JWT payload"),null)}catch(j){return Nt("Caught error parsing JWT payload as JSON",j),null}}function Sr(_,d){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(_,d,p=!1){if(p)return d;try{return yield d}catch(D){throw D instanceof te.ZR&&Wn(D)&&_.auth.currentUser===_&&(yield _.auth.signOut()),D}})).apply(this,arguments)}function Wn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Qi{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var p;if(d){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const j=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(d=!1){var p=this;if(!this.isRunning)return;const D=this.getInterval(d);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),D)}iteration(){var d=this;return(0,m.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&d.schedule(!0))}d.schedule()})()}}class zr{constructor(d,p){this.createdAt=d,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(_){return pe.apply(this,arguments)}function pe(){return(pe=(0,m.Z)(function*(_){var d;const p=_.auth,D=yield _.getIdToken(),j=yield Sr(_,hi(p,{idToken:D}));we(null==j?void 0:j.users.length,p,"internal-error");const ne=j.users[0];_._notifyReloadListener(ne);const ke=(null===(d=ne.providerUserInfo)||void 0===d?void 0:d.length)?ve(ne.providerUserInfo):[],tt=ft(_.providerData,ke),vn=!!_.isAnonymous&&!(_.email&&ne.passwordHash||(null==tt?void 0:tt.length)),Nn={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:tt,metadata:new zr(ne.createdAt,ne.lastLoginAt),isAnonymous:vn};Object.assign(_,Nn)})).apply(this,arguments)}function Ce(){return(Ce=(0,m.Z)(function*(_){const d=(0,te.m9)(_);yield Vn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function ft(_,d){return[..._.filter(D=>!d.some(j=>j.providerId===D.providerId)),...d]}function ve(_){return _.map(d=>{var{providerId:p}=d,D=(0,Me._T)(d,["providerId"]);return{providerId:p,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function _t(){return(_t=(0,m.Z)(function*(_,d){const p=yield En(_,{},(0,m.Z)(function*(){const D=(0,te.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:j,apiKey:ne}=_.config,ke=br(_,j,"/v1/token",`key=${ne}`),tt=yield _._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",yt.fetch()(ke,{method:"POST",headers:tt,body:D})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Lt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){we(d.idToken,"internal-error"),we(void 0!==d.idToken,"internal-error"),we(void 0!==d.refreshToken,"internal-error");const p="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function Zt(_){const d=Qt(_);return we(d,"internal-error"),we(void 0!==d.exp,"internal-error"),we(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,p)}getToken(d,p=!1){var D=this;return(0,m.Z)(function*(){return we(!D.accessToken||D.refreshToken,d,"user-token-expired"),p||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(d,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,p){var D=this;return(0,m.Z)(function*(){const{accessToken:j,refreshToken:ne,expiresIn:ke}=yield function Fe(_,d){return _t.apply(this,arguments)}(d,p);D.updateTokensAndExpiration(j,ne,Number(ke))})()}updateTokensAndExpiration(d,p,D){this.refreshToken=p||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(d,p){const{refreshToken:D,accessToken:j,expirationTime:ne}=p,ke=new Lt;return D&&(we("string"==typeof D,"internal-error",{appName:d}),ke.refreshToken=D),j&&(we("string"==typeof j,"internal-error",{appName:d}),ke.accessToken=j),ne&&(we("number"==typeof ne,"internal-error",{appName:d}),ke.expirationTime=ne),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Lt,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Bt(_,d){we("string"==typeof _||void 0===_,"internal-error",{appName:d})}class on{constructor(d){var{uid:p,auth:D,stsTokenManager:j}=d,ne=(0,Me._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=D,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new zr(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(d){var p=this;return(0,m.Z)(function*(){const D=yield Sr(p,p.stsTokenManager.getToken(p.auth,d));return we(D,p.auth,"internal-error"),p.accessToken!==D&&(p.accessToken=D,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),D})()}getIdTokenResult(d){return function si(_){return Jr.apply(this,arguments)}(this,d)}reload(){return function De(_){return Ce.apply(this,arguments)}(this)}_assign(d){this!==d&&(we(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(p=>Object.assign({},p)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new on(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,p=!1){var D=this;return(0,m.Z)(function*(){let j=!1;d.idToken&&d.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(d),j=!0),p&&(yield Vn(D)),yield D.auth._persistUserIfCurrent(D),j&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var d=this;return(0,m.Z)(function*(){const p=yield d.getIdToken();return yield Sr(d,function en(_,d){return mn.apply(this,arguments)}(d.auth,{idToken:p})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,p){var D,j,ne,ke,tt,zt,un,vn;const Nn=null!==(D=p.displayName)&&void 0!==D?D:void 0,is=null!==(j=p.email)&&void 0!==j?j:void 0,ta=null!==(ne=p.phoneNumber)&&void 0!==ne?ne:void 0,Ol=null!==(ke=p.photoURL)&&void 0!==ke?ke:void 0,Td=null!==(tt=p.tenantId)&&void 0!==tt?tt:void 0,mh=null!==(zt=p._redirectEventId)&&void 0!==zt?zt:void 0,fl=null!==(un=p.createdAt)&&void 0!==un?un:void 0,Vc=null!==(vn=p.lastLoginAt)&&void 0!==vn?vn:void 0,{uid:Uc,emailVerified:yh,isAnonymous:Bc,providerData:Cd,stsTokenManager:_h}=p;we(Uc&&_h,d,"internal-error");const Bf=Lt.fromJSON(this.name,_h);we("string"==typeof Uc,d,"internal-error"),Bt(Nn,d.name),Bt(is,d.name),we("boolean"==typeof yh,d,"internal-error"),we("boolean"==typeof Bc,d,"internal-error"),Bt(ta,d.name),Bt(Ol,d.name),Bt(Td,d.name),Bt(mh,d.name),Bt(fl,d.name),Bt(Vc,d.name);const Ad=new on({uid:Uc,auth:d,email:is,emailVerified:yh,displayName:Nn,isAnonymous:Bc,photoURL:Ol,phoneNumber:ta,tenantId:Td,stsTokenManager:Bf,createdAt:fl,lastLoginAt:Vc});return Cd&&Array.isArray(Cd)&&(Ad.providerData=Cd.map(jf=>Object.assign({},jf))),mh&&(Ad._redirectEventId=mh),Ad}static _fromIdTokenResponse(d,p,D=!1){return(0,m.Z)(function*(){const j=new Lt;j.updateFromServerResponse(p);const ne=new on({uid:p.localId,auth:d,stsTokenManager:j,isAnonymous:D});return yield Vn(ne),ne})()}}const hn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,D){var j=this;return(0,m.Z)(function*(){j.storage[p]=D})()}_get(p){var D=this;return(0,m.Z)(function*(){const j=D.storage[p];return void 0===j?null:j})()}_remove(p){var D=this;return(0,m.Z)(function*(){delete D.storage[p]})()}_addListener(p,D){}_removeListener(p,D){}}return _.type="NONE",_})();function nr(_,d,p){return`firebase:${_}:${d}:${p}`}class _r{constructor(d,p,D){this.persistence=d,this.auth=p,this.userKey=D;const{config:j,name:ne}=this.auth;this.fullUserKey=nr(this.userKey,j.apiKey,ne),this.fullPersistenceKey=nr("persistence",j.apiKey,ne),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,m.Z)(function*(){const p=yield d.persistence._get(d.fullUserKey);return p?on._fromJSON(d.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var p=this;return(0,m.Z)(function*(){if(p.persistence===d)return;const D=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=d,D?p.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,p,D="authUser"){return(0,m.Z)(function*(){if(!p.length)return new _r(fe(hn),d,D);const j=(yield Promise.all(p.map(function(){var un=(0,m.Z)(function*(vn){if(yield vn._isAvailable())return vn});return function(vn){return un.apply(this,arguments)}}()))).filter(un=>un);let ne=j[0]||fe(hn);const ke=nr(D,d.config.apiKey,d.name);let tt=null;for(const un of p)try{const vn=yield un._get(ke);if(vn){const Nn=on._fromJSON(d,vn);un!==ne&&(tt=Nn),ne=un;break}}catch(vn){}const zt=j.filter(un=>un._shouldAllowMigration);return ne._shouldAllowMigration&&zt.length?(ne=zt[0],tt&&(yield ne._set(ke,tt.toJSON())),yield Promise.all(p.map(function(){var un=(0,m.Z)(function*(vn){if(vn!==ne)try{yield vn._remove(ke)}catch(Nn){}});return function(vn){return un.apply(this,arguments)}}())),new _r(ne,d,D)):new _r(ne,d,D)})()}}function Ei(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(it(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(jr(d))return"Firefox";if(d.includes("silk/"))return"Silk";if($r(d))return"Blackberry";if(Pr(d))return"Webos";if(wi(d))return"Safari";if((d.includes("chrome/")||cn(d))&&!d.includes("edge/"))return"Chrome";if(Mr(d))return"Android";{const D=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function jr(_=(0,te.z$)()){return/firefox\//i.test(_)}function wi(_=(0,te.z$)()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function cn(_=(0,te.z$)()){return/crios\//i.test(_)}function it(_=(0,te.z$)()){return/iemobile/i.test(_)}function Mr(_=(0,te.z$)()){return/android/i.test(_)}function $r(_=(0,te.z$)()){return/blackberry/i.test(_)}function Pr(_=(0,te.z$)()){return/webos/i.test(_)}function fi(_=(0,te.z$)()){return/iphone|ipad|ipod/i.test(_)}function ei(_=(0,te.z$)()){return fi(_)||Mr(_)||Pr(_)||$r(_)||/windows phone/i.test(_)||it(_)}function Wr(_,d=[]){let p;switch(_){case"Browser":p=Ei((0,te.z$)());break;case"Worker":p=`${Ei((0,te.z$)())}-${_}`;break;default:p=_}const D=d.length?d.join(","):"FirebaseCore-web";return`${p}/JsCore/${Ne.SDK_VERSION}/${D}`}class kr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,p){const D=ne=>new Promise((ke,tt)=>{try{ke(d(ne))}catch(zt){tt(zt)}});D.onAbort=p,this.queue.push(D);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(d){var p=this;return(0,m.Z)(function*(){if(p.auth.currentUser===d)return;const D=[];try{for(const j of p.queue)yield j(d),j.onAbort&&D.push(j.onAbort)}catch(j){D.reverse();for(const ne of D)try{ne()}catch(ke){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:j.message})}})()}}class Pt{constructor(d,p,D){this.app=d,this.heartbeatServiceProvider=p,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yn(this),this.idTokenSubscription=new yn(this),this.beforeStateQueue=new kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(d,p){var D=this;return p&&(this._popupRedirectResolver=fe(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var j,ne;if(!D._deleted&&(D.persistenceManager=yield _r.create(D,d),!D._deleted)){if(null===(j=D._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(ke){}yield D.initializeCurrentUser(p),D.lastNotifiedUid=(null===(ne=D.currentUser)||void 0===ne?void 0:ne.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,m.Z)(function*(){if(d._deleted)return;const p=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||p){if(d.currentUser&&p&&d.currentUser.uid===p.uid)return d._currentUser._assign(p),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(p,!0)}})()}initializeCurrentUser(d){var p=this;return(0,m.Z)(function*(){var D;const j=yield p.assertedPersistence.getCurrentUser();let ne=j,ke=!1;if(d&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const tt=null===(D=p.redirectUser)||void 0===D?void 0:D._redirectEventId,zt=null==ne?void 0:ne._redirectEventId,un=yield p.tryRedirectSignIn(d);(!tt||tt===zt)&&(null==un?void 0:un.user)&&(ne=un.user,ke=!0)}if(!ne)return p.directlySetCurrentUser(null);if(!ne._redirectEventId){if(ke)try{yield p.beforeStateQueue.runMiddleware(ne)}catch(tt){ne=j,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(tt))}return ne?p.reloadAndSetCurrentUserOrClear(ne):p.directlySetCurrentUser(null)}return we(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===ne._redirectEventId?p.directlySetCurrentUser(ne):p.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(d){var p=this;return(0,m.Z)(function*(){let D=null;try{D=yield p._popupRedirectResolver._completeRedirectFn(p,d,!0)}catch(j){yield p._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(d){var p=this;return(0,m.Z)(function*(){try{yield Vn(d)}catch(D){if("auth/network-request-failed"!==D.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ht(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var d=this;return(0,m.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var p=this;return(0,m.Z)(function*(){const D=d?(0,te.m9)(d):null;return D&&we(D.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(D&&D._clone(p))})()}_updateCurrentUser(d,p=!1){var D=this;return(0,m.Z)(function*(){if(!D._deleted)return d&&we(D.tenantId===d.tenantId,D,"tenant-id-mismatch"),p||(yield D.beforeStateQueue.runMiddleware(d)),D.queue((0,m.Z)(function*(){yield D.directlySetCurrentUser(d),D.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,m.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(fe(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new te.LL("auth","Firebase",d())}onAuthStateChanged(d,p,D){return this.registerStateListener(this.authStateSubscription,d,p,D)}beforeAuthStateChanged(d,p){return this.beforeStateQueue.pushCallback(d,p)}onIdTokenChanged(d,p,D){return this.registerStateListener(this.idTokenSubscription,d,p,D)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,p){var D=this;return(0,m.Z)(function*(){const j=yield D.getOrInitRedirectPersistenceManager(p);return null===d?j.removeCurrentUser():j.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const D=d&&fe(d)||p._popupRedirectResolver;we(D,p,"argument-error"),p.redirectPersistenceManager=yield _r.create(p,[fe(D._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(d){var p=this;return(0,m.Z)(function*(){var D,j;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(D=p._currentUser)||void 0===D?void 0:D._redirectEventId)===d?p._currentUser:(null===(j=p.redirectUser)||void 0===j?void 0:j._redirectEventId)===d?p.redirectUser:null})()}_persistUserIfCurrent(d){var p=this;return(0,m.Z)(function*(){if(d===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(p=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,p,D,j){if(this._deleted)return()=>{};const ne="function"==typeof p?p:p.next.bind(p),ke=this._isInitialized?Promise.resolve():this._initializationPromise;return we(ke,this,"internal-error"),ke.then(()=>ne(this.currentUser)),"function"==typeof p?d.addObserver(p,D,j):d.addObserver(p)}directlySetCurrentUser(d){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==d&&(p._currentUser._stopProactiveRefresh(),d&&p.isProactiveRefreshEnabled&&d._startProactiveRefresh()),p.currentUser=d,d?yield p.assertedPersistence.setCurrentUser(d):yield p.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Wr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,m.Z)(function*(){var p;const D={"X-Client-Version":d.clientVersion};d.app.options.appId&&(D["X-Firebase-gmpid"]=d.app.options.appId);const j=yield null===(p=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return j&&(D["X-Firebase-Client"]=j),D})()}}function kt(_){return(0,te.m9)(_)}class yn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,te.ne)(p=>this.observer=p)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function bi(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function gi(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}class ti{constructor(d,p){this.providerId=d,this.signInMethod=p}toJSON(){return Qe("not implemented")}_getIdTokenResponse(d){return Qe("not implemented")}_linkToIdToken(d,p){return Qe("not implemented")}_getReauthenticationResolver(d){return Qe("not implemented")}}function Tr(_,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:resetPassword",Mt(_,d))})).apply(this,arguments)}function Si(_,d){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function cs(_,d){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:update",Mt(_,d))})).apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithPassword",Mt(_,d))})).apply(this,arguments)}function Lr(_,d){return ir.apply(this,arguments)}function ir(){return(ir=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:sendOobCode",Mt(_,d))})).apply(this,arguments)}function or(_,d){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,m.Z)(function*(_,d){return Lr(_,d)})).apply(this,arguments)}function Kr(_,d){return ni.apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(_,d){return Lr(_,d)})).apply(this,arguments)}function Fi(_,d){return Es.apply(this,arguments)}function Es(){return(Es=(0,m.Z)(function*(_,d){return Lr(_,d)})).apply(this,arguments)}function xs(_,d){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(_,d){return Lr(_,d)})).apply(this,arguments)}function $i(){return($i=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithEmailLink",Mt(_,d))})).apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithEmailLink",Mt(_,d))})).apply(this,arguments)}class vr extends ti{constructor(d,p,D,j=null){super("password",D),this._email=d,this._password=p,this._tenantId=j}static _fromEmailAndPassword(d,p){return new vr(d,p,"password")}static _fromEmailAndCode(d,p,D=null){return new vr(d,p,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(d){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function Ur(_,d){return Fr.apply(this,arguments)}(d,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function ji(_,d){return $i.apply(this,arguments)}(d,{email:p._email,oobCode:p._password});default:he(d,"internal-error")}})()}_linkToIdToken(d,p){var D=this;return(0,m.Z)(function*(){switch(D.signInMethod){case"password":return Si(d,{idToken:p,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Eo(_,d){return Oo.apply(this,arguments)}(d,{idToken:p,email:D._email,oobCode:D._password});default:he(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Hi(_,d){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithIdp",Mt(_,d))})).apply(this,arguments)}class Ie extends ti{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const p=new Ie(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(p.idToken=d.idToken),d.accessToken&&(p.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(p.nonce=d.nonce),d.pendingToken&&(p.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(p.accessToken=d.oauthToken,p.secret=d.oauthTokenSecret):he("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:D,signInMethod:j}=p,ne=(0,Me._T)(p,["providerId","signInMethod"]);if(!D||!j)return null;const ke=new Ie(D,j);return ke.idToken=ne.idToken||void 0,ke.accessToken=ne.accessToken||void 0,ke.secret=ne.secret,ke.nonce=ne.nonce,ke.pendingToken=ne.pendingToken||null,ke}_getIdTokenResponse(d){return Hi(d,this.buildRequest())}_linkToIdToken(d,p){const D=this.buildRequest();return D.idToken=p,Hi(d,D)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Hi(d,p)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),d.postBody=(0,te.xO)(p)}return d}}function qe(_,d){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:sendVerificationCode",Mt(_,d))})).apply(this,arguments)}function Wt(){return(Wt=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithPhoneNumber",Mt(_,d))})).apply(this,arguments)}function Rr(){return(Rr=(0,m.Z)(function*(_,d){const p=yield Yn(_,"POST","/v1/accounts:signInWithPhoneNumber",Mt(_,d));if(p.temporaryProof)throw zn(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Zn={USER_NOT_FOUND:"user-not-found"};function lo(){return(lo=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithPhoneNumber",Mt(_,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Zn)})).apply(this,arguments)}class oi extends ti{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,p){return new oi({verificationId:d,verificationCode:p})}static _fromTokenResponse(d,p){return new oi({phoneNumber:d,temporaryProof:p})}_getIdTokenResponse(d){return function xt(_,d){return Wt.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,p){return function Jn(_,d){return Rr.apply(this,arguments)}(d,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ds(_,d){return lo.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:p,verificationId:D,verificationCode:j}=this.params;return d&&p?{temporaryProof:d,phoneNumber:p}:{sessionInfo:D,code:j}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:p,verificationCode:D,phoneNumber:j,temporaryProof:ne}=d;return D||p||j||ne?new oi({verificationId:p,verificationCode:D,phoneNumber:j,temporaryProof:ne}):null}}class Rs{constructor(d){var p,D,j,ne,ke,tt;const zt=(0,te.zd)((0,te.pd)(d)),un=null!==(p=zt.apiKey)&&void 0!==p?p:null,vn=null!==(D=zt.oobCode)&&void 0!==D?D:null,Nn=function qs(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=zt.mode)&&void 0!==j?j:null);we(un&&vn&&Nn,"argument-error"),this.apiKey=un,this.operation=Nn,this.code=vn,this.continueUrl=null!==(ne=zt.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(ke=zt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(tt=zt.tenantId)&&void 0!==tt?tt:null}static parseLink(d){const p=function hs(_){const d=(0,te.zd)((0,te.pd)(_)).link,p=d?(0,te.zd)((0,te.pd)(d)).deep_link_id:null,D=(0,te.zd)((0,te.pd)(_)).deep_link_id;return(D?(0,te.zd)((0,te.pd)(D)).link:null)||D||p||d||_}(d);try{return new Rs(p)}catch(D){return null}}}let Ws=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,D){return vr._fromEmailAndPassword(p,D)}static credentialWithLink(p,D){const j=Rs.parseLink(D);return we(j,"argument-error"),vr._fromEmailAndCode(p,j.code,j.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class ai{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ns extends ai{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Gi extends Ns{static credentialFromJSON(d){const p="string"==typeof d?JSON.parse(d):d;return we("providerId"in p&&"signInMethod"in p,"argument-error"),Ie._fromParams(p)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return we(d.idToken||d.accessToken,"argument-error"),Ie._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Gi.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Gi.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:p,oauthAccessToken:D,oauthTokenSecret:j,pendingToken:ne,nonce:ke,providerId:tt}=d;if(!D&&!j&&!p&&!ne||!tt)return null;try{return new Gi(tt)._credential({idToken:p,accessToken:D,nonce:ke,pendingToken:ne})}catch(zt){return null}}}let Ji=(()=>{class _ extends Ns{constructor(){super("facebook.com")}static credential(p){return Ie._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(D){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Zs=(()=>{class _ extends Ns{constructor(){super("google.com"),this.addScope("profile")}static credential(p,D){return Ie._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:D})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:D,oauthAccessToken:j}=p;if(!D&&!j)return null;try{return _.credential(D,j)}catch(ne){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),fs=(()=>{class _ extends Ns{constructor(){super("github.com")}static credential(p){return Ie._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(D){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Di extends ti{constructor(d,p){super(d,d),this.pendingToken=p}_getIdTokenResponse(d){return Hi(d,this.buildRequest())}_linkToIdToken(d,p){const D=this.buildRequest();return D.idToken=p,Hi(d,D)}_getReauthenticationResolver(d){const p=this.buildRequest();return p.autoCreate=!1,Hi(d,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const p="string"==typeof d?JSON.parse(d):d,{providerId:D,signInMethod:j,pendingToken:ne}=p;return D&&j&&ne&&D===j?new Di(D,ne):null}static _create(d,p){return new Di(d,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends ai{constructor(d){we(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return ui.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return ui.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const p=Di.fromJSON(d);return we(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:p,providerId:D}=d;if(!p||!D)return null;try{return Di._create(D,p)}catch(j){return null}}}let Z=(()=>{class _ extends Ns{constructor(){super("twitter.com")}static credential(p,D){return Ie._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:D})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:D,oauthTokenSecret:j}=p;if(!D||!j)return null;try{return _.credential(D,j)}catch(ne){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function G(_,d){return ce.apply(this,arguments)}function ce(){return(ce=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signUp",Mt(_,d))})).apply(this,arguments)}class me{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,p,D,j=!1){return(0,m.Z)(function*(){const ne=yield on._fromIdTokenResponse(d,D,j),ke=Ve(D);return new me({user:ne,providerId:ke,_tokenResponse:D,operationType:p})})()}static _forOperation(d,p,D){return(0,m.Z)(function*(){yield d._updateTokensIfNecessary(D,!0);const j=Ve(D);return new me({user:d,providerId:j,_tokenResponse:D,operationType:p})})()}}function Ve(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function Rt(){return(Rt=(0,m.Z)(function*(_){var d;const p=kt(_);if(yield p._initializationPromise,null===(d=p.currentUser)||void 0===d?void 0:d.isAnonymous)return new me({user:p.currentUser,providerId:null,operationType:"signIn"});const D=yield G(p,{returnSecureToken:!0}),j=yield me._fromIdTokenResponse(p,"signIn",D,!0);return yield p._updateCurrentUser(j.user),j})).apply(this,arguments)}class Vt extends te.ZR{constructor(d,p,D,j){var ne;super(p.code,p.message),this.operationType=D,this.user=j,Object.setPrototypeOf(this,Vt.prototype),this.customData={appName:d.name,tenantId:null!==(ne=d.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:p.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(d,p,D,j){return new Vt(d,p,D,j)}}function jt(_,d,p,D){return("reauthenticate"===d?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?Vt._fromErrorAndOperation(_,ne,d,D):ne})}function Dn(_){return new Set(_.map(({providerId:d})=>d).filter(d=>!!d))}function Mn(){return(Mn=(0,m.Z)(function*(_,d){const p=(0,te.m9)(_);yield k(!0,p,d);const{providerUserInfo:D}=yield _n(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[d]}),j=Dn(D||[]);return p.providerData=p.providerData.filter(ne=>j.has(ne.providerId)),j.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function O(_,d){return z.apply(this,arguments)}function z(){return(z=(0,m.Z)(function*(_,d,p=!1){const D=yield Sr(_,d._linkToIdToken(_.auth,yield _.getIdToken()),p);return me._forOperation(_,"link",D)})).apply(this,arguments)}function k(_,d,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,m.Z)(function*(_,d,p){yield Vn(d);const j=!1===_?"provider-already-linked":"no-such-provider";we(Dn(d.providerData).has(p)===_,d.auth,j)})).apply(this,arguments)}function ye(_,d){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,m.Z)(function*(_,d,p=!1){const{auth:D}=_,j="reauthenticate";try{const ne=yield Sr(_,jt(D,j,d,_),p);we(ne.idToken,D,"internal-error");const ke=Qt(ne.idToken);we(ke,D,"internal-error");const{sub:tt}=ke;return we(_.uid===tt,D,"user-mismatch"),me._forOperation(_,j,ne)}catch(ne){throw"auth/user-not-found"===(null==ne?void 0:ne.code)&&he(D,"user-mismatch"),ne}})).apply(this,arguments)}function Je(_,d){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,m.Z)(function*(_,d,p=!1){const D="signIn",j=yield jt(_,D,d),ne=yield me._fromIdTokenResponse(_,D,j);return p||(yield _._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function rn(_,d){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(_,d){return Je(kt(_),d)})).apply(this,arguments)}function fn(_,d){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,m.Z)(function*(_,d){const p=(0,te.m9)(_);return yield k(!1,p,d.providerId),O(p,d)})).apply(this,arguments)}function dr(_,d){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,m.Z)(function*(_,d){return ye((0,te.m9)(_),d)})).apply(this,arguments)}function Cr(_,d){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(_,d){return Yn(_,"POST","/v1/accounts:signInWithCustomToken",Mt(_,d))})).apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(_,d){const p=kt(_),D=yield Cr(p,{token:d,returnSecureToken:!0}),j=yield me._fromIdTokenResponse(p,"signIn",D);return yield p._updateCurrentUser(j.user),j})).apply(this,arguments)}class xi{constructor(d,p){this.factorId=d,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(d,p){return"phoneInfo"in p?Ps._fromServerResponse(d,p):he(d,"internal-error")}}class Ps extends xi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,p){return new Ps(p)}}function co(_,d,p){var D;we((null===(D=p.url)||void 0===D?void 0:D.length)>0,_,"invalid-continue-uri"),we(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),d.continueUrl=p.url,d.dynamicLinkDomain=p.dynamicLinkDomain,d.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(we(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),d.iOSBundleId=p.iOS.bundleId),p.android&&(we(p.android.packageName.length>0,_,"missing-android-pkg-name"),d.androidInstallApp=p.android.installApp,d.androidMinimumVersionCode=p.android.minimumVersion,d.androidPackageName=p.android.packageName)}function V(){return(V=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_),j={requestType:"PASSWORD_RESET",email:d};p&&co(D,j,p),yield Kr(D,j)})).apply(this,arguments)}function R(){return(R=(0,m.Z)(function*(_,d,p){yield Tr((0,te.m9)(_),{oobCode:d,newPassword:p})})).apply(this,arguments)}function Ee(){return(Ee=(0,m.Z)(function*(_,d){yield cs((0,te.m9)(_),{oobCode:d})})).apply(this,arguments)}function Et(_,d){return ar.apply(this,arguments)}function ar(){return(ar=(0,m.Z)(function*(_,d){const p=(0,te.m9)(_),D=yield Tr(p,{oobCode:d}),j=D.requestType;switch(we(j,p,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":we(D.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":we(D.mfaInfo,p,"internal-error");default:we(D.email,p,"internal-error")}let ne=null;return D.mfaInfo&&(ne=xi._fromServerResponse(kt(p),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ne},operation:j}})).apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(_,d){const{data:p}=yield Et((0,te.m9)(_),d);return p.email})).apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(_,d,p){const D=kt(_),j=yield G(D,{returnSecureToken:!0,email:d,password:p}),ne=yield me._fromIdTokenResponse(D,"signIn",j);return yield D._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function Uu(){return(Uu=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_),j={requestType:"EMAIL_SIGNIN",email:d};we(p.handleCodeInApp,D,"argument-error"),p&&co(D,j,p),yield Fi(D,j)})).apply(this,arguments)}function ho(){return(ho=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_),j=Ws.credentialWithLink(d,p||vt());return we(j._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),rn(D,j)})).apply(this,arguments)}function Li(_,d){return bs.apply(this,arguments)}function bs(){return(bs=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:createAuthUri",Mt(_,d))})).apply(this,arguments)}function ko(){return(ko=(0,m.Z)(function*(_,d){const D={identifier:d,continueUri:St()?vt():"http://localhost"},{signinMethods:j}=yield Li((0,te.m9)(_),D);return j||[]})).apply(this,arguments)}function ua(){return(ua=(0,m.Z)(function*(_,d){const p=(0,te.m9)(_),j={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};d&&co(p.auth,j,d);const{email:ne}=yield or(p.auth,j);ne!==_.email&&(yield _.reload())})).apply(this,arguments)}function ci(){return(ci=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:d};p&&co(D.auth,ne,p);const{email:ke}=yield xs(D.auth,ne);ke!==_.email&&(yield _.reload())})).apply(this,arguments)}function Ka(_,d){return Na.apply(this,arguments)}function Na(){return(Na=(0,m.Z)(function*(_,d){return qt(_,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Eu(){return(Eu=(0,m.Z)(function*(_,{displayName:d,photoURL:p}){if(void 0===d&&void 0===p)return;const D=(0,te.m9)(_),ne={idToken:yield D.getIdToken(),displayName:d,photoUrl:p,returnSecureToken:!0},ke=yield Sr(D,Ka(D.auth,ne));D.displayName=ke.displayName||null,D.photoURL=ke.photoUrl||null;const tt=D.providerData.find(({providerId:zt})=>"password"===zt);tt&&(tt.displayName=D.displayName,tt.photoURL=D.photoURL),yield D._updateTokensIfNecessary(ke)})).apply(this,arguments)}function Vs(_,d,p){return wo.apply(this,arguments)}function wo(){return(wo=(0,m.Z)(function*(_,d,p){const{auth:D}=_,ne={idToken:yield _.getIdToken(),returnSecureToken:!0};d&&(ne.email=d),p&&(ne.password=p);const ke=yield Sr(_,Si(D,ne));yield _._updateTokensIfNecessary(ke,!0)})).apply(this,arguments)}class bo{constructor(d,p,D={}){this.isNewUser=d,this.providerId=p,this.profile=D}}class Us extends bo{constructor(d,p,D,j){super(d,p,D),this.username=j}}class ms extends bo{constructor(d,p){super(d,"facebook.com",p)}}class zo extends Us{constructor(d,p){super(d,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Oa extends bo{constructor(d,p){super(d,"google.com",p)}}class Io extends Us{constructor(d,p,D){super(d,"twitter.com",p,D)}}function Xi(_){const{user:d,_tokenResponse:p}=_;return d.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function ca(_){var d,p;if(!_)return null;const{providerId:D}=_,j=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},ne=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!D&&(null==_?void 0:_.idToken)){const ke=null===(p=null===(d=Qt(_.idToken))||void 0===d?void 0:d.firebase)||void 0===p?void 0:p.sign_in_provider;if(ke)return new bo(ne,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!D)return null;switch(D){case"facebook.com":return new ms(ne,j);case"github.com":return new zo(ne,j);case"google.com":return new Oa(ne,j);case"twitter.com":return new Io(ne,j,_.screenName||null);case"custom":case"anonymous":return new bo(ne,null);default:return new bo(ne,D,j)}}(p)}class To{constructor(d,p){this.type=d,this.credential=p}static _fromIdtoken(d){return new To("enroll",d)}static _fromMfaPendingCredential(d){return new To("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var p,D;if(null==d?void 0:d.multiFactorSession){if(null===(p=d.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return To._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(D=d.multiFactorSession)||void 0===D?void 0:D.idToken)return To._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Co{constructor(d,p,D){this.session=d,this.hints=p,this.signInResolver=D}static _fromError(d,p){const D=kt(d),j=p.customData._serverResponse,ne=(j.mfaInfo||[]).map(tt=>xi._fromServerResponse(D,tt));we(j.mfaPendingCredential,D,"internal-error");const ke=To._fromMfaPendingCredential(j.mfaPendingCredential);return new Co(ke,ne,function(){var tt=(0,m.Z)(function*(zt){const un=yield zt._process(D,ke);delete j.mfaInfo,delete j.mfaPendingCredential;const vn=Object.assign(Object.assign({},j),{idToken:un.idToken,refreshToken:un.refreshToken});switch(p.operationType){case"signIn":const Nn=yield me._fromIdTokenResponse(D,p.operationType,vn);return yield D._updateCurrentUser(Nn.user),Nn;case"reauthenticate":return we(p.user,D,"internal-error"),me._forOperation(p.user,p.operationType,vn);default:he(D,"internal-error")}});return function(zt){return tt.apply(this,arguments)}}())}resolveSignIn(d){var p=this;return(0,m.Z)(function*(){return p.signInResolver(d)})()}}function Ja(_,d){return qt(_,"POST","/v2/accounts/mfaEnrollment:start",Mt(_,d))}class Bs{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(D=>xi._fromServerResponse(d.auth,D)))})}static _fromUser(d){return new Bs(d)}getSession(){var d=this;return(0,m.Z)(function*(){return To._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,p){var D=this;return(0,m.Z)(function*(){const j=d,ne=yield D.getSession(),ke=yield Sr(D.user,j._process(D.user.auth,ne,p));return yield D.user._updateTokensIfNecessary(ke),D.user.reload()})()}unenroll(d){var p=this;return(0,m.Z)(function*(){const D="string"==typeof d?d:d.uid,j=yield p.user.getIdToken(),ne=yield Sr(p.user,function Qs(_,d){return qt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Mt(_,d))}(p.user.auth,{idToken:j,mfaEnrollmentId:D}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ke})=>ke!==D),yield p.user._updateTokensIfNecessary(ne);try{yield p.user.reload()}catch(ke){if("auth/user-token-expired"!==ke.code)throw ke}})()}}const Vi=new WeakMap,Os="__sak";class da{constructor(d,p){this.storageRetriever=d,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Os,"1"),this.storage.removeItem(Os),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,p){return this.storage.setItem(d,JSON.stringify(p)),Promise.resolve()}_get(d){const p=this.storage.getItem(d);return Promise.resolve(p?JSON.parse(p):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const ha=(()=>{class _ extends da{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,D)=>this.onStorageEvent(p,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xa(){const _=(0,te.z$)();return wi(_)||fi(_)}()&&function Or(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ei(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const D of Object.keys(this.listeners)){const j=this.storage.getItem(D),ne=this.localCache[D];j!==ne&&p(D,ne,j)}}onStorageEvent(p,D=!1){if(!p.key)return void this.forAllChangedKeys((tt,zt,un)=>{this.notifyListeners(tt,un)});const j=p.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem(j);if(p.newValue!==tt)null!==p.newValue?this.storage.setItem(j,p.newValue):this.storage.removeItem(j);else if(this.localCache[j]===p.newValue&&!D)return}const ne=()=>{const tt=this.storage.getItem(j);!D&&this.localCache[j]===tt||this.notifyListeners(j,tt)},ke=this.storage.getItem(j);!function pi(){return(0,te.w1)()&&10===document.documentMode}()||ke===p.newValue||p.newValue===p.oldValue?ne():setTimeout(ne,10)}notifyListeners(p,D){this.localCache[p]=D;const j=this.listeners[p];if(j)for(const ne of Array.from(j))ne(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,D,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:D,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(D)}_removeListener(p,D){this.listeners[p]&&(this.listeners[p].delete(D),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,D){var j=()=>super._set,ne=this;return(0,m.Z)(function*(){yield j().call(ne,p,D),ne.localCache[p]=JSON.stringify(D)})()}_get(p){var D=()=>super._get,j=this;return(0,m.Z)(function*(){const ne=yield D().call(j,p);return j.localCache[p]=JSON.stringify(ne),ne})()}_remove(p){var D=()=>super._remove,j=this;return(0,m.Z)(function*(){yield D().call(j,p),delete j.localCache[p]})()}}return _.type="LOCAL",_})(),Js=(()=>{class _ extends da{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,D){}_removeListener(p,D){}}return _.type="SESSION",_})();let Va=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const D=this.receivers.find(ne=>ne.isListeningto(p));if(D)return D;const j=new _(p);return this.receivers.push(j),j}isListeningto(p){return this.eventTarget===p}handleEvent(p){var D=this;return(0,m.Z)(function*(){const j=p,{eventId:ne,eventType:ke,data:tt}=j.data,zt=D.handlersMap[ke];if(!(null==zt?void 0:zt.size))return;j.ports[0].postMessage({status:"ack",eventId:ne,eventType:ke});const un=Array.from(zt).map(function(){var Nn=(0,m.Z)(function*(is){return is(j.origin,tt)});return function(is){return Nn.apply(this,arguments)}}()),vn=yield function Xs(_){return Promise.all(_.map(function(){var d=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(D){return{fulfilled:!1,reason:D}}});return function(p){return d.apply(this,arguments)}}()))}(un);j.ports[0].postMessage({status:"done",eventId:ne,eventType:ke,response:vn})})()}_subscribe(p,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(D)}_unsubscribe(p,D){this.handlersMap[p]&&D&&this.handlersMap[p].delete(D),(!D||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function fa(_="",d=10){let p="";for(let D=0;D<d;D++)p+=Math.floor(10*Math.random());return _+p}class ns{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,p,D=50){var j=this;return(0,m.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let ke,tt;return new Promise((zt,un)=>{const vn=fa("",20);ne.port1.start();const Nn=setTimeout(()=>{un(new Error("unsupported_event"))},D);tt={messageChannel:ne,onMessage(is){const ta=is;if(ta.data.eventId===vn)switch(ta.data.status){case"ack":clearTimeout(Nn),ke=setTimeout(()=>{un(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),zt(ta.data.response);break;default:clearTimeout(Nn),clearTimeout(ke),un(new Error("invalid_response"))}}},j.handlers.add(tt),ne.port1.addEventListener("message",tt.onMessage),j.target.postMessage({eventType:d,eventId:vn,data:p},[ne.port2])}).finally(()=>{tt&&j.removeMessageHandler(tt)})})()}}function Yr(){return window}function Ao(){return void 0!==Yr().WorkerGlobalScope&&"function"==typeof Yr().importScripts}function eu(){return(eu=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Lo="firebaseLocalStorageDb",Vo="firebaseLocalStorage",Ct="fbase_key";class ri{constructor(d){this.request=d}toPromise(){return new Promise((d,p)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function A(_,d){return _.transaction([Vo],d?"readwrite":"readonly").objectStore(Vo)}function E(){const _=indexedDB.open(Lo,1);return new Promise((d,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const D=_.result;try{D.createObjectStore(Vo,{keyPath:Ct})}catch(j){p(j)}}),_.addEventListener("success",(0,m.Z)(function*(){const D=_.result;D.objectStoreNames.contains(Vo)?d(D):(D.close(),yield function T(){const _=indexedDB.deleteDatabase(Lo);return new ri(_).toPromise()}(),d(yield E()))}))})}function x(_,d,p){return U.apply(this,arguments)}function U(){return(U=(0,m.Z)(function*(_,d,p){const D=A(_,!0).put({[Ct]:d,value:p});return new ri(D).toPromise()})).apply(this,arguments)}function W(){return(W=(0,m.Z)(function*(_,d){const p=A(_,!1).get(d),D=yield new ri(p).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function re(_,d){const p=A(_,!0).delete(d);return new ri(p).toPromise()}const an=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield E()),p.db})()}_withRetries(p){var D=this;return(0,m.Z)(function*(){let j=0;for(;;)try{const ne=yield D._openDb();return yield p(ne)}catch(ne){if(j++>3)throw ne;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Ao()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Va._getInstance(function to(){return Ao()?self:null}()),p.receiver._subscribe("keyChanged",function(){var D=(0,m.Z)(function*(j,ne){return{keyProcessed:(yield p._poll()).includes(ne.key)}});return function(j,ne){return D.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var D=(0,m.Z)(function*(j,ne){return["keyChanged"]});return function(j,ne){return D.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var D,j;if(p.activeServiceWorker=yield function Zo(){return eu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new ns(p.activeServiceWorker);const ne=yield p.sender._send("ping",{},800);!ne||(null===(D=ne[0])||void 0===D?void 0:D.fulfilled)&&(null===(j=ne[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var D=this;return(0,m.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Ti(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:p},D.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield E();return yield x(p,Os,"1"),yield re(p,Os),!0}catch(p){}return!1})()}_withPendingWrite(p){var D=this;return(0,m.Z)(function*(){D.pendingWrites++;try{yield p()}finally{D.pendingWrites--}})()}_set(p,D){var j=this;return(0,m.Z)(function*(){return j._withPendingWrite((0,m.Z)(function*(){return yield j._withRetries(ne=>x(ne,p,D)),j.localCache[p]=D,j.notifyServiceWorker(p)}))})()}_get(p){var D=this;return(0,m.Z)(function*(){const j=yield D._withRetries(ne=>function q(_,d){return W.apply(this,arguments)}(ne,p));return D.localCache[p]=j,j})()}_remove(p){var D=this;return(0,m.Z)(function*(){return D._withPendingWrite((0,m.Z)(function*(){return yield D._withRetries(j=>re(j,p)),delete D.localCache[p],D.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const D=yield p._withRetries(ke=>{const tt=A(ke,!1).getAll();return new ri(tt).toPromise()});if(!D)return[];if(0!==p.pendingWrites)return[];const j=[],ne=new Set;for(const{fbase_key:ke,value:tt}of D)ne.add(ke),JSON.stringify(p.localCache[ke])!==JSON.stringify(tt)&&(p.notifyListeners(ke,tt),j.push(ke));for(const ke of Object.keys(p.localCache))p.localCache[ke]&&!ne.has(ke)&&(p.notifyListeners(ke,null),j.push(ke));return j})()}notifyListeners(p,D){this.localCache[p]=D;const j=this.listeners[p];if(j)for(const ne of Array.from(j))ne(D)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(D)}_removeListener(p,D){this.listeners[p]&&(this.listeners[p].delete(D),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Ir(_,d){return qt(_,"POST","/v2/accounts/mfaSignIn:start",Mt(_,d))}function no(){return(no=(0,m.Z)(function*(_){return(yield qt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function tu(_){return new Promise((d,p)=>{const D=document.createElement("script");D.setAttribute("src",_),D.onload=d,D.onerror=j=>{const ne=Xe("internal-error");ne.customData=j,p(ne)},D.type="text/javascript",D.charset="UTF-8",function Ko(){var _,d;return null!==(d=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==d?d:document}().appendChild(D)})}function Hr(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Gn=1e12;class Ca{constructor(d){this.auth=d,this.counter=Gn,this._widgets=new Map}render(d,p){const D=this.counter;return this._widgets.set(D,new Ua(d,this.auth.name,p||{})),this.counter++,D}reset(d){var p;const D=d||Gn;null===(p=this._widgets.get(D))||void 0===p||p.delete(),this._widgets.delete(D)}getResponse(d){var p;return(null===(p=this._widgets.get(d||Gn))||void 0===p?void 0:p.getResponse())||""}execute(d){var p=this;return(0,m.Z)(function*(){var D;return null===(D=p._widgets.get(d||Gn))||void 0===D||D.execute(),""})()}}class Ua{constructor(d,p,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof d?document.getElementById(d):d;we(j,"argument-error",{appName:p}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ni(_){const d=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<_;D++)d.push(p.charAt(Math.floor(Math.random()*p.length)));return d.join("")}(50);const{callback:d,"expired-callback":p}=this.params;if(d)try{d(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xn=Hr("rcb"),Pi=new pn(3e4,6e4);class Dl{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Yr().grecaptcha}load(d,p=""){return we(function nu(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(p),d,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Yr().grecaptcha):new Promise((D,j)=>{const ne=Yr().setTimeout(()=>{j(Xe(d,"network-request-failed"))},Pi.get());Yr()[xn]=()=>{Yr().clearTimeout(ne),delete Yr()[xn];const tt=Yr().grecaptcha;if(!tt)return void j(Xe(d,"internal-error"));const zt=tt.render;tt.render=(un,vn)=>{const Nn=zt(un,vn);return this.counter++,Nn},this.hostLanguage=p,D(tt)},tu(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:xn,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(ne),j(Xe(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Yr().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hr{load(d){return(0,m.Z)(function*(){return new Ca(d)})()}clearedOneInstance(){}}const Tl="recaptcha",ys={theme:"light",type:"image"};class bu{constructor(d,p=Object.assign({},ys),D){this.parameters=p,this.type=Tl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(D),this.isInvisible="invisible"===this.parameters.size,we("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof d?document.getElementById(d):d;we(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hr:new Dl,this.validateStartingState()}verify(){var d=this;return(0,m.Z)(function*(){d.assertNotDestroyed();const p=yield d.render(),D=d.getAssertedRecaptcha();return D.getResponse(p)||new Promise(ne=>{const ke=tt=>{!tt||(d.tokenChangeListeners.delete(ke),ne(tt))};d.tokenChangeListeners.add(ke),d.isInvisible&&D.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){we(!this.parameters.sitekey,this.auth,"argument-error"),we(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),we("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return p=>{if(this.tokenChangeListeners.forEach(D=>D(p)),"function"==typeof d)d(p);else if("string"==typeof d){const D=Yr()[d];"function"==typeof D&&D(p)}}}assertNotDestroyed(){we(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,m.Z)(function*(){if(yield d.init(),!d.widgetId){let p=d.container;if(!d.isInvisible){const D=document.createElement("div");p.appendChild(D),p=D}d.widgetId=d.getAssertedRecaptcha().render(p,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,m.Z)(function*(){we(St()&&!Ao(),d.auth,"internal-error"),yield function Iu(){let _=null;return new Promise(d=>{"complete"!==document.readyState?(_=()=>d(),window.addEventListener("load",_)):d()}).catch(d=>{throw _&&window.removeEventListener("load",_),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const p=yield function Ri(_){return no.apply(this,arguments)}(d.auth);we(p,d.auth,"internal-error"),d.parameters.sitekey=p})()}getAssertedRecaptcha(){return we(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zi{constructor(d,p){this.verificationId=d,this.onConfirmation=p}confirm(d){const p=oi._fromVerification(this.verificationId,d);return this.onConfirmation(p)}}function Mo(){return(Mo=(0,m.Z)(function*(_,d,p){const D=kt(_),j=yield _s(D,d,(0,te.m9)(p));return new Zi(j,ne=>rn(D,ne))})).apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_);yield k(!1,D,"phone");const j=yield _s(D.auth,d,(0,te.m9)(p));return new Zi(j,ne=>fn(D,ne))})).apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_),j=yield _s(D.auth,d,(0,te.m9)(p));return new Zi(j,ne=>dr(D,ne))})).apply(this,arguments)}function _s(_,d,p){return ju.apply(this,arguments)}function ju(){return(ju=(0,m.Z)(function*(_,d,p){var D;const j=yield p.verify();try{let ne;if(we("string"==typeof j,_,"argument-error"),we(p.type===Tl,_,"argument-error"),ne="string"==typeof d?{phoneNumber:d}:d,"session"in ne){const ke=ne.session;if("phoneNumber"in ne)return we("enroll"===ke.type,_,"internal-error"),(yield Ja(_,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{we("signin"===ke.type,_,"internal-error");const tt=(null===(D=ne.multiFactorHint)||void 0===D?void 0:D.uid)||ne.multiFactorUid;return we(tt,_,"missing-multi-factor-info"),(yield Ir(_,{mfaPendingCredential:ke.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield qe(_,{phoneNumber:ne.phoneNumber,recaptchaToken:j});return ke}}finally{p._reset()}})).apply(this,arguments)}function js(){return(js=(0,m.Z)(function*(_,d){yield O((0,te.m9)(_),d)})).apply(this,arguments)}let Uo=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=kt(p)}verifyPhoneNumber(p,D){return _s(this.auth,p,(0,te.m9)(D))}static credential(p,D){return oi._fromVerification(p,D)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:D,temporaryProof:j}=p;return D&&j?oi._fromTokenResponse(D,j):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Qo(_,d){return d?fe(d):(we(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class $t extends ti{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Hi(d,this._buildIdpRequest())}_linkToIdToken(d,p){return Hi(d,this._buildIdpRequest(p))}_getReauthenticationResolver(d){return Hi(d,this._buildIdpRequest())}_buildIdpRequest(d){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(p.idToken=d),p}}function ya(_){return Je(_.auth,new $t(_),_.bypassAuthState)}function iu(_){const{auth:d,user:p}=_;return we(p,d,"internal-error"),ye(p,new $t(_),_.bypassAuthState)}function _a(_){return yi.apply(this,arguments)}function yi(){return(yi=(0,m.Z)(function*(_){const{auth:d,user:p}=_;return we(p,d,"internal-error"),O(p,new $t(_),_.bypassAuthState)})).apply(this,arguments)}class Ba{constructor(d,p,D,j,ne=!1){this.auth=d,this.resolver=D,this.user=j,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var d=this;return new Promise(function(){var p=(0,m.Z)(function*(D,j){d.pendingPromise={resolve:D,reject:j};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(ne){d.reject(ne)}});return function(D,j){return p.apply(this,arguments)}}())}onAuthEvent(d){var p=this;return(0,m.Z)(function*(){const{urlResponse:D,sessionId:j,postBody:ne,tenantId:ke,error:tt,type:zt}=d;if(tt)return void p.reject(tt);const un={auth:p.auth,requestUri:D,sessionId:j,tenantId:ke||void 0,postBody:ne||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(zt)(un))}catch(vn){p.reject(vn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return ya;case"linkViaPopup":case"linkViaRedirect":return _a;case"reauthViaPopup":case"reauthViaRedirect":return iu;default:he(this.auth,"internal-error")}}resolve(d){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const go=new pn(2e3,1e4);function ro(){return(ro=(0,m.Z)(function*(_,d,p){const D=kt(_);We(_,d,ai);const j=Qo(D,p);return new Du(D,"signInViaPopup",d,j).executeNotNull()})).apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_);We(D.auth,d,ai);const j=Qo(D.auth,p);return new Du(D.auth,"reauthViaPopup",d,j,D).executeNotNull()})).apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_);We(D.auth,d,ai);const j=Qo(D.auth,p);return new Du(D.auth,"linkViaPopup",d,j,D).executeNotNull()})).apply(this,arguments)}let Du=(()=>{class _ extends Ba{constructor(p,D,j,ne,ke){super(p,D,ne,ke),this.provider=j,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const D=yield p.execute();return we(D,p.auth,"internal-error"),D})()}onExecution(){var p=this;return(0,m.Z)(function*(){se(1===p.filter.length,"Popup operations only handle one event");const D=fa();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],D),p.authWindow.associatedEvent=D,p.resolver._originValidation(p.auth).catch(j=>{p.reject(j)}),p.resolver._isIframeWebStorageSupported(p.auth,j=>{j||p.reject(Xe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var D,j;this.pollId=(null===(j=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,go.get())};p()}}return _.currentPopupAction=null,_})();const xo=new Map;class ja extends Ba{constructor(d,p,D=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,D),this.eventId=null}execute(){var d=()=>super.execute,p=this;return(0,m.Z)(function*(){let D=xo.get(p.auth._key());if(!D){try{const ne=(yield function Cl(_,d){return $a.apply(this,arguments)}(p.resolver,p.auth))?yield d().call(p):null;D=()=>Promise.resolve(ne)}catch(j){D=()=>Promise.reject(j)}xo.set(p.auth._key(),D)}return p.bypassAuthState||xo.set(p.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(d){var p=()=>super.onAuthEvent,D=this;return(0,m.Z)(function*(){if("signInViaRedirect"===d.type)return p().call(D,d);if("unknown"!==d.type){if(d.eventId){const j=yield D.auth._redirectUserForId(d.eventId);if(j)return D.user=j,p().call(D,d);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function $a(){return($a=(0,m.Z)(function*(_,d){const p=oe(d),D=J(_);if(!(yield D._isAvailable()))return!1;const j="true"===(yield D._get(p));return yield D._remove(p),j})).apply(this,arguments)}function Tu(_,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,m.Z)(function*(_,d){return J(_)._set(oe(d),"true")})).apply(this,arguments)}function L(_,d){xo.set(_._key(),d)}function J(_){return fe(_._redirectPersistence)}function oe(_){return nr("pendingRedirect",_.config.apiKey,_.name)}function Dt(){return(Dt=(0,m.Z)(function*(_,d,p){const D=kt(_);We(_,d,ai);const j=Qo(D,p);return yield Tu(j,D),j._openRedirect(D,d,"signInViaRedirect")})).apply(this,arguments)}function Fn(){return(Fn=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_);We(D.auth,d,ai);const j=Qo(D.auth,p);yield Tu(j,D.auth);const ne=yield yo(D);return j._openRedirect(D.auth,d,"reauthViaRedirect",ne)})).apply(this,arguments)}function Ki(){return(Ki=(0,m.Z)(function*(_,d,p){const D=(0,te.m9)(_);We(D.auth,d,ai);const j=Qo(D.auth,p);yield k(!1,D,d.providerId),yield Tu(j,D.auth);const ne=yield yo(D);return j._openRedirect(D.auth,d,"linkViaRedirect",ne)})).apply(this,arguments)}function Xo(){return(Xo=(0,m.Z)(function*(_,d){return yield kt(_)._initializationPromise,Ar(_,d,!1)})).apply(this,arguments)}function Ar(_,d){return er.apply(this,arguments)}function er(){return(er=(0,m.Z)(function*(_,d,p=!1){const D=kt(_),j=Qo(D,d),ke=yield new ja(D,j,p).execute();return ke&&!p&&(delete ke.user._redirectEventId,yield D._persistUserIfCurrent(ke.user),yield D._setRedirectUser(null,d)),ke})).apply(this,arguments)}function yo(_){return io.apply(this,arguments)}function io(){return(io=(0,m.Z)(function*(_){const d=fa(`${_.uid}:::`);return _._redirectEventId=d,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),d})).apply(this,arguments)}class Xl{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let p=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(d,D)&&(p=!0,this.sendToConsumer(d,D),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function su(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cu(_);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=d,p=!0)),p}sendToConsumer(d,p){var D;if(d.error&&!Cu(d)){const j=(null===(D=d.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";p.onError(Xe(this.auth,j))}else p.onAuthEvent(d)}isEventForConsumer(d,p){const D=null===p.eventId||!!d.eventId&&d.eventId===p.eventId;return p.filter.includes(d.type)&&D}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aa(d))}saveEventToCache(d){this.cachedEventUids.add(Aa(d)),this.lastProcessedEventTime=Date.now()}}function Aa(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function Cu({type:_,error:d}){return"unknown"===_&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Hu(_){return ou.apply(this,arguments)}function ou(){return(ou=(0,m.Z)(function*(_,d={}){return qt(_,"GET","/v1/projects",d)})).apply(this,arguments)}const Ac=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,au=/^https?/;function ec(){return(ec=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:d}=yield Hu(_);for(const p of d)try{if(lh(p))return}catch(D){}he(_,"unauthorized-domain")})).apply(this,arguments)}function lh(_){const d=vt(),{protocol:p,hostname:D}=new URL(d);if(_.startsWith("chrome-extension://")){const ke=new URL(_);return""===ke.hostname&&""===D?"chrome-extension:"===p&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===p&&ke.hostname===D}if(!au.test(p))return!1;if(Ac.test(_))return D===_;const j=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(D)}const Sc=new pn(3e4,6e4);function Al(){const _=Yr().___jsl;if(null==_?void 0:_.H)for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let ul=null;function _d(_){return ul=ul||function tc(_){return new Promise((d,p)=>{var D,j,ne;function ke(){Al(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Al(),p(Xe(_,"network-request-failed"))},timeout:Sc.get()})}if(null===(j=null===(D=Yr().gapi)||void 0===D?void 0:D.iframes)||void 0===j?void 0:j.Iframe)d(gapi.iframes.getContext());else{if(!(null===(ne=Yr().gapi)||void 0===ne?void 0:ne.load)){const tt=Hr("iframefcb");return Yr()[tt]=()=>{gapi.load?ke():p(Xe(_,"network-request-failed"))},tu(`https://apis.google.com/js/api.js?onload=${tt}`).catch(zt=>p(zt))}ke()}}).catch(d=>{throw ul=null,d})}(_),ul}const Mc=new pn(5e3,15e3),Gu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rc(_){const d=_.config;we(d.authDomain,_,"auth-domain-config-required");const p=d.emulator?nn(d,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,D={apiKey:d.apiKey,appName:_.name,v:Ne.SDK_VERSION},j=xc.get(_.config.apiHost);j&&(D.eid=j);const ne=_._getFrameworks();return ne.length&&(D.fw=ne.join(",")),`${p}?${(0,te.xO)(D).slice(1)}`}function cu(){return cu=(0,m.Z)(function*(_){const d=yield _d(_),p=Yr().gapi;return we(p,_,"internal-error"),d.open({where:document.body,url:Rc(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gu,dontclear:!0},D=>new Promise(function(){var j=(0,m.Z)(function*(ne,ke){yield D.restyle({setHideOnLeave:!1});const tt=Xe(_,"network-request-failed"),zt=Yr().setTimeout(()=>{ke(tt)},Mc.get());function un(){Yr().clearTimeout(zt),ne(D)}D.ping(un).then(un,()=>{ke(tt)})});return function(ne,ke){return j.apply(this,arguments)}}()))}),cu.apply(this,arguments)}const qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Au{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function F(_,d,p,D,j,ne){we(_.config.authDomain,_,"auth-domain-config-required"),we(_.config.apiKey,_,"invalid-api-key");const ke={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:D,v:Ne.SDK_VERSION,eventId:j};if(d instanceof ai){d.setDefaultLanguage(_.languageCode),ke.providerId=d.providerId||"",(0,te.xb)(d.getCustomParameters())||(ke.customParameters=JSON.stringify(d.getCustomParameters()));for(const[zt,un]of Object.entries(ne||{}))ke[zt]=un}if(d instanceof Ns){const zt=d.getScopes().filter(un=>""!==un);zt.length>0&&(ke.scopes=zt.join(","))}_.tenantId&&(ke.tid=_.tenantId);const tt=ke;for(const zt of Object.keys(tt))void 0===tt[zt]&&delete tt[zt];return`${function Y({config:_}){return _.emulator?nn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,te.xO)(tt).slice(1)}`}const ae="webStorageSupport";class Ht extends class ot{constructor(d){this.factorId=d}_process(d,p,D){switch(p.type){case"enroll":return this._finalizeEnroll(d,p.credential,D);case"signin":return this._finalizeSignIn(d,p.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Ht(d)}_finalizeEnroll(d,p,D){return function Ta(_,d){return qt(_,"POST","/v2/accounts/mfaEnrollment:finalize",Mt(_,d))}(d,{idToken:p,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,p){return function pr(_,d){return qt(_,"POST","/v2/accounts/mfaSignIn:finalize",Mt(_,d))}(d,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gn=(()=>{class _{constructor(){}static assertion(p){return Ht._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var kn="@firebase/auth";class Ln{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const p=this.auth.onIdTokenChanged(D=>{var j;d((null===(j=D)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,p),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const p=this.internalListeners.get(d);!p||(this.internalListeners.delete(d),p(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ci(){return window}function Yi(){return(Yi=(0,m.Z)(function*(_,d,p){var D;const{BuildInfo:j}=Ci();se(d.sessionId,"AuthEvent did not contain a session ID");const ne=yield Su(d.sessionId),ke={};return fi()?ke.ibi=j.packageName:Mr()?ke.apn=j.packageName:he(_,"operation-not-supported-in-this-environment"),j.displayName&&(ke.appDisplayName=j.displayName),ke.sessionId=ne,F(_,p,d.type,void 0,null!==(D=d.eventId)&&void 0!==D?D:void 0,ke)})).apply(this,arguments)}function Ts(){return(Ts=(0,m.Z)(function*(_){const{BuildInfo:d}=Ci(),p={};fi()?p.iosBundleId=d.packageName:Mr()?p.androidPackageName=d.packageName:he(_,"operation-not-supported-in-this-environment"),yield Hu(_,p)})).apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(_,d,p){const{cordova:D}=Ci();let j=()=>{};try{yield new Promise((ne,ke)=>{let tt=null;function zt(){var Nn;ne();const is=null===(Nn=D.plugins.browsertab)||void 0===Nn?void 0:Nn.close;"function"==typeof is&&is(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function un(){tt||(tt=window.setTimeout(()=>{ke(Xe(_,"redirect-cancelled-by-user"))},2e3))}function vn(){"visible"===(null==document?void 0:document.visibilityState)&&un()}d.addPassiveListener(zt),document.addEventListener("resume",un,!1),Mr()&&document.addEventListener("visibilitychange",vn,!1),j=()=>{d.removePassiveListener(zt),document.removeEventListener("resume",un,!1),document.removeEventListener("visibilitychange",vn,!1),tt&&window.clearTimeout(tt)}})}finally{j()}})).apply(this,arguments)}function Su(_){return No.apply(this,arguments)}function No(){return(No=(0,m.Z)(function*(_){const d=xl(_),p=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(p)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function xl(_){if(se(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const d=new ArrayBuffer(_.length),p=new Uint8Array(d);for(let D=0;D<_.length;D++)p[D]=_.charCodeAt(D);return p}!function Vr(_){(0,Ne._registerComponent)(new Le.wA("auth",(d,{options:p})=>{const D=d.getProvider("app").getImmediate(),j=d.getProvider("heartbeat"),{apiKey:ne,authDomain:ke}=D.options;return((tt,zt)=>{we(ne&&!ne.includes(":"),"invalid-api-key",{appName:tt.name}),we(!(null==ke?void 0:ke.includes(":")),"argument-error",{appName:tt.name});const un={apiKey:ne,authDomain:ke,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wr(_)},vn=new Pt(tt,zt,un);return function He(_,d){const p=(null==d?void 0:d.persistence)||[],D=(Array.isArray(p)?p:[p]).map(fe);(null==d?void 0:d.errorMap)&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(D,null==d?void 0:d.popupRedirectResolver)}(vn,p),vn})(D,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,p,D)=>{d.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Le.wA("auth-internal",d=>{const p=kt(d.getProvider("auth").getImmediate());return new Ln(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(kn,"0.20.2",function tr(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,Ne.registerVersion)(kn,"0.20.2","esm2017")}("Browser");class bn extends Xl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(d)),super.onEvent(d)}initialized(){var d=this;return(0,m.Z)(function*(){yield d.initPromise})()}}function mr(_){return _i.apply(this,arguments)}function _i(){return(_i=(0,m.Z)(function*(_){const d=yield ea()._get(Br(_));return d&&(yield ea()._remove(Br(_))),d})).apply(this,arguments)}function Po(){const _=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const D=Math.floor(Math.random()*d.length);_.push(d.charAt(D))}return _.join("")}function ea(){return fe(ha)}function Br(_){return nr("authEvent",_.config.apiKey,_.name)}function wr(_){if(!(null==_?void 0:_.includes("?")))return{};const[d,...p]=_.split("?");return(0,te.zd)(p.join("?"))}function Bo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}function Mu(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function kf(_=(0,te.z$)()){return!("file:"!==Mu()&&"ionic:"!==Mu()&&"capacitor:"!==Mu()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function cl(){try{const _=self.localStorage,d=fa();if(_)return _.setItem(d,"1"),_.removeItem(d),!function ll(_=(0,te.z$)()){return function ic(){return(0,te.w1)()&&11===(null==document?void 0:document.documentMode)}()||function so(_=(0,te.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,te.hl)()}catch(_){return dl()&&(0,te.hl)()}return!1}function dl(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function $s(){return(function Of(){return"http:"===Mu()||"https:"===Mu()}()||(0,te.ru)()||kf())&&!function di(){return(0,te.b$)()||(0,te.UG)()}()&&cl()&&!dl()}function hl(){return kf()&&"undefined"!=typeof document}function wd(){return(wd=(0,m.Z)(function*(){return!!hl()&&new Promise(_=>{const d=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),_(!0)})})})).apply(this,arguments)}const jo={LOCAL:"local",NONE:"none",SESSION:"session"},sc=we,bd="persistence";function zu(_){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,m.Z)(function*(_){yield _._initializationPromise;const d=Cs(),p=nr(bd,_.config.apiKey,_.name);d&&d.setItem(p,_._getPersistence())})).apply(this,arguments)}function Cs(){var _;try{return(null===(_=function dh(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(d){return null}}const Id=we;class xu{constructor(){this.browserResolver=fe(class ge{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=Ar,this._overrideRedirectResult=L}_openPopup(d,p,D,j){var ne=this;return(0,m.Z)(function*(){var ke;se(null===(ke=ne.eventManagers[d._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const tt=F(d,p,D,vt(),j);return function b(_,d,p,D=500,j=600){const ne=Math.max((window.screen.availHeight-j)/2,0).toString(),ke=Math.max((window.screen.availWidth-D)/2,0).toString();let tt="";const zt=Object.assign(Object.assign({},qa),{width:D.toString(),height:j.toString(),top:ne,left:ke}),un=(0,te.z$)().toLowerCase();p&&(tt=cn(un)?"_blank":p),jr(un)&&(d=d||"http://localhost",zt.scrollbars="yes");const vn=Object.entries(zt).reduce((is,[ta,Ol])=>`${is}${ta}=${Ol},`,"");if(function ls(_=(0,te.z$)()){var d;return fi(_)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(un)&&"_self"!==tt)return function h(_,d){const p=document.createElement("a");p.href=_,p.target=d;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(D)}(d||"",tt),new Au(null);const Nn=window.open(d||"",tt,vn);we(Nn,_,"popup-blocked");try{Nn.focus()}catch(is){}return new Au(Nn)}(d,tt,fa())})()}_openRedirect(d,p,D,j){var ne=this;return(0,m.Z)(function*(){return yield ne._originValidation(d),function eo(_){Yr().location.href=_}(F(d,p,D,vt(),j)),new Promise(()=>{})})()}_initialize(d){const p=d._key();if(this.eventManagers[p]){const{manager:j,promise:ne}=this.eventManagers[p];return j?Promise.resolve(j):(se(ne,"If manager is not set, promise should be"),ne)}const D=this.initAndGetManager(d);return this.eventManagers[p]={promise:D},D.catch(()=>{delete this.eventManagers[p]}),D}initAndGetManager(d){var p=this;return(0,m.Z)(function*(){const D=yield function lu(_){return cu.apply(this,arguments)}(d),j=new Xl(d);return D.register("authEvent",ne=>(we(null==ne?void 0:ne.authEvent,d,"invalid-auth-event"),{status:j.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[d._key()]={manager:j},p.iframes[d._key()]=D,j})()}_isIframeWebStorageSupported(d,p){this.iframes[d._key()].send(ae,{type:ae},j=>{var ne;const ke=null===(ne=null==j?void 0:j[0])||void 0===ne?void 0:ne[ae];void 0!==ke&&p(!!ke),he(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function rs(_){return ec.apply(this,arguments)}(d)),this.originValidationPromises[p]}get _shouldInitProactively(){return ei()||wi()||fi()}}),this.cordovaResolver=fe(class za{constructor(){this._redirectPersistence=Js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ar,this._overrideRedirectResult=L}_initialize(d){var p=this;return(0,m.Z)(function*(){const D=d._key();let j=p.eventManagers.get(D);return j||(j=new bn(d),p.eventManagers.set(D,j),p.attachCallbackListeners(d,j)),j})()}_openPopup(d){he(d,"operation-not-supported-in-this-environment")}_openRedirect(d,p,D,j){var ne=this;return(0,m.Z)(function*(){!function vs(_){var d,p,D,j,ne,ke,tt,zt,un,vn;const Nn=Ci();we("function"==typeof(null===(d=null==Nn?void 0:Nn.universalLinks)||void 0===d?void 0:d.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),we(void 0!==(null===(p=null==Nn?void 0:Nn.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),we("function"==typeof(null===(ne=null===(j=null===(D=null==Nn?void 0:Nn.cordova)||void 0===D?void 0:D.plugins)||void 0===j?void 0:j.browsertab)||void 0===ne?void 0:ne.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(zt=null===(tt=null===(ke=null==Nn?void 0:Nn.cordova)||void 0===ke?void 0:ke.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===zt?void 0:zt.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),we("function"==typeof(null===(vn=null===(un=null==Nn?void 0:Nn.cordova)||void 0===un?void 0:un.InAppBrowser)||void 0===vn?void 0:vn.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const ke=yield ne._initialize(d);yield ke.initialized(),ke.resetRedirect(),function N(){xo.clear()}(),yield ne._originValidation(d);const tt=function On(_,d,p=null){return{type:d,eventId:p,urlResponse:null,sessionId:Po(),postBody:null,tenantId:_.tenantId,error:Xe(_,"no-auth-event")}}(d,D,j);yield function Un(_,d){return ea()._set(Br(_),d)}(d,tt);const zt=yield function Ds(_,d,p){return Yi.apply(this,arguments)}(d,tt,p),un=yield function Ro(_){const{cordova:d}=Ci();return new Promise(p=>{d.plugins.browsertab.isAvailable(D=>{let j=null;D?d.plugins.browsertab.openUrl(_):j=d.InAppBrowser.open(_,function Ss(_=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(j)})})}(zt);return function Sa(_,d,p){return Ma.apply(this,arguments)}(d,ke,un)})()}_isIframeWebStorageSupported(d,p){throw new Error("Method not implemented.")}_originValidation(d){const p=d._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function _o(_){return Ts.apply(this,arguments)}(d)),this.originValidationPromises[p]}attachCallbackListeners(d,p){const{universalLinks:D,handleOpenURL:j,BuildInfo:ne}=Ci(),ke=setTimeout((0,m.Z)(function*(){yield mr(d),p.onEvent(Bo())}),500),tt=function(){var vn=(0,m.Z)(function*(Nn){clearTimeout(ke);const is=yield mr(d);let ta=null;is&&(null==Nn?void 0:Nn.url)&&(ta=function wa(_,d){var p,D;const j=function rc(_){const d=wr(_),p=d.link?decodeURIComponent(d.link):void 0,D=wr(p).link,j=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return wr(j).link||j||D||p||_}(d);if(j.includes("/__/auth/callback")){const ne=wr(j),ke=ne.firebaseError?function Rl(_){try{return JSON.parse(_)}catch(d){return null}}(decodeURIComponent(ne.firebaseError)):null,tt=null===(D=null===(p=null==ke?void 0:ke.code)||void 0===p?void 0:p.split("auth/"))||void 0===D?void 0:D[1],zt=tt?Xe(tt):null;return zt?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:zt,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:j,postBody:null}}return null}(is,Nn.url)),p.onEvent(ta||Bo())});return function(is){return vn.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,tt);const zt=j,un=`${ne.packageName.toLowerCase()}://`;Ci().handleOpenURL=function(){var vn=(0,m.Z)(function*(Nn){if(Nn.toLowerCase().startsWith(un)&&tt({url:Nn}),"function"==typeof zt)try{zt(Nn)}catch(is){console.error(is)}});return function(Nn){return vn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Js,this._completeRedirectFn=Ar,this._overrideRedirectResult=L}_initialize(d){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,p,D,j){var ne=this;return(0,m.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openPopup(d,p,D,j)})()}_openRedirect(d,p,D,j){var ne=this;return(0,m.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openRedirect(d,p,D,j)})()}_isIframeWebStorageSupported(d,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,p)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return hl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Id(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,m.Z)(function*(){if(d.underlyingResolver)return;const p=yield function Nc(){return wd.apply(this,arguments)}();d.underlyingResolver=p?d.cordovaResolver:d.browserResolver})()}}function Wu(_){return _.unwrap()}function Dd(_){return Nl(_)}function Nl(_){const{_tokenResponse:d}=_ instanceof te.ZR?_.customData:_;if(!d)return null;if(!(_ instanceof te.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return Uo.credentialFromResult(_);const p=d.providerId;if(!p||"password"===p)return null;let D;switch(p){case"google.com":D=Zs;break;case"facebook.com":D=Ji;break;case"github.com":D=fs;break;case"twitter.com":D=Z;break;default:const{oauthIdToken:j,oauthAccessToken:ne,oauthTokenSecret:ke,pendingToken:tt,nonce:zt}=d;return ne||ke||j||tt?tt?p.startsWith("saml.")?Di._create(p,tt):Ie._fromParams({providerId:p,signInMethod:p,pendingToken:tt,idToken:j,accessToken:ne}):new Gi(p).credential({idToken:j,accessToken:ne,rawNonce:zt}):null}return _ instanceof te.ZR?D.credentialFromError(_):D.credentialFromResult(_)}function $o(_,d){return d.catch(p=>{throw p instanceof te.ZR&&function oc(_,d){var p;const D=null===(p=d.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new Vf(_,function ur(_,d){var p;const D=(0,te.m9)(_),j=d;return we(d.customData.operationType,D,"argument-error"),we(null===(p=j.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,D,"argument-error"),Co._fromError(D,j)}(_,d));else if(D){const j=Nl(d),ne=d;j&&(ne.credential=j,ne.tenantId=D.tenantId||void 0,ne.email=D.email||void 0,ne.phoneNumber=D.phoneNumber||void 0)}}(_,p),p}).then(p=>{const j=p.user;return{operationType:p.operationType,credential:Dd(p),additionalUserInfo:Xi(p),user:fu.getOrCreate(j)}})}function Oc(_,d){return kc.apply(this,arguments)}function kc(){return(kc=(0,m.Z)(function*(_,d){const p=yield d;return{verificationId:p.verificationId,confirm:D=>$o(_,p.confirm(D))}})).apply(this,arguments)}class Vf{constructor(d,p){this.resolver=p,this.auth=function hu(_){return _.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return $o(Wu(this.auth),this.resolver.resolveSignIn(d))}}class fu{constructor(d){this._delegate=d,this.multiFactor=function La(_){const d=(0,te.m9)(_);return Vi.has(d)||Vi.set(d,Bs._fromUser(d)),Vi.get(d)}(d)}static getOrCreate(d){return fu.USER_MAP.has(d)||fu.USER_MAP.set(d,new fu(d)),fu.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var p=this;return(0,m.Z)(function*(){return $o(p.auth,fn(p._delegate,d))})()}linkWithPhoneNumber(d,p){var D=this;return(0,m.Z)(function*(){return Oc(D.auth,function Qr(_,d,p){return Yo.apply(this,arguments)}(D._delegate,d,p))})()}linkWithPopup(d){var p=this;return(0,m.Z)(function*(){return $o(p.auth,function al(_,d,p){return mo.apply(this,arguments)}(p._delegate,d,xu))})()}linkWithRedirect(d){var p=this;return(0,m.Z)(function*(){return yield zu(kt(p.auth)),function Er(_,d,p){return function Rn(_,d,p){return Ki.apply(this,arguments)}(_,d,p)}(p._delegate,d,xu)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var p=this;return(0,m.Z)(function*(){return $o(p.auth,dr(p._delegate,d))})()}reauthenticateWithPhoneNumber(d,p){return Oc(this.auth,function ru(_,d,p){return ks.apply(this,arguments)}(this._delegate,d,p))}reauthenticateWithPopup(d){return $o(this.auth,function $u(_,d,p){return Jo.apply(this,arguments)}(this._delegate,d,xu))}reauthenticateWithRedirect(d){var p=this;return(0,m.Z)(function*(){return yield zu(kt(p.auth)),function sn(_,d,p){return function dn(_,d,p){return Fn.apply(this,arguments)}(_,d,p)}(p._delegate,d,xu)})()}sendEmailVerification(d){return function gs(_,d){return ua.apply(this,arguments)}(this._delegate,d)}unlink(d){var p=this;return(0,m.Z)(function*(){return yield function Xn(_,d){return Mn.apply(this,arguments)}(p._delegate,d),p})()}updateEmail(d){return function Ya(_,d){return Vs((0,te.m9)(_),d,null)}(this._delegate,d)}updatePassword(d){return function la(_,d){return Vs((0,te.m9)(_),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function po(_,d){return js.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Pa(_,d){return Eu.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,p){return function Za(_,d,p){return ci.apply(this,arguments)}(this._delegate,d,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}fu.USER_MAP=new WeakMap;const Ru=we;let Fc=(()=>{class _{constructor(p,D){if(this.app=p,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=p.options;Ru(j,"invalid-api-key",{appName:p.name}),Ru(j,"invalid-api-key",{appName:p.name});const ne="undefined"!=typeof window?xu:void 0;this._delegate=D.initialize({options:{persistence:fh(j,p.name),popupRedirectResolver:ne}}),this._delegate._updateErrorMap(lt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?fu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,D){!function xr(_,d,p){const D=kt(_);we(D._canInitEmulator,D,"emulator-config-failed"),we(/^https?:\/\//.test(d),D,"invalid-emulator-scheme");const j=!!(null==p?void 0:p.disableWarnings),ne=bi(d),{host:ke,port:tt}=function $n(_){const d=bi(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!p)return{host:"",port:null};const D=p[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(D);if(j){const ne=j[1];return{host:ne,port:gi(D.substr(ne.length+1))}}{const[ne,ke]=D.split(":");return{host:ne,port:gi(ke)}}}(d);D.config.emulator={url:`${ne}//${ke}${null===tt?"":`:${tt}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:ke,port:tt,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function rr(){function _(){const d=document.createElement("p"),p=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,D)}applyActionCode(p){return function X(_,d){return Ee.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Et(this._delegate,p)}confirmPasswordReset(p,D){return function P(_,d,p){return R.apply(this,arguments)}(this._delegate,p,D)}createUserWithEmailAndPassword(p,D){var j=this;return(0,m.Z)(function*(){return $o(j._delegate,function ws(_,d,p){return Wi.apply(this,arguments)}(j._delegate,p,D))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Da(_,d){return ko.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Bu(_,d){const p=Rs.parseLink(d);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Ru($s(),p._delegate,"operation-not-supported-in-this-environment");const D=yield function lr(_,d){return Xo.apply(this,arguments)}(p._delegate,xu);return D?$o(p._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function ch(_,d){kt(_)._logFramework(d)}(this._delegate,p)}onAuthStateChanged(p,D,j){const{next:ne,error:ke,complete:tt}=hh(p,D,j);return this._delegate.onAuthStateChanged(ne,ke,tt)}onIdTokenChanged(p,D,j){const{next:ne,error:ke,complete:tt}=hh(p,D,j);return this._delegate.onIdTokenChanged(ne,ke,tt)}sendSignInLinkToEmail(p,D){return function aa(_,d,p){return Uu.apply(this,arguments)}(this._delegate,p,D)}sendPasswordResetEmail(p,D){return function qo(_,d,p){return V.apply(this,arguments)}(this._delegate,p,D||void 0)}setPersistence(p){var D=this;return(0,m.Z)(function*(){let j;switch(function Ff(_,d){sc(Object.values(jo).includes(d),_,"invalid-persistence-type"),(0,te.b$)()?sc(d!==jo.SESSION,_,"unsupported-persistence-type"):(0,te.UG)()?sc(d===jo.NONE,_,"unsupported-persistence-type"):dl()?sc(d===jo.NONE||d===jo.LOCAL&&(0,te.hl)(),_,"unsupported-persistence-type"):sc(d===jo.NONE||cl(),_,"unsupported-persistence-type")}(D._delegate,p),p){case jo.SESSION:j=Js;break;case jo.LOCAL:j=(yield fe(an)._isAvailable())?an:ha;break;case jo.NONE:j=hn;break;default:return he("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return $o(this._delegate,function rt(_){return Rt.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return $o(this._delegate,rn(this._delegate,p))}signInWithCustomToken(p){return $o(this._delegate,function ps(_,d){return An.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,D){return $o(this._delegate,function Ys(_,d,p){return rn((0,te.m9)(_),Ws.credential(d,p))}(this._delegate,p,D))}signInWithEmailLink(p,D){return $o(this._delegate,function Il(_,d,p){return ho.apply(this,arguments)}(this._delegate,p,D))}signInWithPhoneNumber(p,D){return Oc(this._delegate,function Ui(_,d,p){return Mo.apply(this,arguments)}(this._delegate,p,D))}signInWithPopup(p){var D=this;return(0,m.Z)(function*(){return Ru($s(),D._delegate,"operation-not-supported-in-this-environment"),$o(D._delegate,function Jl(_,d,p){return ro.apply(this,arguments)}(D._delegate,p,xu))})()}signInWithRedirect(p){var D=this;return(0,m.Z)(function*(){return Ru($s(),D._delegate,"operation-not-supported-in-this-environment"),yield zu(D._delegate),function Ue(_,d,p){return function Ye(_,d,p){return Dt.apply(this,arguments)}(_,d,p)}(D._delegate,p,xu)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function sr(_,d){return zi.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=jo,_})();function hh(_,d,p){let D=_;"function"!=typeof _&&({next:D,error:d,complete:p}=_);const j=D;return{next:ke=>j(ke&&fu.getOrCreate(ke)),error:d,complete:p}}function fh(_,d){const p=function Lf(_,d){const p=Cs();if(!p)return[];const D=nr(bd,_,d);switch(p.getItem(D)){case jo.NONE:return[hn];case jo.LOCAL:return[an,Js];case jo.SESSION:return[Js];default:return[]}}(_,d);if("undefined"!=typeof self&&!p.includes(an)&&p.push(an),"undefined"!=typeof window)for(const D of[ha,Js])p.includes(D)||p.push(D);return p.includes(hn)||p.push(hn),p}class Lc{constructor(){this.providerId="phone",this._delegate=new Uo(Wu(y.Z.auth()))}static credential(d,p){return Uo.credential(d,p)}verifyPhoneNumber(d,p){return this._delegate.verifyPhoneNumber(d,p)}unwrap(){return this._delegate}}Lc.PHONE_SIGN_IN_METHOD=Uo.PHONE_SIGN_IN_METHOD,Lc.PROVIDER_ID=Uo.PROVIDER_ID;const ph=we;class Uf{constructor(d,p,D=y.Z.app()){var j;ph(null===(j=D.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new bu(d,p,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Pl(_){_.INTERNAL.registerComponent(new Le.wA("auth-compat",d=>{const p=d.getProvider("app-compat").getImmediate(),D=d.getProvider("auth");return new Fc(p,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ws,FacebookAuthProvider:Ji,GithubAuthProvider:fs,GoogleAuthProvider:Zs,OAuthProvider:Gi,SAMLAuthProvider:ui,PhoneAuthProvider:Lc,PhoneMultiFactorGenerator:gn,RecaptchaVerifier:Uf,TwitterAuthProvider:Z,Auth:Fc,AuthCredential:ti,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.15")}(y.Z)},8306:(Ot,$e,B)=>{B.d($e,{y:()=>le});var m=B(2961),y=B(727),te=B(8822),Ne=B(4671);var Le=B(2416),Ae=B(576),_e=B(2806);let le=(()=>{class Be{constructor(wt){wt&&(this._subscribe=wt)}lift(wt){const Ze=new Be;return Ze.source=this,Ze.operator=wt,Ze}subscribe(wt,Ze,at){const At=function mt(Be){return Be&&Be instanceof m.Lv||function be(Be){return Be&&(0,Ae.m)(Be.next)&&(0,Ae.m)(Be.error)&&(0,Ae.m)(Be.complete)}(Be)&&(0,y.Nn)(Be)}(wt)?wt:new m.Hp(wt,Ze,at);return(0,_e.x)(()=>{const{operator:Nt,source:he}=this;At.add(Nt?Nt.call(At,he):he?this._subscribe(At):this._trySubscribe(At))}),At}_trySubscribe(wt){try{return this._subscribe(wt)}catch(Ze){wt.error(Ze)}}forEach(wt,Ze){return new(Ze=ie(Ze))((at,At)=>{const Nt=new m.Hp({next:he=>{try{wt(he)}catch(Xe){At(Xe),Nt.unsubscribe()}},error:At,complete:at});this.subscribe(Nt)})}_subscribe(wt){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(wt)}[te.L](){return this}pipe(...wt){return function Te(Be){return 0===Be.length?Ne.y:1===Be.length?Be[0]:function(wt){return Be.reduce((Ze,at)=>at(Ze),wt)}}(wt)(this)}toPromise(wt){return new(wt=ie(wt))((Ze,at)=>{let At;this.subscribe(Nt=>At=Nt,Nt=>at(Nt),()=>Ze(At))})}}return Be.create=lt=>new Be(lt),Be})();function ie(Be){var lt;return null!==(lt=null!=Be?Be:Le.v.Promise)&&void 0!==lt?lt:Promise}},7579:(Ot,$e,B)=>{B.d($e,{x:()=>Le});var m=B(8306),y=B(727);const Ne=(0,B(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=B(8737),Te=B(2806);let Le=(()=>{class _e extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ie){const be=new Ae(this,this);return be.operator=ie,be}_throwIfClosed(){if(this.closed)throw new Ne}next(ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const be of this.currentObservers)be.next(ie)}})}error(ie){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ie;const{observers:be}=this;for(;be.length;)be.shift().error(ie)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ie}=this;for(;ie.length;)ie.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ie;return(null===(ie=this.observers)||void 0===ie?void 0:ie.length)>0}_trySubscribe(ie){return this._throwIfClosed(),super._trySubscribe(ie)}_subscribe(ie){return this._throwIfClosed(),this._checkFinalizedStatuses(ie),this._innerSubscribe(ie)}_innerSubscribe(ie){const{hasError:be,isStopped:mt,observers:Be}=this;return be||mt?y.Lc:(this.currentObservers=null,Be.push(ie),new y.w0(()=>{this.currentObservers=null,(0,Me.P)(Be,ie)}))}_checkFinalizedStatuses(ie){const{hasError:be,thrownError:mt,isStopped:Be}=this;be?ie.error(mt):Be&&ie.complete()}asObservable(){const ie=new m.y;return ie.source=this,ie}}return _e.create=(le,ie)=>new Ae(le,ie),_e})();class Ae extends Le{constructor(le,ie){super(),this.destination=le,this.source=ie}next(le){var ie,be;null===(be=null===(ie=this.destination)||void 0===ie?void 0:ie.next)||void 0===be||be.call(ie,le)}error(le){var ie,be;null===(be=null===(ie=this.destination)||void 0===ie?void 0:ie.error)||void 0===be||be.call(ie,le)}complete(){var le,ie;null===(ie=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ie||ie.call(le)}_subscribe(le){var ie,be;return null!==(be=null===(ie=this.source)||void 0===ie?void 0:ie.subscribe(le))&&void 0!==be?be:y.Lc}}},2961:(Ot,$e,B)=>{B.d($e,{Hp:()=>wt,Lv:()=>be});var m=B(576),y=B(727),te=B(2416),Ne=B(7849);function Me(){}const Te=_e("C",void 0,void 0);function _e(he,Xe,ut){return{kind:he,value:Xe,error:ut}}var le=B(3410),ie=B(2806);class be extends y.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,y.Nn)(Xe)&&Xe.add(this)):this.destination=Nt}static create(Xe,ut,We){return new wt(Xe,ut,We)}next(Xe){this.isStopped?At(function Ae(he){return _e("N",he,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?At(function Le(he){return _e("E",void 0,he)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?At(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Be(he,Xe){return mt.call(he,Xe)}class lt{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:ut}=this;if(ut.next)try{ut.next(Xe)}catch(We){Ze(We)}}error(Xe){const{partialObserver:ut}=this;if(ut.error)try{ut.error(Xe)}catch(We){Ze(We)}else Ze(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(ut){Ze(ut)}}}class wt extends be{constructor(Xe,ut,We){let st;if(super(),(0,m.m)(Xe)||!Xe)st={next:null!=Xe?Xe:void 0,error:null!=ut?ut:void 0,complete:null!=We?We:void 0};else{let we;this&&te.v.useDeprecatedNextContext?(we=Object.create(Xe),we.unsubscribe=()=>this.unsubscribe(),st={next:Xe.next&&Be(Xe.next,we),error:Xe.error&&Be(Xe.error,we),complete:Xe.complete&&Be(Xe.complete,we)}):st=Xe}this.destination=new lt(st)}}function Ze(he){te.v.useDeprecatedSynchronousErrorHandling?(0,ie.O)(he):(0,Ne.h)(he)}function At(he,Xe){const{onStoppedNotification:ut}=te.v;ut&&le.z.setTimeout(()=>ut(he,Xe))}const Nt={closed:!0,next:Me,error:function at(he){throw he},complete:Me}},727:(Ot,$e,B)=>{B.d($e,{Lc:()=>Te,w0:()=>Me,Nn:()=>Le});var m=B(576);const te=(0,B(3888).d)(_e=>function(ie){_e(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((be,mt)=>`${mt+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie});var Ne=B(8737);class Me{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ie}=this;if(ie)if(this._parentage=null,Array.isArray(ie))for(const Be of ie)Be.remove(this);else ie.remove(this);const{initialTeardown:be}=this;if((0,m.m)(be))try{be()}catch(Be){le=Be instanceof te?Be.errors:[Be]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const Be of mt)try{Ae(Be)}catch(lt){le=null!=le?le:[],lt instanceof te?le=[...le,...lt.errors]:le.push(lt)}}if(le)throw new te(le)}}add(le){var ie;if(le&&le!==this)if(this.closed)Ae(le);else{if(le instanceof Me){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ie=this._finalizers)&&void 0!==ie?ie:[]).push(le)}}_hasParent(le){const{_parentage:ie}=this;return ie===le||Array.isArray(ie)&&ie.includes(le)}_addParent(le){const{_parentage:ie}=this;this._parentage=Array.isArray(ie)?(ie.push(le),ie):ie?[ie,le]:le}_removeParent(le){const{_parentage:ie}=this;ie===le?this._parentage=null:Array.isArray(ie)&&(0,Ne.P)(ie,le)}remove(le){const{_finalizers:ie}=this;ie&&(0,Ne.P)(ie,le),le instanceof Me&&le._removeParent(this)}}Me.EMPTY=(()=>{const _e=new Me;return _e.closed=!0,_e})();const Te=Me.EMPTY;function Le(_e){return _e instanceof Me||_e&&"closed"in _e&&(0,m.m)(_e.remove)&&(0,m.m)(_e.add)&&(0,m.m)(_e.unsubscribe)}function Ae(_e){(0,m.m)(_e)?_e():_e.unsubscribe()}},2416:(Ot,$e,B)=>{B.d($e,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Ot,$e,B)=>{B.d($e,{z:()=>Me});var m=B(8189),te=B(7669),Ne=B(8996);function Me(...Te){return function y(){return(0,m.J)(1)}()((0,Ne.D)(Te,(0,te.yG)(Te)))}},515:(Ot,$e,B)=>{B.d($e,{E:()=>y});const y=new(B(8306).y)(Me=>Me.complete())},8996:(Ot,$e,B)=>{B.d($e,{D:()=>Xe});var m=B(8421),y=B(5363),te=B(9468),Te=B(8306),Ae=B(2202),_e=B(576),le=B(9672);function be(ut,We){if(!ut)throw new Error("Iterable cannot be null");return new Te.y(st=>{(0,le.f)(st,We,()=>{const we=ut[Symbol.asyncIterator]();(0,le.f)(st,We,()=>{we.next().then(Qe=>{Qe.done?st.complete():st.next(Qe.value)})},0,!0)})})}var mt=B(3670),Be=B(8239),lt=B(1144),wt=B(6495),Ze=B(2206),at=B(4532),At=B(3260);function Xe(ut,We){return We?function he(ut,We){if(null!=ut){if((0,mt.c)(ut))return function Ne(ut,We){return(0,m.Xf)(ut).pipe((0,te.R)(We),(0,y.Q)(We))}(ut,We);if((0,lt.z)(ut))return function Le(ut,We){return new Te.y(st=>{let we=0;return We.schedule(function(){we===ut.length?st.complete():(st.next(ut[we++]),st.closed||this.schedule())})})}(ut,We);if((0,Be.t)(ut))return function Me(ut,We){return(0,m.Xf)(ut).pipe((0,te.R)(We),(0,y.Q)(We))}(ut,We);if((0,Ze.D)(ut))return be(ut,We);if((0,wt.T)(ut))return function ie(ut,We){return new Te.y(st=>{let we;return(0,le.f)(st,We,()=>{we=ut[Ae.h](),(0,le.f)(st,We,()=>{let Qe,se;try{({value:Qe,done:se}=we.next())}catch(Re){return void st.error(Re)}se?st.complete():st.next(Qe)},0,!0)}),()=>(0,_e.m)(null==we?void 0:we.return)&&we.return()})}(ut,We);if((0,At.L)(ut))return function Nt(ut,We){return be((0,At.Q)(ut),We)}(ut,We)}throw(0,at.z)(ut)}(ut,We):(0,m.Xf)(ut)}},8421:(Ot,$e,B)=>{B.d($e,{Xf:()=>mt});var m=B(655),y=B(1144),te=B(8239),Ne=B(8306),Me=B(3670),Te=B(2206),Le=B(4532),Ae=B(6495),_e=B(3260),le=B(576),ie=B(7849),be=B(8822);function mt(he){if(he instanceof Ne.y)return he;if(null!=he){if((0,Me.c)(he))return function Be(he){return new Ne.y(Xe=>{const ut=he[be.L]();if((0,le.m)(ut.subscribe))return ut.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,y.z)(he))return function lt(he){return new Ne.y(Xe=>{for(let ut=0;ut<he.length&&!Xe.closed;ut++)Xe.next(he[ut]);Xe.complete()})}(he);if((0,te.t)(he))return function wt(he){return new Ne.y(Xe=>{he.then(ut=>{Xe.closed||(Xe.next(ut),Xe.complete())},ut=>Xe.error(ut)).then(null,ie.h)})}(he);if((0,Te.D)(he))return at(he);if((0,Ae.T)(he))return function Ze(he){return new Ne.y(Xe=>{for(const ut of he)if(Xe.next(ut),Xe.closed)return;Xe.complete()})}(he);if((0,_e.L)(he))return function At(he){return at((0,_e.Q)(he))}(he)}throw(0,Le.z)(he)}function at(he){return new Ne.y(Xe=>{(function Nt(he,Xe){var ut,We,st,we;return(0,m.mG)(this,void 0,void 0,function*(){try{for(ut=(0,m.KL)(he);!(We=yield ut.next()).done;)if(Xe.next(We.value),Xe.closed)return}catch(Qe){st={error:Qe}}finally{try{We&&!We.done&&(we=ut.return)&&(yield we.call(ut))}finally{if(st)throw st.error}}Xe.complete()})})(he,Xe).catch(ut=>Xe.error(ut))})}},6451:(Ot,$e,B)=>{B.d($e,{T:()=>Te});var m=B(8189),y=B(8421),te=B(515),Ne=B(7669),Me=B(8996);function Te(...Le){const Ae=(0,Ne.yG)(Le),_e=(0,Ne._6)(Le,1/0),le=Le;return le.length?1===le.length?(0,y.Xf)(le[0]):(0,m.J)(_e)((0,Me.D)(le,Ae)):te.E}},9646:(Ot,$e,B)=>{B.d($e,{of:()=>te});var m=B(7669),y=B(8996);function te(...Ne){const Me=(0,m.yG)(Ne);return(0,y.D)(Ne,Me)}},5403:(Ot,$e,B)=>{B.d($e,{x:()=>y});var m=B(2961);function y(Ne,Me,Te,Le,Ae){return new te(Ne,Me,Te,Le,Ae)}class te extends m.Lv{constructor(Me,Te,Le,Ae,_e,le){super(Me),this.onFinalize=_e,this.shouldUnsubscribe=le,this._next=Te?function(ie){try{Te(ie)}catch(be){Me.error(be)}}:super._next,this._error=Ae?function(ie){try{Ae(ie)}catch(be){Me.error(be)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(ie){Me.error(ie)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Me;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(Me=this.onFinalize)||void 0===Me||Me.call(this))}}}},6590:(Ot,$e,B)=>{B.d($e,{d:()=>te});var m=B(4482),y=B(5403);function te(Ne){return(0,m.e)((Me,Te)=>{let Le=!1;Me.subscribe((0,y.x)(Te,Ae=>{Le=!0,Te.next(Ae)},()=>{Le||Te.next(Ne),Te.complete()}))})}},9300:(Ot,$e,B)=>{B.d($e,{h:()=>te});var m=B(4482),y=B(5403);function te(Ne,Me){return(0,m.e)((Te,Le)=>{let Ae=0;Te.subscribe((0,y.x)(Le,_e=>Ne.call(Me,_e,Ae++)&&Le.next(_e)))})}},590:(Ot,$e,B)=>{B.d($e,{P:()=>Le});var m=B(6805),y=B(9300),te=B(5698),Ne=B(6590),Me=B(8068),Te=B(4671);function Le(Ae,_e){const le=arguments.length>=2;return ie=>ie.pipe(Ae?(0,y.h)((be,mt)=>Ae(be,mt,ie)):Te.y,(0,te.q)(1),le?(0,Ne.d)(_e):(0,Me.T)(()=>new m.K))}},4004:(Ot,$e,B)=>{B.d($e,{U:()=>te});var m=B(4482),y=B(5403);function te(Ne,Me){return(0,m.e)((Te,Le)=>{let Ae=0;Te.subscribe((0,y.x)(Le,_e=>{Le.next(Ne.call(Me,_e,Ae++))}))})}},8189:(Ot,$e,B)=>{B.d($e,{J:()=>te});var m=B(5577),y=B(4671);function te(Ne=1/0){return(0,m.z)(y.y,Ne)}},5577:(Ot,$e,B)=>{B.d($e,{z:()=>Ae});var m=B(4004),y=B(8421),te=B(4482),Ne=B(9672),Me=B(5403),Le=B(576);function Ae(_e,le,ie=1/0){return(0,Le.m)(le)?Ae((be,mt)=>(0,m.U)((Be,lt)=>le(be,Be,mt,lt))((0,y.Xf)(_e(be,mt))),ie):("number"==typeof le&&(ie=le),(0,te.e)((be,mt)=>function Te(_e,le,ie,be,mt,Be,lt,wt){const Ze=[];let at=0,At=0,Nt=!1;const he=()=>{Nt&&!Ze.length&&!at&&le.complete()},Xe=We=>at<be?ut(We):Ze.push(We),ut=We=>{Be&&le.next(We),at++;let st=!1;(0,y.Xf)(ie(We,At++)).subscribe((0,Me.x)(le,we=>{null==mt||mt(we),Be?Xe(we):le.next(we)},()=>{st=!0},void 0,()=>{if(st)try{for(at--;Ze.length&&at<be;){const we=Ze.shift();lt?(0,Ne.f)(le,lt,()=>ut(we)):ut(we)}he()}catch(we){le.error(we)}}))};return _e.subscribe((0,Me.x)(le,Xe,()=>{Nt=!0,he()})),()=>{null==wt||wt()}}(be,mt,_e,ie)))}},5363:(Ot,$e,B)=>{B.d($e,{Q:()=>Ne});var m=B(9672),y=B(4482),te=B(5403);function Ne(Me,Te=0){return(0,y.e)((Le,Ae)=>{Le.subscribe((0,te.x)(Ae,_e=>(0,m.f)(Ae,Me,()=>Ae.next(_e),Te),()=>(0,m.f)(Ae,Me,()=>Ae.complete(),Te),_e=>(0,m.f)(Ae,Me,()=>Ae.error(_e),Te)))})}},5026:(Ot,$e,B)=>{B.d($e,{R:()=>Ne});var m=B(4482),y=B(5403);function te(Me,Te,Le,Ae,_e){return(le,ie)=>{let be=Le,mt=Te,Be=0;le.subscribe((0,y.x)(ie,lt=>{const wt=Be++;mt=be?Me(mt,lt,wt):(be=!0,lt),Ae&&ie.next(mt)},_e&&(()=>{be&&ie.next(mt),ie.complete()})))}}function Ne(Me,Te){return(0,m.e)(te(Me,Te,arguments.length>=2,!0))}},3099:(Ot,$e,B)=>{B.d($e,{B:()=>Te});var m=B(8996),y=B(5698),te=B(7579),Ne=B(2961),Me=B(4482);function Te(Ae={}){const{connector:_e=(()=>new te.x),resetOnError:le=!0,resetOnComplete:ie=!0,resetOnRefCountZero:be=!0}=Ae;return mt=>{let Be=null,lt=null,wt=null,Ze=0,at=!1,At=!1;const Nt=()=>{null==lt||lt.unsubscribe(),lt=null},he=()=>{Nt(),Be=wt=null,at=At=!1},Xe=()=>{const ut=Be;he(),null==ut||ut.unsubscribe()};return(0,Me.e)((ut,We)=>{Ze++,!At&&!at&&Nt();const st=wt=null!=wt?wt:_e();We.add(()=>{Ze--,0===Ze&&!At&&!at&&(lt=Le(Xe,be))}),st.subscribe(We),Be||(Be=new Ne.Hp({next:we=>st.next(we),error:we=>{At=!0,Nt(),lt=Le(he,le,we),st.error(we)},complete:()=>{at=!0,Nt(),lt=Le(he,ie),st.complete()}}),(0,m.D)(ut).subscribe(Be))})(mt)}}function Le(Ae,_e,...le){return!0===_e?(Ae(),null):!1===_e?null:_e(...le).pipe((0,y.q)(1)).subscribe(()=>Ae())}},8675:(Ot,$e,B)=>{B.d($e,{O:()=>Ne});var m=B(7272),y=B(7669),te=B(4482);function Ne(...Me){const Te=(0,y.yG)(Me);return(0,te.e)((Le,Ae)=>{(Te?(0,m.z)(Me,Le,Te):(0,m.z)(Me,Le)).subscribe(Ae)})}},9468:(Ot,$e,B)=>{B.d($e,{R:()=>y});var m=B(4482);function y(te,Ne=0){return(0,m.e)((Me,Te)=>{Te.add(te.schedule(()=>Me.subscribe(Te),Ne))})}},3900:(Ot,$e,B)=>{B.d($e,{w:()=>Ne});var m=B(8421),y=B(4482),te=B(5403);function Ne(Me,Te){return(0,y.e)((Le,Ae)=>{let _e=null,le=0,ie=!1;const be=()=>ie&&!_e&&Ae.complete();Le.subscribe((0,te.x)(Ae,mt=>{null==_e||_e.unsubscribe();let Be=0;const lt=le++;(0,m.Xf)(Me(mt,lt)).subscribe(_e=(0,te.x)(Ae,wt=>Ae.next(Te?Te(mt,wt,lt,Be++):wt),()=>{_e=null,be()}))},()=>{ie=!0,be()}))})}},5698:(Ot,$e,B)=>{B.d($e,{q:()=>Ne});var m=B(515),y=B(4482),te=B(5403);function Ne(Me){return Me<=0?()=>m.E:(0,y.e)((Te,Le)=>{let Ae=0;Te.subscribe((0,te.x)(Le,_e=>{++Ae<=Me&&(Le.next(_e),Me<=Ae&&Le.complete())}))})}},8505:(Ot,$e,B)=>{B.d($e,{b:()=>Me});var m=B(576),y=B(4482),te=B(5403),Ne=B(4671);function Me(Te,Le,Ae){const _e=(0,m.m)(Te)||Le||Ae?{next:Te,error:Le,complete:Ae}:Te;return _e?(0,y.e)((le,ie)=>{var be;null===(be=_e.subscribe)||void 0===be||be.call(_e);let mt=!0;le.subscribe((0,te.x)(ie,Be=>{var lt;null===(lt=_e.next)||void 0===lt||lt.call(_e,Be),ie.next(Be)},()=>{var Be;mt=!1,null===(Be=_e.complete)||void 0===Be||Be.call(_e),ie.complete()},Be=>{var lt;mt=!1,null===(lt=_e.error)||void 0===lt||lt.call(_e,Be),ie.error(Be)},()=>{var Be,lt;mt&&(null===(Be=_e.unsubscribe)||void 0===Be||Be.call(_e)),null===(lt=_e.finalize)||void 0===lt||lt.call(_e)}))}):Ne.y}},8068:(Ot,$e,B)=>{B.d($e,{T:()=>Ne});var m=B(6805),y=B(4482),te=B(5403);function Ne(Te=Me){return(0,y.e)((Le,Ae)=>{let _e=!1;Le.subscribe((0,te.x)(Ae,le=>{_e=!0,Ae.next(le)},()=>_e?Ae.complete():Ae.error(Te())))})}function Me(){return new m.K}},4408:(Ot,$e,B)=>{B.d($e,{o:()=>Me});var m=B(727);class y extends m.w0{constructor(Le,Ae){super()}schedule(Le,Ae=0){return this}}const te={setInterval(Te,Le,...Ae){const{delegate:_e}=te;return(null==_e?void 0:_e.setInterval)?_e.setInterval(Te,Le,...Ae):setInterval(Te,Le,...Ae)},clearInterval(Te){const{delegate:Le}=te;return((null==Le?void 0:Le.clearInterval)||clearInterval)(Te)},delegate:void 0};var Ne=B(8737);class Me extends y{constructor(Le,Ae){super(Le,Ae),this.scheduler=Le,this.work=Ae,this.pending=!1}schedule(Le,Ae=0){if(this.closed)return this;this.state=Le;const _e=this.id,le=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(le,_e,Ae)),this.pending=!0,this.delay=Ae,this.id=this.id||this.requestAsyncId(le,this.id,Ae),this}requestAsyncId(Le,Ae,_e=0){return te.setInterval(Le.flush.bind(Le,this),_e)}recycleAsyncId(Le,Ae,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ae;te.clearInterval(Ae)}execute(Le,Ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(Le,Ae);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,Ae){let le,_e=!1;try{this.work(Le)}catch(ie){_e=!0,le=ie||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Le,scheduler:Ae}=this,{actions:_e}=Ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ne.P)(_e,this),null!=Le&&(this.id=this.recycleAsyncId(Ae,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ot,$e,B)=>{B.d($e,{v:()=>te});var m=B(6063);class y{constructor(Me,Te=y.now){this.schedulerActionCtor=Me,this.now=Te}schedule(Me,Te=0,Le){return new this.schedulerActionCtor(this,Me).schedule(Le,Te)}}y.now=m.l.now;class te extends y{constructor(Me,Te=y.now){super(Me,Te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Me){const{actions:Te}=this;if(this._active)return void Te.push(Me);let Le;this._active=!0;do{if(Le=Me.execute(Me.state,Me.delay))break}while(Me=Te.shift());if(this._active=!1,Le){for(;Me=Te.shift();)Me.unsubscribe();throw Le}}}},4986:(Ot,$e,B)=>{B.d($e,{z:()=>te});var m=B(4408);const te=new(B(7565).v)(m.o)},6063:(Ot,$e,B)=>{B.d($e,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(Ot,$e,B)=>{B.d($e,{z:()=>m});const m={setTimeout(y,te,...Ne){const{delegate:Me}=m;return(null==Me?void 0:Me.setTimeout)?Me.setTimeout(y,te,...Ne):setTimeout(y,te,...Ne)},clearTimeout(y){const{delegate:te}=m;return((null==te?void 0:te.clearTimeout)||clearTimeout)(y)},delegate:void 0}},2202:(Ot,$e,B)=>{B.d($e,{h:()=>y});const y=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ot,$e,B)=>{B.d($e,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ot,$e,B)=>{B.d($e,{K:()=>y});const y=(0,B(3888).d)(te=>function(){te(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Ot,$e,B)=>{B.d($e,{_6:()=>Te,jO:()=>Ne,yG:()=>Me});var m=B(576);function te(Le){return Le[Le.length-1]}function Ne(Le){return(0,m.m)(te(Le))?Le.pop():void 0}function Me(Le){return function y(Le){return Le&&(0,m.m)(Le.schedule)}(te(Le))?Le.pop():void 0}function Te(Le,Ae){return"number"==typeof te(Le)?Le.pop():Ae}},4742:(Ot,$e,B)=>{B.d($e,{D:()=>Me});const{isArray:m}=Array,{getPrototypeOf:y,prototype:te,keys:Ne}=Object;function Me(Le){if(1===Le.length){const Ae=Le[0];if(m(Ae))return{args:Ae,keys:null};if(function Te(Le){return Le&&"object"==typeof Le&&y(Le)===te}(Ae)){const _e=Ne(Ae);return{args:_e.map(le=>Ae[le]),keys:_e}}}return{args:Le,keys:null}}},8737:(Ot,$e,B)=>{function m(y,te){if(y){const Ne=y.indexOf(te);0<=Ne&&y.splice(Ne,1)}}B.d($e,{P:()=>m})},3888:(Ot,$e,B)=>{function m(y){const Ne=y(Me=>{Error.call(Me),Me.stack=(new Error).stack});return Ne.prototype=Object.create(Error.prototype),Ne.prototype.constructor=Ne,Ne}B.d($e,{d:()=>m})},1810:(Ot,$e,B)=>{function m(y,te){return y.reduce((Ne,Me,Te)=>(Ne[Me]=te[Te],Ne),{})}B.d($e,{n:()=>m})},2806:(Ot,$e,B)=>{B.d($e,{O:()=>Ne,x:()=>te});var m=B(2416);let y=null;function te(Me){if(m.v.useDeprecatedSynchronousErrorHandling){const Te=!y;if(Te&&(y={errorThrown:!1,error:null}),Me(),Te){const{errorThrown:Le,error:Ae}=y;if(y=null,Le)throw Ae}}else Me()}function Ne(Me){m.v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=Me)}},9672:(Ot,$e,B)=>{function m(y,te,Ne,Me=0,Te=!1){const Le=te.schedule(function(){Ne(),Te?y.add(this.schedule(null,Me)):this.unsubscribe()},Me);if(y.add(Le),!Te)return Le}B.d($e,{f:()=>m})},4671:(Ot,$e,B)=>{function m(y){return y}B.d($e,{y:()=>m})},1144:(Ot,$e,B)=>{B.d($e,{z:()=>m});const m=y=>y&&"number"==typeof y.length&&"function"!=typeof y},2206:(Ot,$e,B)=>{B.d($e,{D:()=>y});var m=B(576);function y(te){return Symbol.asyncIterator&&(0,m.m)(null==te?void 0:te[Symbol.asyncIterator])}},576:(Ot,$e,B)=>{function m(y){return"function"==typeof y}B.d($e,{m:()=>m})},3670:(Ot,$e,B)=>{B.d($e,{c:()=>te});var m=B(8822),y=B(576);function te(Ne){return(0,y.m)(Ne[m.L])}},6495:(Ot,$e,B)=>{B.d($e,{T:()=>te});var m=B(2202),y=B(576);function te(Ne){return(0,y.m)(null==Ne?void 0:Ne[m.h])}},8239:(Ot,$e,B)=>{B.d($e,{t:()=>y});var m=B(576);function y(te){return(0,m.m)(null==te?void 0:te.then)}},3260:(Ot,$e,B)=>{B.d($e,{L:()=>Ne,Q:()=>te});var m=B(655),y=B(576);function te(Me){return(0,m.FC)(this,arguments,function*(){const Le=Me.getReader();try{for(;;){const{value:Ae,done:_e}=yield(0,m.qq)(Le.read());if(_e)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(Ae)}}finally{Le.releaseLock()}})}function Ne(Me){return(0,y.m)(null==Me?void 0:Me.getReader)}},4482:(Ot,$e,B)=>{B.d($e,{A:()=>y,e:()=>te});var m=B(576);function y(Ne){return(0,m.m)(null==Ne?void 0:Ne.lift)}function te(Ne){return Me=>{if(y(Me))return Me.lift(function(Te){try{return Ne(Te,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ot,$e,B)=>{B.d($e,{Z:()=>Ne});var m=B(4004);const{isArray:y}=Array;function Ne(Me){return(0,m.U)(Te=>function te(Me,Te){return y(Te)?Me(...Te):Me(Te)}(Me,Te))}},7849:(Ot,$e,B)=>{B.d($e,{h:()=>te});var m=B(2416),y=B(3410);function te(Ne){y.z.setTimeout(()=>{const{onUnhandledError:Me}=m.v;if(!Me)throw Ne;Me(Ne)})}},4532:(Ot,$e,B)=>{function m(y){return new TypeError(`You provided ${null!==y&&"object"==typeof y?"an invalid object":`'${y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d($e,{z:()=>m})},655:(Ot,$e,B)=>{function Ne(se,Re){var fe={};for(var ze in se)Object.prototype.hasOwnProperty.call(se,ze)&&Re.indexOf(ze)<0&&(fe[ze]=se[ze]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ze=Object.getOwnPropertySymbols(se);He<ze.length;He++)Re.indexOf(ze[He])<0&&Object.prototype.propertyIsEnumerable.call(se,ze[He])&&(fe[ze[He]]=se[ze[He]])}return fe}function Ae(se,Re,fe,ze){return new(fe||(fe=Promise))(function(vt,St){function Xt(pn){try{ht(ze.next(pn))}catch(nn){St(nn)}}function Yt(pn){try{ht(ze.throw(pn))}catch(nn){St(nn)}}function ht(pn){pn.done?vt(pn.value):function He(vt){return vt instanceof fe?vt:new fe(function(St){St(vt)})}(pn.value).then(Xt,Yt)}ht((ze=ze.apply(se,Re||[])).next())})}function Ze(se){return this instanceof Ze?(this.v=se,this):new Ze(se)}function at(se,Re,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ze=fe.apply(se,Re||[]),vt=[];return He={},St("next"),St("throw"),St("return"),He[Symbol.asyncIterator]=function(){return this},He;function St(yt){ze[yt]&&(He[yt]=function(je){return new Promise(function(gt,Mt){vt.push([yt,je,gt,Mt])>1||Xt(yt,je)})})}function Xt(yt,je){try{!function Yt(yt){yt.value instanceof Ze?Promise.resolve(yt.value.v).then(ht,pn):nn(vt[0][2],yt)}(ze[yt](je))}catch(gt){nn(vt[0][3],gt)}}function ht(yt){Xt("next",yt)}function pn(yt){Xt("throw",yt)}function nn(yt,je){yt(je),vt.shift(),vt.length&&Xt(vt[0][0],vt[0][1])}}function Nt(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Re=se[Symbol.asyncIterator];return Re?Re.call(se):(se=function be(se){var Re="function"==typeof Symbol&&Symbol.iterator,fe=Re&&se[Re],ze=0;if(fe)return fe.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&ze>=se.length&&(se=void 0),{value:se&&se[ze++],done:!se}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),fe={},ze("next"),ze("throw"),ze("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ze(vt){fe[vt]=se[vt]&&function(St){return new Promise(function(Xt,Yt){!function He(vt,St,Xt,Yt){Promise.resolve(Yt).then(function(ht){vt({value:ht,done:Xt})},St)}(Xt,Yt,(St=se[vt](St)).done,St.value)})}}}B.d($e,{FC:()=>at,KL:()=>Nt,_T:()=>Ne,mG:()=>Ae,qq:()=>Ze})},9808:(Ot,$e,B)=>{B.d($e,{Do:()=>he,EM:()=>Rt,HT:()=>Me,JF:()=>Mn,K0:()=>Le,Mx:()=>Si,O5:()=>ir,PM:()=>ce,S$:()=>Ze,V_:()=>le,Ye:()=>Xe,b0:()=>Nt,bD:()=>Di,ez:()=>Go,lw:()=>Ae,mr:()=>At,q:()=>te,sg:()=>Ur,w_:()=>Te});var m=B(5e3);let y=null;function te(){return y}function Me(O){y||(y=O)}class Te{}const Le=new m.OlP("DocumentToken");let Ae=(()=>{class O{historyGo(k){throw new Error("Not implemented")}}return O.\u0275fac=function(k){return new(k||O)},O.\u0275prov=m.Yz7({token:O,factory:function(){return function _e(){return(0,m.LFG)(ie)}()},providedIn:"platform"}),O})();const le=new m.OlP("Location Initialized");let ie=(()=>{class O extends Ae{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(k){const ee=te().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("popstate",k,!1),()=>ee.removeEventListener("popstate",k)}onHashChange(k){const ee=te().getGlobalEventTarget(this._doc,"window");return ee.addEventListener("hashchange",k,!1),()=>ee.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,ee,ye){be()?this._history.pushState(k,ee,ye):this.location.hash=ye}replaceState(k,ee,ye){be()?this._history.replaceState(k,ee,ye):this.location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return O.\u0275fac=function(k){return new(k||O)(m.LFG(Le))},O.\u0275prov=m.Yz7({token:O,factory:function(){return function mt(){return new ie((0,m.LFG)(Le))}()},providedIn:"platform"}),O})();function be(){return!!window.history.pushState}function Be(O,z){if(0==O.length)return z;if(0==z.length)return O;let k=0;return O.endsWith("/")&&k++,z.startsWith("/")&&k++,2==k?O+z.substring(1):1==k?O+z:O+"/"+z}function lt(O){const z=O.match(/#|\?|$/),k=z&&z.index||O.length;return O.slice(0,k-("/"===O[k-1]?1:0))+O.slice(k)}function wt(O){return O&&"?"!==O[0]?"?"+O:O}let Ze=(()=>{class O{historyGo(k){throw new Error("Not implemented")}}return O.\u0275fac=function(k){return new(k||O)},O.\u0275prov=m.Yz7({token:O,factory:function(){return function at(O){const z=(0,m.LFG)(Le).location;return new Nt((0,m.LFG)(Ae),z&&z.origin||"")}()},providedIn:"root"}),O})();const At=new m.OlP("appBaseHref");let Nt=(()=>{class O extends Ze{constructor(k,ee){if(super(),this._platformLocation=k,this._removeListenerFns=[],null==ee&&(ee=this._platformLocation.getBaseHrefFromDOM()),null==ee)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ee}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Be(this._baseHref,k)}path(k=!1){const ee=this._platformLocation.pathname+wt(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&k?`${ee}${ye}`:ee}pushState(k,ee,ye,Ke){const Je=this.prepareExternalUrl(ye+wt(Ke));this._platformLocation.pushState(k,ee,Je)}replaceState(k,ee,ye,Ke){const Je=this.prepareExternalUrl(ye+wt(Ke));this._platformLocation.replaceState(k,ee,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,ye;null===(ye=(ee=this._platformLocation).historyGo)||void 0===ye||ye.call(ee,k)}}return O.\u0275fac=function(k){return new(k||O)(m.LFG(Ae),m.LFG(At,8))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})(),he=(()=>{class O extends Ze{constructor(k,ee){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=ee&&(this._baseHref=ee)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let ee=this._platformLocation.hash;return null==ee&&(ee="#"),ee.length>0?ee.substring(1):ee}prepareExternalUrl(k){const ee=Be(this._baseHref,k);return ee.length>0?"#"+ee:ee}pushState(k,ee,ye,Ke){let Je=this.prepareExternalUrl(ye+wt(Ke));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.pushState(k,ee,Je)}replaceState(k,ee,ye,Ke){let Je=this.prepareExternalUrl(ye+wt(Ke));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.replaceState(k,ee,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(k=0){var ee,ye;null===(ye=(ee=this._platformLocation).historyGo)||void 0===ye||ye.call(ee,k)}}return O.\u0275fac=function(k){return new(k||O)(m.LFG(Ae),m.LFG(At,8))},O.\u0275prov=m.Yz7({token:O,factory:O.\u0275fac}),O})(),Xe=(()=>{class O{constructor(k,ee){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=k;const ye=this._platformStrategy.getBaseHref();this._platformLocation=ee,this._baseHref=lt(st(ye)),this._platformStrategy.onPopState(Ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ke.state,type:Ke.type})})}path(k=!1){return this.normalize(this._platformStrategy.path(k))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(k,ee=""){return this.path()==this.normalize(k+wt(ee))}normalize(k){return O.stripTrailingSlash(function We(O,z){return O&&z.startsWith(O)?z.substring(O.length):z}(this._baseHref,st(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._platformStrategy.prepareExternalUrl(k)}go(k,ee="",ye=null){this._platformStrategy.pushState(ye,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+wt(ee)),ye)}replaceState(k,ee="",ye=null){this._platformStrategy.replaceState(ye,"",k,ee),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+wt(ee)),ye)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(k=0){var ee,ye;null===(ye=(ee=this._platformStrategy).historyGo)||void 0===ye||ye.call(ee,k)}onUrlChange(k){this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ee=>{this._notifyUrlChangeListeners(ee.url,ee.state)}))}_notifyUrlChangeListeners(k="",ee){this._urlChangeListeners.forEach(ye=>ye(k,ee))}subscribe(k,ee,ye){return this._subject.subscribe({next:k,error:ee,complete:ye})}}return O.normalizeQueryParams=wt,O.joinWithSlash=Be,O.stripTrailingSlash=lt,O.\u0275fac=function(k){return new(k||O)(m.LFG(Ze),m.LFG(Ae))},O.\u0275prov=m.Yz7({token:O,factory:function(){return function ut(){return new Xe((0,m.LFG)(Ze),(0,m.LFG)(Ae))}()},providedIn:"root"}),O})();function st(O){return O.replace(/\/index.html$/,"")}function Si(O,z){z=encodeURIComponent(z);for(const k of O.split(";")){const ee=k.indexOf("="),[ye,Ke]=-1==ee?[k,""]:[k.slice(0,ee),k.slice(ee+1)];if(ye.trim()===z)return decodeURIComponent(Ke)}return null}class Ii{constructor(z,k,ee,ye){this.$implicit=z,this.ngForOf=k,this.index=ee,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ur=(()=>{class O{constructor(k,ee,ye){this._viewContainer=k,this._template=ee,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const ee=this._viewContainer;k.forEachOperation((ye,Ke,Je)=>{if(null==ye.previousIndex)ee.createEmbeddedView(this._template,new Ii(ye.item,this._ngForOf,-1,-1),null===Je?void 0:Je);else if(null==Je)ee.remove(null===Ke?void 0:Ke);else if(null!==Ke){const Ft=ee.get(Ke);ee.move(Ft,Je),Fr(Ft,ye)}});for(let ye=0,Ke=ee.length;ye<Ke;ye++){const Ft=ee.get(ye).context;Ft.index=ye,Ft.count=Ke,Ft.ngForOf=this._ngForOf}k.forEachIdentityChange(ye=>{Fr(ee.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(k,ee){return!0}}return O.\u0275fac=function(k){return new(k||O)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},O.\u0275dir=m.lG2({type:O,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),O})();function Fr(O,z){O.context.$implicit=z.item}let ir=(()=>{class O{constructor(k,ee){this._viewContainer=k,this._context=new or,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ee}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Ms("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Ms("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,ee){return!0}}return O.\u0275fac=function(k){return new(k||O)(m.Y36(m.s_b),m.Y36(m.Rgc))},O.\u0275dir=m.lG2({type:O,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),O})();class or{constructor(){this.$implicit=null,this.ngIf=null}}function Ms(O,z){if(z&&!z.createEmbeddedView)throw new Error(`${O} must be a TemplateRef, but received '${(0,m.AaK)(z)}'.`)}let Go=(()=>{class O{}return O.\u0275fac=function(k){return new(k||O)},O.\u0275mod=m.oAB({type:O}),O.\u0275inj=m.cJS({}),O})();const Di="browser";function ce(O){return"server"===O}let Rt=(()=>{class O{}return O.\u0275prov=(0,m.Yz7)({token:O,providedIn:"root",factory:()=>new Vt((0,m.LFG)(Le),window)}),O})();class Vt{constructor(z,k){this.document=z,this.window=k,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const k=function Dn(O,z){const k=O.getElementById(z)||O.getElementsByName(z)[0];if(k)return k;if("function"==typeof O.createTreeWalker&&O.body&&(O.body.createShadowRoot||O.body.attachShadow)){const ee=O.createTreeWalker(O.body,NodeFilter.SHOW_ELEMENT);let ye=ee.currentNode;for(;ye;){const Ke=ye.shadowRoot;if(Ke){const Je=Ke.getElementById(z)||Ke.querySelector(`[name="${z}"]`);if(Je)return Je}ye=ee.nextNode()}}return null}(this.document,z);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=z)}}scrollToElement(z){const k=z.getBoundingClientRect(),ee=k.left+this.window.pageXOffset,ye=k.top+this.window.pageYOffset,Ke=this.offset();this.window.scrollTo(ee-Ke[0],ye-Ke[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=jt(this.window.history)||jt(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch(z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(z){return!1}}}function jt(O){return Object.getOwnPropertyDescriptor(O,"scrollRestoration")}class Mn{}},5e3:(Ot,$e,B)=>{B.d($e,{$8M:()=>tu,$Z:()=>os,AFp:()=>lE,AaK:()=>Ae,CHM:()=>ar,CRH:()=>$0,CZH:()=>_v,CqO:()=>Xp,DdM:()=>M0,EJc:()=>Db,EpF:()=>I_,F4k:()=>Hm,FYo:()=>E0,FiY:()=>yo,G48:()=>Wb,GfV:()=>w0,Gpc:()=>ie,JOm:()=>ne,LFG:()=>dn,LSH:()=>Bo,Lbi:()=>wb,NdJ:()=>Fu,OlP:()=>Pi,Oqu:()=>il,PXZ:()=>Ub,Q6J:()=>Bm,QGY:()=>Jp,Qsj:()=>gw,R0b:()=>bl,RDi:()=>jt,Rgc:()=>Dg,SBq:()=>Eg,Sil:()=>Cb,Suo:()=>j0,TTD:()=>Gi,TgZ:()=>Qd,VLi:()=>Fb,X6Q:()=>zb,XFs:()=>en,Xpm:()=>Bt,Y36:()=>Yd,YKP:()=>T0,YNc:()=>sf,Yjl:()=>cn,Yz7:()=>je,ZZ4:()=>Nv,_Bn:()=>y0,_UZ:()=>Kp,_Vd:()=>Sy,_c5:()=>lI,_uU:()=>ug,aQg:()=>Pv,c2e:()=>bb,cJS:()=>Mt,cg1:()=>wf,dDg:()=>gE,deG:()=>So,dqk:()=>Wn,eFA:()=>_E,ekj:()=>Dc,g9A:()=>dE,h0i:()=>xf,hGG:()=>cI,iGM:()=>B0,ifc:()=>Ut,ip1:()=>uE,kL8:()=>gd,lG2:()=>wi,n5z:()=>no,oAB:()=>_r,oxw:()=>Gm,q4F:()=>b0,qLn:()=>oc,qOj:()=>$d,qZA:()=>hf,s9C:()=>tg,sBO:()=>Zb,sIi:()=>Hd,s_b:()=>Ry,soG:()=>Ev,tBr:()=>er,tb:()=>hE,tp0:()=>Ga,uIk:()=>nf,vHH:()=>lt,vpe:()=>Ql,wAp:()=>Bn,xp6:()=>kg,z2F:()=>Cv,zSh:()=>vp,zs3:()=>mu});var m=B(7579),y=B(727),te=B(8306),Ne=B(6451),Me=B(3099);function Te(n){for(let r in n)if(n[r]===Te)return r;throw Error("Could not find renamed property on target object.")}function Le(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function Ae(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ae).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function _e(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=Te({__forward_ref__:Te});function ie(n){return n.__forward_ref__=ie,n.toString=function(){return Ae(this())},n}function be(n){return mt(n)?n():n}function mt(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ie}class lt extends Error{constructor(r,s){super(function wt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,s)),this.code=r}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function at(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}function Xe(n,r){const s=r?` in ${r}`:"";throw new lt(-201,`No provider for ${at(n)} found${s}`)}function Yt(n,r){null==n&&function ht(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function je(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mt(n){return{providers:n.providers||[],imports:n.imports||[]}}function qt(n){return Cn(n,Qn)||Cn(n,Dr)}function Cn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Yn(n){return n&&(n.hasOwnProperty(br)||n.hasOwnProperty(zn))?n[br]:null}const Qn=Te({\u0275prov:Te}),br=Te({\u0275inj:Te}),Dr=Te({ngInjectableDef:Te}),zn=Te({ngInjectorDef:Te});var en=(()=>((en=en||{})[en.Default=0]="Default",en[en.Host=1]="Host",en[en.Self=2]="Self",en[en.SkipSelf=4]="SkipSelf",en[en.Optional=8]="Optional",en))();let mn;function wn(n){const r=mn;return mn=n,r}function hi(n,r,s){const a=qt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&en.Optional?null:void 0!==r?r:void Xe(Ae(n),"Injector")}function ii(n){return{toString:n}.toString()}var Nr=(()=>((Nr=Nr||{})[Nr.OnPush=0]="OnPush",Nr[Nr.Default=1]="Default",Nr))(),Ut=(()=>{return(n=Ut||(Ut={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ut;var n})();const Qt="undefined"!=typeof globalThis&&globalThis,Zt="undefined"!=typeof window&&window,Sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wn=Qt||"undefined"!=typeof global&&global||Zt||Sr,Vn={},pe=[],De=Te({\u0275cmp:Te}),Ce=Te({\u0275dir:Te}),ft=Te({\u0275pipe:Te}),ve=Te({\u0275mod:Te}),Fe=Te({\u0275fac:Te}),_t=Te({__NG_ELEMENT_ID__:Te});let Lt=0;function Bt(n){return ii(()=>{const s={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Nr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||pe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ut.Emulated,id:"c",styles:n.styles||pe,_:null,setInput:null,schemas:n.schemas||null,tView:null},l=n.directives,g=n.features,w=n.pipes;return a.id+=Lt++,a.inputs=jr(n.inputs,s),a.outputs=jr(n.outputs),g&&g.forEach(C=>C(a)),a.directiveDefs=l?()=>("function"==typeof l?l():l).map(yr):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(hn):null,a})}function yr(n){return it(n)||function Mr(n){return n[Ce]||null}(n)}function hn(n){return function $r(n){return n[ft]||null}(n)}const nr={};function _r(n){return ii(()=>{const r={type:n.type,bootstrap:n.bootstrap||pe,declarations:n.declarations||pe,imports:n.imports||pe,exports:n.exports||pe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(nr[n.id]=n.type),r})}function jr(n,r){if(null==n)return Vn;const s={};for(const a in n)if(n.hasOwnProperty(a)){let l=n[a],g=l;Array.isArray(l)&&(g=l[1],l=l[0]),s[l]=a,r&&(r[l]=g)}return s}const wi=Bt;function cn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function it(n){return n[De]||null}function Pr(n,r){const s=n[ve]||null;if(!s&&!0===r)throw new Error(`Type ${Ae(n)} does not have '\u0275mod' property.`);return s}function ni(n){return Array.isArray(n)&&"object"==typeof n[1]}function Fi(n){return Array.isArray(n)&&!0===n[1]}function Es(n){return 0!=(8&n.flags)}function xs(n){return 2==(2&n.flags)}function Mi(n){return 1==(1&n.flags)}function ji(n){return null!==n.template}function $i(n){return 0!=(512&n[2])}function ai(n,r){return n.hasOwnProperty(Fe)?n[Fe]:null}class Ns{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Gi(){return Ji}function Ji(n){return n.type.prototype.ngOnChanges&&(n.setInput=fs),Zs}function Zs(){const n=Di(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Vn)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function fs(n,r,s,a){const l=Di(n)||function Ks(n,r){return n[Go]=r}(n,{previous:Vn,current:null}),g=l.current||(l.current={}),w=l.previous,C=this.declaredInputs[s],M=w[C];g[C]=new Ns(M&&M.currentValue,r,w===Vn),n[a]=r}Gi.ngInherit=!0;const Go="__ngSimpleChanges__";function Di(n){return n[Go]||null}let Vt;function jt(n){Vt=n}function Mn(n){return!!n.listen}const O={createRenderer:(n,r)=>function Dn(){return void 0!==Vt?Vt:"undefined"!=typeof document?document:void 0}()};function k(n){for(;Array.isArray(n);)n=n[0];return n}function Ke(n,r){return k(r[n])}function Je(n,r){return k(r[n.index])}function rn(n,r){return n.data[r]}function fn(n,r){const s=r[n];return ni(s)?s:s[0]}function Pn(n){return 4==(4&n[2])}function dr(n){return 128==(128&n[2])}function Cr(n,r){return null==r?null:n[r]}function qi(n){n[18]=0}function ps(n,r){n[5]+=r;let s=n,a=n[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const An={lFrame:bo(null),bindingsEnabled:!0};function P(){return An.bindingsEnabled}function Ee(){return An.lFrame.lView}function Et(){return An.lFrame.tView}function ar(n){return An.lFrame.contextLView=n,n[8]}function sr(){let n=zi();for(;null!==n&&64===n.type;)n=n.parent;return n}function zi(){return An.lFrame.currentTNode}function Wi(n,r){const s=An.lFrame;s.currentTNode=n,s.isParent=r}function Ys(){return An.lFrame.isParent}function ko(){return An.lFrame.bindingIndex++}function ci(n,r){const s=An.lFrame;s.bindingIndex=s.bindingRootIndex=n,Na(r)}function Na(n){An.lFrame.currentDirectiveIndex=n}function Eu(){return An.lFrame.currentQueryIndex}function Ya(n){An.lFrame.currentQueryIndex=n}function la(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Vs(n,r,s){if(s&en.SkipSelf){let l=r,g=n;for(;!(l=l.parent,null!==l||s&en.Host||(l=la(g),null===l||(g=g[15],10&l.type))););if(null===l)return!1;r=l,n=g}const a=An.lFrame=ca();return a.currentTNode=r,a.lView=n,!0}function wo(n){const r=ca(),s=n[1];An.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ca(){const n=An.lFrame,r=null===n?null:n.child;return null===r?bo(n):r}function bo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Us(){const n=An.lFrame;return An.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ms=Us;function zo(){const n=Us();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xi(){return An.lFrame.selectedIndex}function Do(n){An.lFrame.selectedIndex=n}function mi(){const n=An.lFrame;return rn(n.tView,n.selectedIndex)}function Fo(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const g=n.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:C,ngAfterViewInit:M,ngAfterViewChecked:$,ngOnDestroy:Q}=g;w&&(n.contentHooks||(n.contentHooks=[])).push(-s,w),C&&((n.contentHooks||(n.contentHooks=[])).push(s,C),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,C)),M&&(n.viewHooks||(n.viewHooks=[])).push(-s,M),$&&((n.viewHooks||(n.viewHooks=[])).push(s,$),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,$)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(s,Q)}}function To(n,r,s){Ja(n,r,3,s)}function Co(n,r,s,a){(3&n[2])===s&&Ja(n,r,s,a)}function ur(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Ja(n,r,s,a){const g=null!=a?a:-1,w=r.length-1;let C=0;for(let M=void 0!==a?65535&n[18]:0;M<w;M++)if("number"==typeof r[M+1]){if(C=r[M],null!=a&&C>=a)break}else r[M]<0&&(n[18]+=65536),(C<g||-1==g)&&(Ta(n,s,r,M),n[18]=(4294901760&n[18])+M+2),M++}function Ta(n,r,s,a){const l=s[a]<0,g=s[a+1],C=n[l?-s[a]:s[a]];if(l){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Bs{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ha(n,r,s){const a=Mn(n);let l=0;for(;l<s.length;){const g=s[l];if("number"==typeof g){if(0!==g)break;l++;const w=s[l++],C=s[l++],M=s[l++];a?n.setAttribute(r,C,M,w):r.setAttributeNS(w,C,M)}else{const w=g,C=s[++l];Js(w)?a&&n.setProperty(r,w,C):a?n.setAttribute(r,w,C):r.setAttribute(w,C),l++}}return l}function ts(n){return 3===n||4===n||6===n}function Js(n){return 64===n.charCodeAt(0)}function Xs(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||Va(n,s,l,null,-1===s||2===s?r[++a]:null)}}return n}function Va(n,r,s,a,l){let g=0,w=n.length;if(-1===r)w=-1;else for(;g<n.length;){const C=n[g++];if("number"==typeof C){if(C===r){w=-1;break}if(C>r){w=g-1;break}}}for(;g<n.length;){const C=n[g];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==l&&(n[g+1]=l));if(a===n[g+1])return void(n[g+2]=l)}g++,null!==a&&g++,null!==l&&g++}-1!==w&&(n.splice(w,0,r),g=w+1),n.splice(g++,0,s),null!==a&&n.splice(g++,0,a),null!==l&&n.splice(g++,0,l)}function fa(n){return-1!==n}function ns(n){return 32767&n}function eo(n,r){let s=function Yr(n){return n>>16}(n),a=r;for(;s>0;)a=a[15],s--;return a}let Ao=!0;function Zo(n){const r=Ao;return Ao=n,r}let Lo=0;function Vo(n,r){const s=ri(n,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,Ct(a.data,n),Ct(r,null),Ct(a.blueprint,null));const l=A(n,r),g=n.injectorIndex;if(fa(l)){const w=ns(l),C=eo(l,r),M=C[1].data;for(let $=0;$<8;$++)r[g+$]=C[w+$]|M[w+$]}return r[g+8]=l,g}function Ct(n,r){n.push(0,0,0,0,0,0,0,0,r)}function ri(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function A(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){const g=l[1],w=g.type;if(a=2===w?g.declTNode:1===w?l[6]:null,null===a)return-1;if(s++,l=l[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function T(n,r,s){!function pa(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(_t)&&(a=s[_t]),null==a&&(a=s[_t]=Lo++);const l=255&a;r.data[n+(l>>5)]|=1<<l}(n,r,s)}function x(n,r,s){if(s&en.Optional)return n;Xe(r,"NodeInjector")}function U(n,r,s,a){if(s&en.Optional&&void 0===a&&(a=null),0==(s&(en.Self|en.Host))){const l=n[9],g=wn(void 0);try{return l?l.get(r,a,s&en.Optional):hi(r,a,s&en.Optional)}finally{wn(g)}}return x(a,r,s)}function q(n,r,s,a=en.Default,l){if(null!==n){const g=function an(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(_t)?n[_t]:void 0;return"number"==typeof r?r>=0?255&r:re:r}(s);if("function"==typeof g){if(!Vs(r,n,a))return a&en.Host?x(l,s,a):U(r,s,a,l);try{const w=g(a);if(null!=w||a&en.Optional)return w;Xe(s)}finally{ms()}}else if("number"==typeof g){let w=null,C=ri(n,r),M=-1,$=a&en.Host?r[16][6]:null;for((-1===C||a&en.SkipSelf)&&(M=-1===C?A(n,r):r[C+8],-1!==M&&pr(a,!1)?(w=r[1],C=ns(M),r=eo(M,r)):C=-1);-1!==C;){const Q=r[1];if(Ir(g,C,Q.data)){const ue=et(C,r,s,w,a,$);if(ue!==W)return ue}M=r[C+8],-1!==M&&pr(a,r[1].data[C+8]===$)&&Ir(g,C,r)?(w=Q,C=ns(M),r=eo(M,r)):C=-1}}}return U(r,s,a,l)}const W={};function re(){return new Ri(sr(),Ee())}function et(n,r,s,a,l,g){const w=r[1],C=w.data[n+8],Q=Kt(C,w,s,null==a?xs(C)&&Ao:a!=w&&0!=(3&C.type),l&en.Host&&g===C);return null!==Q?qn(r,w,Q,C):W}function Kt(n,r,s,a,l){const g=n.providerIndexes,w=r.data,C=1048575&g,M=n.directiveStart,Q=g>>20,Se=l?C+Q:n.directiveEnd;for(let Ge=a?C:C+Q;Ge<Se;Ge++){const pt=w[Ge];if(Ge<M&&s===pt||Ge>=M&&pt.type===s)return Ge}if(l){const Ge=w[M];if(Ge&&ji(Ge)&&Ge.type===s)return M}return null}function qn(n,r,s,a){let l=n[s];const g=r.data;if(function Vi(n){return n instanceof Bs}(l)){const w=l;w.resolving&&function At(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new lt(-200,`Circular dependency in DI detected for ${n}${s}`)}(at(g[s]));const C=Zo(w.canSeeViewProviders);w.resolving=!0;const M=w.injectImpl?wn(w.injectImpl):null;Vs(n,a,en.Default);try{l=n[s]=w.factory(void 0,g,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Fa(n,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:g}=r.type.prototype;if(a){const w=Ji(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w)}l&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,l),g&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,g))}(s,g[s],r)}finally{null!==M&&wn(M),Zo(C),w.resolving=!1,ms()}}return l}function Ir(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function pr(n,r){return!(n&en.Self||n&en.Host&&r)}class Ri{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return q(this._tNode,this._lView,r,a,s)}}function no(n){return ii(()=>{const r=n.prototype.constructor,s=r[Fe]||Ko(r),a=Object.prototype;let l=Object.getPrototypeOf(n.prototype).constructor;for(;l&&l!==a;){const g=l[Fe]||Ko(l);if(g&&g!==s)return g;l=Object.getPrototypeOf(l)}return g=>new g})}function Ko(n){return mt(n)?()=>{const r=Ko(be(n));return r&&r()}:ai(n)}function tu(n){return function E(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const g=s[l];if(ts(g))break;if(0===g)l+=2;else if("number"==typeof g)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(g===r)return s[l+1];l+=2}}}return null}(sr(),n)}const ga="__parameters__";function Ua(n,r,s){return ii(()=>{const a=function Ca(n){return function(...s){if(n){const a=n(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...g){if(this instanceof l)return a.apply(this,g),this;const w=new l(...g);return C.annotation=w,C;function C(M,$,Q){const ue=M.hasOwnProperty(ga)?M[ga]:Object.defineProperty(M,ga,{value:[]})[ga];for(;ue.length<=Q;)ue.push(null);return(ue[Q]=ue[Q]||[]).push(w),M}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=n,l.annotationCls=l,l})}class Pi{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=je({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const So=new Pi("AnalyzeForEntryComponents");function ks(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let a=n[s];Array.isArray(a)?(r===n&&(r=n.slice(0,s)),ks(a,r)):r!==n&&r.push(a)}return r}function _s(n,r){n.forEach(s=>Array.isArray(s)?_s(s,r):r(s))}function ju(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function po(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function yi(n,r,s){let a=go(n,r);return a>=0?n[1|a]=s:(a=~a,function $t(n,r,s,a){let l=n.length;if(l==r)n.push(s,a);else if(1===l)n.push(a,n[0]),n[0]=s;else{for(l--,n.push(n[l-1],n[l]);l>r;)n[l]=n[l-2],l--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Ba(n,r){const s=go(n,r);if(s>=0)return n[1|s]}function go(n,r){return function ro(n,r,s){let a=0,l=n.length>>s;for(;l!==a;){const g=a+(l-a>>1),w=n[g<<s];if(r===w)return g<<s;w>r?l=g:a=g+1}return~(l<<s)}(n,r,1)}const $a={},Tu="__NG_DI_FLAG__",Ha="ngTempTokenPath",L=/\n/gm,oe="__source",Ue=Te({provide:String,useValue:Te});let Ye;function Dt(n){const r=Ye;return Ye=n,r}function sn(n,r=en.Default){if(void 0===Ye)throw new lt(203,"");return null===Ye?hi(n,void 0,r):Ye.get(n,r&en.Optional?null:void 0,r)}function dn(n,r=en.Default){return(function _n(){return mn}()||sn)(be(n),r)}const Er=dn;function Rn(n){const r=[];for(let s=0;s<n.length;s++){const a=be(n[s]);if(Array.isArray(a)){if(0===a.length)throw new lt(900,"");let l,g=en.Default;for(let w=0;w<a.length;w++){const C=a[w],M=lr(C);"number"==typeof M?-1===M?l=C.token:g|=M:l=C}r.push(dn(l,g))}else r.push(dn(a))}return r}function Ki(n,r){return n[Tu]=r,n.prototype[Tu]=r,n}function lr(n){return n[Tu]}const er=Ki(Ua("Inject",n=>({token:n})),-1),yo=Ki(Ua("Optional"),8),Ga=Ki(Ua("SkipSelf"),4);class Ml{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function F(n){return n instanceof Ml?n.changingThisBreaksApplicationSecurity:n}const Vr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ci=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tn=(()=>((Tn=Tn||{})[Tn.NONE=0]="NONE",Tn[Tn.HTML=1]="HTML",Tn[Tn.STYLE=2]="STYLE",Tn[Tn.SCRIPT=3]="SCRIPT",Tn[Tn.URL=4]="URL",Tn[Tn.RESOURCE_URL=5]="RESOURCE_URL",Tn))();function Bo(n){const r=function ic(){const n=Ee();return n&&n[12]}();return r?r.sanitize(Tn.URL,n)||"":function Y(n,r){const s=function ae(n){return n instanceof Ml&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?F(n):function Oi(n){return(n=String(n)).match(Vr)||n.match(Ci)?n:"unsafe:"+n}(Ze(n))}const dl="__ngContext__";function $s(n,r){n[dl]=r}function Nc(n){const r=function hl(n){return n[dl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Wu(n){return n.ngOriginalError}function Dd(n,...r){n.error(...r)}class oc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function hu(n){return n&&n.ngErrorLogger||Dd}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Wu(r);for(;s&&Wu(s);)s=Wu(s);return s||null}}const Lc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wn))();function _(n){return n instanceof Function?n():n}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function tt(n,r){return undefined(n,r)}function vn(n){const r=n[3];return Fi(r)?r[3]:r}function ta(n){return Td(n[13])}function Ol(n){return Td(n[4])}function Td(n){for(;null!==n&&!Fi(n);)n=n[4];return n}function fl(n,r,s,a,l){if(null!=a){let g,w=!1;Fi(a)?g=a:ni(a)&&(w=!0,a=a[0]);const C=k(a);0===n&&null!==s?null==l?pu(r,s,C):Zu(r,s,C,l||null,!0):1===n&&null!==s?Zu(r,s,C,l||null,!0):2===n?function Gf(n,r,s){const a=Ku(n,r);a&&function Sd(n,r,s,a){Mn(n)?n.removeChild(r,s,a):r.removeChild(s)}(n,a,r,s)}(r,C,w):3===n&&r.destroyNode(C),null!=g&&function ac(n,r,s,a,l){const g=s[7];g!==k(s)&&fl(r,n,a,g,l);for(let C=10;C<s.length;C++){const M=s[C];Hc(M[1],M,n,r,a,g)}}(r,n,g,s,l)}}function Bc(n,r,s){if(Mn(n))return n.createElement(r,s);{const a=null!==s?function Rt(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Cg(n,r){const s=n[9],a=s.indexOf(r),l=r[3];1024&r[2]&&(r[2]&=-1025,ps(l,-1)),s.splice(a,1)}function vh(n,r){if(n.length<=10)return;const s=10+r,a=n[s];if(a){const l=a[17];null!==l&&l!==n&&Cg(l,a),r>0&&(n[s-1][4]=a[4]);const g=po(n,10+r);!function Cd(n,r){Hc(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=g[19];null!==w&&w.detachView(g[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Ag(n,r){if(!(256&r[2])){const s=r[11];Mn(s)&&s.destroyNode&&Hc(n,r,s,3,null,null),function Ad(n){let r=n[13];if(!r)return Eh(n[1],n);for(;r;){let s=null;if(ni(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==n;)ni(r)&&Eh(r[1],r),r=r[3];null===r&&(r=n),ni(r)&&Eh(r[1],r),s=r&&r[4]}r=s}}(r)}}function Eh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Sg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof Bs)){const g=s[a+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const C=l[g[w]],M=g[w+1];try{M.call(C)}finally{}}else try{g.call(l)}finally{}}}}(n,r),function Vy(n,r){const s=n.cleanup,a=r[7];let l=-1;if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const w=s[g+1],C="function"==typeof w?w(r):k(r[w]),M=a[l=s[g+2]],$=s[g+3];"boolean"==typeof $?C.removeEventListener(s[g],M,$):$>=0?a[l=$]():a[l=-$].unsubscribe(),g+=2}else{const w=a[l=s[g+1]];s[g].call(w)}if(null!==a){for(let g=l+1;g<a.length;g++)a[g]();r[7]=null}}(n,r),1===r[1].type&&Mn(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Fi(r[3])){s!==r[3]&&Cg(s,r);const a=r[19];null!==a&&a.detachView(n)}}}function $f(n,r,s){return function dt(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const l=n.data[a.directiveStart].encapsulation;if(l===Ut.None||l===Ut.Emulated)return null}return Je(a,s)}(n,r.parent,s)}function Zu(n,r,s,a,l){Mn(n)?n.insertBefore(r,s,a,l):r.insertBefore(s,a,l)}function pu(n,r,s){Mn(n)?n.appendChild(r,s):r.appendChild(s)}function Mg(n,r,s,a,l){null!==a?Zu(n,r,s,a,l):pu(n,r,s)}function Ku(n,r){return Mn(n)?n.parentNode(r):r.parentNode}let wh=function Hf(n,r,s){return 40&n.type?Je(n,s):null};function jc(n,r,s,a){const l=$f(n,a,r),g=r[11],C=function kl(n,r,s){return wh(n,r,s)}(a.parent||r[6],a,r);if(null!=l)if(Array.isArray(s))for(let M=0;M<s.length;M++)Mg(g,l,s[M],C,!1);else Mg(g,l,s,C,!1)}function $c(n,r){if(null!==r){const s=r.type;if(3&s)return Je(r,n);if(4&s)return Yu(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return $c(n,a);{const l=n[r.index];return Fi(l)?Yu(-1,l):k(l)}}if(32&s)return tt(r,n)()||k(n[r.index]);{const a=Ih(n,r);return null!==a?Array.isArray(a)?a[0]:$c(vn(n[16]),a):$c(n,r.next)}}return null}function Ih(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Yu(n,r){const s=10+n+1;if(s<r.length){const a=r[s],l=a[1].firstChild;if(null!==l)return $c(a,l)}return r[7]}function qf(n,r,s,a,l,g,w){for(;null!=s;){const C=a[s.index],M=s.type;if(w&&0===r&&(C&&$s(k(C),a),s.flags|=4),64!=(64&s.flags))if(8&M)qf(n,r,s.child,a,l,g,!1),fl(r,n,l,C,g);else if(32&M){const $=tt(s,a);let Q;for(;Q=$();)fl(r,n,l,Q,g);fl(r,n,l,C,g)}else 16&M?Fl(n,r,a,s,l,g):fl(r,n,l,C,g);s=w?s.projectionNext:s.next}}function Hc(n,r,s,a,l,g){qf(s,a,n.firstChild,r,l,g,!1)}function Fl(n,r,s,a,l,g){const w=s[16],M=w[6].projection[a.projection];if(Array.isArray(M))for(let $=0;$<M.length;$++)fl(r,n,l,M[$],g);else qf(n,r,M,w[3],l,g,!0)}function qc(n,r,s){Mn(n)?n.setAttribute(r,"style",s):r.style.cssText=s}function Th(n,r,s){Mn(n)?""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s):r.className=s}function Ch(n,r,s){let a=n.length;for(;;){const l=n.indexOf(r,s);if(-1===l)return l;if(0===l||n.charCodeAt(l-1)<=32){const g=r.length;if(l+g===a||n.charCodeAt(l+g)<=32)return l}s=l+1}}const zf="ng-template";function By(n,r,s){let a=0;for(;a<n.length;){let l=n[a++];if(s&&"class"===l){if(l=n[a],-1!==Ch(l.toLowerCase(),r,0))return!0}else if(1===l){for(;a<n.length&&"string"==typeof(l=n[a++]);)if(l.toLowerCase()===r)return!0;return!1}}return!1}function Wf(n){return 4===n.type&&n.value!==zf}function Rg(n,r,s){return r===(4!==n.type||s?n.value:zf)}function Zf(n,r,s){let a=4;const l=n.attrs||[],g=function jy(n){for(let r=0;r<n.length;r++)if(ts(n[r]))return r;return n.length}(l);let w=!1;for(let C=0;C<r.length;C++){const M=r[C];if("number"!=typeof M){if(!w)if(4&a){if(a=2|1&a,""!==M&&!Rg(n,M,s)||""===M&&1===r.length){if(ba(a))return!1;w=!0}}else{const $=8&a?M:r[++C];if(8&a&&null!==n.attrs){if(!By(n.attrs,$,s)){if(ba(a))return!1;w=!0}continue}const ue=uc(8&a?"class":M,l,Wf(n),s);if(-1===ue){if(ba(a))return!1;w=!0;continue}if(""!==$){let Se;Se=ue>g?"":l[ue+1].toLowerCase();const Ge=8&a?Se:null;if(Ge&&-1!==Ch(Ge,$,0)||2&a&&$!==Se){if(ba(a))return!1;w=!0}}}}else{if(!w&&!ba(a)&&!ba(M))return!1;if(w&&ba(M))continue;w=!1,a=M|1&a}}return ba(a)||w}function ba(n){return 0==(1&n)}function uc(n,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let g=!1;for(;l<r.length;){const w=r[l];if(w===n)return l;if(3===w||6===w)g=!0;else{if(1===w||2===w){let C=r[++l];for(;"string"==typeof C;)C=r[++l];continue}if(4===w)break;if(0===w){l+=4;continue}}l+=g?1:2}return-1}return function $y(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function Ng(n,r,s=!1){for(let a=0;a<r.length;a++)if(Zf(n,r[a],s))return!0;return!1}function zc(n,r){return n?":not("+r.trim()+")":r}function lc(n){let r=n[0],s=1,a=2,l="",g=!1;for(;s<n.length;){let w=n[s];if("string"==typeof w)if(2&a){const C=n[++s];l+="["+w+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?l+="."+w:4&a&&(l+=" "+w);else""!==l&&!ba(w)&&(r+=zc(g,l),l=""),a=w,g=g||!ba(a);s++}return""!==l&&(r+=zc(g,l)),r}const cr={};function kg(n){Ah(Et(),Ee(),Xi()+n,!1)}function Ah(n,r,s,a){if(!a)if(3==(3&r[2])){const g=n.preOrderCheckHooks;null!==g&&To(r,g,s)}else{const g=n.preOrderHooks;null!==g&&Co(r,g,0,s)}Do(s)}function Sh(n,r){return n<<17|r<<2}function gu(n){return n>>17&32767}function Zc(n){return 2|n}function Qu(n){return(131068&n)>>2}function na(n,r){return-131069&n|r<<2}function Kc(n){return 1|n}function zg(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const l=s[a],g=s[a+1];if(-1!==g){const w=n.data[g];Ya(l),w.contentQueries(2,r[g],g)}}}function fc(n,r,s,a,l,g,w,C,M,$){const Q=r.blueprint.slice();return Q[0]=l,Q[2]=140|a,qi(Q),Q[3]=Q[15]=n,Q[8]=s,Q[10]=w||n&&n[10],Q[11]=C||n&&n[11],Q[12]=M||n&&n[12]||null,Q[9]=$||n&&n[9]||null,Q[6]=g,Q[16]=2==r.type?n[16]:Q,Q}function ml(n,r,s,a,l){let g=n.data[r];if(null===g)g=function kh(n,r,s,a,l){const g=zi(),w=Ys(),M=n.data[r]=function Xy(n,r,s,a,l,g){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,s,r,a,l);return null===n.firstChild&&(n.firstChild=M),null!==g&&(w?null==g.child&&null!==M.parent&&(g.child=M):null===g.next&&(g.next=M)),M}(n,r,s,a,l),function ua(){return An.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=s,g.value=a,g.attrs=l;const w=function ws(){const n=An.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return Wi(g,!0),g}function pc(n,r,s,a){if(0===s)return-1;const l=r.length;for(let g=0;g<s;g++)r.push(a),n.blueprint.push(a),n.data.push(null);return l}function Xc(n,r,s){wo(r);try{const a=n.viewQuery;null!==a&&nd(1,a,s);const l=n.template;null!==l&&Wg(n,r,l,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zg(n,r),n.staticViewQueries&&nd(2,n.viewQuery,s);const g=n.components;null!==g&&function Jc(n,r){for(let s=0;s<r.length;s++)fp(n,r[s])}(r,g)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,zo()}}function ed(n,r,s,a){const l=r[2];if(256!=(256&l)){wo(r);try{qi(r),function Da(n){return An.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Wg(n,r,s,2,a);const w=3==(3&l);if(w){const $=n.preOrderCheckHooks;null!==$&&To(r,$,null)}else{const $=n.preOrderHooks;null!==$&&Co(r,$,0,null),ur(r,0)}if(function Fd(n){for(let r=ta(n);null!==r;r=Ol(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const l=s[a],g=l[3];0==(1024&l[2])&&ps(g,1),l[2]|=1024}}}(r),function Hh(n){for(let r=ta(n);null!==r;r=Ol(r))for(let s=10;s<r.length;s++){const a=r[s],l=a[1];dr(a)&&ed(l,a,l.template,a[8])}}(r),null!==n.contentQueries&&zg(n,r),w){const $=n.contentCheckHooks;null!==$&&To(r,$)}else{const $=n.contentHooks;null!==$&&Co(r,$,1),ur(r,1)}!function qg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const l=s[a];if(l<0)Do(~l);else{const g=l,w=s[++a],C=s[++a];ci(w,g),C(2,r[g])}}}finally{Do(-1)}}(n,r);const C=n.components;null!==C&&function Qc(n,r){for(let s=0;s<r.length;s++)hp(n,r[s])}(r,C);const M=n.viewQuery;if(null!==M&&nd(2,M,a),w){const $=n.viewCheckHooks;null!==$&&To(r,$)}else{const $=n.viewHooks;null!==$&&Co(r,$,2),ur(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,ps(r[3],-1))}finally{zo()}}}function np(n,r,s,a){const l=r[10],w=Pn(r);try{!w&&l.begin&&l.begin(),w&&Xc(n,r,a),ed(n,r,s,a)}finally{!w&&l.end&&l.end()}}function Wg(n,r,s,a,l){const g=Xi(),w=2&a;try{Do(-1),w&&r.length>20&&Ah(n,r,20,!1),s(a,l)}finally{Do(g)}}function rp(n,r,s){!P()||(function t_(n,r,s,a){const l=s.directiveStart,g=s.directiveEnd;n.firstCreatePass||Vo(s,r),$s(a,r);const w=s.initialInputs;for(let C=l;C<g;C++){const M=n.data[C],$=ji(M);$&&r_(r,s,M);const Q=qn(r,n,C,s);$s(Q,r),null!==w&&Od(0,C-l,Q,M,0,w),$&&(fn(s.index,r)[8]=Q)}}(n,r,s,Je(s,r)),128==(128&s.flags)&&function n_(n,r,s){const a=s.directiveStart,l=s.directiveEnd,w=s.index,C=function Ka(){return An.lFrame.currentDirectiveIndex}();try{Do(w);for(let M=a;M<l;M++){const $=n.data[M],Q=r[M];Na(M),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&up($,Q)}}finally{Do(-1),Na(C)}}(n,r,s))}function ip(n,r,s=Je){const a=r.localNames;if(null!==a){let l=r.index+1;for(let g=0;g<a.length;g+=2){const w=a[g+1],C=-1===w?s(r,n):n[w];n[l++]=C}}}function Lh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Hs(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Hs(n,r,s,a,l,g,w,C,M,$){const Q=20+a,ue=Q+l,Se=function Jy(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:cr);return s}(Q,ue),Ge="function"==typeof $?$():$;return Se[1]={type:n,blueprint:Se,template:s,queries:null,viewQuery:C,declTNode:r,data:Se.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:M,consts:Ge,incompleteFirstPass:!1}}function Yg(n,r,s,a){const l=gc(r);null===s?l.push(a):(l.push(s),n.firstCreatePass&&Wh(n).push(a,l.length-1))}function Vh(n,r,s){for(let a in n)if(n.hasOwnProperty(a)){const l=n[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,l):s[a]=[r,l]}return s}function Ia(n,r,s,a,l,g,w,C){const M=Je(r,s);let Q,$=r.inputs;!C&&null!=$&&(Q=$[a])?(mp(n,s,Q,a,l),xs(r)&&function Uh(n,r){const s=fn(r,n);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function Jg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),l=null!=w?w(l,r.value||"",a):l,Mn(g)?g.setProperty(M,a,l):Js(a)||(M.setProperty?M.setProperty(a,l):M[a]=l))}function op(n,r,s,a){let l=!1;if(P()){const g=function jh(n,r,s){const a=n.directiveRegistry;let l=null;if(a)for(let g=0;g<a.length;g++){const w=a[g];Ng(s,w.selectors,!1)&&(l||(l=[]),T(Vo(s,r),n,w.type),ji(w)?(td(n,s),l.unshift(w)):l.push(w))}return l}(n,r,s),w=null===a?null:{"":-1};if(null!==g){l=!0,rm(s,n.data.length,g.length);for(let Q=0;Q<g.length;Q++){const ue=g[Q];ue.providersResolver&&ue.providersResolver(ue)}let C=!1,M=!1,$=pc(n,r,g.length,null);for(let Q=0;Q<g.length;Q++){const ue=g[Q];s.mergedAttrs=Xs(s.mergedAttrs,ue.hostAttrs),im(n,s,r,$,ue),nm($,ue,w),null!==ue.contentQueries&&(s.flags|=8),(null!==ue.hostBindings||null!==ue.hostAttrs||0!==ue.hostVars)&&(s.flags|=128);const Se=ue.type.prototype;!C&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),C=!0),!M&&(Se.ngOnChanges||Se.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),M=!0),$++}!function Qg(n,r){const a=r.directiveEnd,l=n.data,g=r.attrs,w=[];let C=null,M=null;for(let $=r.directiveStart;$<a;$++){const Q=l[$],ue=Q.inputs,Se=null===g||Wf(r)?null:dp(ue,g);w.push(Se),C=Vh(ue,$,C),M=Vh(Q.outputs,$,M)}null!==C&&(C.hasOwnProperty("class")&&(r.flags|=16),C.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=C,r.outputs=M}(n,s)}w&&function lp(n,r,s){if(r){const a=n.localNames=[];for(let l=0;l<r.length;l+=2){const g=s[r[l+1]];if(null==g)throw new lt(-301,!1);a.push(r[l],g)}}}(s,a,w)}return s.mergedAttrs=Xs(s.mergedAttrs,s.attrs),l}function ap(n,r,s,a,l,g){const w=g.hostBindings;if(w){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const M=~r.index;(function e_(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(C)!=M&&C.push(M),C.push(a,l,w)}}function up(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function td(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function nm(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;ji(r)&&(s[""]=n)}}function rm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function im(n,r,s,a,l){n.data[a]=l;const g=l.factory||(l.factory=ai(l.type)),w=new Bs(g,ji(l),null);n.blueprint[a]=w,s[a]=w,ap(n,r,0,a,pc(n,s,l.hostVars,cr),l)}function r_(n,r,s){const a=Je(r,n),l=Lh(s),g=n[10],w=Pu(n,fc(n,l,null,s.onPush?64:16,a,r,g,g.createRenderer(a,s),null,null));n[r.index]=w}function Xu(n,r,s,a,l,g){const w=Je(n,r);!function cp(n,r,s,a,l,g,w){if(null==g)Mn(n)?n.removeAttribute(r,l,s):r.removeAttribute(l);else{const C=null==w?Ze(g):w(g,a||"",l);Mn(n)?n.setAttribute(r,l,C,s):s?r.setAttributeNS(s,l,C):r.setAttribute(l,C)}}(r[11],w,g,n.value,s,a,l)}function Od(n,r,s,a,l,g){const w=g[r];if(null!==w){const C=a.setInput;for(let M=0;M<w.length;){const $=w[M++],Q=w[M++],ue=w[M++];null!==C?a.setInput(s,ue,$,Q):s[Q]=ue}}}function dp(n,r){let s=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;n.hasOwnProperty(l)&&(null===s&&(s=[]),s.push(l,n[l],r[a+1])),a+=2}else a+=2;else a+=4}return s}function $h(n,r,s,a){return new Array(n,!0,!1,r,null,0,a,s,null,null)}function hp(n,r){const s=fn(r,n);if(dr(s)){const a=s[1];80&s[2]?ed(a,s,a.template,s[8]):s[5]>0&&Gh(s)}}function Gh(n){for(let a=ta(n);null!==a;a=Ol(a))for(let l=10;l<a.length;l++){const g=a[l];if(1024&g[2]){const w=g[1];ed(w,g,w.template,g[8])}else g[5]>0&&Gh(g)}const s=n[1].components;if(null!==s)for(let a=0;a<s.length;a++){const l=fn(s[a],n);dr(l)&&l[5]>0&&Gh(l)}}function fp(n,r){const s=fn(r,n),a=s[1];(function pp(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Xc(a,s,s[8])}function Pu(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function qh(n){for(;n;){n[2]|=64;const r=vn(n);if($i(n)&&!r)return n;n=r}return null}function zh(n){!function Ld(n){for(let r=0;r<n.components.length;r++){const s=n.components[r],a=Nc(s),l=a[1];np(l,a,l.template,s)}}(n[8])}function nd(n,r,s){Ya(0),r(n,s)}const am=(()=>Promise.resolve(null))();function gc(n){return n[7]||(n[7]=[])}function Wh(n){return n.cleanup||(n.cleanup=[])}function lm(n,r){const s=n[9],a=s?s.get(oc,null):null;a&&a.handleError(r)}function mp(n,r,s,a,l){for(let g=0;g<s.length;){const w=s[g++],C=s[g++],M=r[w],$=n.data[w];null!==$.setInput?$.setInput(M,l,a,C):M[C]=l}}function el(n,r,s){const a=Ke(r,n);!function Uc(n,r,s){Mn(n)?n.setValue(r,s):r.textContent=s}(n[11],a,s)}function Zh(n,r,s){let a=s?n.styles:null,l=s?n.classes:null,g=0;if(null!==r)for(let w=0;w<r.length;w++){const C=r[w];"number"==typeof C?g=C:1==g?l=_e(l,C):2==g&&(a=_e(a,C+": "+r[++w]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=l:n.classesWithoutHost=l}const _p=new Pi("INJECTOR",-1);class Kh{get(r,s=$a){if(s===$a){const a=new Error(`NullInjectorError: No provider for ${Ae(r)}!`);throw a.name="NullInjectorError",a}return s}}const vp=new Pi("Set Injector scope."),mc={},dm={};let Vd;function Yh(){return void 0===Vd&&(Vd=new Kh),Vd}function Qh(n,r=null,s=null,a){const l=yc(n,r,s,a);return l._resolveInjectorDefTypes(),l}function yc(n,r=null,s=null,a){return new Ul(n,s,r||Yh(),a)}class Ul{constructor(r,s,a,l=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];s&&_s(s,C=>this.processProvider(C,r,s)),_s([r],C=>this.processInjectorType(C,[],g)),this.records.set(_p,Ou(void 0,this));const w=this.records.get(vp);this.scope=null!=w?w.value:null,this.source=l||("object"==typeof r?null:Ae(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=$a,a=en.Default){this.assertNotDestroyed();const l=Dt(this),g=wn(void 0);try{if(!(a&en.SkipSelf)){let C=this.records.get(r);if(void 0===C){const M=function u_(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pi}(r)&&qt(r);C=M&&this.injectableDefInScope(M)?Ou(Ud(r),mc):null,this.records.set(r,C)}if(null!=C)return this.hydrate(r,C)}return(a&en.Self?Yh():this.parent).get(r,s=a&en.Optional&&s===$a?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[Ha]=w[Ha]||[]).unshift(Ae(r)),l)throw w;return function Xo(n,r,s,a){const l=n[Ha];throw r[oe]&&l.unshift(r[oe]),n.message=function Ar(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let l=Ae(r);if(Array.isArray(r))l=r.map(Ae).join(" -> ");else if("object"==typeof r){let g=[];for(let w in r)if(r.hasOwnProperty(w)){let C=r[w];g.push(w+":"+("string"==typeof C?JSON.stringify(C):Ae(C)))}l=`{${g.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${n.replace(L,"\n  ")}`}("\n"+n.message,l,s,a),n.ngTokenPath=l,n[Ha]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{wn(g),Dt(l)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,l)=>r.push(Ae(l))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new lt(205,!1)}processInjectorType(r,s,a){if(!(r=be(r)))return!1;let l=Yn(r);const g=null==l&&r.ngModule||void 0,w=void 0===g?r:g,C=-1!==a.indexOf(w);if(void 0!==g&&(l=Yn(g)),null==l)return!1;if(null!=l.imports&&!C){let Q;a.push(w);try{_s(l.imports,ue=>{this.processInjectorType(ue,s,a)&&(void 0===Q&&(Q=[]),Q.push(ue))})}finally{}if(void 0!==Q)for(let ue=0;ue<Q.length;ue++){const{ngModule:Se,providers:Ge}=Q[ue];_s(Ge,pt=>this.processProvider(pt,Se,Ge||pe))}}this.injectorDefTypes.add(w);const M=ai(w)||(()=>new w);this.records.set(w,Ou(M,mc));const $=l.providers;if(null!=$&&!C){const Q=r;_s($,ue=>this.processProvider(ue,Q,$))}return void 0!==g&&void 0!==r.providers}processProvider(r,s,a){let l=Bl(r=be(r))?r:be(r&&r.provide);const g=function id(n,r,s){return hm(n)?Ou(void 0,n.useValue):Ou(Ep(n),mc)}(r);if(Bl(r)||!0!==r.multi)this.records.get(l);else{let w=this.records.get(l);w||(w=Ou(void 0,mc,!0),w.factory=()=>Rn(w.multi),this.records.set(l,w)),l=r,w.multi.push(r)}this.records.set(l,g)}hydrate(r,s){return s.value===mc&&(s.value=dm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function a_(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=be(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function Ud(n){const r=qt(n),s=null!==r?r.factory:ai(n);if(null!==s)return s;if(n instanceof Pi)throw new lt(204,!1);if(n instanceof Function)return function rd(n){const r=n.length;if(r>0)throw function js(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}(r,"?"),new lt(204,!1);const s=function En(n){const r=n&&(n[Qn]||n[Dr]);if(r){const s=function fr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new lt(204,!1)}function Ep(n,r,s){let a;if(Bl(n)){const l=be(n);return ai(l)||Ud(l)}if(hm(n))a=()=>be(n.useValue);else if(function wp(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Rn(n.deps||[]));else if(function o_(n){return!(!n||!n.useExisting)}(n))a=()=>dn(be(n.useExisting));else{const l=be(n&&(n.useClass||n.provide));if(!function Ip(n){return!!n.deps}(n))return ai(l)||Ud(l);a=()=>new l(...Rn(n.deps))}return a}function Ou(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function hm(n){return null!==n&&"object"==typeof n&&Ue in n}function Bl(n){return"function"==typeof n}let mu=(()=>{class n{static create(s,a){var l;if(Array.isArray(s))return Qh({name:""},a,s,"");{const g=null!==(l=s.name)&&void 0!==l?l:"";return Qh({name:g},s.parent,s.providers,g)}}}return n.THROW_IF_NOT_FOUND=$a,n.NULL=new Kh,n.\u0275prov=je({token:n,providedIn:"any",factory:()=>dn(_p)}),n.__NG_ELEMENT_ID__=-1,n})();function Mp(n,r){Fo(Nc(n)[1],sr())}function $d(n){let r=function ef(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let l;if(ji(n))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new lt(903,"");l=r.\u0275dir}if(l){if(s){a.push(l);const w=n;w.inputs=jl(n.inputs),w.declaredInputs=jl(n.declaredInputs),w.outputs=jl(n.outputs);const C=l.hostBindings;C&&d_(n,C);const M=l.viewQuery,$=l.contentQueries;if(M&&Tm(n,M),$&&Rp(n,$),Le(n.inputs,l.inputs),Le(n.declaredInputs,l.declaredInputs),Le(n.outputs,l.outputs),ji(l)&&l.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(l.data.animation)}}const g=l.features;if(g)for(let w=0;w<g.length;w++){const C=g[w];C&&C.ngInherit&&C(n),C===$d&&(s=!1)}}r=Object.getPrototypeOf(r)}!function xp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const l=n[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Xs(l.hostAttrs,s=Xs(s,l.hostAttrs))}}(a)}function jl(n){return n===Vn?{}:n===pe?[]:n}function Tm(n,r){const s=n.viewQuery;n.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Rp(n,r){const s=n.contentQueries;n.contentQueries=s?(a,l,g)=>{r(a,l,g),s(a,l,g)}:r}function d_(n,r){const s=n.hostBindings;n.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}let tf=null;function $l(){if(!tf){const n=Wn.Symbol;if(n&&n.iterator)tf=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(tf=a)}}}return tf}function Hd(n){return!!Gd(n)&&(Array.isArray(n)||!(n instanceof Map)&&$l()in n)}function Gd(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ra(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function nf(n,r,s,a){const l=Ee();return ra(l,ko(),r)&&(Et(),Xu(mi(),l,n,r,s,a)),nf}function od(n,r,s,a){return ra(n,ko(),s)?r+Ze(s)+a:cr}function sf(n,r,s,a,l,g,w,C){const M=Ee(),$=Et(),Q=n+20,ue=$.firstCreatePass?function Rm(n,r,s,a,l,g,w,C,M){const $=r.consts,Q=ml(r,n,4,w||null,Cr($,C));op(r,s,Q,Cr($,M)),Fo(r,Q);const ue=Q.tViews=Hs(2,Q,a,l,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,$);return null!==r.queries&&(r.queries.template(r,Q),ue.queries=r.queries.embeddedTView(Q)),Q}(Q,$,M,r,s,a,l,g,w):$.data[Q];Wi(ue,!1);const Se=M[11].createComment("");jc($,M,Se,ue),$s(Se,M),Pu(M,M[Q]=$h(Se,M,Se,ue)),Mi(ue)&&rp($,M,ue),null!=w&&ip(M,ue,C)}function Yd(n,r=en.Default){const s=Ee();return null===s?dn(n,r):q(sr(),s,be(n),r)}function os(){throw new Error("invalid")}function Bm(n,r,s){const a=Ee();return ra(a,ko(),r)&&Ia(Et(),mi(),a,n,r,a[11],s,!1),Bm}function jm(n,r,s,a,l){const w=l?"class":"style";mp(n,s,r.inputs[w],w,a)}function Qd(n,r,s,a){const l=Ee(),g=Et(),w=20+n,C=l[11],M=l[w]=Bc(C,r,function ol(){return An.lFrame.currentNamespace}()),$=g.firstCreatePass?function oo(n,r,s,a,l,g,w){const C=r.consts,$=ml(r,n,2,l,Cr(C,g));return op(r,s,$,Cr(C,w)),null!==$.attrs&&Zh($,$.attrs,!1),null!==$.mergedAttrs&&Zh($,$.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,$),$}(w,g,l,0,r,s,a):g.data[w];Wi($,!0);const Q=$.mergedAttrs;null!==Q&&ha(C,M,Q);const ue=$.classes;null!==ue&&Th(C,M,ue);const Se=$.styles;return null!==Se&&qc(C,M,Se),64!=(64&$.flags)&&jc(g,l,M,$),0===function co(){return An.lFrame.elementDepthCount}()&&$s(M,l),function qo(){An.lFrame.elementDepthCount++}(),Mi($)&&(rp(g,l,$),function Fh(n,r,s){if(Es(r)){const l=r.directiveEnd;for(let g=r.directiveStart;g<l;g++){const w=n.data[g];w.contentQueries&&w.contentQueries(1,s[g],g)}}}(g,$,l)),null!==a&&ip(l,$),Qd}function hf(){let n=sr();Ys()?function aa(){An.lFrame.isParent=!1}():(n=n.parent,Wi(n,!1));const r=n;!function V(){An.lFrame.elementDepthCount--}();const s=Et();return s.firstCreatePass&&(Fo(s,n),Es(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Xa(n){return 0!=(16&n.flags)}(r)&&jm(s,r,Ee(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function fo(n){return 0!=(32&n.flags)}(r)&&jm(s,r,Ee(),r.stylesWithoutHost,!1),hf}function Kp(n,r,s,a){return Qd(n,r,s,a),hf(),Kp}function I_(){return Ee()}function Jp(n){return!!n&&"function"==typeof n.then}function Hm(n){return!!n&&"function"==typeof n.subscribe}const Xp=Hm;function Fu(n,r,s,a){const l=Ee(),g=Et(),w=sr();return function Wl(n,r,s,a,l,g,w,C){const M=Mi(a),Q=n.firstCreatePass&&Wh(n),ue=r[8],Se=gc(r);let Ge=!0;if(3&a.type||C){const tn=Je(a,r),In=C?C(tn):tn,It=Se.length,jn=C?qr=>C(k(qr[a.index])):a.index;if(Mn(s)){let qr=null;if(!C&&M&&(qr=function nl(n,r,s,a){const l=n.cleanup;if(null!=l)for(let g=0;g<l.length-1;g+=2){const w=l[g];if(w===s&&l[g+1]===a){const C=r[7],M=l[g+2];return C.length>M?C[M]:null}"string"==typeof w&&(g+=2)}return null}(n,r,l,a.index)),null!==qr)(qr.__ngLastListenerFn__||qr).__ngNextListenerFn__=g,qr.__ngLastListenerFn__=g,Ge=!1;else{g=eg(a,r,ue,g,!1);const ki=s.listen(In,l,g);Se.push(g,ki),Q&&Q.push(l,jn,It,It+1)}}else g=eg(a,r,ue,g,!0),In.addEventListener(l,g,w),Se.push(g),Q&&Q.push(l,jn,It,w)}else g=eg(a,r,ue,g,!1);const pt=a.outputs;let Gt;if(Ge&&null!==pt&&(Gt=pt[l])){const tn=Gt.length;if(tn)for(let In=0;In<tn;In+=2){const Vu=r[Gt[In]][Gt[In+1]].subscribe(g),uh=Se.length;Se.push(g,Vu),Q&&Q.push(l,a.index,uh,-(uh+1))}}}(g,l,l[11],w,n,r,!!s,a),Fu}function Jd(n,r,s,a){try{return!1!==s(a)}catch(l){return lm(n,l),!1}}function eg(n,r,s,a,l){return function g(w){if(w===Function)return a;const C=2&n.flags?fn(n.index,r):r;0==(32&r[2])&&qh(C);let M=Jd(r,0,a,w),$=g.__ngNextListenerFn__;for(;$;)M=Jd(r,0,$,w)&&M,$=$.__ngNextListenerFn__;return l&&!1===M&&(w.preventDefault(),w.returnValue=!1),M}}function Gm(n=1){return function Oa(n){return(An.lFrame.contextLView=function Io(n,r){for(;n>0;)r=r[15],n--;return r}(n,An.lFrame.contextLView))[8]}(n)}function tg(n,r,s){return vl(n,"",r,"",s),tg}function vl(n,r,s,a,l){const g=Ee(),w=od(g,r,s,a);return w!==cr&&Ia(Et(),mi(),g,n,w,g[11],l,!1),vl}function rg(n,r,s,a,l){const g=n[s+1],w=null===r;let C=a?gu(g):Qu(g),M=!1;for(;0!==C&&(!1===M||w);){const Q=n[C+1];Jm(n[C],r)&&(M=!0,n[C+1]=a?Kc(Q):Zc(Q)),C=a?gu(Q):Qu(Q)}M&&(n[s+1]=a?Zc(g):Kc(g))}function Jm(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&go(n,r)>=0}function Dc(n,r){return function Lu(n,r,s,a){const l=Ee(),g=Et(),w=function gs(n){const r=An.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);g.firstUpdatePass&&function ry(n,r,s,a){const l=n.data;if(null===l[s+1]){const g=l[Xi()],w=function ny(n,r){return r>=n.expandoStartIndex}(n,s);(function ly(n,r){return 0!=(n.flags&(r?16:32))})(g,a)&&null===r&&!w&&(r=!1),r=function iy(n,r,s,a){const l=function Pa(n){const r=An.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let g=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=th(s=sg(null,n,r,s,a),r.attrs,a),g=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==l)if(s=sg(l,n,r,s,a),null===g){let M=function M_(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Qu(a))return n[gu(a)]}(n,r,a);void 0!==M&&Array.isArray(M)&&(M=sg(null,n,r,M[1],a),M=th(M,r.attrs,a),function x_(n,r,s,a){n[gu(s?r.classBindings:r.styleBindings)]=a}(n,r,a,M))}else g=function sy(n,r,s){let a;const l=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<l;g++)a=th(a,n[g].hostAttrs,s);return th(a,r.attrs,s)}(n,r,a)}return void 0!==g&&(a?r.residualClasses=g:r.residualStyles=g),s}(l,g,r,a),function Qm(n,r,s,a,l,g){let w=g?r.classBindings:r.styleBindings,C=gu(w),M=Qu(w);n[a]=s;let Q,$=!1;if(Array.isArray(s)){const ue=s;Q=ue[1],(null===Q||go(ue,Q)>0)&&($=!0)}else Q=s;if(l)if(0!==M){const Se=gu(n[C+1]);n[a+1]=Sh(Se,C),0!==Se&&(n[Se+1]=na(n[Se+1],a)),n[C+1]=function Mh(n,r){return 131071&n|r<<17}(n[C+1],a)}else n[a+1]=Sh(C,0),0!==C&&(n[C+1]=na(n[C+1],a)),C=a;else n[a+1]=Sh(M,0),0===C?C=a:n[M+1]=na(n[M+1],a),M=a;$&&(n[a+1]=Zc(n[a+1])),rg(n,Q,a,!0),rg(n,Q,a,!1),function bc(n,r,s,a,l){const g=l?n.residualClasses:n.residualStyles;null!=g&&"string"==typeof r&&go(g,r)>=0&&(s[a+1]=Kc(s[a+1]))}(r,Q,n,a,g),w=Sh(C,M),g?r.classBindings=w:r.styleBindings=w}(l,g,r,s,w,a)}}(g,n,w,a),r!==cr&&ra(l,w,r)&&function ag(n,r,s,a,l,g,w,C){if(!(3&r.type))return;const M=n.data,$=M[C+1];hd(function Kf(n){return 1==(1&n)}($)?uy(M,r,s,l,Qu($),w):void 0)||(hd(g)||function Wc(n){return 2==(2&n)}($)&&(g=uy(M,null,s,l,C,w)),function Gc(n,r,s,a,l){const g=Mn(n);if(r)l?g?n.addClass(s,a):s.classList.add(a):g?n.removeClass(s,a):s.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:ne.DashCase;if(null==l)g?n.removeStyle(s,a,w):s.style.removeProperty(a);else{const C="string"==typeof l&&l.endsWith("!important");C&&(l=l.slice(0,-10),w|=ne.Important),g?n.setStyle(s,a,l,w):s.style.setProperty(a,l,C?"important":"")}}}(a,w,Ke(Xi(),s),l,g))}(g,g.data[Xi()],l,l[11],n,l[w+1]=function _f(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Ae(F(n)))),n}(r,s),a,w)}(n,r,null,!0),Dc}function sg(n,r,s,a,l){let g=null;const w=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<w&&(g=r[C],a=th(a,g.hostAttrs,l),g!==n);)C++;return null!==n&&(s.directiveStylingLast=C),a}function th(n,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let g=0;g<r.length;g++){const w=r[g];"number"==typeof w?l=w:l===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),yi(n,w,!!s||r[++g]))}return void 0===n?null:n}function uy(n,r,s,a,l,g){const w=null===r;let C;for(;l>0;){const M=n[l],$=Array.isArray(M),Q=$?M[1]:M,ue=null===Q;let Se=s[l+1];Se===cr&&(Se=ue?pe:void 0);let Ge=ue?Ba(Se,a):Q===a?Se:void 0;if($&&!hd(Ge)&&(Ge=Ba(M,a)),hd(Ge)&&(C=Ge,w))return C;const pt=n[l+1];l=w?gu(pt):Qu(pt)}if(null!==r){let M=g?r.residualClasses:r.residualStyles;null!=M&&(C=Ba(M,a))}return C}function hd(n){return void 0!==n}function ug(n,r=""){const s=Ee(),a=Et(),l=n+20,g=a.firstCreatePass?ml(a,l,1,r,null):a.data[l],w=s[l]=function Vc(n,r){return Mn(n)?n.createText(r):n.createTextNode(r)}(s[11],r);jc(a,s,w,g),Wi(g,!1)}function il(n){return lg("",n,""),il}function lg(n,r,s){const a=Ee(),l=od(a,n,r,s);return l!==cr&&el(a,Xi(),l),lg}const Yl=void 0;var vu=["en",[["a","p"],["AM","PM"],Yl],[["AM","PM"],Yl,Yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yl,"{1} 'at' {0}",Yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Tc(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let ao={};function wf(n){const r=function md(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=sa(r);if(s)return s;const a=r.split("-")[0];if(s=sa(a),s)return s;if("en"===a)return vu;throw new Error(`Missing locale data for the locale "${n}".`)}function gd(n){return wf(n)[Bn.PluralCase]}function sa(n){return n in ao||(ao[n]=Wn.ng&&Wn.ng.common&&Wn.ng.common.locales&&Wn.ng.common.locales[n]),ao[n]}var Bn=(()=>((Bn=Bn||{})[Bn.LocaleId=0]="LocaleId",Bn[Bn.DayPeriodsFormat=1]="DayPeriodsFormat",Bn[Bn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Bn[Bn.DaysFormat=3]="DaysFormat",Bn[Bn.DaysStandalone=4]="DaysStandalone",Bn[Bn.MonthsFormat=5]="MonthsFormat",Bn[Bn.MonthsStandalone=6]="MonthsStandalone",Bn[Bn.Eras=7]="Eras",Bn[Bn.FirstDayOfWeek=8]="FirstDayOfWeek",Bn[Bn.WeekendRange=9]="WeekendRange",Bn[Bn.DateFormat=10]="DateFormat",Bn[Bn.TimeFormat=11]="TimeFormat",Bn[Bn.DateTimeFormat=12]="DateTimeFormat",Bn[Bn.NumberSymbols=13]="NumberSymbols",Bn[Bn.NumberFormats=14]="NumberFormats",Bn[Bn.CurrencyCode=15]="CurrencyCode",Bn[Bn.CurrencySymbol=16]="CurrencySymbol",Bn[Bn.CurrencyName=17]="CurrencyName",Bn[Bn.Currencies=18]="Currencies",Bn[Bn.Directionality=19]="Directionality",Bn[Bn.PluralCase=20]="PluralCase",Bn[Bn.ExtraData=21]="ExtraData",Bn))();const sl="en-US";let q_=sl;function J_(n,r,s,a,l){if(n=be(n),Array.isArray(n))for(let g=0;g<n.length;g++)J_(n[g],r,s,a,l);else{const g=Et(),w=Ee();let C=Bl(n)?n:be(n.provide),M=Ep(n);const $=sr(),Q=1048575&$.providerIndexes,ue=$.directiveStart,Se=$.providerIndexes>>20;if(Bl(n)||!n.multi){const Ge=new Bs(M,l,Yd),pt=ev(C,r,l?Q:Q+Se,ue);-1===pt?(T(Vo($,w),g,C),X_(g,n,r.length),r.push(C),$.directiveStart++,$.directiveEnd++,l&&($.providerIndexes+=1048576),s.push(Ge),w.push(Ge)):(s[pt]=Ge,w[pt]=Ge)}else{const Ge=ev(C,r,Q+Se,ue),pt=ev(C,r,Q,Q+Se),Gt=Ge>=0&&s[Ge],tn=pt>=0&&s[pt];if(l&&!tn||!l&&!Gt){T(Vo($,w),g,C);const In=function lw(n,r,s,a,l){const g=new Bs(n,s,Yd);return g.multi=[],g.index=r,g.componentProviders=0,m0(g,l,a&&!s),g}(l?uw:aw,s.length,l,a,M);!l&&tn&&(s[pt].providerFactory=In),X_(g,n,r.length,0),r.push(C),$.directiveStart++,$.directiveEnd++,l&&($.providerIndexes+=1048576),s.push(In),w.push(In)}else X_(g,n,Ge>-1?Ge:pt,m0(s[l?pt:Ge],M,!l&&a));!l&&a&&tn&&s[pt].componentProviders++}}}function X_(n,r,s,a){const l=Bl(r),g=function bp(n){return!!n.useClass}(r);if(l||g){const M=(g?be(r.useClass):r).prototype.ngOnDestroy;if(M){const $=n.destroyHooks||(n.destroyHooks=[]);if(!l&&r.multi){const Q=$.indexOf(s);-1===Q?$.push(s,[a,M]):$[Q+1].push(a,M)}else $.push(s,M)}}}function m0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function ev(n,r,s,a){for(let l=s;l<a;l++)if(r[l]===n)return l;return-1}function aw(n,r,s,a){return tv(this.multi,[])}function uw(n,r,s,a){const l=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,C=qn(s,s[1],this.providerFactory.index,a);g=C.slice(0,w),tv(l,g);for(let M=w;M<C.length;M++)g.push(C[M])}else g=[],tv(l,g);return g}function tv(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function y0(n,r=[]){return s=>{s.providersResolver=(a,l)=>function ow(n,r,s){const a=Et();if(a.firstCreatePass){const l=ji(n);J_(s,a.data,a.blueprint,l,!0),J_(r,a.data,a.blueprint,l,!1)}}(a,l?l(n):n,r)}}class _0{}class hw{resolveComponentFactory(r){throw function dw(n){const r=Error(`No component factory found for ${Ae(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Sy=(()=>{class n{}return n.NULL=new hw,n})();function fw(){return Mf(sr(),Ee())}function Mf(n,r){return new Eg(Je(n,r))}let Eg=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=fw,n})();function pw(n){return n instanceof Eg?n.nativeElement:n}class E0{}let gw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function yw(){const n=Ee(),s=fn(sr().index,n);return function mw(n){return n[11]}(ni(s)?s:n)}(),n})(),_w=(()=>{class n{}return n.\u0275prov=je({token:n,providedIn:"root",factory:()=>null}),n})();class w0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const b0=new w0("13.3.10"),nv={};function My(n,r,s,a,l=!1){for(;null!==s;){const g=r[s.index];if(null!==g&&a.push(k(g)),Fi(g))for(let C=10;C<g.length;C++){const M=g[C],$=M[1].firstChild;null!==$&&My(M[1],M,$,a)}const w=s.type;if(8&w)My(n,r,s.child,a);else if(32&w){const C=tt(s,r);let M;for(;M=C();)a.push(M)}else if(16&w){const C=Ih(r,s);if(Array.isArray(C))a.push(...C);else{const M=vn(r[16]);My(M[1],M,C,a,!0)}}s=l?s.projectionNext:s.next}return a}class wg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return My(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Fi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(vh(r,a),po(s,a))}this._attachedToViewContainer=!1}Ag(this._lView[1],this._lView)}onDestroy(r){Yg(this._lView[1],this._lView,null,r)}markForCheck(){qh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function gp(n,r,s){const a=r[10];a.begin&&a.begin();try{ed(n,r,n.template,s)}catch(l){throw lm(r,l),l}finally{a.end&&a.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new lt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Bf(n,r){Hc(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new lt(902,"");this._appRef=r}}class vw extends wg{constructor(r){super(r),this._view=r}detectChanges(){zh(this._view)}checkNoChanges(){}get context(){return null}}class I0 extends Sy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=it(r);return new rv(s,this.ngModule)}}function D0(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class rv extends _0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function cc(n){return n.map(lc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return D0(this.componentDef.inputs)}get outputs(){return D0(this.componentDef.outputs)}create(r,s,a,l){const g=(l=l||this.ngModule)?function ww(n,r){return{get:(s,a,l)=>{const g=n.get(s,nv,l);return g!==nv||a===nv?g:r.get(s,a,l)}}}(r,l.injector):r,w=g.get(E0,O),C=g.get(_w,null),M=w.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Q=a?function Kg(n,r,s){if(Mn(n))return n.selectRootElement(r,s===Ut.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(M,a,this.componentDef.encapsulation):Bc(w.createRenderer(null,this.componentDef),$,function Ew(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}($)),ue=this.componentDef.onPush?576:528,Se=function Dm(n,r){return{components:[],scheduler:n||Lc,clean:am,playerHandler:r||null,flags:0}}(),Ge=Hs(0,null,null,1,0,null,null,null,null,null),pt=fc(null,Ge,Se,ue,null,null,w,M,C,g);let Gt,tn;wo(pt);try{const In=function Im(n,r,s,a,l,g){const w=s[1];s[20]=n;const M=ml(w,20,2,"#host",null),$=M.mergedAttrs=r.hostAttrs;null!==$&&(Zh(M,$,!0),null!==n&&(ha(l,n,$),null!==M.classes&&Th(l,n,M.classes),null!==M.styles&&qc(l,n,M.styles)));const Q=a.createRenderer(n,r),ue=fc(s,Lh(r),null,r.onPush?64:16,s[20],M,a,Q,g||null,null);return w.firstCreatePass&&(T(Vo(M,s),w,r.type),td(w,M),rm(M,s.length,1)),Pu(s,ue),s[20]=ue}(Q,this.componentDef,pt,w,M);if(Q)if(a)ha(M,Q,["ng-version",b0.full]);else{const{attrs:It,classes:jn}=function Og(n){const r=[],s=[];let a=1,l=2;for(;a<n.length;){let g=n[a];if("string"==typeof g)2===l?""!==g&&r.push(g,n[++a]):8===l&&s.push(g);else{if(!ba(l))break;l=g}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);It&&ha(M,Q,It),jn&&jn.length>0&&Th(M,Q,jn.join(" "))}if(tn=rn(Ge,20),void 0!==s){const It=tn.projection=[];for(let jn=0;jn<this.ngContentSelectors.length;jn++){const qr=s[jn];It.push(null!=qr?Array.from(qr):null)}}Gt=function Xh(n,r,s,a,l){const g=s[1],w=function tm(n,r,s){const a=sr();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),im(n,a,r,pc(n,r,1,null),s));const l=qn(r,n,a.directiveStart,a);$s(l,r);const g=Je(a,r);return g&&$s(g,r),l}(g,s,r);if(a.components.push(w),n[8]=w,l&&l.forEach(M=>M(w,r)),r.contentQueries){const M=sr();r.contentQueries(1,w,M.directiveStart)}const C=sr();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Do(C.index),ap(s[1],C,0,C.directiveStart,C.directiveEnd,r),up(r,w)),w}(In,this.componentDef,pt,Se,[Mp]),Xc(Ge,pt,null)}finally{zo()}return new Iw(this.componentType,Gt,Mf(tn,pt),pt,tn)}}class Iw extends class cw{}{constructor(r,s,a,l,g){super(),this.location=a,this._rootLView=l,this._tNode=g,this.instance=s,this.hostView=this.changeDetectorRef=new vw(l),this.componentType=r}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class xf{}class T0{}const Rf=new Map;class S0 extends xf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new I0(this);const a=Pr(r);this._bootstrapComponents=_(a.bootstrap),this._r3Injector=yc(r,s,[{provide:xf,useValue:this},{provide:Sy,useValue:this.componentFactoryResolver}],Ae(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=mu.THROW_IF_NOT_FOUND,a=en.Default){return r===mu||r===xf||r===_p?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class iv extends T0{constructor(r){super(),this.moduleType=r,null!==Pr(r)&&function Tw(n){const r=new Set;!function s(a){const l=Pr(a,!0),g=l.id;null!==g&&(function C0(n,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${n} - ${Ae(r)} vs ${Ae(r.name)}`)}(g,Rf.get(g),a),Rf.set(g,a));const w=_(l.imports);for(const C of w)r.has(C)||(r.add(C),s(C))}(n)}(r)}create(r){return new S0(this.moduleType,r)}}function M0(n,r,s){const a=function Li(){const n=An.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,l=Ee();return l[a]===cr?function tl(n,r,s){return n[r]=s}(l,a,s?r.call(s):r()):function _c(n,r){return n[r]}(l,a)}function sv(n){return r=>{setTimeout(n,void 0,r)}}const Ql=class $w extends m.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var l,g,w;let C=r,M=s||(()=>null),$=a;if(r&&"object"==typeof r){const ue=r;C=null===(l=ue.next)||void 0===l?void 0:l.bind(ue),M=null===(g=ue.error)||void 0===g?void 0:g.bind(ue),$=null===(w=ue.complete)||void 0===w?void 0:w.bind(ue)}this.__isAsync&&(M=sv(M),C&&(C=sv(C)),$&&($=sv($)));const Q=super.subscribe({next:C,error:M,complete:$});return r instanceof y.w0&&r.add(Q),Q}};function Hw(){return this._results[$l()]()}class ov{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=$l(),a=ov.prototype;a[s]||(a[s]=Hw)}get changes(){return this._changes||(this._changes=new Ql)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=ks(r);(this._changesDetected=!function ru(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],g=r[a];if(s&&(l=s(l),g=s(g)),g!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dg=(()=>{class n{}return n.__NG_ELEMENT_ID__=zw,n})();const Gw=Dg,qw=class extends Gw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=fc(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(a[19]=g.createEmbeddedView(s)),Xc(s,a,r),new wg(a)}};function zw(){return xy(sr(),Ee())}function xy(n,r){return 4&n.type?new qw(r,n,Mf(n,r)):null}let Ry=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ww,n})();function Ww(){return L0(sr(),Ee())}const Zw=Ry,k0=class extends Zw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return Mf(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){const r=A(this._hostTNode,this._hostLView);if(fa(r)){const s=eo(r,this._hostLView),a=ns(r);return new Ri(s[1].data[a+8],s)}return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=F0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const l=r.createEmbeddedView(s||{});return this.insert(l,a),l}createComponent(r,s,a,l,g){const w=r&&!function Qr(n){return"function"==typeof n}(r);let C;if(w)C=s;else{const ue=s||{};C=ue.index,a=ue.injector,l=ue.projectableNodes,g=ue.ngModuleRef}const M=w?r:new rv(it(r)),$=a||this.parentInjector;if(!g&&null==M.ngModule){const Se=(w?$:this.parentInjector).get(xf,null);Se&&(g=Se)}const Q=M.create($,l,void 0,g);return this.insert(Q.hostView,C),Q}insert(r,s){const a=r._lView,l=a[1];if(function Jt(n){return Fi(n[3])}(a)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const ue=a[3],Se=new k0(ue,ue[6],ue[3]);Se.detach(Se.indexOf(r))}}const g=this._adjustIndex(s),w=this._lContainer;!function jf(n,r,s,a){const l=10+a,g=s.length;a>0&&(s[l-1][4]=r),a<g-10?(r[4]=s[l],ju(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const w=r[17];null!==w&&s!==w&&function Ly(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(w,r);const C=r[19];null!==C&&C.insertView(n),r[2]|=128}(l,a,w,g);const C=Yu(g,w),M=a[11],$=Ku(M,w[7]);return null!==$&&function _h(n,r,s,a,l,g){a[0]=l,a[6]=r,Hc(n,a,s,1,l,g)}(l,w[6],M,a,$,C),r.attachToViewContainerRef(),ju(av(w),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=F0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=vh(this._lContainer,s);a&&(po(av(this._lContainer),s),Ag(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=vh(this._lContainer,s);return a&&null!=po(av(this._lContainer),s)?new wg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function F0(n){return n[8]}function av(n){return n[8]||(n[8]=[])}function L0(n,r){let s;const a=r[n.index];if(Fi(a))s=a;else{let l;if(8&n.type)l=k(a);else{const g=r[11];l=g.createComment("");const w=Je(n,r);Zu(g,Ku(g,w),l,function Uy(n,r){return Mn(n)?n.nextSibling(r):r.nextSibling}(g,w),!1)}r[n.index]=s=$h(a,r,l,n),Pu(r,s)}return new k0(s,n,r)}class uv{constructor(r){this.queryList=r,this.matches=null}clone(){return new uv(this.queryList)}setDirty(){this.queryList.setDirty()}}class lv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let g=0;g<a;g++){const w=s.getByIndex(g);l.push(this.queries[w.indexInDeclarationView].clone())}return new lv(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==q0(r,s).matches&&this.queries[s].setDirty()}}class V0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class cv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,g=this.getByIndex(a).embeddedTView(r,l);g&&(g.indexInDeclarationView=a,null!==s?s.push(g):s=[g])}return null!==s?new cv(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class dv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new dv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const g=a[l];this.matchTNodeWithReadOption(r,s,Qw(s,g)),this.matchTNodeWithReadOption(r,s,Kt(s,r,g,!1,!1))}else a===Dg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Kt(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===Eg||l===Ry||l===Dg&&4&s.type)this.addMatch(s.index,-2);else{const g=Kt(s,r,l,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Qw(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function Xw(n,r,s,a){return-1===s?function Jw(n,r){return 11&n.type?Mf(n,r):4&n.type?xy(n,r):null}(r,n):-2===s?function eb(n,r,s){return s===Eg?Mf(r,n):s===Dg?xy(r,n):s===Ry?L0(r,n):void 0}(n,r,a):qn(n,n[1],s,r)}function U0(n,r,s,a){const l=r[19].queries[a];if(null===l.matches){const g=n.data,w=s.matches,C=[];for(let M=0;M<w.length;M+=2){const $=w[M];C.push($<0?null:Xw(r,g[$],w[M+1],s.metadata.read))}l.matches=C}return l.matches}function hv(n,r,s,a){const l=n.queries.getByIndex(s),g=l.matches;if(null!==g){const w=U0(n,r,l,s);for(let C=0;C<g.length;C+=2){const M=g[C];if(M>0)a.push(w[C/2]);else{const $=g[C+1],Q=r[-M];for(let ue=10;ue<Q.length;ue++){const Se=Q[ue];Se[17]===Se[3]&&hv(Se[1],Se,$,a)}if(null!==Q[9]){const ue=Q[9];for(let Se=0;Se<ue.length;Se++){const Ge=ue[Se];hv(Ge[1],Ge,$,a)}}}}}return a}function B0(n){const r=Ee(),s=Et(),a=Eu();Ya(a+1);const l=q0(s,a);if(n.dirty&&Pn(r)===(2==(2&l.metadata.flags))){if(null===l.matches)n.reset([]);else{const g=l.crossesNgTemplate?hv(s,r,a,[]):U0(s,r,l,a);n.reset(g,pw),n.notifyOnChanges()}return!0}return!1}function j0(n,r,s,a){const l=Et();if(l.firstCreatePass){const g=sr();(function G0(n,r,s){null===n.queries&&(n.queries=new cv),n.queries.track(new dv(r,s))})(l,new V0(r,s,a),g.index),function rb(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(l,n),2==(2&s)&&(l.staticContentQueries=!0)}!function H0(n,r,s){const a=new ov(4==(4&s));Yg(n,r,a,a.destroy),null===r[19]&&(r[19]=new lv),r[19].queries.push(new uv(a))}(l,Ee(),s)}function $0(){return function nb(n,r){return n[19].queries[r].queryList}(Ee(),Eu())}function q0(n,r){return n.queries.getByIndex(r)}function Oy(...n){}const uE=new Pi("Application Initializer");let _v=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Oy,this.reject=Oy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const g=this.appInits[l]();if(Jp(g))s.push(g);else if(Xp(g)){const w=new Promise((C,M)=>{g.subscribe({complete:C,error:M})});s.push(w)}}Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(dn(uE,8))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lE=new Pi("AppId",{providedIn:"root",factory:function cE(){return`${vv()}${vv()}${vv()}`}});function vv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const dE=new Pi("Platform Initializer"),wb=new Pi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hE=new Pi("appBootstrapListener");let bb=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ev=new Pi("LocaleId",{providedIn:"root",factory:()=>Er(Ev,en.Optional|en.SkipSelf)||function Ib(){return"undefined"!=typeof $localize&&$localize.locale||sl}()}),Db=new Pi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Tb{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Cb=(()=>{class n{compileModuleSync(s){return new iv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),g=_(Pr(s).declarations).reduce((w,C)=>{const M=it(C);return M&&w.push(new rv(M)),w},[]);return new Tb(a,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Sb=(()=>Promise.resolve(0))();function wv(n){"undefined"==typeof Zone?Sb.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class bl{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ql(!1),this.onMicrotaskEmpty=new Ql(!1),this.onStable=new Ql(!1),this.onError=new Ql(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Mb(){let n=Wn.requestAnimationFrame,r=Wn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function Nb(n){const r=()=>{!function Rb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Iv(n),n.isCheckStableRunning=!0,bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Iv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,g,w,C)=>{try{return fE(n),s.invokeTask(l,g,w,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||n.shouldCoalesceRunChangeDetection)&&r(),pE(n)}},onInvoke:(s,a,l,g,w,C,M)=>{try{return fE(n),s.invoke(l,g,w,C,M)}finally{n.shouldCoalesceRunChangeDetection&&r(),pE(n)}},onHasTask:(s,a,l,g)=>{s.hasTask(l,g),a===l&&("microTask"==g.change?(n._hasPendingMicrotasks=g.microTask,Iv(n),bv(n)):"macroTask"==g.change&&(n.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,a,l,g)=>(s.handleError(l,g),n.runOutsideAngular(()=>n.onError.emit(g)),!1)})}(l)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+l,r,xb,Oy,Oy);try{return g.runTask(w,s,a)}finally{g.cancelTask(w)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const xb={};function bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Iv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function fE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pE(n){n._nesting--,bv(n)}class Pb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ql,this.onMicrotaskEmpty=new Ql,this.onStable=new Ql,this.onError=new Ql}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}let gE=(()=>{class n{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bl.assertNotInAngularZone(),wv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let g=-1;a&&a>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,l){return[]}}return n.\u0275fac=function(s){return new(s||n)(dn(bl))},n.\u0275prov=je({token:n,factory:n.\u0275fac}),n})(),Ob=(()=>{class n{constructor(){this._applications=new Map,Dv.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Dv.findTestabilityInTree(this,s,a)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class kb{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function Fb(n){Dv=n}let Dv=new kb,oh=null;const mE=new Pi("AllowMultipleToken"),yE=new Pi("PlatformOnDestroy");class Ub{constructor(r,s){this.name=r,this.token=s}}function _E(n,r,s=[]){const a=`Platform: ${r}`,l=new Pi(a);return(g=[])=>{let w=Tv();if(!w||w.injector.get(mE,!1)){const C=[...s,...g,{provide:l,useValue:!0}];n?n(C):function Bb(n){if(oh&&!oh.get(mE,!1))throw new lt(400,"");oh=n;const r=n.get(vE),s=n.get(dE,null);s&&s.forEach(a=>a())}(function $b(n=[],r){return mu.create({name:r,providers:[{provide:vp,useValue:"platform"},{provide:yE,useValue:()=>oh=null},...n]})}(C,a))}return function jb(n){const r=Tv();if(!r)throw new lt(401,"");return r}()}}function Tv(){var n;return null!==(n=null==oh?void 0:oh.get(vE))&&void 0!==n?n:null}let vE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const C=function Hb(n,r){let s;return s="noop"===n?new Pb:("zone.js"===n?void 0:n)||new bl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),M=[{provide:bl,useValue:C}];return C.run(()=>{const $=mu.create({providers:M,parent:this.injector,name:s.moduleType.name}),Q=s.create($),ue=Q.injector.get(oc,null);if(!ue)throw new lt(402,"");return C.runOutsideAngular(()=>{const Se=C.onError.subscribe({next:Ge=>{ue.handleError(Ge)}});Q.onDestroy(()=>{Av(this._modules,Q),Se.unsubscribe()})}),function Gb(n,r,s){try{const a=s();return Jp(a)?a.catch(l=>{throw r.runOutsideAngular(()=>n.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(ue,C,()=>{const Se=Q.injector.get(_v);return Se.runInitializers(),Se.donePromise.then(()=>(function z_(n){Yt(n,"Expected localeId to be defined"),"string"==typeof n&&(q_=n.toLowerCase().replace(/_/g,"-"))}(Q.injector.get(Ev,sl)||sl),this._moduleDoBootstrap(Q),Q))})})}bootstrapModule(s,a=[]){const l=EE({},a);return function Lb(n,r,s){const a=new iv(s);return Promise.resolve(a)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,l))}_moduleDoBootstrap(s){const a=s.injector.get(Cv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new lt(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new lt(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(yE,null);null==s||s(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(dn(mu))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function EE(n,r){return Array.isArray(r)?r.reduce(EE,n):Object.assign(Object.assign({},n),r)}let Cv=(()=>{class n{constructor(s,a,l,g){this._zone=s,this._injector=a,this._exceptionHandler=l,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new te.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),C=new te.y(M=>{let $;this._zone.runOutsideAngular(()=>{$=this._zone.onStable.subscribe(()=>{bl.assertNotInAngularZone(),wv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{bl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{$.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,Ne.T)(w,C.pipe((0,Me.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new lt(405,"");let l;l=s instanceof _0?s:this._injector.get(Sy).resolveComponentFactory(s),this.componentTypes.push(l.componentType);const g=function Vb(n){return n.isBoundToModule}(l)?void 0:this._injector.get(xf),C=l.create(mu.NULL,[],a||l.selector,g),M=C.location.nativeElement,$=C.injector.get(gE,null),Q=$&&C.injector.get(Ob);return $&&Q&&Q.registerApplication(M,$),C.onDestroy(()=>{this.detachView(C.hostView),Av(this.components,C),Q&&Q.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new lt(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Av(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(hE,[]).concat(this._bootstrapListeners).forEach(l=>l(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(s){return new(s||n)(dn(bl),dn(mu),dn(oc),dn(_v))},n.\u0275prov=je({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let bE=!0,IE=!1;function zb(){return IE=!0,bE}function Wb(){if(IE)throw new Error("Cannot enable prod mode after platform setup.");bE=!1}let Zb=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kb,n})();function Kb(n){return function Yb(n,r,s){if(xs(n)&&!s){const a=fn(n.index,r);return new wg(a,a)}return 47&n.type?new wg(r[16],r):null}(sr(),Ee(),16==(16&n))}class AE{constructor(){}supports(r){return Hd(r)}create(r){return new nI(r)}}const tI=(n,r)=>r;class nI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||tI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,g=null;for(;s||a;){const w=!a||s&&s.currentIndex<ME(a,l,g)?s:a,C=ME(w,l,g),M=w.currentIndex;if(w===a)l--,a=a._nextRemoved;else if(s=s._next,null==w.previousIndex)l++;else{g||(g=[]);const $=C-l,Q=M-l;if($!=Q){for(let Se=0;Se<$;Se++){const Ge=Se<g.length?g[Se]:g[Se]=0,pt=Ge+Se;Q<=pt&&pt<$&&(g[Se]=Ge+1)}g[w.previousIndex]=Q-$}}C!==M&&r(w,C,M)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Hd(r))throw new lt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,g,w,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)g=r[C],w=this._trackByFn(C,g),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,g,w,C)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,w,C),a=!0),s=s._next}else l=0,function f_(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[$l()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{w=this._trackByFn(l,C),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,C,w,l)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,w,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,l)):r=this._addAfter(new rI(s,a),g,l),r}_verifyReinsertion(r,s,a,l){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==g?r=this._reinsertAfter(g,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,g=r._nextRemoved;return null===l?this._removalsHead=g:l._nextRemoved=g,null===g?this._removalsTail=l:g._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new SE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new SE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class rI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class SE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new iI,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ME(n,r,s){const a=n.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class xE{constructor(){}supports(r){return r instanceof Map||Gd(r)}create(){return new sI}}class sI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Gd(r)))throw new lt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const g=l._prev,w=l._next;return g&&(g._next=w),w&&(w._prev=g),l._next=null,l._prev=null,l}const a=new oI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class oI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function RE(){return new Nv([new AE])}let Nv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||RE()),deps:[[n,new Ga,new yo]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new lt(901,"")}}return n.\u0275prov=je({token:n,providedIn:"root",factory:RE}),n})();function NE(){return new Pv([new xE])}let Pv=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||NE()),deps:[[n,new Ga,new yo]]}}find(s){const a=this.factories.find(g=>g.supports(s));if(a)return a;throw new lt(901,"")}}return n.\u0275prov=je({token:n,providedIn:"root",factory:NE}),n})();const lI=_E(null,"core",[]);let cI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(dn(Cv))},n.\u0275mod=_r({type:n}),n.\u0275inj=Mt({}),n})()},2382:(Ot,$e,B)=>{B.d($e,{Fj:()=>he,qu:()=>co,NI:()=>Lr,u:()=>Ji,sg:()=>hs,JJ:()=>Nr,JL:()=>si,wV:()=>Ie,_:()=>Jn,UX:()=>xi,Q7:()=>ee,kI:()=>Qe,_Y:()=>Ls});var m=B(5e3),y=B(9808),te=B(8306),Ne=B(4742),Me=B(8421),Te=B(7669),Le=B(5403),Ae=B(3268),_e=B(1810),ie=B(8996),be=B(4004);let mt=(()=>{class V{constructor(R,X){this._renderer=R,this._elementRef=X,this.onChange=Ee=>{},this.onTouched=()=>{}}setProperty(R,X){this._renderer.setProperty(this._elementRef.nativeElement,R,X)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(m.Qsj),m.Y36(m.SBq))},V.\u0275dir=m.lG2({type:V}),V})(),Be=(()=>{class V extends mt{}return V.\u0275fac=function(){let P;return function(X){return(P||(P=m.n5z(V)))(X||V)}}(),V.\u0275dir=m.lG2({type:V,features:[m.qOj]}),V})();const lt=new m.OlP("NgValueAccessor"),at={provide:lt,useExisting:(0,m.Gpc)(()=>he),multi:!0},Nt=new m.OlP("CompositionEventMode");let he=(()=>{class V extends mt{constructor(R,X,Ee){super(R,X),this._compositionMode=Ee,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function At(){const V=(0,y.q)()?(0,y.q)().getUserAgent():"";return/android (\d+)/.test(V.toLowerCase())}())}writeValue(R){this.setProperty("value",null==R?"":R)}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Nt,8))},V.\u0275dir=m.lG2({type:V,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(R,X){1&R&&m.NdJ("input",function(Et){return X._handleInput(Et.target.value)})("blur",function(){return X.onTouched()})("compositionstart",function(){return X._compositionStart()})("compositionend",function(Et){return X._compositionEnd(Et.target.value)})},features:[m._Bn([at]),m.qOj]}),V})();function Xe(V){return null==V||0===V.length}function ut(V){return null!=V&&"number"==typeof V.length}const We=new m.OlP("NgValidators"),st=new m.OlP("NgAsyncValidators"),we=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qe{static min(P){return function se(V){return P=>{if(Xe(P.value)||Xe(V))return null;const R=parseFloat(P.value);return!isNaN(R)&&R<V?{min:{min:V,actual:P.value}}:null}}(P)}static max(P){return function Re(V){return P=>{if(Xe(P.value)||Xe(V))return null;const R=parseFloat(P.value);return!isNaN(R)&&R>V?{max:{max:V,actual:P.value}}:null}}(P)}static required(P){return fe(P)}static requiredTrue(P){return function ze(V){return!0===V.value?null:{required:!0}}(P)}static email(P){return function He(V){return Xe(V.value)||we.test(V.value)?null:{email:!0}}(P)}static minLength(P){return function vt(V){return P=>Xe(P.value)||!ut(P.value)?null:P.value.length<V?{minlength:{requiredLength:V,actualLength:P.value.length}}:null}(P)}static maxLength(P){return function St(V){return P=>ut(P.value)&&P.value.length>V?{maxlength:{requiredLength:V,actualLength:P.value.length}}:null}(P)}static pattern(P){return function Xt(V){if(!V)return Yt;let P,R;return"string"==typeof V?(R="","^"!==V.charAt(0)&&(R+="^"),R+=V,"$"!==V.charAt(V.length-1)&&(R+="$"),P=new RegExp(R)):(R=V.toString(),P=V),X=>{if(Xe(X.value))return null;const Ee=X.value;return P.test(Ee)?null:{pattern:{requiredPattern:R,actualValue:Ee}}}}(P)}static nullValidator(P){return null}static compose(P){return Mt(P)}static composeAsync(P){return Cn(P)}}function fe(V){return Xe(V.value)?{required:!0}:null}function Yt(V){return null}function ht(V){return null!=V}function pn(V){const P=(0,m.QGY)(V)?(0,ie.D)(V):V;return(0,m.CqO)(P),P}function nn(V){let P={};return V.forEach(R=>{P=null!=R?Object.assign(Object.assign({},P),R):P}),0===Object.keys(P).length?null:P}function yt(V,P){return P.map(R=>R(V))}function gt(V){return V.map(P=>function je(V){return!V.validate}(P)?P:R=>P.validate(R))}function Mt(V){if(!V)return null;const P=V.filter(ht);return 0==P.length?null:function(R){return nn(yt(R,P))}}function qt(V){return null!=V?Mt(gt(V)):null}function Cn(V){if(!V)return null;const P=V.filter(ht);return 0==P.length?null:function(R){return function le(...V){const P=(0,Te.jO)(V),{args:R,keys:X}=(0,Ne.D)(V),Ee=new te.y(Et=>{const{length:ar}=R;if(!ar)return void Et.complete();const sr=new Array(ar);let zi=ar,ws=ar;for(let Wi=0;Wi<ar;Wi++){let Ys=!1;(0,Me.Xf)(R[Wi]).subscribe((0,Le.x)(Et,aa=>{Ys||(Ys=!0,ws--),sr[Wi]=aa},()=>zi--,void 0,()=>{(!zi||!Ys)&&(ws||Et.next(X?(0,_e.n)(X,sr):sr),Et.complete())}))}});return P?Ee.pipe((0,Ae.Z)(P)):Ee}(yt(R,P).map(pn)).pipe((0,be.U)(nn))}}function En(V){return null!=V?Cn(gt(V)):null}function fr(V,P){return null===V?[P]:Array.isArray(V)?[...V,P]:[V,P]}function Yn(V){return V._rawValidators}function Qn(V){return V._rawAsyncValidators}function br(V){return V?Array.isArray(V)?V:[V]:[]}function Dr(V,P){return Array.isArray(V)?V.includes(P):V===P}function zn(V,P){const R=br(P);return br(V).forEach(Ee=>{Dr(R,Ee)||R.push(Ee)}),R}function en(V,P){return br(P).filter(R=>!Dr(V,R))}class mn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=qt(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=En(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,R){return!!this.control&&this.control.hasError(P,R)}getError(P,R){return this.control?this.control.getError(P,R):null}}class _n extends mn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wn extends mn{get formDirective(){return null}get path(){return null}}class hi{constructor(P){this._cd=P}is(P){var R,X,Ee;return"submitted"===P?!!(null===(R=this._cd)||void 0===R?void 0:R.submitted):!!(null===(Ee=null===(X=this._cd)||void 0===X?void 0:X.control)||void 0===Ee?void 0:Ee[P])}}let Nr=(()=>{class V extends hi{constructor(R){super(R)}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(_n,2))},V.\u0275dir=m.lG2({type:V,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(R,X){2&R&&m.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))},features:[m.qOj]}),V})(),si=(()=>{class V extends hi{constructor(R){super(R)}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(wn,10))},V.\u0275dir=m.lG2({type:V,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(R,X){2&R&&m.ekj("ng-untouched",X.is("untouched"))("ng-touched",X.is("touched"))("ng-pristine",X.is("pristine"))("ng-dirty",X.is("dirty"))("ng-valid",X.is("valid"))("ng-invalid",X.is("invalid"))("ng-pending",X.is("pending"))("ng-submitted",X.is("submitted"))},features:[m.qOj]}),V})();function Lt(V,P){hn(V,P),P.valueAccessor.writeValue(V.value),function _r(V,P){P.valueAccessor.registerOnChange(R=>{V._pendingValue=R,V._pendingChange=!0,V._pendingDirty=!0,"change"===V.updateOn&&jr(V,P)})}(V,P),function wi(V,P){const R=(X,Ee)=>{P.valueAccessor.writeValue(X),Ee&&P.viewToModelUpdate(X)};V.registerOnChange(R),P._registerOnDestroy(()=>{V._unregisterOnChange(R)})}(V,P),function Ei(V,P){P.valueAccessor.registerOnTouched(()=>{V._pendingTouched=!0,"blur"===V.updateOn&&V._pendingChange&&jr(V,P),"submit"!==V.updateOn&&V.markAsTouched()})}(V,P),function yr(V,P){if(P.valueAccessor.setDisabledState){const R=X=>{P.valueAccessor.setDisabledState(X)};V.registerOnDisabledChange(R),P._registerOnDestroy(()=>{V._unregisterOnDisabledChange(R)})}}(V,P)}function Bt(V,P,R=!0){const X=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(X),P.valueAccessor.registerOnTouched(X)),nr(V,P),V&&(P._invokeOnDestroyCallbacks(),V._registerOnCollectionChange(()=>{}))}function on(V,P){V.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange(P)})}function hn(V,P){const R=Yn(V);null!==P.validator?V.setValidators(fr(R,P.validator)):"function"==typeof R&&V.setValidators([R]);const X=Qn(V);null!==P.asyncValidator?V.setAsyncValidators(fr(X,P.asyncValidator)):"function"==typeof X&&V.setAsyncValidators([X]);const Ee=()=>V.updateValueAndValidity();on(P._rawValidators,Ee),on(P._rawAsyncValidators,Ee)}function nr(V,P){let R=!1;if(null!==V){if(null!==P.validator){const Ee=Yn(V);if(Array.isArray(Ee)&&Ee.length>0){const Et=Ee.filter(ar=>ar!==P.validator);Et.length!==Ee.length&&(R=!0,V.setValidators(Et))}}if(null!==P.asyncValidator){const Ee=Qn(V);if(Array.isArray(Ee)&&Ee.length>0){const Et=Ee.filter(ar=>ar!==P.asyncValidator);Et.length!==Ee.length&&(R=!0,V.setAsyncValidators(Et))}}}const X=()=>{};return on(P._rawValidators,X),on(P._rawAsyncValidators,X),R}function jr(V,P){V._pendingDirty&&V.markAsDirty(),V.setValue(V._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(V._pendingValue),V._pendingChange=!1}function Or(V,P){const R=V.indexOf(P);R>-1&&V.splice(R,1)}const Pt="VALID",kt="INVALID",yn="PENDING",xr="DISABLED";function $n(V){return(Tr(V)?V.validators:V)||null}function gi(V){return Array.isArray(V)?qt(V):V||null}function rr(V,P){return(Tr(P)?P.asyncValidators:V)||null}function ti(V){return Array.isArray(V)?En(V):V||null}function Tr(V){return null!=V&&!Array.isArray(V)&&"object"==typeof V}const Sn=V=>V instanceof Lr,Si=V=>V instanceof ir,Zr=V=>V instanceof or;function cs(V){return Sn(V)?V.value:V.getRawValue()}function Ii(V,P){const R=Si(V),X=V.controls;if(!(R?Object.keys(X):X).length)throw new m.vHH(1e3,"");if(!X[P])throw new m.vHH(1001,"")}function Ur(V,P){Si(V),V._forEachChild((X,Ee)=>{if(void 0===P[Ee])throw new m.vHH(1002,"")})}class Fr{constructor(P,R){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=R,this._composedValidatorFn=gi(this._rawValidators),this._composedAsyncValidatorFn=ti(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Pt}get invalid(){return this.status===kt}get pending(){return this.status==yn}get disabled(){return this.status===xr}get enabled(){return this.status!==xr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=gi(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=ti(P)}addValidators(P){this.setValidators(zn(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(zn(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(en(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(en(P,this._rawAsyncValidators))}hasValidator(P){return Dr(this._rawValidators,P)}hasAsyncValidator(P){return Dr(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(R=>{R.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(R=>{R.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=yn,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const R=this._parentMarkedDirty(P.onlySelf);this.status=xr,this.errors=null,this._forEachChild(X=>{X.disable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:R})),this._onDisabledChange.forEach(X=>X(!0))}enable(P={}){const R=this._parentMarkedDirty(P.onlySelf);this.status=Pt,this._forEachChild(X=>{X.enable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:R})),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pt||this.status===yn)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xr:Pt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=yn,this._hasOwnPendingAsyncValidator=!0;const R=pn(this.asyncValidator(this));this._asyncValidationSubscription=R.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,R={}){this.errors=P,this._updateControlsErrors(!1!==R.emitEvent)}get(P){return function bi(V,P,R){if(null==P||(Array.isArray(P)||(P=P.split(R)),Array.isArray(P)&&0===P.length))return null;let X=V;return P.forEach(Ee=>{X=Si(X)?X.controls.hasOwnProperty(Ee)?X.controls[Ee]:null:Zr(X)&&X.at(Ee)||null}),X}(this,P,".")}getError(P,R){const X=R?this.get(R):this;return X&&X.errors?X.errors[P]:null}hasError(P,R){return!!this.getError(P,R)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?xr:this.errors?kt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yn)?yn:this._anyControlsHaveStatus(kt)?kt:Pt}_anyControlsHaveStatus(P){return this._anyControls(R=>R.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_isBoxedValue(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){Tr(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Lr extends Fr{constructor(P=null,R,X){super($n(R),rr(X,R)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tr(R)&&R.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(P)?P.value:P)}setValue(P,R={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue(P,R={}){this.setValue(P,R)}reset(P=this.defaultValue,R={}){this._applyFormState(P),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){Or(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){Or(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){this._isBoxedValue(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}}class ir extends Fr{constructor(P,R,X){super($n(R),rr(X,R)),this.controls=P,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,R){return this.controls[P]?this.controls[P]:(this.controls[P]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl(P,R,X={}){this.registerControl(P,R),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(P,R={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl(P,R,X={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],R&&this.registerControl(P,R),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,R={}){Ur(this,P),Object.keys(P).forEach(X=>{Ii(this,X),this.controls[X].setValue(P[X],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(P,R={}){null!=P&&(Object.keys(P).forEach(X=>{this.controls[X]&&this.controls[X].patchValue(P[X],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(P={},R={}){this._forEachChild((X,Ee)=>{X.reset(P[Ee],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},(P,R,X)=>(P[X]=cs(R),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(R,X)=>!!X._syncPendingControls()||R);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(R=>{const X=this.controls[R];X&&P(X,R)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const R of Object.keys(this.controls)){const X=this.controls[R];if(this.contains(R)&&P(X))return!0}return!1}_reduceValue(){return this._reduceChildren({},(P,R,X)=>((R.enabled||this.disabled)&&(P[X]=R.value),P))}_reduceChildren(P,R){let X=P;return this._forEachChild((Ee,Et)=>{X=R(X,Ee,Et)}),X}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class or extends Fr{constructor(P,R,X){super($n(R),rr(X,R)),this.controls=P,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[P]}push(P,R={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}insert(P,R,X={}){this.controls.splice(P,0,R),this._registerControl(R),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(P,R={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),this.updateValueAndValidity({emitEvent:R.emitEvent})}setControl(P,R,X={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),R&&(this.controls.splice(P,0,R),this._registerControl(R)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,R={}){Ur(this,P),P.forEach((X,Ee)=>{Ii(this,Ee),this.at(Ee).setValue(X,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue(P,R={}){null!=P&&(P.forEach((X,Ee)=>{this.at(Ee)&&this.at(Ee).patchValue(X,{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset(P=[],R={}){this._forEachChild((X,Ee)=>{X.reset(P[Ee],{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R),this._updateTouched(R),this.updateValueAndValidity(R)}getRawValue(){return this.controls.map(P=>cs(P))}clear(P={}){this.controls.length<1||(this._forEachChild(R=>R._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_syncPendingControls(){let P=this.controls.reduce((R,X)=>!!X._syncPendingControls()||R,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){this.controls.forEach((R,X)=>{P(R,X)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(R=>R.enabled&&P(R))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}}let Ls=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275dir=m.lG2({type:V,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),V})();const Pe={provide:lt,useExisting:(0,m.Gpc)(()=>Ie),multi:!0};let Ie=(()=>{class V extends Be{writeValue(R){this.setProperty("value",null==R?"":R)}registerOnChange(R){this.onChange=X=>{R(""==X?null:parseFloat(X))}}}return V.\u0275fac=function(){let P;return function(X){return(P||(P=m.n5z(V)))(X||V)}}(),V.\u0275dir=m.lG2({type:V,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(R,X){1&R&&m.NdJ("input",function(Et){return X.onChange(Et.target.value)})("blur",function(){return X.onTouched()})},features:[m._Bn([Pe]),m.qOj]}),V})();const qe={provide:lt,useExisting:(0,m.Gpc)(()=>Jn),multi:!0};let xt=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=m.oAB({type:V}),V.\u0275inj=m.cJS({}),V})(),Wt=(()=>{class V{constructor(){this._accessors=[]}add(R,X){this._accessors.push([R,X])}remove(R){for(let X=this._accessors.length-1;X>=0;--X)if(this._accessors[X][1]===R)return void this._accessors.splice(X,1)}select(R){this._accessors.forEach(X=>{this._isSameGroup(X,R)&&X[1]!==R&&X[1].fireUncheck(R.value)})}_isSameGroup(R,X){return!!R[0].control&&R[0]._parent===X._control._parent&&R[1].name===X.name}}return V.\u0275fac=function(R){return new(R||V)},V.\u0275prov=m.Yz7({token:V,factory:V.\u0275fac,providedIn:xt}),V})(),Jn=(()=>{class V extends Be{constructor(R,X,Ee,Et){super(R,X),this._registry=Ee,this._injector=Et,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(_n),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(R){this._state=R===this.value,this.setProperty("checked",this._state)}registerOnChange(R){this._fn=R,this.onChange=()=>{R(this.value),this._registry.select(this)}}fireUncheck(R){this.writeValue(R)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Wt),m.Y36(m.zs3))},V.\u0275dir=m.lG2({type:V,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(R,X){1&R&&m.NdJ("change",function(){return X.onChange()})("blur",function(){return X.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[m._Bn([qe]),m.qOj]}),V})();const ds=new m.OlP("NgModelWithFormControlWarning"),qs={provide:wn,useExisting:(0,m.Gpc)(()=>hs)};let hs=(()=>{class V extends wn{constructor(R,X){super(),this.validators=R,this.asyncValidators=X,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(R),this._setAsyncValidators(X)}ngOnChanges(R){this._checkFormPresent(),R.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(nr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(R){const X=this.form.get(R.path);return Lt(X,R),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(R),X}getControl(R){return this.form.get(R.path)}removeControl(R){Bt(R.control||null,R,!1),Or(this.directives,R)}addFormGroup(R){this._setUpFormContainer(R)}removeFormGroup(R){this._cleanUpFormContainer(R)}getFormGroup(R){return this.form.get(R.path)}addFormArray(R){this._setUpFormContainer(R)}removeFormArray(R){this._cleanUpFormContainer(R)}getFormArray(R){return this.form.get(R.path)}updateModel(R,X){this.form.get(R.path).setValue(X)}onSubmit(R){return this.submitted=!0,function pi(V,P){V._syncPendingControls(),P.forEach(R=>{const X=R.control;"submit"===X.updateOn&&X._pendingChange&&(R.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(R),!1}onReset(){this.resetForm()}resetForm(R){this.form.reset(R),this.submitted=!1}_updateDomValue(){this.directives.forEach(R=>{const X=R.control,Ee=this.form.get(R.path);X!==Ee&&(Bt(X||null,R),Sn(Ee)&&(Lt(Ee,R),R.control=Ee))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(R){const X=this.form.get(R.path);(function cn(V,P){hn(V,P)})(X,R),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(R){if(this.form){const X=this.form.get(R.path);X&&function it(V,P){return nr(V,P)}(X,R)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hn(this.form,this),this._oldForm&&nr(this._oldForm,this)}_checkFormPresent(){}}return V.\u0275fac=function(R){return new(R||V)(m.Y36(We,10),m.Y36(st,10))},V.\u0275dir=m.lG2({type:V,selectors:[["","formGroup",""]],hostBindings:function(R,X){1&R&&m.NdJ("submit",function(Et){return X.onSubmit(Et)})("reset",function(){return X.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([qs]),m.qOj,m.TTD]}),V})();const Gi={provide:_n,useExisting:(0,m.Gpc)(()=>Ji)};let Ji=(()=>{class V extends _n{constructor(R,X,Ee,Et,ar){super(),this._ngModelWarningConfig=ar,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=R,this._setValidators(X),this._setAsyncValidators(Ee),this.valueAccessor=function ei(V,P){if(!P)return null;let R,X,Ee;return Array.isArray(P),P.forEach(Et=>{Et.constructor===he?R=Et:function ls(V){return Object.getPrototypeOf(V.constructor)===Be}(Et)?X=Et:Ee=Et}),Ee||X||R||null}(0,Et)}set isDisabled(R){}ngOnChanges(R){this._added||this._setUpControl(),function Ss(V,P){if(!V.hasOwnProperty("model"))return!1;const R=V.model;return!!R.isFirstChange()||!Object.is(P,R.currentValue)}(R,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}get path(){return function _t(V,P){return[...P.path,V]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return V._ngModelWarningSentOnce=!1,V.\u0275fac=function(R){return new(R||V)(m.Y36(wn,13),m.Y36(We,10),m.Y36(st,10),m.Y36(lt,10),m.Y36(ds,8))},V.\u0275dir=m.lG2({type:V,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([Gi]),m.qOj,m.TTD]}),V})(),jt=(()=>{class V{constructor(){this._validator=Yt}ngOnChanges(R){if(this.inputName in R){const X=this.normalizeInput(R[this.inputName].currentValue);this._enabled=this.enabled(X),this._validator=this._enabled?this.createValidator(X):Yt,this._onChange&&this._onChange()}}validate(R){return this._validator(R)}registerOnValidatorChange(R){this._onChange=R}enabled(R){return null!=R}}return V.\u0275fac=function(R){return new(R||V)},V.\u0275dir=m.lG2({type:V,features:[m.TTD]}),V})();const z={provide:We,useExisting:(0,m.Gpc)(()=>ee),multi:!0};let ee=(()=>{class V extends jt{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=R=>function Rt(V){return null!=V&&!1!==V&&"false"!=`${V}`}(R),this.createValidator=R=>fe}enabled(R){return R}}return V.\u0275fac=function(){let P;return function(X){return(P||(P=m.n5z(V)))(X||V)}}(),V.\u0275dir=m.lG2({type:V,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(R,X){2&R&&m.uIk("required",X._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([z]),m.qOj]}),V})(),ps=(()=>{class V{}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=m.oAB({type:V}),V.\u0275inj=m.cJS({imports:[[xt]]}),V})(),xi=(()=>{class V{static withConfig(R){return{ngModule:V,providers:[{provide:ds,useValue:R.warnOnNgModelWithFormControl}]}}}return V.\u0275fac=function(R){return new(R||V)},V.\u0275mod=m.oAB({type:V}),V.\u0275inj=m.cJS({imports:[ps]}),V})(),co=(()=>{class V{group(R,X=null){const Ee=this._reduceControls(R);let sr,Et=null,ar=null;return null!=X&&(function Ps(V){return void 0!==V.asyncValidators||void 0!==V.validators||void 0!==V.updateOn}(X)?(Et=null!=X.validators?X.validators:null,ar=null!=X.asyncValidators?X.asyncValidators:null,sr=null!=X.updateOn?X.updateOn:void 0):(Et=null!=X.validator?X.validator:null,ar=null!=X.asyncValidator?X.asyncValidator:null)),new ir(Ee,{asyncValidators:ar,updateOn:sr,validators:Et})}control(R,X,Ee){return new Lr(R,X,Ee)}array(R,X,Ee){const Et=R.map(ar=>this._createControl(ar));return new or(Et,X,Ee)}_reduceControls(R){const X={};return Object.keys(R).forEach(Ee=>{X[Ee]=this._createControl(R[Ee])}),X}_createControl(R){return Sn(R)||Si(R)||Zr(R)?R:Array.isArray(R)?this.control(R[0],R.length>1?R[1]:null,R.length>2?R[2]:null):this.control(R)}}return V.\u0275fac=function(R){return new(R||V)},V.\u0275prov=m.Yz7({token:V,factory:V.\u0275fac,providedIn:xi}),V})()},5839:(Ot,$e,B)=>{B.d($e,{F0:()=>ur,rH:()=>Qs,yS:()=>Bs,Bz:()=>fa,lC:()=>Rt});var m=B(5e3),y=B(7579);class te extends y.x{constructor(T){super(),this._value=T}get value(){return this.getValue()}_subscribe(T){const E=super._subscribe(T);return!E.closed&&T.next(this._value),E}getValue(){const{hasError:T,thrownError:E,_value:x}=this;if(T)throw E;return this._throwIfClosed(),x}next(T){super.next(this._value=T)}}var Ne=B(8306),Me=B(4742),Te=B(8996),Le=B(4671),Ae=B(3268),_e=B(7669),le=B(1810),ie=B(5403),be=B(9672);function lt(A,T,E){A?(0,be.f)(E,A,T):T()}var wt=B(576);function Ze(A,T){const E=(0,wt.m)(A)?A:()=>A,x=U=>U.error(E());return new Ne.y(T?U=>T.schedule(x,0,U):x)}var at=B(8421);function At(A){return new Ne.y(T=>{(0,at.Xf)(A()).subscribe(T)})}var Nt=B(727),he=B(4482);function Xe(){return(0,he.e)((A,T)=>{let E=null;A._refCount++;const x=(0,ie.x)(T,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(E=null);const U=A._connection,q=E;E=null,U&&(!q||U===q)&&U.unsubscribe(),T.unsubscribe()});A.subscribe(x),x.closed||(E=A.connect())})}class ut extends Ne.y{constructor(T,E){super(),this.source=T,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,he.A)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,null==T||T.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new Nt.w0;const E=this.getSubject();T.add(this.source.subscribe((0,ie.x)(E,void 0,()=>{this._teardown(),E.complete()},x=>{this._teardown(),E.error(x)},()=>this._teardown()))),T.closed&&(this._connection=null,T=Nt.w0.EMPTY)}return T}refCount(){return Xe()(this)}}var We=B(9646),st=B(6805),we=B(7272),Qe=B(515);function se(A){return(0,he.e)((T,E)=>{let q,x=null,U=!1;x=T.subscribe((0,ie.x)(E,void 0,void 0,W=>{q=(0,at.Xf)(A(W,se(A)(T))),x?(x.unsubscribe(),x=null,q.subscribe(E)):U=!0})),U&&(x.unsubscribe(),x=null,q.subscribe(E))})}var Re=B(5577);function fe(A,T){return(0,wt.m)(T)?(0,Re.z)(A,T,1):(0,Re.z)(A,1)}var ze=B(9300);function He(A){return A<=0?()=>Qe.E:(0,he.e)((T,E)=>{let x=[];T.subscribe((0,ie.x)(E,U=>{x.push(U),A<x.length&&x.shift()},()=>{for(const U of x)E.next(U);E.complete()},void 0,()=>{x=null}))})}var vt=B(8068),St=B(6590),ht=B(4004),pn=B(3900),nn=B(5698),yt=B(8675),je=B(5026),gt=B(590),Mt=B(8505),qt=B(8189),Cn=B(9808);class En{constructor(T,E){this.id=T,this.url=E}}class fr extends En{constructor(T,E,x="imperative",U=null){super(T,E),this.navigationTrigger=x,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yn extends En{constructor(T,E,x){super(T,E),this.urlAfterRedirects=x}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qn extends En{constructor(T,E,x){super(T,E),this.reason=x}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class br extends En{constructor(T,E,x){super(T,E),this.error=x}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dr extends En{constructor(T,E,x,U){super(T,E),this.urlAfterRedirects=x,this.state=U}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zn extends En{constructor(T,E,x,U){super(T,E),this.urlAfterRedirects=x,this.state=U}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class en extends En{constructor(T,E,x,U,q){super(T,E),this.urlAfterRedirects=x,this.state=U,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mn extends En{constructor(T,E,x,U){super(T,E),this.urlAfterRedirects=x,this.state=U}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _n extends En{constructor(T,E,x,U){super(T,E),this.urlAfterRedirects=x,this.state=U}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wn{constructor(T){this.route=T}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hi{constructor(T){this.route=T}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vi{constructor(T){this.snapshot=T}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ii{constructor(T){this.snapshot=T}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nr{constructor(T){this.snapshot=T}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class si{constructor(T){this.snapshot=T}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jr{constructor(T,E,x){this.routerEvent=T,this.position=E,this.anchor=x}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ut="primary";class Qt{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E[0]:E}return null}getAll(T){if(this.has(T)){const E=this.params[T];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function Zt(A){return new Qt(A)}const Sr="ngNavigationCancelingError";function Xr(A){const T=Error("NavigationCancelingError: "+A);return T[Sr]=!0,T}function Qi(A,T,E){const x=E.path.split("/");if(x.length>A.length||"full"===E.pathMatch&&(T.hasChildren()||x.length<A.length))return null;const U={};for(let q=0;q<x.length;q++){const W=x[q],re=A[q];if(W.startsWith(":"))U[W.substring(1)]=re;else if(W!==re.path)return null}return{consumed:A.slice(0,x.length),posParams:U}}function Vn(A,T){const E=A?Object.keys(A):void 0,x=T?Object.keys(T):void 0;if(!E||!x||E.length!=x.length)return!1;let U;for(let q=0;q<E.length;q++)if(U=E[q],!pe(A[U],T[U]))return!1;return!0}function pe(A,T){if(Array.isArray(A)&&Array.isArray(T)){if(A.length!==T.length)return!1;const E=[...A].sort(),x=[...T].sort();return E.every((U,q)=>x[q]===U)}return A===T}function De(A){return Array.prototype.concat.apply([],A)}function Ce(A){return A.length>0?A[A.length-1]:null}function ve(A,T){for(const E in A)A.hasOwnProperty(E)&&T(A[E],E)}function Fe(A){return(0,m.CqO)(A)?A:(0,m.QGY)(A)?(0,Te.D)(Promise.resolve(A)):(0,We.of)(A)}const Lt={exact:function hn(A,T,E){if(!$r(A.segments,T.segments)||!jr(A.segments,T.segments,E)||A.numberOfChildren!==T.numberOfChildren)return!1;for(const x in T.children)if(!A.children[x]||!hn(A.children[x],T.children[x],E))return!1;return!0},subset:_r},Bt={exact:function yr(A,T){return Vn(A,T)},subset:function nr(A,T){return Object.keys(T).length<=Object.keys(A).length&&Object.keys(T).every(E=>pe(A[E],T[E]))},ignored:()=>!0};function on(A,T,E){return Lt[E.paths](A.root,T.root,E.matrixParams)&&Bt[E.queryParams](A.queryParams,T.queryParams)&&!("exact"===E.fragment&&A.fragment!==T.fragment)}function _r(A,T,E){return Ei(A,T,T.segments,E)}function Ei(A,T,E,x){if(A.segments.length>E.length){const U=A.segments.slice(0,E.length);return!(!$r(U,E)||T.hasChildren()||!jr(U,E,x))}if(A.segments.length===E.length){if(!$r(A.segments,E)||!jr(A.segments,E,x))return!1;for(const U in T.children)if(!A.children[U]||!_r(A.children[U],T.children[U],x))return!1;return!0}{const U=E.slice(0,A.segments.length),q=E.slice(A.segments.length);return!!($r(A.segments,U)&&jr(A.segments,U,x)&&A.children[Ut])&&Ei(A.children[Ut],T,q,x)}}function jr(A,T,E){return T.every((x,U)=>Bt[E](A[U].parameters,x.parameters))}class wi{constructor(T,E,x){this.root=T,this.queryParams=E,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zt(this.queryParams)),this._queryParamMap}toString(){return ls.serialize(this)}}class cn{constructor(T,E){this.segments=T,this.children=E,this.parent=null,ve(E,(x,U)=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pi(this)}}class it{constructor(T,E){this.path=T,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=Zt(this.parameters)),this._parameterMap}toString(){return xr(this)}}function $r(A,T){return A.length===T.length&&A.every((E,x)=>E.path===T[x].path)}class fi{}class Ss{parse(T){const E=new Zr(T);return new wi(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(T){const E=`/${ei(T.root,!0)}`,x=function $n(A){const T=Object.keys(A).map(E=>{const x=A[E];return Array.isArray(x)?x.map(U=>`${Wr(E)}=${Wr(U)}`).join("&"):`${Wr(E)}=${Wr(x)}`}).filter(E=>!!E);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${E}${x}${"string"==typeof T.fragment?`#${function kr(A){return encodeURI(A)}(T.fragment)}`:""}`}}const ls=new Ss;function pi(A){return A.segments.map(T=>xr(T)).join("/")}function ei(A,T){if(!A.hasChildren())return pi(A);if(T){const E=A.children[Ut]?ei(A.children[Ut],!1):"",x=[];return ve(A.children,(U,q)=>{q!==Ut&&x.push(`${q}:${ei(U,!1)}`)}),x.length>0?`${E}(${x.join("//")})`:E}{const E=function Pr(A,T){let E=[];return ve(A.children,(x,U)=>{U===Ut&&(E=E.concat(T(x,U)))}),ve(A.children,(x,U)=>{U!==Ut&&(E=E.concat(T(x,U)))}),E}(A,(x,U)=>U===Ut?[ei(A.children[Ut],!1)]:[`${U}:${ei(x,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Ut]?`${pi(A)}/${E[0]}`:`${pi(A)}/(${E.join("//")})`}}function Or(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wr(A){return Or(A).replace(/%3B/gi,";")}function Pt(A){return Or(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kt(A){return decodeURIComponent(A)}function yn(A){return kt(A.replace(/\+/g,"%20"))}function xr(A){return`${Pt(A.path)}${function bi(A){return Object.keys(A).map(T=>`;${Pt(T)}=${Pt(A[T])}`).join("")}(A.parameters)}`}const gi=/^[^\/()?;=#]+/;function rr(A){const T=A.match(gi);return T?T[0]:""}const ti=/^[^=?&#]+/,Sn=/^[^&#]+/;class Zr{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new cn([],{}):new cn([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(T.length>0||Object.keys(E).length>0)&&(x[Ut]=new cn(T,E)),x}parseSegment(){const T=rr(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(T),new it(kt(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const E=rr(this.remaining);if(!E)return;this.capture(E);let x="";if(this.consumeOptional("=")){const U=rr(this.remaining);U&&(x=U,this.capture(x))}T[kt(E)]=kt(x)}parseQueryParam(T){const E=function Tr(A){const T=A.match(ti);return T?T[0]:""}(this.remaining);if(!E)return;this.capture(E);let x="";if(this.consumeOptional("=")){const W=function Si(A){const T=A.match(Sn);return T?T[0]:""}(this.remaining);W&&(x=W,this.capture(x))}const U=yn(E),q=yn(x);if(T.hasOwnProperty(U)){let W=T[U];Array.isArray(W)||(W=[W],T[U]=W),W.push(q)}else T[U]=q}parseParens(T){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=rr(this.remaining),U=this.remaining[x.length];if("/"!==U&&")"!==U&&";"!==U)throw new Error(`Cannot parse url '${this.url}'`);let q;x.indexOf(":")>-1?(q=x.substr(0,x.indexOf(":")),this.capture(q),this.capture(":")):T&&(q=Ut);const W=this.parseChildren();E[q]=1===Object.keys(W).length?W[Ut]:new cn([],W),this.consumeOptional("//")}return E}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new Error(`Expected "${T}".`)}}class cs{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const E=this.pathFromRoot(T);return E.length>1?E[E.length-2]:null}children(T){const E=Ii(T,this._root);return E?E.children.map(x=>x.value):[]}firstChild(T){const E=Ii(T,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(T){const E=Ur(T,this._root);return E.length<2?[]:E[E.length-2].children.map(U=>U.value).filter(U=>U!==T)}pathFromRoot(T){return Ur(T,this._root).map(E=>E.value)}}function Ii(A,T){if(A===T.value)return T;for(const E of T.children){const x=Ii(A,E);if(x)return x}return null}function Ur(A,T){if(A===T.value)return[T];for(const E of T.children){const x=Ur(A,E);if(x.length)return x.unshift(T),x}return[]}class Fr{constructor(T,E){this.value=T,this.children=E}toString(){return`TreeNode(${this.value})`}}function Lr(A){const T={};return A&&A.children.forEach(E=>T[E.value.outlet]=E),T}class ir extends cs{constructor(T,E){super(T),this.snapshot=E,Mi(this,T)}toString(){return this.snapshot.toString()}}function or(A,T){const E=function Ms(A,T){const W=new Es([],{},{},"",{},Ut,T,null,A.root,-1,{});return new xs("",new Fr(W,[]))}(A,T),x=new te([new it("",{})]),U=new te({}),q=new te({}),W=new te({}),re=new te(""),et=new Kr(x,U,W,re,q,Ut,T,E.root);return et.snapshot=E.root,new ir(new Fr(et,[]),E)}class Kr{constructor(T,E,x,U,q,W,re,et){this.url=T,this.params=E,this.queryParams=x,this.fragment=U,this.data=q,this.outlet=W,this.component=re,this._futureSnapshot=et}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(T=>Zt(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(T=>Zt(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ni(A,T="emptyOnly"){const E=A.pathFromRoot;let x=0;if("always"!==T)for(x=E.length-1;x>=1;){const U=E[x],q=E[x-1];if(U.routeConfig&&""===U.routeConfig.path)x--;else{if(q.component)break;x--}}return function Fi(A){return A.reduce((T,E)=>({params:Object.assign(Object.assign({},T.params),E.params),data:Object.assign(Object.assign({},T.data),E.data),resolve:Object.assign(Object.assign({},T.resolve),E._resolvedData)}),{params:{},data:{},resolve:{}})}(E.slice(x))}class Es{constructor(T,E,x,U,q,W,re,et,Kt,qn,an){this.url=T,this.params=E,this.queryParams=x,this.fragment=U,this.data=q,this.outlet=W,this.component=re,this.routeConfig=et,this._urlSegment=Kt,this._lastPathIndex=qn,this._resolve=an}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xs extends cs{constructor(T,E){super(E),this.url=T,Mi(this,E)}toString(){return ji(this._root)}}function Mi(A,T){T.value._routerState=A,T.children.forEach(E=>Mi(A,E))}function ji(A){const T=A.children.length>0?` { ${A.children.map(ji).join(", ")} } `:"";return`${A.value}${T}`}function $i(A){if(A.snapshot){const T=A.snapshot,E=A._futureSnapshot;A.snapshot=E,Vn(T.queryParams,E.queryParams)||A.queryParams.next(E.queryParams),T.fragment!==E.fragment&&A.fragment.next(E.fragment),Vn(T.params,E.params)||A.params.next(E.params),function zr(A,T){if(A.length!==T.length)return!1;for(let E=0;E<A.length;++E)if(!Vn(A[E],T[E]))return!1;return!0}(T.url,E.url)||A.url.next(E.url),Vn(T.data,E.data)||A.data.next(E.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Eo(A,T){const E=Vn(A.params,T.params)&&function Mr(A,T){return $r(A,T)&&A.every((E,x)=>Vn(E.parameters,T[x].parameters))}(A.url,T.url);return E&&!(!A.parent!=!T.parent)&&(!A.parent||Eo(A.parent,T.parent))}function vr(A,T,E){if(E&&A.shouldReuseRoute(T.value,E.value.snapshot)){const x=E.value;x._futureSnapshot=T.value;const U=function Hi(A,T,E){return T.children.map(x=>{for(const U of E.children)if(A.shouldReuseRoute(x.value,U.value.snapshot))return vr(A,x,U);return vr(A,x)})}(A,T,E);return new Fr(x,U)}{if(A.shouldAttach(T.value)){const q=A.retrieve(T.value);if(null!==q){const W=q.route;return W.value._futureSnapshot=T.value,W.children=T.children.map(re=>vr(A,re)),W}}const x=function Ls(A){return new Kr(new te(A.url),new te(A.params),new te(A.queryParams),new te(A.fragment),new te(A.data),A.outlet,A.component,A)}(T.value),U=T.children.map(q=>vr(A,q));return new Fr(x,U)}}function Ie(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function qe(A){return"object"==typeof A&&null!=A&&A.outlets}function ct(A,T,E,x,U){let q={};if(x&&ve(x,(re,et)=>{q[et]=Array.isArray(re)?re.map(Kt=>`${Kt}`):`${re}`}),A===T)return new wi(E,q,U);const W=xt(A,T,E);return new wi(W,q,U)}function xt(A,T,E){const x={};return ve(A.children,(U,q)=>{x[q]=U===T?E:xt(U,T,E)}),new cn(A.segments,x)}class Wt{constructor(T,E,x){if(this.isAbsolute=T,this.numberOfDoubleDots=E,this.commands=x,T&&x.length>0&&Ie(x[0]))throw new Error("Root segment cannot have matrix parameters");const U=x.find(qe);if(U&&U!==Ce(x))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Rr{constructor(T,E,x){this.segmentGroup=T,this.processChildren=E,this.index=x}}function oi(A,T,E){if(A||(A=new cn([],{})),0===A.segments.length&&A.hasChildren())return qs(A,T,E);const x=function hs(A,T,E){let x=0,U=T;const q={match:!1,pathIndex:0,commandIndex:0};for(;U<A.segments.length;){if(x>=E.length)return q;const W=A.segments[U],re=E[x];if(qe(re))break;const et=`${re}`,Kt=x<E.length-1?E[x+1]:null;if(U>0&&void 0===et)break;if(et&&Kt&&"object"==typeof Kt&&void 0===Kt.outlets){if(!ai(et,Kt,W))return q;x+=2}else{if(!ai(et,{},W))return q;x++}U++}return{match:!0,pathIndex:U,commandIndex:x}}(A,T,E),U=E.slice(x.commandIndex);if(x.match&&x.pathIndex<A.segments.length){const q=new cn(A.segments.slice(0,x.pathIndex),{});return q.children[Ut]=new cn(A.segments.slice(x.pathIndex),A.children),qs(q,0,U)}return x.match&&0===U.length?new cn(A.segments,{}):x.match&&!A.hasChildren()?Rs(A,T,E):x.match?qs(A,0,U):Rs(A,T,E)}function qs(A,T,E){if(0===E.length)return new cn(A.segments,{});{const x=function lo(A){return qe(A[0])?A[0].outlets:{[Ut]:A}}(E),U={};return ve(x,(q,W)=>{"string"==typeof q&&(q=[q]),null!==q&&(U[W]=oi(A.children[W],T,q))}),ve(A.children,(q,W)=>{void 0===x[W]&&(U[W]=q)}),new cn(A.segments,U)}}function Rs(A,T,E){const x=A.segments.slice(0,T);let U=0;for(;U<E.length;){const q=E[U];if(qe(q)){const et=zs(q.outlets);return new cn(x,et)}if(0===U&&Ie(E[0])){x.push(new it(A.segments[T].path,Ws(E[0]))),U++;continue}const W=qe(q)?q.outlets[Ut]:`${q}`,re=U<E.length-1?E[U+1]:null;W&&re&&Ie(re)?(x.push(new it(W,Ws(re))),U+=2):(x.push(new it(W,{})),U++)}return new cn(x,{})}function zs(A){const T={};return ve(A,(E,x)=>{"string"==typeof E&&(E=[E]),null!==E&&(T[x]=Rs(new cn([],{}),0,E))}),T}function Ws(A){const T={};return ve(A,(E,x)=>T[x]=`${E}`),T}function ai(A,T,E){return A==E.path&&Vn(T,E.parameters)}class Gi{constructor(T,E,x,U){this.routeReuseStrategy=T,this.futureState=E,this.currState=x,this.forwardEvent=U}activate(T){const E=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,x,T),$i(this.futureState.root),this.activateChildRoutes(E,x,T)}deactivateChildRoutes(T,E,x){const U=Lr(E);T.children.forEach(q=>{const W=q.value.outlet;this.deactivateRoutes(q,U[W],x),delete U[W]}),ve(U,(q,W)=>{this.deactivateRouteAndItsChildren(q,x)})}deactivateRoutes(T,E,x){const U=T.value,q=E?E.value:null;if(U===q)if(U.component){const W=x.getContext(U.outlet);W&&this.deactivateChildRoutes(T,E,W.children)}else this.deactivateChildRoutes(T,E,x);else q&&this.deactivateRouteAndItsChildren(E,x)}deactivateRouteAndItsChildren(T,E){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,E):this.deactivateRouteAndOutlet(T,E)}detachAndStoreRouteSubtree(T,E){const x=E.getContext(T.value.outlet),U=x&&T.value.component?x.children:E,q=Lr(T);for(const W of Object.keys(q))this.deactivateRouteAndItsChildren(q[W],U);if(x&&x.outlet){const W=x.outlet.detach(),re=x.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:W,route:T,contexts:re})}}deactivateRouteAndOutlet(T,E){const x=E.getContext(T.value.outlet),U=x&&T.value.component?x.children:E,q=Lr(T);for(const W of Object.keys(q))this.deactivateRouteAndItsChildren(q[W],U);x&&x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated(),x.attachRef=null,x.resolver=null,x.route=null)}activateChildRoutes(T,E,x){const U=Lr(E);T.children.forEach(q=>{this.activateRoutes(q,U[q.value.outlet],x),this.forwardEvent(new si(q.value.snapshot))}),T.children.length&&this.forwardEvent(new ii(T.value.snapshot))}activateRoutes(T,E,x){const U=T.value,q=E?E.value:null;if($i(U),U===q)if(U.component){const W=x.getOrCreateContext(U.outlet);this.activateChildRoutes(T,E,W.children)}else this.activateChildRoutes(T,E,x);else if(U.component){const W=x.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const re=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),W.children.onOutletReAttached(re.contexts),W.attachRef=re.componentRef,W.route=re.route.value,W.outlet&&W.outlet.attach(re.componentRef,re.route.value),$i(re.route.value),this.activateChildRoutes(T,null,W.children)}else{const re=function Ji(A){for(let T=A.parent;T;T=T.parent){const E=T.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig;if(E&&E.component)return null}return null}(U.snapshot),et=re?re.module.componentFactoryResolver:null;W.attachRef=null,W.route=U,W.resolver=et,W.outlet&&W.outlet.activateWith(U,et),this.activateChildRoutes(T,null,W.children)}}else this.activateChildRoutes(T,null,x)}}class Zs{constructor(T,E){this.routes=T,this.module=E}}function fs(A){return"function"==typeof A}function Di(A){return A instanceof wi}const ce=Symbol("INITIAL_VALUE");function me(){return(0,pn.w)(A=>function mt(...A){const T=(0,_e.yG)(A),E=(0,_e.jO)(A),{args:x,keys:U}=(0,Me.D)(A);if(0===x.length)return(0,Te.D)([],T);const q=new Ne.y(function Be(A,T,E=Le.y){return x=>{lt(T,()=>{const{length:U}=A,q=new Array(U);let W=U,re=U;for(let et=0;et<U;et++)lt(T,()=>{const Kt=(0,Te.D)(A[et],T);let qn=!1;Kt.subscribe((0,ie.x)(x,an=>{q[et]=an,qn||(qn=!0,re--),re||x.next(E(q.slice()))},()=>{--W||x.complete()}))},x)},x)}}(x,T,U?W=>(0,le.n)(U,W):Le.y));return E?q.pipe((0,Ae.Z)(E)):q}(A.map(T=>T.pipe((0,nn.q)(1),(0,yt.O)(ce)))).pipe((0,je.R)((T,E)=>{let x=!1;return E.reduce((U,q,W)=>U!==ce?U:(q===ce&&(x=!0),x||!1!==q&&W!==E.length-1&&!Di(q)?U:q),T)},ce),(0,ze.h)(T=>T!==ce),(0,ht.U)(T=>Di(T)?T:!0===T),(0,nn.q)(1)))}class Ve{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new rt,this.attachRef=null}}class rt{constructor(){this.contexts=new Map}onChildOutletCreated(T,E){const x=this.getOrCreateContext(T);x.outlet=E,this.contexts.set(T,x)}onChildOutletDestroyed(T){const E=this.getContext(T);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let E=this.getContext(T);return E||(E=new Ve,this.contexts.set(T,E)),E}getContext(T){return this.contexts.get(T)||null}}let Rt=(()=>{class A{constructor(E,x,U,q,W){this.parentContexts=E,this.location=x,this.resolver=U,this.changeDetector=W,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=q||Ut,E.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const E=this.parentContexts.getContext(this.name);E&&E.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,x){this.activated=E,this._activatedRoute=x,this.location.insert(E.hostView),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,x){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;const W=(x=x||this.resolver).resolveComponentFactory(E._futureSnapshot.routeConfig.component),re=this.parentContexts.getOrCreateContext(this.name).children,et=new Vt(E,re,this.location.injector);this.activated=this.location.createComponent(W,this.location.length,et),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(E){return new(E||A)(m.Y36(rt),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},A.\u0275dir=m.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class Vt{constructor(T,E,x){this.route=T,this.childContexts=E,this.parent=x}get(T,E){return T===Kr?this.route:T===rt?this.childContexts:this.parent.get(T,E)}}let jt=(()=>{class A{}return A.\u0275fac=function(E){return new(E||A)},A.\u0275cmp=m.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(E,x){1&E&&m._UZ(0,"router-outlet")},directives:[Rt],encapsulation:2}),A})();function Dn(A,T=""){for(let E=0;E<A.length;E++){const x=A[E];Xn(x,Mn(T,x))}}function Xn(A,T){A.children&&Dn(A.children,T)}function Mn(A,T){return T?A||T.path?A&&!T.path?`${A}/`:!A&&T.path?T.path:`${A}/${T.path}`:"":A}function O(A){const T=A.children&&A.children.map(O),E=T?Object.assign(Object.assign({},A),{children:T}):Object.assign({},A);return!E.component&&(T||E.loadChildren)&&E.outlet&&E.outlet!==Ut&&(E.component=jt),E}function z(A){return A.outlet||Ut}function k(A,T){const E=A.filter(x=>z(x)===T);return E.push(...A.filter(x=>z(x)!==T)),E}const ee={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ye(A,T,E){var x;if(""===T.path)return"full"===T.pathMatch&&(A.hasChildren()||E.length>0)?Object.assign({},ee):{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const q=(T.matcher||Qi)(E,A,T);if(!q)return Object.assign({},ee);const W={};ve(q.posParams,(et,Kt)=>{W[Kt]=et.path});const re=q.consumed.length>0?Object.assign(Object.assign({},W),q.consumed[q.consumed.length-1].parameters):W;return{matched:!0,consumedSegments:q.consumed,remainingSegments:E.slice(q.consumed.length),parameters:re,positionalParamSegments:null!==(x=q.posParams)&&void 0!==x?x:{}}}function Ke(A,T,E,x,U="corrected"){if(E.length>0&&function rn(A,T,E){return E.some(x=>fn(A,T,x)&&z(x)!==Ut)}(A,E,x)){const W=new cn(T,function Ft(A,T,E,x){const U={};U[Ut]=x,x._sourceSegment=A,x._segmentIndexShift=T.length;for(const q of E)if(""===q.path&&z(q)!==Ut){const W=new cn([],{});W._sourceSegment=A,W._segmentIndexShift=T.length,U[z(q)]=W}return U}(A,T,x,new cn(E,A.children)));return W._sourceSegment=A,W._segmentIndexShift=T.length,{segmentGroup:W,slicedSegments:[]}}if(0===E.length&&function Hn(A,T,E){return E.some(x=>fn(A,T,x))}(A,E,x)){const W=new cn(A.segments,function Je(A,T,E,x,U,q){const W={};for(const re of x)if(fn(A,E,re)&&!U[z(re)]){const et=new cn([],{});et._sourceSegment=A,et._segmentIndexShift="legacy"===q?A.segments.length:T.length,W[z(re)]=et}return Object.assign(Object.assign({},U),W)}(A,T,E,x,A.children,U));return W._sourceSegment=A,W._segmentIndexShift=T.length,{segmentGroup:W,slicedSegments:E}}const q=new cn(A.segments,A.children);return q._sourceSegment=A,q._segmentIndexShift=T.length,{segmentGroup:q,slicedSegments:E}}function fn(A,T,E){return(!(A.hasChildren()||T.length>0)||"full"!==E.pathMatch)&&""===E.path}function Pn(A,T,E,x){return!!(z(A)===x||x!==Ut&&fn(T,E,A))&&("**"===A.path||ye(T,A,E).matched)}function dr(A,T,E){return 0===T.length&&!A.children[E]}class Jt{constructor(T){this.segmentGroup=T||null}}class Cr{constructor(T){this.urlTree=T}}function qi(A){return Ze(new Jt(A))}function ps(A){return Ze(new Cr(A))}class co{constructor(T,E,x,U,q){this.configLoader=E,this.urlSerializer=x,this.urlTree=U,this.config=q,this.allowRedirects=!0,this.ngModule=T.get(m.h0i)}apply(){const T=Ke(this.urlTree.root,[],[],this.config).segmentGroup,E=new cn(T.segments,T.children);return this.expandSegmentGroup(this.ngModule,this.config,E,Ut).pipe((0,ht.U)(q=>this.createUrlTree(V(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(se(q=>{if(q instanceof Cr)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof Jt?this.noMatchError(q):q}))}match(T){return this.expandSegmentGroup(this.ngModule,this.config,T.root,Ut).pipe((0,ht.U)(U=>this.createUrlTree(V(U),T.queryParams,T.fragment))).pipe(se(U=>{throw U instanceof Jt?this.noMatchError(U):U}))}noMatchError(T){return new Error(`Cannot match any routes. URL Segment: '${T.segmentGroup}'`)}createUrlTree(T,E,x){const U=T.segments.length>0?new cn([],{[Ut]:T}):T;return new wi(U,E,x)}expandSegmentGroup(T,E,x,U){return 0===x.segments.length&&x.hasChildren()?this.expandChildren(T,E,x).pipe((0,ht.U)(q=>new cn([],q))):this.expandSegment(T,x,E,x.segments,U,!0)}expandChildren(T,E,x){const U=[];for(const q of Object.keys(x.children))"primary"===q?U.unshift(q):U.push(q);return(0,Te.D)(U).pipe(fe(q=>{const W=x.children[q],re=k(E,q);return this.expandSegmentGroup(T,re,W,q).pipe((0,ht.U)(et=>({segment:et,outlet:q})))}),(0,je.R)((q,W)=>(q[W.outlet]=W.segment,q),{}),function Xt(A,T){const E=arguments.length>=2;return x=>x.pipe(A?(0,ze.h)((U,q)=>A(U,q,x)):Le.y,He(1),E?(0,St.d)(T):(0,vt.T)(()=>new st.K))}())}expandSegment(T,E,x,U,q,W){return(0,Te.D)(x).pipe(fe(re=>this.expandSegmentAgainstRoute(T,E,x,re,U,q,W).pipe(se(Kt=>{if(Kt instanceof Jt)return(0,We.of)(null);throw Kt}))),(0,gt.P)(re=>!!re),se((re,et)=>{if(re instanceof st.K||"EmptyError"===re.name)return dr(E,U,q)?(0,We.of)(new cn([],{})):qi(E);throw re}))}expandSegmentAgainstRoute(T,E,x,U,q,W,re){return Pn(U,E,q,W)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(T,E,U,q,W):re&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,E,x,U,q,W):qi(E):qi(E)}expandSegmentAgainstRouteUsingRedirect(T,E,x,U,q,W){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,x,U,W):this.expandRegularSegmentAgainstRouteUsingRedirect(T,E,x,U,q,W)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,E,x,U){const q=this.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?ps(q):this.lineralizeSegments(x,q).pipe((0,Re.z)(W=>{const re=new cn(W,{});return this.expandSegment(T,re,E,W,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,E,x,U,q,W){const{matched:re,consumedSegments:et,remainingSegments:Kt,positionalParamSegments:qn}=ye(E,U,q);if(!re)return qi(E);const an=this.applyRedirectCommands(et,U.redirectTo,qn);return U.redirectTo.startsWith("/")?ps(an):this.lineralizeSegments(U,an).pipe((0,Re.z)(Ir=>this.expandSegment(T,E,x,Ir.concat(Kt),W,!1)))}matchSegmentAgainstRoute(T,E,x,U,q){if("**"===x.path)return x.loadChildren?(x._loadedConfig?(0,We.of)(x._loadedConfig):this.configLoader.load(T.injector,x)).pipe((0,ht.U)(an=>(x._loadedConfig=an,new cn(U,{})))):(0,We.of)(new cn(U,{}));const{matched:W,consumedSegments:re,remainingSegments:et}=ye(E,x,U);return W?this.getChildConfig(T,x,U).pipe((0,Re.z)(qn=>{const an=qn.module,Ir=qn.routes,{segmentGroup:pr,slicedSegments:Ri}=Ke(E,re,et,Ir),no=new cn(pr.segments,pr.children);if(0===Ri.length&&no.hasChildren())return this.expandChildren(an,Ir,no).pipe((0,ht.U)(ga=>new cn(re,ga)));if(0===Ir.length&&0===Ri.length)return(0,We.of)(new cn(re,{}));const Ko=z(x)===q;return this.expandSegment(an,no,Ir,Ri,Ko?Ut:q,!0).pipe((0,ht.U)(Hr=>new cn(re.concat(Hr.segments),Hr.children)))})):qi(E)}getChildConfig(T,E,x){return E.children?(0,We.of)(new Zs(E.children,T)):E.loadChildren?void 0!==E._loadedConfig?(0,We.of)(E._loadedConfig):this.runCanLoadGuards(T.injector,E,x).pipe((0,Re.z)(U=>U?this.configLoader.load(T.injector,E).pipe((0,ht.U)(q=>(E._loadedConfig=q,q))):function xi(A){return Ze(Xr(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))}(E))):(0,We.of)(new Zs([],T))}runCanLoadGuards(T,E,x){const U=E.canLoad;if(!U||0===U.length)return(0,We.of)(!0);const q=U.map(W=>{const re=T.get(W);let et;if(function Ks(A){return A&&fs(A.canLoad)}(re))et=re.canLoad(E,x);else{if(!fs(re))throw new Error("Invalid CanLoad guard");et=re(E,x)}return Fe(et)});return(0,We.of)(q).pipe(me(),(0,Mt.b)(W=>{if(!Di(W))return;const re=Xr(`Redirecting to "${this.urlSerializer.serialize(W)}"`);throw re.url=W,re}),(0,ht.U)(W=>!0===W))}lineralizeSegments(T,E){let x=[],U=E.root;for(;;){if(x=x.concat(U.segments),0===U.numberOfChildren)return(0,We.of)(x);if(U.numberOfChildren>1||!U.children[Ut])return Ze(new Error(`Only absolute redirects can have named outlets. redirectTo: '${T.redirectTo}'`));U=U.children[Ut]}}applyRedirectCommands(T,E,x){return this.applyRedirectCreatreUrlTree(E,this.urlSerializer.parse(E),T,x)}applyRedirectCreatreUrlTree(T,E,x,U){const q=this.createSegmentGroup(T,E.root,x,U);return new wi(q,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(T,E){const x={};return ve(T,(U,q)=>{if("string"==typeof U&&U.startsWith(":")){const re=U.substring(1);x[q]=E[re]}else x[q]=U}),x}createSegmentGroup(T,E,x,U){const q=this.createSegments(T,E.segments,x,U);let W={};return ve(E.children,(re,et)=>{W[et]=this.createSegmentGroup(T,re,x,U)}),new cn(q,W)}createSegments(T,E,x,U){return E.map(q=>q.path.startsWith(":")?this.findPosParam(T,q,U):this.findOrReturn(q,x))}findPosParam(T,E,x){const U=x[E.path.substring(1)];if(!U)throw new Error(`Cannot redirect to '${T}'. Cannot find '${E.path}'.`);return U}findOrReturn(T,E){let x=0;for(const U of E){if(U.path===T.path)return E.splice(x),U;x++}return T}}function V(A){const T={};for(const x of Object.keys(A.children)){const q=V(A.children[x]);(q.segments.length>0||q.hasChildren())&&(T[x]=q)}return function qo(A){if(1===A.numberOfChildren&&A.children[Ut]){const T=A.children[Ut];return new cn(A.segments.concat(T.segments),T.children)}return A}(new cn(A.segments,T))}class R{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class X{constructor(T,E){this.component=T,this.route=E}}function Ee(A,T,E){const x=A._root;return zi(x,T?T._root:null,E,[x.value])}function ar(A,T,E){const x=function sr(A){if(!A)return null;for(let T=A.parent;T;T=T.parent){const E=T.routeConfig;if(E&&E._loadedConfig)return E._loadedConfig}return null}(T);return(x?x.module.injector:E).get(A)}function zi(A,T,E,x,U={canDeactivateChecks:[],canActivateChecks:[]}){const q=Lr(T);return A.children.forEach(W=>{(function ws(A,T,E,x,U={canDeactivateChecks:[],canActivateChecks:[]}){const q=A.value,W=T?T.value:null,re=E?E.getContext(A.value.outlet):null;if(W&&q.routeConfig===W.routeConfig){const et=function Wi(A,T,E){if("function"==typeof E)return E(A,T);switch(E){case"pathParamsChange":return!$r(A.url,T.url);case"pathParamsOrQueryParamsChange":return!$r(A.url,T.url)||!Vn(A.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eo(A,T)||!Vn(A.queryParams,T.queryParams);default:return!Eo(A,T)}}(W,q,q.routeConfig.runGuardsAndResolvers);et?U.canActivateChecks.push(new R(x)):(q.data=W.data,q._resolvedData=W._resolvedData),zi(A,T,q.component?re?re.children:null:E,x,U),et&&re&&re.outlet&&re.outlet.isActivated&&U.canDeactivateChecks.push(new X(re.outlet.component,W))}else W&&Ys(T,re,U),U.canActivateChecks.push(new R(x)),zi(A,null,q.component?re?re.children:null:E,x,U)})(W,q[W.value.outlet],E,x.concat([W.value]),U),delete q[W.value.outlet]}),ve(q,(W,re)=>Ys(W,E.getContext(re),U)),U}function Ys(A,T,E){const x=Lr(A),U=A.value;ve(x,(q,W)=>{Ys(q,U.component?T?T.children.getContext(W):null:T,E)}),E.canDeactivateChecks.push(new X(U.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,U))}class ko{}function gs(A){return new Ne.y(T=>T.error(A))}class Za{constructor(T,E,x,U,q,W){this.rootComponentType=T,this.config=E,this.urlTree=x,this.url=U,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=W}recognize(){const T=Ke(this.urlTree.root,[],[],this.config.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution).segmentGroup,E=this.processSegmentGroup(this.config,T,Ut);if(null===E)return null;const x=new Es([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ut,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new Fr(x,E),q=new xs(this.url,U);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(T){const E=T.value,x=ni(E,this.paramsInheritanceStrategy);E.params=Object.freeze(x.params),E.data=Object.freeze(x.data),T.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(T,E,x){return 0===E.segments.length&&E.hasChildren()?this.processChildren(T,E):this.processSegment(T,E,E.segments,x)}processChildren(T,E){const x=[];for(const q of Object.keys(E.children)){const W=E.children[q],re=k(T,q),et=this.processSegmentGroup(re,W,q);if(null===et)return null;x.push(...et)}const U=Pa(x);return function ci(A){A.sort((T,E)=>T.value.outlet===Ut?-1:E.value.outlet===Ut?1:T.value.outlet.localeCompare(E.value.outlet))}(U),U}processSegment(T,E,x,U){for(const q of T){const W=this.processSegmentAgainstRoute(q,E,x,U);if(null!==W)return W}return dr(E,x,U)?[]:null}processSegmentAgainstRoute(T,E,x,U){if(T.redirectTo||!Pn(T,E,x,U))return null;let q,W=[],re=[];if("**"===T.path){const pr=x.length>0?Ce(x).parameters:{};q=new Es(x,pr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vs(T),z(T),T.component,T,Ya(E),la(E)+x.length,wo(T))}else{const pr=ye(E,T,x);if(!pr.matched)return null;W=pr.consumedSegments,re=pr.remainingSegments,q=new Es(W,pr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Vs(T),z(T),T.component,T,Ya(E),la(E)+W.length,wo(T))}const et=function Ka(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(T),{segmentGroup:Kt,slicedSegments:qn}=Ke(E,W,re,et.filter(pr=>void 0===pr.redirectTo),this.relativeLinkResolution);if(0===qn.length&&Kt.hasChildren()){const pr=this.processChildren(et,Kt);return null===pr?null:[new Fr(q,pr)]}if(0===et.length&&0===qn.length)return[new Fr(q,[])];const an=z(T)===U,Ir=this.processSegment(et,Kt,qn,an?Ut:U);return null===Ir?null:[new Fr(q,Ir)]}}function Na(A){const T=A.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function Pa(A){const T=[],E=new Set;for(const x of A){if(!Na(x)){T.push(x);continue}const U=T.find(q=>x.value.routeConfig===q.value.routeConfig);void 0!==U?(U.children.push(...x.children),E.add(U)):T.push(x)}for(const x of E){const U=Pa(x.children);T.push(new Fr(x.value,U))}return T.filter(x=>!E.has(x))}function Ya(A){let T=A;for(;T._sourceSegment;)T=T._sourceSegment;return T}function la(A){let T=A,E=T._segmentIndexShift?T._segmentIndexShift:0;for(;T._sourceSegment;)T=T._sourceSegment,E+=T._segmentIndexShift?T._segmentIndexShift:0;return E-1}function Vs(A){return A.data||{}}function wo(A){return A.resolve||{}}function zo(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function Io(A){return(0,pn.w)(T=>{const E=A(T);return E?(0,Te.D)(E).pipe((0,ht.U)(()=>T)):(0,We.of)(T)})}class mi extends class Do{shouldDetach(T){return!1}store(T,E){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,E){return T.routeConfig===E.routeConfig}}{}const ka=new m.OlP("ROUTES");class Wo{constructor(T,E,x,U){this.injector=T,this.compiler=E,this.onLoadStartListener=x,this.onLoadEndListener=U}load(T,E){if(E._loader$)return E._loader$;this.onLoadStartListener&&this.onLoadStartListener(E);const U=this.loadModuleFactory(E.loadChildren).pipe((0,ht.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(E);const W=q.create(T);return new Zs(De(W.injector.get(ka,void 0,m.XFs.Self|m.XFs.Optional)).map(O),W)}),se(q=>{throw E._loader$=void 0,q}));return E._loader$=new ut(U,()=>new y.x).pipe(Xe()),E._loader$}loadModuleFactory(T){return Fe(T()).pipe((0,Re.z)(E=>E instanceof m.YKP?(0,We.of)(E):(0,Te.D)(this.compiler.compileModuleAsync(E))))}}class Qa{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,E){return T}}function ol(A){throw A}function Fa(A,T,E){return T.parse("/")}function Fo(A,T){return(0,We.of)(null)}const To={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Co={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ur=(()=>{class A{constructor(E,x,U,q,W,re,et){this.rootComponentType=E,this.urlSerializer=x,this.rootContexts=U,this.location=q,this.config=et,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new y.x,this.errorHandler=ol,this.malformedUriErrorHandler=Fa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fo,afterPreactivation:Fo},this.urlHandlingStrategy=new Qa,this.routeReuseStrategy=new mi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=W.get(m.h0i),this.console=W.get(m.c2e);const an=W.get(m.R0b);this.isNgZoneEnabled=an instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(et),this.currentUrlTree=function _t(){return new wi(new cn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Wo(W,re,Ir=>this.triggerEvent(new wn(Ir)),Ir=>this.triggerEvent(new hi(Ir))),this.routerState=or(this.currentUrlTree,this.rootComponentType),this.transitions=new te({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var E;return null===(E=this.location.getState())||void 0===E?void 0:E.\u0275routerPageId}setupNavigations(E){const x=this.events;return E.pipe((0,ze.h)(U=>0!==U.id),(0,ht.U)(U=>Object.assign(Object.assign({},U),{extractedUrl:this.urlHandlingStrategy.extract(U.rawUrl)})),(0,pn.w)(U=>{let q=!1,W=!1;return(0,We.of)(U).pipe((0,Mt.b)(re=>{this.currentNavigation={id:re.id,initialUrl:re.currentRawUrl,extractedUrl:re.extractedUrl,trigger:re.source,extras:re.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,pn.w)(re=>{const et=this.browserUrlTree.toString(),Kt=!this.navigated||re.extractedUrl.toString()!==et||et!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Kt)&&this.urlHandlingStrategy.shouldProcessUrl(re.rawUrl))return Ta(re.source)&&(this.browserUrlTree=re.extractedUrl),(0,We.of)(re).pipe((0,pn.w)(an=>{const Ir=this.transitions.getValue();return x.next(new fr(an.id,this.serializeUrl(an.extractedUrl),an.source,an.restoredState)),Ir!==this.transitions.getValue()?Qe.E:Promise.resolve(an)}),function P(A,T,E,x){return(0,pn.w)(U=>function Ps(A,T,E,x,U){return new co(A,T,E,x,U).apply()}(A,T,E,U.extractedUrl,x).pipe((0,ht.U)(q=>Object.assign(Object.assign({},U),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mt.b)(an=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:an.urlAfterRedirects})}),function ca(A,T,E,x,U){return(0,Re.z)(q=>function ua(A,T,E,x,U="emptyOnly",q="legacy"){try{const W=new Za(A,T,E,x,U,q).recognize();return null===W?gs(new ko):(0,We.of)(W)}catch(W){return gs(W)}}(A,T,q.urlAfterRedirects,E(q.urlAfterRedirects),x,U).pipe((0,ht.U)(W=>Object.assign(Object.assign({},q),{targetSnapshot:W}))))}(this.rootComponentType,this.config,an=>this.serializeUrl(an),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mt.b)(an=>{if("eager"===this.urlUpdateStrategy){if(!an.extras.skipLocationChange){const pr=this.urlHandlingStrategy.merge(an.urlAfterRedirects,an.rawUrl);this.setBrowserUrl(pr,an)}this.browserUrlTree=an.urlAfterRedirects}const Ir=new Dr(an.id,this.serializeUrl(an.extractedUrl),this.serializeUrl(an.urlAfterRedirects),an.targetSnapshot);x.next(Ir)}));if(Kt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ir,extractedUrl:pr,source:Ri,restoredState:no,extras:Ko}=re,tu=new fr(Ir,this.serializeUrl(pr),Ri,no);x.next(tu);const Hr=or(pr,this.rootComponentType).snapshot;return(0,We.of)(Object.assign(Object.assign({},re),{targetSnapshot:Hr,urlAfterRedirects:pr,extras:Object.assign(Object.assign({},Ko),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=re.rawUrl,re.resolve(null),Qe.E}),Io(re=>{const{targetSnapshot:et,id:Kt,extractedUrl:qn,rawUrl:an,extras:{skipLocationChange:Ir,replaceUrl:pr}}=re;return this.hooks.beforePreactivation(et,{navigationId:Kt,appliedUrlTree:qn,rawUrlTree:an,skipLocationChange:!!Ir,replaceUrl:!!pr})}),(0,Mt.b)(re=>{const et=new zn(re.id,this.serializeUrl(re.extractedUrl),this.serializeUrl(re.urlAfterRedirects),re.targetSnapshot);this.triggerEvent(et)}),(0,ht.U)(re=>Object.assign(Object.assign({},re),{guards:Ee(re.targetSnapshot,re.currentSnapshot,this.rootContexts)})),function aa(A,T){return(0,Re.z)(E=>{const{targetSnapshot:x,currentSnapshot:U,guards:{canActivateChecks:q,canDeactivateChecks:W}}=E;return 0===W.length&&0===q.length?(0,We.of)(Object.assign(Object.assign({},E),{guardsResult:!0})):function Uu(A,T,E,x){return(0,Te.D)(A).pipe((0,Re.z)(U=>function Da(A,T,E,x,U){const q=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,We.of)(!0);const W=q.map(re=>{const et=ar(re,T,U);let Kt;if(function G(A){return A&&fs(A.canDeactivate)}(et))Kt=Fe(et.canDeactivate(A,T,E,x));else{if(!fs(et))throw new Error("Invalid CanDeactivate guard");Kt=Fe(et(A,T,E,x))}return Kt.pipe((0,gt.P)())});return(0,We.of)(W).pipe(me())}(U.component,U.route,E,T,x)),(0,gt.P)(U=>!0!==U,!0))}(W,x,U,A).pipe((0,Re.z)(re=>re&&function Go(A){return"boolean"==typeof A}(re)?function Bu(A,T,E,x){return(0,Te.D)(T).pipe(fe(U=>(0,we.z)(function ho(A,T){return null!==A&&T&&T(new vi(A)),(0,We.of)(!0)}(U.route.parent,x),function Il(A,T){return null!==A&&T&&T(new Nr(A)),(0,We.of)(!0)}(U.route,x),function bs(A,T,E){const x=T[T.length-1],q=T.slice(0,T.length-1).reverse().map(W=>function Et(A){const T=A.routeConfig?A.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:A,guards:T}:null}(W)).filter(W=>null!==W).map(W=>At(()=>{const re=W.guards.map(et=>{const Kt=ar(et,W.node,E);let qn;if(function Z(A){return A&&fs(A.canActivateChild)}(Kt))qn=Fe(Kt.canActivateChild(x,A));else{if(!fs(Kt))throw new Error("Invalid CanActivateChild guard");qn=Fe(Kt(x,A))}return qn.pipe((0,gt.P)())});return(0,We.of)(re).pipe(me())}));return(0,We.of)(q).pipe(me())}(A,U.path,E),function Li(A,T,E){const x=T.routeConfig?T.routeConfig.canActivate:null;if(!x||0===x.length)return(0,We.of)(!0);const U=x.map(q=>At(()=>{const W=ar(q,T,E);let re;if(function ui(A){return A&&fs(A.canActivate)}(W))re=Fe(W.canActivate(T,A));else{if(!fs(W))throw new Error("Invalid CanActivate guard");re=Fe(W(T,A))}return re.pipe((0,gt.P)())}));return(0,We.of)(U).pipe(me())}(A,U.route,E))),(0,gt.P)(U=>!0!==U,!0))}(x,q,A,T):(0,We.of)(re)),(0,ht.U)(re=>Object.assign(Object.assign({},E),{guardsResult:re})))})}(this.ngModule.injector,re=>this.triggerEvent(re)),(0,Mt.b)(re=>{if(Di(re.guardsResult)){const Kt=Xr(`Redirecting to "${this.serializeUrl(re.guardsResult)}"`);throw Kt.url=re.guardsResult,Kt}const et=new en(re.id,this.serializeUrl(re.extractedUrl),this.serializeUrl(re.urlAfterRedirects),re.targetSnapshot,!!re.guardsResult);this.triggerEvent(et)}),(0,ze.h)(re=>!!re.guardsResult||(this.restoreHistory(re),this.cancelNavigationTransition(re,""),!1)),Io(re=>{if(re.guards.canActivateChecks.length)return(0,We.of)(re).pipe((0,Mt.b)(et=>{const Kt=new mn(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Kt)}),(0,pn.w)(et=>{let Kt=!1;return(0,We.of)(et).pipe(function bo(A,T){return(0,Re.z)(E=>{const{targetSnapshot:x,guards:{canActivateChecks:U}}=E;if(!U.length)return(0,We.of)(E);let q=0;return(0,Te.D)(U).pipe(fe(W=>function Us(A,T,E,x){return function ms(A,T,E,x){const U=zo(A);if(0===U.length)return(0,We.of)({});const q={};return(0,Te.D)(U).pipe((0,Re.z)(W=>function Oa(A,T,E,x){const U=ar(A,T,x);return Fe(U.resolve?U.resolve(T,E):U(T,E))}(A[W],T,E,x).pipe((0,Mt.b)(re=>{q[W]=re}))),He(1),(0,Re.z)(()=>zo(q).length===U.length?(0,We.of)(q):Qe.E))}(A._resolve,A,T,x).pipe((0,ht.U)(q=>(A._resolvedData=q,A.data=Object.assign(Object.assign({},A.data),ni(A,E).resolve),null)))}(W.route,x,A,T)),(0,Mt.b)(()=>q++),He(1),(0,Re.z)(W=>q===U.length?(0,We.of)(E):Qe.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mt.b)({next:()=>Kt=!0,complete:()=>{Kt||(this.restoreHistory(et),this.cancelNavigationTransition(et,"At least one route resolver didn't emit any value."))}}))}),(0,Mt.b)(et=>{const Kt=new _n(et.id,this.serializeUrl(et.extractedUrl),this.serializeUrl(et.urlAfterRedirects),et.targetSnapshot);this.triggerEvent(Kt)}))}),Io(re=>{const{targetSnapshot:et,id:Kt,extractedUrl:qn,rawUrl:an,extras:{skipLocationChange:Ir,replaceUrl:pr}}=re;return this.hooks.afterPreactivation(et,{navigationId:Kt,appliedUrlTree:qn,rawUrlTree:an,skipLocationChange:!!Ir,replaceUrl:!!pr})}),(0,ht.U)(re=>{const et=function Oo(A,T,E){const x=vr(A,T._root,E?E._root:void 0);return new ir(x,T)}(this.routeReuseStrategy,re.targetSnapshot,re.currentRouterState);return Object.assign(Object.assign({},re),{targetRouterState:et})}),(0,Mt.b)(re=>{this.currentUrlTree=re.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(re.urlAfterRedirects,re.rawUrl),this.routerState=re.targetRouterState,"deferred"===this.urlUpdateStrategy&&(re.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,re),this.browserUrlTree=re.urlAfterRedirects)}),((A,T,E)=>(0,ht.U)(x=>(new Gi(T,x.targetRouterState,x.currentRouterState,E).activate(A),x)))(this.rootContexts,this.routeReuseStrategy,re=>this.triggerEvent(re)),(0,Mt.b)({next(){q=!0},complete(){q=!0}}),function Yt(A){return(0,he.e)((T,E)=>{try{T.subscribe(E)}finally{E.add(A)}})}(()=>{var re;q||W||this.cancelNavigationTransition(U,`Navigation ID ${U.id} is not equal to the current navigation id ${this.navigationId}`),(null===(re=this.currentNavigation)||void 0===re?void 0:re.id)===U.id&&(this.currentNavigation=null)}),se(re=>{if(W=!0,function Wn(A){return A&&A[Sr]}(re)){const et=Di(re.url);et||(this.navigated=!0,this.restoreHistory(U,!0));const Kt=new Qn(U.id,this.serializeUrl(U.extractedUrl),re.message);x.next(Kt),et?setTimeout(()=>{const qn=this.urlHandlingStrategy.merge(re.url,this.rawUrlTree),an={skipLocationChange:U.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ta(U.source)};this.scheduleNavigation(qn,"imperative",null,an,{resolve:U.resolve,reject:U.reject,promise:U.promise})},0):U.resolve(!1)}else{this.restoreHistory(U,!0);const et=new br(U.id,this.serializeUrl(U.extractedUrl),re);x.next(et);try{U.resolve(this.errorHandler(re))}catch(Kt){U.reject(Kt)}}return Qe.E}))}))}resetRootComponentType(E){this.rootComponentType=E,this.routerState.root.component=this.rootComponentType}setTransition(E){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),E))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const x="popstate"===E.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{var U;const q={replaceUrl:!0},W=(null===(U=E.state)||void 0===U?void 0:U.navigationId)?E.state:null;if(W){const et=Object.assign({},W);delete et.navigationId,delete et.\u0275routerPageId,0!==Object.keys(et).length&&(q.state=et)}const re=this.parseUrl(E.url);this.scheduleNavigation(re,x,W,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(E){this.events.next(E)}resetConfig(E){Dn(E),this.config=E.map(O),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(E,x={}){const{relativeTo:U,queryParams:q,fragment:W,queryParamsHandling:re,preserveFragment:et}=x,Kt=U||this.routerState.root,qn=et?this.currentUrlTree.fragment:W;let an=null;switch(re){case"merge":an=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":an=this.currentUrlTree.queryParams;break;default:an=q||null}return null!==an&&(an=this.removeEmptyProps(an)),function Pe(A,T,E,x,U){if(0===E.length)return ct(T.root,T.root,T.root,x,U);const q=function Jn(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Wt(!0,0,A);let T=0,E=!1;const x=A.reduce((U,q,W)=>{if("object"==typeof q&&null!=q){if(q.outlets){const re={};return ve(q.outlets,(et,Kt)=>{re[Kt]="string"==typeof et?et.split("/"):et}),[...U,{outlets:re}]}if(q.segmentPath)return[...U,q.segmentPath]}return"string"!=typeof q?[...U,q]:0===W?(q.split("/").forEach((re,et)=>{0==et&&"."===re||(0==et&&""===re?E=!0:".."===re?T++:""!=re&&U.push(re))}),U):[...U,q]},[]);return new Wt(E,T,x)}(E);if(q.toRoot())return ct(T.root,T.root,new cn([],{}),x,U);const W=function Zn(A,T,E){if(A.isAbsolute)return new Rr(T.root,!0,0);if(-1===E.snapshot._lastPathIndex){const q=E.snapshot._urlSegment;return new Rr(q,q===T.root,0)}const x=Ie(A.commands[0])?0:1;return function ds(A,T,E){let x=A,U=T,q=E;for(;q>U;){if(q-=U,x=x.parent,!x)throw new Error("Invalid number of '../'");U=x.segments.length}return new Rr(x,!1,U-q)}(E.snapshot._urlSegment,E.snapshot._lastPathIndex+x,A.numberOfDoubleDots)}(q,T,A),re=W.processChildren?qs(W.segmentGroup,W.index,q.commands):oi(W.segmentGroup,W.index,q.commands);return ct(T.root,W.segmentGroup,re,x,U)}(Kt,this.currentUrlTree,E,an,null!=qn?qn:null)}navigateByUrl(E,x={skipLocationChange:!1}){const U=Di(E)?E:this.parseUrl(E),q=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,x)}navigate(E,x={skipLocationChange:!1}){return function Ja(A){for(let T=0;T<A.length;T++){const E=A[T];if(null==E)throw new Error(`The requested path contains ${E} segment at index ${T}`)}}(E),this.navigateByUrl(this.createUrlTree(E,x),x)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let x;try{x=this.urlSerializer.parse(E)}catch(U){x=this.malformedUriErrorHandler(U,this.urlSerializer,E)}return x}isActive(E,x){let U;if(U=!0===x?Object.assign({},To):!1===x?Object.assign({},Co):x,Di(E))return on(this.currentUrlTree,E,U);const q=this.parseUrl(E);return on(this.currentUrlTree,q,U)}removeEmptyProps(E){return Object.keys(E).reduce((x,U)=>{const q=E[U];return null!=q&&(x[U]=q),x},{})}processNavigations(){this.navigations.subscribe(E=>{this.navigated=!0,this.lastSuccessfulId=E.id,this.currentPageId=E.targetPageId,this.events.next(new Yn(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,E.resolve(!0)},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)})}scheduleNavigation(E,x,U,q,W){var re,et;if(this.disposed)return Promise.resolve(!1);let Kt,qn,an;W?(Kt=W.resolve,qn=W.reject,an=W.promise):an=new Promise((Ri,no)=>{Kt=Ri,qn=no});const Ir=++this.navigationId;let pr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(U=this.location.getState()),pr=U&&U.\u0275routerPageId?U.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(re=this.browserPageId)&&void 0!==re?re:0:(null!==(et=this.browserPageId)&&void 0!==et?et:0)+1):pr=0,this.setTransition({id:Ir,targetPageId:pr,source:x,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:E,extras:q,resolve:Kt,reject:qn,promise:an,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),an.catch(Ri=>Promise.reject(Ri))}setBrowserUrl(E,x){const U=this.urlSerializer.serialize(E),q=Object.assign(Object.assign({},x.extras.state),this.generateNgRouterState(x.id,x.targetPageId));this.location.isCurrentPathEqualTo(U)||x.extras.replaceUrl?this.location.replaceState(U,"",q):this.location.go(U,"",q)}restoreHistory(E,x=!1){var U,q;if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-E.targetPageId;"popstate"!==E.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(U=this.currentNavigation)||void 0===U?void 0:U.finalUrl)||0===W?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===W&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(W)}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(E,x){const U=new Qn(E.id,this.serializeUrl(E.extractedUrl),x);this.triggerEvent(U),E.resolve(!1)}generateNgRouterState(E,x){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:x}:{navigationId:E}}}return A.\u0275fac=function(E){m.$Z()},A.\u0275prov=m.Yz7({token:A,factory:A.\u0275fac}),A})();function Ta(A){return"imperative"!==A}let Qs=(()=>{class A{constructor(E,x,U,q,W){this.router=E,this.route=x,this.tabIndexAttribute=U,this.renderer=q,this.el=W,this.commands=null,this.onChanges=new y.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(E){if(null!=this.tabIndexAttribute)return;const x=this.renderer,U=this.el.nativeElement;null!==E?x.setAttribute(U,"tabindex",E):x.removeAttribute(U,"tabindex")}ngOnChanges(E){this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const E={skipLocationChange:Vi(this.skipLocationChange),replaceUrl:Vi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,E),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vi(this.preserveFragment)})}}return A.\u0275fac=function(E){return new(E||A)(m.Y36(ur),m.Y36(Kr),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},A.\u0275dir=m.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(E,x){1&E&&m.NdJ("click",function(){return x.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),A})(),Bs=(()=>{class A{constructor(E,x,U){this.router=E,this.route=x,this.locationStrategy=U,this.commands=null,this.href=null,this.onChanges=new y.x,this.subscription=E.events.subscribe(q=>{q instanceof Yn&&this.updateTargetUrlAndHref()})}set routerLink(E){this.commands=null!=E?Array.isArray(E)?E:[E]:null}ngOnChanges(E){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(E,x,U,q,W){if(0!==E||x||U||q||W||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const re={skipLocationChange:Vi(this.skipLocationChange),replaceUrl:Vi(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,re),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vi(this.preserveFragment)})}}return A.\u0275fac=function(E){return new(E||A)(m.Y36(ur),m.Y36(Kr),m.Y36(Cn.S$))},A.\u0275dir=m.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(E,x){1&E&&m.NdJ("click",function(q){return x.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&E&&m.uIk("target",x.target)("href",x.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),A})();function Vi(A){return""===A||!!A}class da{}class fo{preload(T,E){return(0,We.of)(null)}}let Is=(()=>{class A{constructor(E,x,U,q){this.router=E,this.injector=U,this.preloadingStrategy=q,this.loader=new Wo(U,x,et=>E.triggerEvent(new wn(et)),et=>E.triggerEvent(new hi(et)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ze.h)(E=>E instanceof Yn),fe(()=>this.preload())).subscribe(()=>{})}preload(){const E=this.injector.get(m.h0i);return this.processRoutes(E,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,x){const U=[];for(const q of x)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const W=q._loadedConfig;U.push(this.processRoutes(W.module,W.routes))}else q.loadChildren&&!q.canLoad?U.push(this.preloadConfig(E,q)):q.children&&U.push(this.processRoutes(E,q.children));return(0,Te.D)(U).pipe((0,qt.J)(),(0,ht.U)(q=>{}))}preloadConfig(E,x){return this.preloadingStrategy.preload(x,()=>(x._loadedConfig?(0,We.of)(x._loadedConfig):this.loader.load(E.injector,x)).pipe((0,Re.z)(q=>(x._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return A.\u0275fac=function(E){return new(E||A)(m.LFG(ur),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(da))},A.\u0275prov=m.Yz7({token:A,factory:A.\u0275fac}),A})(),es=(()=>{class A{constructor(E,x,U={}){this.router=E,this.viewportScroller=x,this.options=U,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},U.scrollPositionRestoration=U.scrollPositionRestoration||"disabled",U.anchorScrolling=U.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(E=>{E instanceof fr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof Yn&&(this.lastId=E.id,this.scheduleScrollEvent(E,this.router.parseUrl(E.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(E=>{E instanceof Jr&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,x){this.router.triggerEvent(new Jr(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(E){m.$Z()},A.\u0275prov=m.Yz7({token:A,factory:A.\u0275fac}),A})();const ts=new m.OlP("ROUTER_CONFIGURATION"),Js=new m.OlP("ROUTER_FORROOT_GUARD"),Xs=[Cn.Ye,{provide:fi,useClass:Ss},{provide:ur,useFactory:function Zo(A,T,E,x,U,q,W={},re,et){const Kt=new ur(null,A,T,E,x,U,De(q));return re&&(Kt.urlHandlingStrategy=re),et&&(Kt.routeReuseStrategy=et),function eu(A,T){A.errorHandler&&(T.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(T.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(T.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(T.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(T.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(T.canceledNavigationResolution=A.canceledNavigationResolution)}(W,Kt),W.enableTracing&&Kt.events.subscribe(qn=>{var an,Ir;null===(an=console.group)||void 0===an||an.call(console,`Router Event: ${qn.constructor.name}`),console.log(qn.toString()),console.log(qn),null===(Ir=console.groupEnd)||void 0===Ir||Ir.call(console)}),Kt},deps:[fi,rt,Cn.Ye,m.zs3,m.Sil,ka,ts,[class wu{},new m.FiY],[class Xi{},new m.FiY]]},rt,{provide:Kr,useFactory:function Ti(A){return A.routerState.root},deps:[ur]},Is,fo,class Xa{preload(T,E){return E().pipe(se(()=>(0,We.of)(null)))}},{provide:ts,useValue:{enableTracing:!1}}];function Va(){return new m.PXZ("Router",ur)}let fa=(()=>{class A{constructor(E,x){}static forRoot(E,x){return{ngModule:A,providers:[Xs,Ao(E),{provide:Js,useFactory:eo,deps:[[ur,new m.FiY,new m.tp0]]},{provide:ts,useValue:x||{}},{provide:Cn.S$,useFactory:Yr,deps:[Cn.lw,[new m.tBr(Cn.mr),new m.FiY],ts]},{provide:es,useFactory:ns,deps:[ur,Cn.EM,ts]},{provide:da,useExisting:x&&x.preloadingStrategy?x.preloadingStrategy:fo},{provide:m.PXZ,multi:!0,useFactory:Va},[to,{provide:m.ip1,multi:!0,useFactory:Lo,deps:[to]},{provide:Vo,useFactory:pa,deps:[to]},{provide:m.tb,multi:!0,useExisting:Vo}]]}}static forChild(E){return{ngModule:A,providers:[Ao(E)]}}}return A.\u0275fac=function(E){return new(E||A)(m.LFG(Js,8),m.LFG(ur,8))},A.\u0275mod=m.oAB({type:A}),A.\u0275inj=m.cJS({}),A})();function ns(A,T,E){return E.scrollOffset&&T.setOffset(E.scrollOffset),new es(A,T,E)}function Yr(A,T,E={}){return E.useHash?new Cn.Do(A,T):new Cn.b0(A,T)}function eo(A){return"guarded"}function Ao(A){return[{provide:m.deG,multi:!0,useValue:A},{provide:ka,multi:!0,useValue:A}]}let to=(()=>{class A{constructor(E){this.injector=E,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new y.x}appInitializer(){return this.injector.get(Cn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let x=null;const U=new Promise(re=>x=re),q=this.injector.get(ur),W=this.injector.get(ts);return"disabled"===W.initialNavigation?(q.setUpLocationChangeListener(),x(!0)):"enabled"===W.initialNavigation||"enabledBlocking"===W.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,We.of)(null):(this.initNavigation=!0,x(!0),this.resultOfPreactivationDone),q.initialNavigation()):x(!0),U})}bootstrapListener(E){const x=this.injector.get(ts),U=this.injector.get(Is),q=this.injector.get(es),W=this.injector.get(ur),re=this.injector.get(m.z2F);E===re.components[0]&&(("enabledNonBlocking"===x.initialNavigation||void 0===x.initialNavigation)&&W.initialNavigation(),U.setUpPreloading(),q.init(),W.resetRootComponentType(re.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(E){return new(E||A)(m.LFG(m.zs3))},A.\u0275prov=m.Yz7({token:A,factory:A.\u0275fac}),A})();function Lo(A){return A.appInitializer.bind(A)}function pa(A){return A.bootstrapListener.bind(A)}const Vo=new m.OlP("Router Initializer")},3942:(Ot,$e,B)=>{B.d($e,{Z:()=>lt});var m=B(2090),y=B(4859),te=B(9681),Ne=B(1877);class Me{constructor(Ze,at){this._delegate=Ze,this.firebase=at,(0,te._addComponent)(Ze,new y.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Ze,at=te._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const Nt=this._delegate.container.getProvider(Ze);return!Nt.isInitialized()&&"EXPLICIT"===(null===(At=Nt.getComponent())||void 0===At?void 0:At.instantiationMode)&&Nt.initialize(),Nt.getImmediate({identifier:at})}_removeServiceInstance(Ze,at=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(at)}_addComponent(Ze){(0,te._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,te._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function _e(){const wt=function Ae(wt){const Ze={},at={__esModule:!0,initializeApp:function he(st,we={}){const Qe=te.initializeApp(st,we);if((0,m.r3)(Ze,Qe.name))return Ze[Qe.name];const se=new wt(Qe,at);return Ze[Qe.name]=se,se},app:Nt,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function ut(st){const we=st.name,Qe=we.replace("-compat","");if(te._registerComponent(st)&&"PUBLIC"===st.type){const se=(Re=Nt())=>{if("function"!=typeof Re[Qe])throw Le.create("invalid-app-argument",{appName:we});return Re[Qe]()};void 0!==st.serviceProps&&(0,m.ZB)(se,st.serviceProps),at[Qe]=se,wt.prototype[Qe]=function(...Re){return this._getService.bind(this,we).apply(this,st.multipleInstances?Re:[])}}return"PUBLIC"===st.type?at[Qe]:null},removeApp:function At(st){delete Ze[st]},useAsService:function We(st,we){return"serverAuth"===we?null:we},modularAPIs:te}};function Nt(st){if(!(0,m.r3)(Ze,st=st||te._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:st});return Ze[st]}return at.default=at,Object.defineProperty(at,"apps",{get:function Xe(){return Object.keys(Ze).map(st=>Ze[st])}}),Nt.App=wt,at}(Me);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Ze(at){(0,m.ZB)(wt,at)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),wt}(),ie=new Ne.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){ie.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const wt=self.firebase.SDK_VERSION;wt&&wt.indexOf("LITE")>=0&&ie.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const lt=le;!function Be(wt){(0,te.registerVersion)("@firebase/app-compat","0.1.26",wt)}()},9681:(Ot,$e,B)=>{B.r($e),B.d($e,{FirebaseError:()=>Ne.ZR,SDK_VERSION:()=>Qn,_DEFAULT_ENTRY_NAME:()=>Yt,_addComponent:()=>yt,_addOrOverwriteComponent:()=>je,_apps:()=>pn,_clearComponents:()=>Cn,_components:()=>nn,_getProvider:()=>Mt,_registerComponent:()=>gt,_removeServiceInstance:()=>qt,deleteApp:()=>en,getApp:()=>Dr,getApps:()=>zn,initializeApp:()=>br,onLog:()=>wn,registerVersion:()=>_n,setLogLevel:()=>hi});var m=B(5861),y=B(4859),te=B(1877),Ne=B(2090),Me=B(8766);class Te{constructor(Fe){this.container=Fe}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function Le(ve){const Fe=ve.getComponent();return"VERSION"===(null==Fe?void 0:Fe.type)}(_t)){const Lt=_t.getImmediate();return`${Lt.library}/${Lt.version}`}return null}).filter(_t=>_t).join(" ")}}const Ae="@firebase/app",le=new te.Yd("@firebase/app"),Yt="[DEFAULT]",ht={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,nn=new Map;function yt(ve,Fe){try{ve.container.addComponent(Fe)}catch(_t){le.debug(`Component ${Fe.name} failed to register with FirebaseApp ${ve.name}`,_t)}}function je(ve,Fe){ve.container.addOrOverwriteComponent(Fe)}function gt(ve){const Fe=ve.name;if(nn.has(Fe))return le.debug(`There were multiple attempts to register component ${Fe}.`),!1;nn.set(Fe,ve);for(const _t of pn.values())yt(_t,ve);return!0}function Mt(ve,Fe){const _t=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),ve.container.getProvider(Fe)}function qt(ve,Fe,_t=Yt){Mt(ve,Fe).clearInstance(_t)}function Cn(){nn.clear()}const fr=new Ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Yn{constructor(Fe,_t,Lt){this._isDeleted=!1,this._options=Object.assign({},Fe),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Lt,this.container.addComponent(new y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Fe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Fe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Fe){this._isDeleted=Fe}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const Qn="9.8.2";function br(ve,Fe={}){"object"!=typeof Fe&&(Fe={name:Fe});const _t=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},Fe),Lt=_t.name;if("string"!=typeof Lt||!Lt)throw fr.create("bad-app-name",{appName:String(Lt)});const Bt=pn.get(Lt);if(Bt){if((0,Ne.vZ)(ve,Bt.options)&&(0,Ne.vZ)(_t,Bt.config))return Bt;throw fr.create("duplicate-app",{appName:Lt})}const on=new y.H0(Lt);for(const hn of nn.values())on.addComponent(hn);const yr=new Yn(ve,_t,on);return pn.set(Lt,yr),yr}function Dr(ve=Yt){const Fe=pn.get(ve);if(!Fe)throw fr.create("no-app",{appName:ve});return Fe}function zn(){return Array.from(pn.values())}function en(ve){return mn.apply(this,arguments)}function mn(){return(mn=(0,m.Z)(function*(ve){const Fe=ve.name;pn.has(Fe)&&(pn.delete(Fe),yield Promise.all(ve.container.getProviders().map(_t=>_t.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function _n(ve,Fe,_t){var Lt;let Bt=null!==(Lt=ht[ve])&&void 0!==Lt?Lt:ve;_t&&(Bt+=`-${_t}`);const on=Bt.match(/\s|\//),yr=Fe.match(/\s|\//);if(on||yr){const hn=[`Unable to register library "${Bt}" with version "${Fe}":`];return on&&hn.push(`library name "${Bt}" contains illegal characters (whitespace or "/")`),on&&yr&&hn.push("and"),yr&&hn.push(`version name "${Fe}" contains illegal characters (whitespace or "/")`),void le.warn(hn.join(" "))}gt(new y.wA(`${Bt}-version`,()=>({library:Bt,version:Fe}),"VERSION"))}function wn(ve,Fe){if(null!==ve&&"function"!=typeof ve)throw fr.create("invalid-log-argument");(0,te.Am)(ve,Fe)}function hi(ve){(0,te.Ub)(ve)}const Nr="firebase-heartbeat-store";let si=null;function Jr(){return si||(si=(0,Me.X3)("firebase-heartbeat-database",1,{upgrade:(ve,Fe)=>{0===Fe&&ve.createObjectStore(Nr)}}).catch(ve=>{throw fr.create("storage-open",{originalErrorMessage:ve.message})})),si}function Qt(){return(Qt=(0,m.Z)(function*(ve){try{return(yield Jr()).transaction(Nr).objectStore(Nr).get(Xr(ve))}catch(Fe){throw fr.create("storage-get",{originalErrorMessage:Fe.message})}})).apply(this,arguments)}function Zt(ve,Fe){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,m.Z)(function*(ve,Fe){try{const Lt=(yield Jr()).transaction(Nr,"readwrite");return yield Lt.objectStore(Nr).put(Fe,Xr(ve)),Lt.done}catch(_t){throw fr.create("storage-set",{originalErrorMessage:_t.message})}})).apply(this,arguments)}function Xr(ve){return`${ve.name}!${ve.options.appId}`}class zr{constructor(Fe){this.container=Fe,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new De(_t),this._heartbeatsCachePromise=this._storage.read().then(Lt=>(this._heartbeatsCache=Lt,Lt))}triggerHeartbeat(){var Fe=this;return(0,m.Z)(function*(){const Lt=Fe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bt=Vn();if(null===Fe._heartbeatsCache&&(Fe._heartbeatsCache=yield Fe._heartbeatsCachePromise),Fe._heartbeatsCache.lastSentHeartbeatDate!==Bt&&!Fe._heartbeatsCache.heartbeats.some(on=>on.date===Bt))return Fe._heartbeatsCache.heartbeats.push({date:Bt,agent:Lt}),Fe._heartbeatsCache.heartbeats=Fe._heartbeatsCache.heartbeats.filter(on=>{const yr=new Date(on.date).valueOf();return Date.now()-yr<=2592e6}),Fe._storage.overwrite(Fe._heartbeatsCache)})()}getHeartbeatsHeader(){var Fe=this;return(0,m.Z)(function*(){if(null===Fe._heartbeatsCache&&(yield Fe._heartbeatsCachePromise),null===Fe._heartbeatsCache||0===Fe._heartbeatsCache.heartbeats.length)return"";const _t=Vn(),{heartbeatsToSend:Lt,unsentEntries:Bt}=function pe(ve,Fe=1024){const _t=[];let Lt=ve.slice();for(const Bt of ve){const on=_t.find(yr=>yr.agent===Bt.agent);if(on){if(on.dates.push(Bt.date),Ce(_t)>Fe){on.dates.pop();break}}else if(_t.push({agent:Bt.agent,dates:[Bt.date]}),Ce(_t)>Fe){_t.pop();break}Lt=Lt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Lt}}(Fe._heartbeatsCache.heartbeats),on=(0,Ne.L)(JSON.stringify({version:2,heartbeats:Lt}));return Fe._heartbeatsCache.lastSentHeartbeatDate=_t,Bt.length>0?(Fe._heartbeatsCache.heartbeats=Bt,yield Fe._storage.overwrite(Fe._heartbeatsCache)):(Fe._heartbeatsCache.heartbeats=[],Fe._storage.overwrite(Fe._heartbeatsCache)),on})()}}function Vn(){return(new Date).toISOString().substring(0,10)}class De{constructor(Fe){this.app=Fe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,Ne.hl)()&&(0,Ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Fe=this;return(0,m.Z)(function*(){return(yield Fe._canUseIndexedDBPromise)&&(yield function Ut(ve){return Qt.apply(this,arguments)}(Fe.app))||{heartbeats:[]}})()}overwrite(Fe){var _t=this;return(0,m.Z)(function*(){var Lt;if(yield _t._canUseIndexedDBPromise){const on=yield _t.read();return Zt(_t.app,{lastSentHeartbeatDate:null!==(Lt=Fe.lastSentHeartbeatDate)&&void 0!==Lt?Lt:on.lastSentHeartbeatDate,heartbeats:Fe.heartbeats})}})()}add(Fe){var _t=this;return(0,m.Z)(function*(){var Lt;if(yield _t._canUseIndexedDBPromise){const on=yield _t.read();return Zt(_t.app,{lastSentHeartbeatDate:null!==(Lt=Fe.lastSentHeartbeatDate)&&void 0!==Lt?Lt:on.lastSentHeartbeatDate,heartbeats:[...on.heartbeats,...Fe.heartbeats]})}})()}}function Ce(ve){return(0,Ne.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function ft(ve){gt(new y.wA("platform-logger",Fe=>new Te(Fe),"PRIVATE")),gt(new y.wA("heartbeat",Fe=>new zr(Fe),"PRIVATE")),_n(Ae,"0.7.25",ve),_n(Ae,"0.7.25","esm2017"),_n("fire-js","")}("")},4859:(Ot,$e,B)=>{B.d($e,{H0:()=>Ae,wA:()=>te});var m=B(5861),y=B(2090);class te{constructor(le,ie,be){this.name=le,this.instanceFactory=ie,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const Ne="[DEFAULT]";class Me{constructor(le,ie){this.name=le,this.container=ie,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ie=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ie)){const be=new y.BH;if(this.instancesDeferred.set(ie,be),this.isInitialized(ie)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:ie});mt&&be.resolve(mt)}catch(mt){}}return this.instancesDeferred.get(ie).promise}getImmediate(le){var ie;const be=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),mt=null!==(ie=null==le?void 0:le.optional)&&void 0!==ie&&ie;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(Be){if(mt)return null;throw Be}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Le(_e){return"EAGER"===_e.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:Ne})}catch(ie){}for(const[ie,be]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(ie);try{const Be=this.getOrInitializeService({instanceIdentifier:mt});be.resolve(Be)}catch(Be){}}}}clearInstance(le=Ne){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,m.Z)(function*(){const ie=Array.from(le.instances.values());yield Promise.all([...ie.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...ie.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=Ne){return this.instances.has(le)}getOptions(le=Ne){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ie={}}=le,be=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:be,options:ie});for(const[Be,lt]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(Be)&&lt.resolve(mt);return mt}onInit(le,ie){var be;const mt=this.normalizeInstanceIdentifier(ie),Be=null!==(be=this.onInitCallbacks.get(mt))&&void 0!==be?be:new Set;Be.add(le),this.onInitCallbacks.set(mt,Be);const lt=this.instances.get(mt);return lt&&le(lt,mt),()=>{Be.delete(le)}}invokeOnInitCallbacks(le,ie){const be=this.onInitCallbacks.get(ie);if(be)for(const mt of be)try{mt(le,ie)}catch(Be){}}getOrInitializeService({instanceIdentifier:le,options:ie={}}){let be=this.instances.get(le);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=le,_e===Ne?void 0:_e),options:ie}),this.instances.set(le,be),this.instancesOptions.set(le,ie),this.invokeOnInitCallbacks(be,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,be)}catch(mt){}var _e;return be||null}normalizeInstanceIdentifier(le=Ne){return this.component?this.component.multipleInstances?le:Ne:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ae{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ie=this.getProvider(le.name);if(ie.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ie.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ie=new Me(le,this);return this.providers.set(le,ie),ie}getProviders(){return Array.from(this.providers.values())}}},1877:(Ot,$e,B)=>{B.d($e,{Am:()=>_e,Ub:()=>Ae,Yd:()=>Le,in:()=>y});const m=[];var y=(()=>{return(le=y||(y={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",y;var le})();const te={debug:y.DEBUG,verbose:y.VERBOSE,info:y.INFO,warn:y.WARN,error:y.ERROR,silent:y.SILENT},Ne=y.INFO,Me={[y.DEBUG]:"log",[y.VERBOSE]:"log",[y.INFO]:"info",[y.WARN]:"warn",[y.ERROR]:"error"},Te=(le,ie,...be)=>{if(ie<le.logLevel)return;const mt=(new Date).toISOString(),Be=Me[ie];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${ie})`);console[Be](`[${mt}]  ${le.name}:`,...be)};class Le{constructor(ie){this.name=ie,this._logLevel=Ne,this._logHandler=Te,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(ie){if(!(ie in y))throw new TypeError(`Invalid value "${ie}" assigned to \`logLevel\``);this._logLevel=ie}setLogLevel(ie){this._logLevel="string"==typeof ie?te[ie]:ie}get logHandler(){return this._logHandler}set logHandler(ie){if("function"!=typeof ie)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ie}get userLogHandler(){return this._userLogHandler}set userLogHandler(ie){this._userLogHandler=ie}debug(...ie){this._userLogHandler&&this._userLogHandler(this,y.DEBUG,...ie),this._logHandler(this,y.DEBUG,...ie)}log(...ie){this._userLogHandler&&this._userLogHandler(this,y.VERBOSE,...ie),this._logHandler(this,y.VERBOSE,...ie)}info(...ie){this._userLogHandler&&this._userLogHandler(this,y.INFO,...ie),this._logHandler(this,y.INFO,...ie)}warn(...ie){this._userLogHandler&&this._userLogHandler(this,y.WARN,...ie),this._logHandler(this,y.WARN,...ie)}error(...ie){this._userLogHandler&&this._userLogHandler(this,y.ERROR,...ie),this._logHandler(this,y.ERROR,...ie)}}function Ae(le){m.forEach(ie=>{ie.setLogLevel(le)})}function _e(le,ie){for(const be of m){let mt=null;ie&&ie.level&&(mt=te[ie.level]),be.userLogHandler=null===le?null:(Be,lt,...wt)=>{const Ze=wt.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch(At){return null}}).filter(at=>at).join(" ");lt>=(null!=mt?mt:Be.logLevel)&&le({level:y[lt].toLowerCase(),message:Ze,args:wt,type:Be.name})}}}},8766:(Ot,$e,B)=>{B.d($e,{Lj:()=>he,X3:()=>Nt});var m=B(5861);let te,Ne;const Le=new WeakMap,Ae=new WeakMap,_e=new WeakMap,le=new WeakMap,ie=new WeakMap;let Be={get(we,Qe,se){if(we instanceof IDBTransaction){if("done"===Qe)return Ae.get(we);if("objectStoreNames"===Qe)return we.objectStoreNames||_e.get(we);if("store"===Qe)return se.objectStoreNames[1]?void 0:se.objectStore(se.objectStoreNames[0])}return at(we[Qe])},set:(we,Qe,se)=>(we[Qe]=se,!0),has:(we,Qe)=>we instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in we};function Ze(we){return"function"==typeof we?function wt(we){return we!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return Ne||(Ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(we)?function(...Qe){return we.apply(At(this),Qe),at(Le.get(this))}:function(...Qe){return at(we.apply(At(this),Qe))}:function(Qe,...se){const Re=we.call(At(this),Qe,...se);return _e.set(Re,Qe.sort?Qe.sort():[Qe]),at(Re)}}(we):(we instanceof IDBTransaction&&function mt(we){if(Ae.has(we))return;const Qe=new Promise((se,Re)=>{const fe=()=>{we.removeEventListener("complete",ze),we.removeEventListener("error",He),we.removeEventListener("abort",He)},ze=()=>{se(),fe()},He=()=>{Re(we.error||new DOMException("AbortError","AbortError")),fe()};we.addEventListener("complete",ze),we.addEventListener("error",He),we.addEventListener("abort",He)});Ae.set(we,Qe)}(we),((we,Qe)=>Qe.some(se=>we instanceof se))(we,function Me(){return te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(we,Be):we)}function at(we){if(we instanceof IDBRequest)return function be(we){const Qe=new Promise((se,Re)=>{const fe=()=>{we.removeEventListener("success",ze),we.removeEventListener("error",He)},ze=()=>{se(at(we.result)),fe()},He=()=>{Re(we.error),fe()};we.addEventListener("success",ze),we.addEventListener("error",He)});return Qe.then(se=>{se instanceof IDBCursor&&Le.set(se,we)}).catch(()=>{}),ie.set(Qe,we),Qe}(we);if(le.has(we))return le.get(we);const Qe=Ze(we);return Qe!==we&&(le.set(we,Qe),ie.set(Qe,we)),Qe}const At=we=>ie.get(we);function Nt(we,Qe,{blocked:se,upgrade:Re,blocking:fe,terminated:ze}={}){const He=indexedDB.open(we,Qe),vt=at(He);return Re&&He.addEventListener("upgradeneeded",St=>{Re(at(He.result),St.oldVersion,St.newVersion,at(He.transaction))}),se&&He.addEventListener("blocked",()=>se()),vt.then(St=>{ze&&St.addEventListener("close",()=>ze()),fe&&St.addEventListener("versionchange",()=>fe())}).catch(()=>{}),vt}function he(we,{blocked:Qe}={}){const se=indexedDB.deleteDatabase(we);return Qe&&se.addEventListener("blocked",()=>Qe()),at(se).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],We=new Map;function st(we,Qe){if(!(we instanceof IDBDatabase)||Qe in we||"string"!=typeof Qe)return;if(We.get(Qe))return We.get(Qe);const se=Qe.replace(/FromIndex$/,""),Re=Qe!==se,fe=ut.includes(se);if(!(se in(Re?IDBIndex:IDBObjectStore).prototype)||!fe&&!Xe.includes(se))return;const ze=function(){var He=(0,m.Z)(function*(vt,...St){const Xt=this.transaction(vt,fe?"readwrite":"readonly");let Yt=Xt.store;return Re&&(Yt=Yt.index(St.shift())),(yield Promise.all([Yt[se](...St),fe&&Xt.done]))[0]});return function(St){return He.apply(this,arguments)}}();return We.set(Qe,ze),ze}!function lt(we){Be=we(Be)}(we=>FE(kE({},we),{get:(Qe,se,Re)=>st(Qe,se)||we.get(Qe,se,Re),has:(Qe,se)=>!!st(Qe,se)||we.has(Qe,se)}))},5861:(Ot,$e,B)=>{function m(te,Ne,Me,Te,Le,Ae,_e){try{var le=te[Ae](_e),ie=le.value}catch(be){return void Me(be)}le.done?Ne(ie):Promise.resolve(ie).then(Te,Le)}function y(te){return function(){var Ne=this,Me=arguments;return new Promise(function(Te,Le){var Ae=te.apply(Ne,Me);function _e(ie){m(Ae,Te,Le,_e,le,"next",ie)}function le(ie){m(Ae,Te,Le,_e,le,"throw",ie)}_e(void 0)})}}B.d($e,{Z:()=>y})}},Ot=>{Ot(Ot.s=7273)}]);