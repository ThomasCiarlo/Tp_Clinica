"use strict";var MO=Object.defineProperty,RO=Object.defineProperties,NO=Object.getOwnPropertyDescriptors,dM=Object.getOwnPropertySymbols,OO=Object.prototype.hasOwnProperty,PO=Object.prototype.propertyIsEnumerable,hM=(Je,we,O)=>we in Je?MO(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[we]=O,fM=(Je,we)=>{for(var O in we||(we={}))OO.call(we,O)&&hM(Je,O,we[O]);if(dM)for(var O of dM(we))PO.call(we,O)&&hM(Je,O,we[O]);return Je},pM=(Je,we)=>RO(Je,NO(we));(self.webpackChunkclinicafinal=self.webpackChunkclinicafinal||[]).push([[179],{2011:(Je,we,O)=>{O.d(we,{Dh:()=>ie,GT:()=>pe,cc:()=>Se,hO:()=>He,on:()=>j,pX:()=>ne,xv:()=>ce});var d=O(5e3),Q=O(127),P=O(5813);Je=O.hmd(Je);const oe=["ngOnDestroy"],ne=(be,Ge,ze,Ce={})=>new Proxy(be,{get:(Ee,Ie)=>ze.runOutsideAngular(()=>{var Ue;if(be[Ie])return(null===(Ue=null==Ce?void 0:Ce.spy)||void 0===Ue?void 0:Ue.get)&&Ce.spy.get(Ie,be[Ie]),be[Ie];if(oe.indexOf(Ie)>-1)return()=>{};const Ve=Ge.toPromise().then(B=>{const ve=B&&B[Ie];return"function"==typeof ve?ve.bind(B):ve&&ve.then?ve.then(z=>ze.run(()=>z)):ze.run(()=>ve)});return new Proxy(()=>{},{get:(B,ve)=>Ve[ve],apply:(B,ve,z)=>Ve.then(re=>{var J;const ye=re&&re(...z);return(null===(J=null==Ce?void 0:Ce.spy)||void 0===J?void 0:J.apply)&&Ce.spy.apply(Ie,z,ye),ye})})})}),pe=(be,Ge)=>{Ge.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Ce=>{Object.defineProperty(be.prototype,Ce,Object.getOwnPropertyDescriptor(ze.prototype||ze,Ce))})})};class ae{constructor(Ge){return Ge}}const ie=new d.OlP("angularfire2.app.options"),ce=new d.OlP("angularfire2.app.name");function j(be,Ge,ze){const Ee="object"==typeof ze&&ze||{};Ee.name=Ee.name||"string"==typeof ze&&ze||"[DEFAULT]";const Ue=Q.Z.apps.filter(Ve=>Ve&&Ve.name===Ee.name)[0]||Ge.runOutsideAngular(()=>Q.Z.initializeApp(be,Ee));try{JSON.stringify(be)!==JSON.stringify(Ue.options)&&U("error",`${Ue.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new ae(Ue)}const U=(be,...Ge)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)},X={provide:ae,useFactory:j,deps:[ie,d.R0b,[new d.FiY,ce]]};let He=(()=>{class be{constructor(ze){Q.Z.registerVersion("angularfire",P.q4.full,"core"),Q.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Q.Z.registerVersion("angular",d.q4F.full,ze.toString())}static initializeApp(ze,Ce){return{ngModule:be,providers:[{provide:ie,useValue:ze},{provide:ce,useValue:Ce}]}}}return be.\u0275fac=function(ze){return new(ze||be)(d.LFG(d.Lbi))},be.\u0275mod=d.oAB({type:be}),be.\u0275inj=d.cJS({providers:[X]}),be})();function Se(be,Ge,ze,Ce,Ee){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===be)||[];if(Ie)return function Re(be,Ge){try{return be.toString()===Ge.toString()}catch(ze){return be===Ge}}(Ee,Ue)||(he("error",`${Ge} was already initialized on the ${ze} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ee,was:Ue})),Ie;{const Ve=Ce();return globalThis.\u0275AngularfireInstanceCache.push([be,Ve,Ee]),Ve}}const Le=!!Je.hot,he=(be,...Ge)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[be](...Ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,O)=>{O.d(we,{q4:()=>_a,iC:()=>fh,HU:()=>$c,vb:()=>Ap,JM:()=>Bo});var d=O(5e3),Q=O(5867),P=O(5861),oe=O(9681),ne=O(2090),pe=O(4859),ae=O(1877),ie=O(8766);const ce="@firebase/installations",j="0.5.9",X=`w:${j}`,He="FIS_v2",Ge=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ze(b){return b instanceof ne.ZR&&b.code.includes("request-failed")}function Ce({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ee(b){return{token:b.token,requestStatus:2,expiresIn:re(b.expiresIn),creationTime:Date.now()}}function Ie(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(b,D){const F=(yield D.json()).error;return Ge.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ve({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function B(b,{refreshToken:D}){const x=Ve(b);return x.append("Authorization",function J(b){return`${He} ${b}`}(D)),x}function ve(b){return z.apply(this,arguments)}function z(){return(z=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function re(b){return Number(b.replace("s","000"))}function ye(b,D){return se.apply(this,arguments)}function se(){return(se=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:x}){const F=Ce(b),W=Ve(b),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const Ke={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:He,appId:b.appId,sdkVersion:X})},tt=yield ve(()=>fetch(F,Ke));if(tt.ok){const ut=yield tt.json();return{fid:ut.fid||x,registrationStatus:2,refreshToken:ut.refreshToken,authToken:Ee(ut.authToken)}}throw yield Ie("Create Installation",tt)})).apply(this,arguments)}function Ne(b){return new Promise(D=>{setTimeout(D,b)})}const kt=/^[cdef][\w-]{21}$/;function Ze(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function Wt(b){return function at(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return kt.test(x)?x:""}catch(b){return""}}function mn(b){return`${b.appName}!${b.appId}`}const Yt=new Map;function qt(b,D){const x=mn(b);xt(x,D),function qi(b,D){const x=function ir(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=b=>{xt(b.data.key,b.data.fid)}),Wr}();x&&x.postMessage({key:b,fid:D}),function Er(){0===Yt.size&&Wr&&(Wr.close(),Wr=null)}()}(x,D)}function xt(b,D){const x=Yt.get(b);if(x)for(const F of x)F(D)}let Wr=null;const Kr="firebase-installations-store";let di=null;function ft(){return di||(di=(0,ie.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Kr)}})),di}function Yr(b,D){return cn.apply(this,arguments)}function cn(){return(cn=(0,P.Z)(function*(b,D){const x=mn(b),W=(yield ft()).transaction(Kr,"readwrite"),te=W.objectStore(Kr),fe=yield te.get(x);return yield te.put(D,x),yield W.done,(!fe||fe.fid!==D.fid)&&qt(b,D.fid),D})).apply(this,arguments)}function yn(b){return $s.apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(b){const D=mn(b),F=(yield ft()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(D),yield F.done})).apply(this,arguments)}function Qr(b,D){return jn.apply(this,arguments)}function jn(){return(jn=(0,P.Z)(function*(b,D){const x=mn(b),W=(yield ft()).transaction(Kr,"readwrite"),te=W.objectStore(Kr),fe=yield te.get(x),Ke=D(fe);return void 0===Ke?yield te.delete(x):yield te.put(Ke,x),yield W.done,Ke&&(!fe||fe.fid!==Ke.fid)&&qt(b,Ke.fid),Ke})).apply(this,arguments)}function bn(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,P.Z)(function*(b){let D;const x=yield Qr(b.appConfig,F=>{const W=Eo(F),te=Ft(b,W);return D=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function Eo(b){return Hs(b||{fid:Ze(),registrationStatus:0})}function Ft(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ge.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(b,D){return mt.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:sr(b)}:{installationEntry:D}}function mt(){return(mt=(0,P.Z)(function*(b,D){try{const x=yield ye(b,D);return Yr(b.appConfig,x)}catch(x){throw ze(x)&&409===x.customData.serverCode?yield yn(b.appConfig):yield Yr(b.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function sr(b){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(b){let D=yield Ot(b.appConfig);for(;1===D.registrationStatus;)yield Ne(100),D=yield Ot(b.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield bn(b);return F||x}return D})).apply(this,arguments)}function Ot(b){return Qr(b,D=>{if(!D)throw Ge.create("installation-not-found");return Hs(D)})}function Hs(b){return function or(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function ar(b,D){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},x){const F=H(b,x),W=B(b,x),te=D.getImmediate({optional:!0});if(te){const ut=yield te.getHeartbeatsHeader();ut&&W.append("x-firebase-client",ut)}const Ke={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},tt=yield ve(()=>fetch(F,Ke));if(tt.ok)return Ee(yield tt.json());throw yield Ie("Generate Auth Token",tt)})).apply(this,arguments)}function H(b,{fid:D}){return`${Ce(b)}/${D}/authTokens:generate`}function G(b){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(b,D=!1){let x;const F=yield Qr(b.appConfig,te=>{if(!_t(te))throw Ge.create("not-registered");const fe=te.authToken;if(!D&&nn(fe))return te;if(1===fe.requestStatus)return x=$(b,D),te;{if(!navigator.onLine)throw Ge.create("app-offline");const Ke=Rn(te);return x=Ye(b,Ke),Ke}});return x?yield x:F.authToken})).apply(this,arguments)}function $(b,D){return Y.apply(this,arguments)}function Y(){return(Y=(0,P.Z)(function*(b,D){let x=yield xe(b.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield xe(b.appConfig);const F=x.authToken;return 0===F.requestStatus?G(b,D):F})).apply(this,arguments)}function xe(b){return Qr(b,D=>{if(!_t(D))throw Ge.create("not-registered");return function wr(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ye(b,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,P.Z)(function*(b,D){try{const x=yield ar(b,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield Yr(b.appConfig,F),x}catch(x){if(!ze(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Yr(b.appConfig,F)}else yield yn(b.appConfig);throw x}})).apply(this,arguments)}function _t(b){return void 0!==b&&2===b.registrationStatus}function nn(b){return 2===b.requestStatus&&!function yt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Rn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function na(){return(na=(0,P.Z)(function*(b){const D=b,{installationEntry:x,registrationPromise:F}=yield bn(D);return F?F.catch(console.error):G(D).catch(console.error),x.fid})).apply(this,arguments)}function ra(){return(ra=(0,P.Z)(function*(b,D=!1){const x=b;return yield Nn(x),(yield G(x,D)).token})).apply(this,arguments)}function Nn(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,P.Z)(function*(b){const{registrationPromise:D}=yield bn(b);D&&(yield D)})).apply(this,arguments)}function wo(b){return Ge.create("missing-app-config-values",{valueName:b})}const kr="installations",ot=b=>{const D=b.getProvider("app").getImmediate(),x=function Wn(b){if(!b||!b.options)throw wo("App Configuration");if(!b.name)throw wo("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!b.options[x])throw wo(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Kt=b=>{const D=b.getProvider("app").getImmediate(),x=(0,oe._getProvider)(D,kr).getImmediate();return{getId:()=>function ja(b){return na.apply(this,arguments)}(x),getToken:W=>function $a(b){return ra.apply(this,arguments)}(x,W)}};(function Fr(){(0,oe._registerComponent)(new pe.wA(kr,ot,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",Kt,"PRIVATE"))})(),(0,oe.registerVersion)(ce,j),(0,oe.registerVersion)(ce,j,"esm2017");const Di="@firebase/remote-config",_n=new ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class mp{constructor(D,x,F,W){this.client=D,this.storage=x,this.storageCache=F,this.logger=W}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,W=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${W}.`),W}fetch(D){var x=this;return(0,P.Z)(function*(){const[F,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return W;D.eTag=W&&W.eTag;const te=yield x.client.fetch(D),fe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&fe.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(fe),te})()}}function yc(b=navigator){return b.languages&&b.languages[0]||b.language}class ur{constructor(D,x,F,W,te,fe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=W,this.apiKey=te,this.appId=fe}fetch(D){var x=this;return(0,P.Z)(function*(){const[F,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},tt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:x.appId,language_code:yc()},ut={method:"POST",headers:Ke,body:JSON.stringify(tt)},Lt=fetch(fe,ut),wt=new Promise((fr,ss)=>{D.signal.addEventListener(()=>{const Ps=new Error("The operation was aborted.");Ps.name="AbortError",ss(Ps)})});let An;try{yield Promise.race([Lt,wt]),An=yield Lt}catch(fr){let ss="fetch-client-network";throw"AbortError"===fr.name&&(ss="fetch-timeout"),_n.create(ss,{originalErrorMessage:fr.message})}let Gn=An.status;const is=An.headers.get("ETag")||void 0;let Li,vi;if(200===An.status){let fr;try{fr=yield An.json()}catch(ss){throw _n.create("fetch-client-parse",{originalErrorMessage:ss.message})}Li=fr.entries,vi=fr.state}if("INSTANCE_STATE_UNSPECIFIED"===vi?Gn=500:"NO_CHANGE"===vi?Gn=304:("NO_TEMPLATE"===vi||"EMPTY_CONFIG"===vi)&&(Li={}),304!==Gn&&200!==Gn)throw _n.create("fetch-status",{httpStatus:Gn});return{status:Gn,eTag:is,config:Li}})()}}class yp{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var W=this;return(0,P.Z)(function*(){yield function Es(b,D){return new Promise((x,F)=>{const W=Math.max(D-Date.now(),0),te=setTimeout(x,W);b.addEventListener(()=>{clearTimeout(te),F(_n.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const te=yield W.client.fetch(D);return yield W.storage.deleteThrottleMetadata(),te}catch(te){if(!function _c(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const fe={throttleEndTimeMillis:Date.now()+(0,ne.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(fe),W.attemptFetch(D,fe)}})()}}class vc{constructor(D,x,F,W,te){this.app=D,this._client=x,this._storageCache=F,this._storage=W,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ku(b,D){const x=b.target.error||void 0;return _n.create(D,{originalErrorMessage:x&&x.message})}const ws="app_namespace_store";class wp{constructor(D,x,F,W=function Ep(){return new Promise((b,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(Ku(F,"storage-open"))},x.onsuccess=F=>{b(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(x){D(_n.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,te)=>{const Ke=F.transaction([ws],"readonly").objectStore(ws),tt=x.createCompositeKey(D);try{const ut=Ke.get(tt);ut.onerror=Lt=>{te(Ku(Lt,"storage-get"))},ut.onsuccess=Lt=>{const wt=Lt.target.result;W(wt?wt.value:void 0)}}catch(ut){te(_n.create("storage-get",{originalErrorMessage:ut&&ut.message}))}})})()}set(D,x){var F=this;return(0,P.Z)(function*(){const W=yield F.openDbPromise;return new Promise((te,fe)=>{const tt=W.transaction([ws],"readwrite").objectStore(ws),ut=F.createCompositeKey(D);try{const Lt=tt.put({compositeKey:ut,value:x});Lt.onerror=wt=>{fe(Ku(wt,"storage-set"))},Lt.onsuccess=()=>{te()}}catch(Lt){fe(_n.create("storage-set",{originalErrorMessage:Lt&&Lt.message}))}})})()}delete(D){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((W,te)=>{const Ke=F.transaction([ws],"readwrite").objectStore(ws),tt=x.createCompositeKey(D);try{const ut=Ke.delete(tt);ut.onerror=Lt=>{te(Ku(Lt,"storage-delete"))},ut.onsuccess=()=>{W()}}catch(ut){te(_n.create("storage-delete",{originalErrorMessage:ut&&ut.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class wc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),W=D.storage.getActiveConfig(),te=yield x;te&&(D.lastFetchStatus=te);const fe=yield F;fe&&(D.lastSuccessfulFetchTimestampMillis=fe);const Ke=yield W;Ke&&(D.activeConfig=Ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Za(){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,P.Z)(function*(){if(!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Io(){(0,oe._registerComponent)(new pe.wA("remote-config",function b(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),W=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw _n.create("registration-window");if(!(0,ne.hl)())throw _n.create("indexed-db-unavailable");const{projectId:te,apiKey:fe,appId:Ke}=F.options;if(!te)throw _n.create("registration-project-id");if(!fe)throw _n.create("registration-api-key");if(!Ke)throw _n.create("registration-app-id");const tt=new wp(Ke,F.name,x=x||"firebase"),ut=new wc(tt),Lt=new ae.Yd(Di);Lt.logLevel=ae.in.ERROR;const wt=new ur(W,oe.SDK_VERSION,x,te,fe,Ke),An=new yp(wt,tt),Gn=new mp(An,tt,ut,Lt),is=new vc(F,Gn,ut,tt,Lt);return function Qt(b){const D=(0,ne.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(is),is},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(Di,"0.3.8"),(0,oe.registerVersion)(Di,"0.3.8","esm2017")}();const bc="/firebase-messaging-sw.js",lr="/firebase-cloud-messaging-push-scope",Zs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bo="google.c.a.c_id",Dc="google.c.a.c_l",ah="google.c.a.ts",Cc="google.c.a.e";var Do=(()=>{return(b=Do||(Do={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Do;var b})();function br(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tc(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),W=new Uint8Array(F.length);for(let te=0;te<F.length;++te)W[te]=F.charCodeAt(te);return W}const Dr="fcm_token_details_db",Xr="fcm_token_object_Store";function Yu(b){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Dr))return null;let D=null;return(yield(0,ie.X3)(Dr,5,{upgrade:(F=(0,P.Z)(function*(W,te,fe,Ke){var tt;if(te<2||!W.objectStoreNames.contains(Xr))return;const ut=Ke.objectStore(Xr),Lt=yield ut.index("fcmSenderId").get(b);if(yield ut.clear(),Lt)if(2===te){const wt=Lt;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;D={token:wt.fcmToken,createTime:null!==(tt=wt.createTime)&&void 0!==tt?tt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:br(wt.vapidKey)}}}else if(3===te){const wt=Lt;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:br(wt.auth),p256dh:br(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:br(wt.vapidKey)}}}else if(4===te){const wt=Lt;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:br(wt.auth),p256dh:br(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:br(wt.vapidKey)}}}}),function(te,fe,Ke,tt){return F.apply(this,arguments)})})).close(),yield(0,ie.Lj)(Dr),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),Qu(D)?D:null;var F}),Ac.apply(this,arguments)}function Qu(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Mi="firebase-messaging-store";let uh=null;function Jt(){return uh||(uh=(0,ie.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Mi)}})),uh}function ua(b){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,P.Z)(function*(b){const D=Kn(b),F=yield(yield Jt()).transaction(Mi).objectStore(Mi).get(D);if(F)return F;{const W=yield Yu(b.appConfig.senderId);if(W)return yield Zt(b,W),W}})).apply(this,arguments)}function Zt(b,D){return la.apply(this,arguments)}function la(){return(la=(0,P.Z)(function*(b,D){const x=Kn(b),W=(yield Jt()).transaction(Mi,"readwrite");return yield W.objectStore(Mi).put(D,x),yield W.done,D})).apply(this,arguments)}function za(b){return Is.apply(this,arguments)}function Is(){return(Is=(0,P.Z)(function*(b){const D=Kn(b),F=(yield Jt()).transaction(Mi,"readwrite");yield F.objectStore(Mi).delete(D),yield F.done})).apply(this,arguments)}function Kn({appConfig:b}){return b.appId}const an=new ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ri(b,D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(b,D){const x=yield Ao(b),F=bs(D),W={method:"POST",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Ni(b.appConfig),W)).json()}catch(fe){throw an.create("token-subscribe-failed",{errorInfo:fe})}if(te.error)throw an.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw an.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function Ks(b,D){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,P.Z)(function*(b,D){const x=yield Ao(b),F=bs(D.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Ni(b.appConfig)}/${D.token}`,W)).json()}catch(fe){throw an.create("token-update-failed",{errorInfo:fe})}if(te.error)throw an.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw an.create("token-update-no-token");return te.token})).apply(this,arguments)}function ca(b,D){return pi.apply(this,arguments)}function pi(){return(pi=(0,P.Z)(function*(b,D){const F={method:"DELETE",headers:yield Ao(b)};try{const te=yield(yield fetch(`${Ni(b.appConfig)}/${D}`,F)).json();if(te.error)throw an.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(W){throw an.create("token-unsubscribe-failed",{errorInfo:W})}})).apply(this,arguments)}function Ni({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ao(b){return pt.apply(this,arguments)}function pt(){return(pt=(0,P.Z)(function*({appConfig:b,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function bs({p256dh:b,auth:D,endpoint:x,vapidKey:F}){const W={web:{endpoint:x,auth:D,p256dh:b}};return F!==Zs&&(W.web.applicationPubKey=F),W}const el=6048e5;function da(b){return tl.apply(this,arguments)}function tl(){return(tl=(0,P.Z)(function*(b){const D=yield xo(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:br(D.getKey("auth")),p256dh:br(D.getKey("p256dh"))},F=yield ua(b.firebaseDependencies);if(F){if(Ya(F.subscriptionOptions,x))return Date.now()>=F.createTime+el?nl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ca(b.firebaseDependencies,F.token)}catch(W){console.warn(W)}return Te(b.firebaseDependencies,x)}return Te(b.firebaseDependencies,x)})).apply(this,arguments)}function Wa(b){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,P.Z)(function*(b){const D=yield ua(b.firebaseDependencies);D&&(yield ca(b.firebaseDependencies,D.token),yield za(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function nl(b,D){return So.apply(this,arguments)}function So(){return(So=(0,P.Z)(function*(b,D){try{const x=yield Ks(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Zt(b.firebaseDependencies,F),x}catch(x){throw yield Wa(b),x}})).apply(this,arguments)}function Te(b,D){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(b,D){const F={token:yield Ri(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Zt(b,F),F.token})).apply(this,arguments)}function xo(b,D){return on.apply(this,arguments)}function on(){return(on=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tc(D)})})).apply(this,arguments)}function Ya(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Ys(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ei(b,D){if(!D.notification)return;b.notification={};const x=D.notification.title;x&&(b.notification.title=x);const F=D.notification.body;F&&(b.notification.body=F);const W=D.notification.image;W&&(b.notification.image=W)}(D,b),function rl(b,D){!D.data||(b.data=D.data)}(D,b),function il(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const x=D.fcmOptions.link;x&&(b.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function sl(b){return"object"==typeof b&&!!b&&bo in b}function Sc(b,D){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Ki(b){return an.create("missing-app-config-values",{valueName:b})}Sc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Ip(b){if(!b||!b.options)throw Ki("App Configuration Object");if(!b.name)throw Ki("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of D)if(!x[F])throw Ki(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:W,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ti(b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(bc,{scope:lr}),b.swRegistration.update().catch(()=>{})}catch(D){throw an.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ds(b,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ti(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function ol(b,D){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Zs)})).apply(this,arguments)}function al(){return(al=(0,P.Z)(function*(b,D){if(!navigator)throw an.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw an.create("permission-blocked");return yield ol(b,null==D?void 0:D.vapidKey),yield Ds(b,null==D?void 0:D.serviceWorkerRegistration),da(b)})).apply(this,arguments)}function ha(b,D,x){return eu.apply(this,arguments)}function eu(){return(eu=(0,P.Z)(function*(b,D,x){const F=tu(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[bo],message_name:x[Dc],message_time:x[ah],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function tu(b){switch(b){case Do.NOTIFICATION_CLICKED:return"notification_open";case Do.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Mc(){return(Mc=(0,P.Z)(function*(b,D){const x=D.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Do.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Ys(x)):b.onMessageHandler.next(Ys(x)));const F=x.data;sl(F)&&"1"===F[Cc]&&(yield ha(b,x.messageType,F))})).apply(this,arguments)}const nu="@firebase/messaging",Rc=b=>{const D=new cr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function xc(b,D){return Mc.apply(this,arguments)}(D,x)),D},Mo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function Xa(b,D){return al.apply(this,arguments)}(D,F)}};function ru(){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,P.Z)(function*(){try{yield(0,ne.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ne.hl)()&&(0,ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Nc(){(0,oe._registerComponent)(new pe.wA("messaging",Rc,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",Mo,"PRIVATE")),(0,oe.registerVersion)(nu,"0.9.13"),(0,oe.registerVersion)(nu,"0.9.13","esm2017")}();const Oc="analytics",bp="firebase_id",Yi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xs="https://www.googletagmanager.com/gtag/js",Pn=new ae.Yd("@firebase/analytics");function Pc(b){return Promise.all(b.map(D=>D.catch(x=>x)))}function Dp(b,D){const x=document.createElement("script");x.src=`${Xs}?l=${b}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Ro(b,D,x,F,W,te){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(b,D,x,F,W,te){const fe=F[W];try{if(fe)yield D[fe];else{const tt=(yield Pc(x)).find(ut=>ut.measurementId===W);tt&&(yield D[tt.appId])}}catch(Ke){Pn.error(Ke)}b("config",W,te)})).apply(this,arguments)}function Cp(b,D,x,F,W){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,P.Z)(function*(b,D,x,F,W){try{let te=[];if(W&&W.send_to){let fe=W.send_to;Array.isArray(fe)||(fe=[fe]);const Ke=yield Pc(x);for(const tt of fe){const ut=Ke.find(wt=>wt.measurementId===tt),Lt=ut&&D[ut.appId];if(!Lt){te=[];break}te.push(Lt)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),b("event",F,W||{})}catch(te){Pn.error(te)}})).apply(this,arguments)}function un(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(Xs))return D;return null}const st=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ga=new class kn{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function kc(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function No(b){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(b){var D;const{appId:x,apiKey:F}=b,W={method:"GET",headers:kc(F)},te=Yi.replace("{app-id}",x),fe=yield fetch(te,W);if(200!==fe.status&&304!==fe.status){let Ke="";try{const tt=yield fe.json();(null===(D=tt.error)||void 0===D?void 0:D.message)&&(Ke=tt.error.message)}catch(tt){}throw st.create("config-fetch-failed",{httpStatus:fe.status,responseMessage:Ke})}return fe.json()})).apply(this,arguments)}function vn(b){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*(b,D=ga,x){const{appId:F,apiKey:W,measurementId:te}=b.options;if(!F)throw st.create("no-app-id");if(!W){if(te)return{measurementId:te,appId:F};throw st.create("no-api-key")}const fe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new ll;return setTimeout((0,P.Z)(function*(){Ke.abort()}),void 0!==x?x:6e4),Oi({appId:F,apiKey:W,measurementId:te},fe,Ke,D)})).apply(this,arguments)}function Oi(b,D,x){return Et.apply(this,arguments)}function Et(){return(Et=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:x},F,W=ga){const{appId:te,measurementId:fe}=b;try{yield Fc(F,D)}catch(Ke){if(fe)return Pn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:te,measurementId:fe};throw Ke}try{const Ke=yield No(b);return W.deleteThrottleMetadata(te),Ke}catch(Ke){if(!Lc(Ke)){if(W.deleteThrottleMetadata(te),fe)return Pn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${fe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:te,measurementId:fe};throw Ke}const tt=503===Number(Ke.customData.httpStatus)?(0,ne.$s)(x,W.intervalMillis,30):(0,ne.$s)(x,W.intervalMillis),ut={throttleEndTimeMillis:Date.now()+tt,backoffCount:x+1};return W.setThrottleMetadata(te,ut),Pn.debug(`Calling attemptFetch again in ${tt} millis`),Oi(b,ut,F,W)}})).apply(this,arguments)}function Fc(b,D){return new Promise((x,F)=>{const W=Math.max(D-Date.now(),0),te=setTimeout(x,W);b.addEventListener(()=>{clearTimeout(te),F(st.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Lc(b){if(!(b instanceof ne.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ll{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function cl(){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,P.Z)(function*(){if(!(0,ne.hl)())return Pn.warn(st.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(b){return Pn.warn(st.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Oo(){return(Oo=(0,P.Z)(function*(b,D,x,F,W,te,fe){var Ke;const tt=vn(b);tt.then(Gn=>{x[Gn.measurementId]=Gn.appId,b.options.measurementId&&Gn.measurementId!==b.options.measurementId&&Pn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>Pn.error(Gn)),D.push(tt);const ut=cl().then(Gn=>{if(Gn)return F.getId()}),[Lt,wt]=yield Promise.all([tt,ut]);un()||Dp(te,Lt.measurementId),W("js",new Date);const An=null!==(Ke=null==fe?void 0:fe.config)&&void 0!==Ke?Ke:{};return An.origin="firebase",An.update=!0,null!=wt&&(An[bp]=wt),W("config",Lt.measurementId,An),Lt.measurementId})).apply(this,arguments)}class to{constructor(D){this.app=D}_delete(){return delete Jn[this.app.options.appId],Promise.resolve()}}let Jn={},no=[];const ro={};let ko,xs,Po="dataLayer",Fo=!1;function Ji(b,D,x){!function ma(){const b=[];if((0,ne.ru)()&&b.push("This is a browser extension environment."),(0,ne.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,W)=>`(${W+1}) ${F}`).join(" "),x=st.create("invalid-analytics-context",{errorInfo:D});Pn.warn(x.message)}}();const F=b.options.appId;if(!F)throw st.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw st.create("no-api-key");Pn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Jn[F])throw st.create("already-exists",{id:F});if(!Fo){!function eo(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Po);const{wrappedGtag:te,gtagCore:fe}=function Tp(b,D,x,F,W){let te=function(...fe){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(te=window[W]),window[W]=function su(b,D,x,F){function te(){return(te=(0,P.Z)(function*(fe,Ke,tt){try{"event"===fe?yield Cp(b,D,x,Ke,tt):"config"===fe?yield Ro(b,D,x,F,Ke,tt):b("set",Ke)}catch(ut){Pn.error(ut)}})).apply(this,arguments)}return function W(fe,Ke,tt){return te.apply(this,arguments)}}(te,b,D,x),{gtagCore:te,wrappedGtag:window[W]}}(Jn,no,ro,Po,"gtag");xs=te,ko=fe,Fo=!0}return Jn[F]=function As(b,D,x,F,W,te,fe){return Oo.apply(this,arguments)}(b,no,ro,D,ko,Po,x),new to(b)}function Xn(){return(Xn=(0,P.Z)(function*(b,D,x,F,W){if(W&&W.global)b("event",x,F);else{const te=yield D;b("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function ki(){return ou.apply(this,arguments)}function ou(){return(ou=(0,P.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(b){return!1}})).apply(this,arguments)}const Ur="@firebase/analytics";!function Rs(){(0,oe._registerComponent)(new pe.wA(Oc,(D,{options:x})=>Ji(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function b(D){try{const x=D.getProvider(Oc).getImmediate();return{logEvent:(F,W,te)=>function ao(b,D,x,F){b=(0,ne.m9)(b),function io(b,D,x,F,W){return Xn.apply(this,arguments)}(xs,Jn[b.app.options.appId],D,x,F).catch(W=>Pn.error(W))}(x,F,W,te)}}catch(x){throw st.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Ur,"0.7.9"),(0,oe.registerVersion)(Ur,"0.7.9","esm2017")}();var Uc=O(4408),pl=O(7565);const ya=new class Tn extends pl.v{}(class es extends Uc.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Bc=O(4986),hh=O(8505),Tr=O(9468),Ar=O(5363);const _a=new d.GfV("7.3.0"),Lo="__angularfire_symbol__analyticsIsSupportedValue",ts="__angularfire_symbol__analyticsIsSupported",Ns="__angularfire_symbol__remoteConfigIsSupportedValue",ns="__angularfire_symbol__remoteConfigIsSupported",Vo="__angularfire_symbol__messagingIsSupportedValue",At="__angularfire_symbol__messagingIsSupported";function Bo(b,D,x){if(D){if(1===D.length)return D[0];const te=D.filter(fe=>fe.app===x);if(1===te.length)return te[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[ts]||(globalThis[ts]=ki().then(b=>globalThis[Lo]=b).catch(()=>globalThis[Lo]=!1)),globalThis[At]||(globalThis[At]=ru().then(b=>globalThis[Vo]=b).catch(()=>globalThis[Vo]=!1)),globalThis[ns]||(globalThis[ns]=Za().then(b=>globalThis[Ns]=b).catch(()=>globalThis[Ns]=!1));const Ap=(b,D)=>{const x=D?[D]:(0,Q.C6)(),F=[];return x.forEach(W=>{W.container.getProvider(b).instances.forEach(fe=>{F.includes(fe)||F.push(fe)})}),F};function rs(){}class _i{constructor(D,x=ya){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const W=this.zone;return this.delegate.schedule(function(fe){W.runGuarded(()=>{D.apply(this,[fe])})},x,F)}}class uu{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",rs,{},rs,rs)),x.pipe((0,hh.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $c=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new _i(Zone.current)),this.insideAngular=x.run(()=>new _i(Zone.current,Bc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(d.LFG(d.R0b))},b.\u0275prov=d.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Fi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function fh(b){return Fi(),function Os(b){return function(x){return(x=x.lift(new uu(b.ngZone))).pipe((0,Tr.R)(b.outsideAngular),(0,Ar.Q)(b.insideAngular))}}(Fi())(b)}},2090:(Je,we,O)=>{O.d(we,{$s:()=>Ot,BH:()=>He,G6:()=>Ve,L:()=>ie,LL:()=>se,Mn:()=>Ie,Sg:()=>Se,UG:()=>he,US:()=>pe,ZB:()=>U,ZR:()=>ye,b$:()=>ze,d:()=>Ce,eu:()=>ve,hl:()=>B,jU:()=>be,m9:()=>ar,ne:()=>di,pd:()=>gs,r3:()=>vr,ru:()=>Ge,tV:()=>ce,uI:()=>Le,vZ:()=>Wr,w1:()=>Ee,xO:()=>Er,xb:()=>xt,z$:()=>Re,zI:()=>z,zd:()=>bi});const oe=function(L){const H=[];let G=0;for(let De=0;De<L.length;De++){let $=L.charCodeAt(De);$<128?H[G++]=$:$<2048?(H[G++]=$>>6|192,H[G++]=63&$|128):55296==(64512&$)&&De+1<L.length&&56320==(64512&L.charCodeAt(De+1))?($=65536+((1023&$)<<10)+(1023&L.charCodeAt(++De)),H[G++]=$>>18|240,H[G++]=$>>12&63|128,H[G++]=$>>6&63|128,H[G++]=63&$|128):(H[G++]=$>>12|224,H[G++]=$>>6&63|128,H[G++]=63&$|128)}return H},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,H){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let $=0;$<L.length;$+=3){const Y=L[$],xe=$+1<L.length,Ye=xe?L[$+1]:0,dt=$+2<L.length,_t=dt?L[$+2]:0;let Rn=(15&Ye)<<2|_t>>6,wr=63&_t;dt||(wr=64,xe||(Rn=64)),De.push(G[Y>>2],G[(3&Y)<<4|Ye>>4],G[Rn],G[wr])}return De.join("")},encodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(L):this.encodeByteArray(oe(L),H)},decodeString(L,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(L):function(L){const H=[];let G=0,De=0;for(;G<L.length;){const $=L[G++];if($<128)H[De++]=String.fromCharCode($);else if($>191&&$<224){const Y=L[G++];H[De++]=String.fromCharCode((31&$)<<6|63&Y)}else if($>239&&$<365){const dt=((7&$)<<18|(63&L[G++])<<12|(63&L[G++])<<6|63&L[G++])-65536;H[De++]=String.fromCharCode(55296+(dt>>10)),H[De++]=String.fromCharCode(56320+(1023&dt))}else{const Y=L[G++],xe=L[G++];H[De++]=String.fromCharCode((15&$)<<12|(63&Y)<<6|63&xe)}}return H.join("")}(this.decodeStringToByteArray(L,H))},decodeStringToByteArray(L,H){this.init_();const G=H?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let $=0;$<L.length;){const Y=G[L.charAt($++)],Ye=$<L.length?G[L.charAt($)]:0;++$;const _t=$<L.length?G[L.charAt($)]:64;++$;const yt=$<L.length?G[L.charAt($)]:64;if(++$,null==Y||null==Ye||null==_t||null==yt)throw Error();De.push(Y<<2|Ye>>4),64!==_t&&(De.push(Ye<<4&240|_t>>2),64!==yt&&De.push(_t<<6&192|yt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},ie=function(L){return function(L){const H=oe(L);return pe.encodeByteArray(H,!0)}(L).replace(/\./g,"")},ce=function(L){try{return pe.decodeString(L,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function U(L,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return H}for(const G in H)!H.hasOwnProperty(G)||!X(G)||(L[G]=U(L[G],H[G]));return L}function X(L){return"__proto__"!==L}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,G)=>{this.resolve=H,this.reject=G})}wrapCallback(H){return(G,De)=>{G?this.reject(G):this.resolve(De),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(G):H(G,De))}}}function Se(L,H){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=H||"demo-project",$=L.iat||0,Y=L.sub||L.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xe=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:$,exp:$+3600,auth_time:$,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},L);return[ie(JSON.stringify({alg:"none",type:"JWT"})),ie(JSON.stringify(xe)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function be(){return"object"==typeof self&&self.self===self}function Ge(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return Re().indexOf("Electron/")>=0}function Ee(){const L=Re();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ie(){return Re().indexOf("MSAppHost/")>=0}function Ve(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function ve(){return new Promise((L,H)=>{try{let G=!0;const De="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(De);$.onsuccess=()=>{$.result.close(),G||self.indexedDB.deleteDatabase(De),L(!0)},$.onupgradeneeded=()=>{G=!1},$.onerror=()=>{var Y;H((null===(Y=$.error)||void 0===Y?void 0:Y.message)||"")}}catch(G){H(G)}})}function z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(H,G,De){super(G),this.code=H,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,se.prototype.create)}}class se{constructor(H,G,De){this.service=H,this.serviceName=G,this.errors=De}create(H,...G){const De=G[0]||{},$=`${this.service}/${H}`,Y=this.errors[H],xe=Y?function Ne(L,H){return L.replace(at,(G,De)=>{const $=H[De];return null!=$?String($):`<${De}?>`})}(Y,De):"Error";return new ye($,`${this.serviceName}: ${xe} (${$}).`,De)}}const at=/\{\$([^}]+)}/g;function vr(L,H){return Object.prototype.hasOwnProperty.call(L,H)}function xt(L){for(const H in L)if(Object.prototype.hasOwnProperty.call(L,H))return!1;return!0}function Wr(L,H){if(L===H)return!0;const G=Object.keys(L),De=Object.keys(H);for(const $ of G){if(!De.includes($))return!1;const Y=L[$],xe=H[$];if(ir(Y)&&ir(xe)){if(!Wr(Y,xe))return!1}else if(Y!==xe)return!1}for(const $ of De)if(!G.includes($))return!1;return!0}function ir(L){return null!==L&&"object"==typeof L}function Er(L){const H=[];for(const[G,De]of Object.entries(L))Array.isArray(De)?De.forEach($=>{H.push(encodeURIComponent(G)+"="+encodeURIComponent($))}):H.push(encodeURIComponent(G)+"="+encodeURIComponent(De));return H.length?"&"+H.join("&"):""}function bi(L){const H={};return L.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[$,Y]=De.split("=");H[decodeURIComponent($)]=decodeURIComponent(Y)}}),H}function gs(L){const H=L.indexOf("?");if(!H)return"";const G=L.indexOf("#",H);return L.substring(H,G>0?G:void 0)}function di(L,H){const G=new ft(L,H);return G.subscribe.bind(G)}class ft{constructor(H,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{H(this)}).catch(De=>{this.error(De)})}next(H){this.forEachObserver(G=>{G.next(H)})}error(H){this.forEachObserver(G=>{G.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,G,De){let $;if(void 0===H&&void 0===G&&void 0===De)throw new Error("Missing Observer.");$=function cn(L,H){if("object"!=typeof L||null===L)return!1;for(const G of H)if(G in L&&"function"==typeof L[G])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:G,complete:De},void 0===$.next&&($.next=yn),void 0===$.error&&($.error=yn),void 0===$.complete&&($.complete=yn);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(xe){}}),this.observers.push($),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,H)}sendOne(H,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{G(this.observers[H])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function Ot(L,H=1e3,G=2){const De=H*Math.pow(G,L),$=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+$)}function ar(L){return L&&L._delegate?L._delegate:L}},8742:(Je,we,O)=>{var d=O(5e3);let Q=null;function P(){return Q}const ae=new d.OlP("DocumentToken");let ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ce(){return(0,d.LFG)(U)}()},providedIn:"platform"}),n})();const j=new d.OlP("Location Initialized");let U=(()=>{class n extends ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function He(){return new U((0,d.LFG)(ae))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Se(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function be(n){const e=(0,d.LFG)(ae).location;return new ze((0,d.LFG)(ie),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ge=new d.OlP("appBaseHref");let ze=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Se(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(Ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Se(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Le(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Le(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie),d.LFG(Ge,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Ve(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Se,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,d.LFG)(he),(0,d.LFG)(ie))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class _s{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new _s(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),qs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{qs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function qs(n,e){n.context.$implicit=e.item}let dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Qt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ga("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ga("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Qt{constructor(){this.$implicit=null,this.ngIf=null}}function Ga(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Cc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Co(n){return"server"===n}let Qu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new To((0,d.LFG)(ae),window)}),n})();class To{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Mi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ju(this.window.history)||Ju(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ju(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ws extends class ua extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ne(n){Q||(Q=n)}(new Ws)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function la(){return Zt=Zt||document.querySelector("base"),Zt?Zt.getAttribute("href"):null}();return null==t?null:function Is(n){za=za||document.createElement("a"),za.setAttribute("href",n);const e=za.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function sa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let za,Zt=null;const Kn=new d.OlP("TRANSITION_ID"),an=[{provide:d.ip1,useFactory:function Xu(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Kn,ae,d.zs3],multi:!0}];class Ri{static init(){(0,d.VLi)(new Ri)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Yn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ks=new d.OlP("EventManagerPlugins");let Wi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ks),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ca{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let pi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ni=(()=>{class n extends pi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ao),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ao))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Ao(n){P().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bs=/%COMP%/g;function So(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?So(n,o,t):(o=o.replace(bs,n),t.push(o))}return t}function Te(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new on(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ei(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new rl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=So(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wi),d.LFG(Ni),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class on{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=pt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Te(r)):this.eventManager.addEventListener(e,t,Te(r))}}class ei extends on{constructor(e,t,r,o){super(e),this.component=r;const u=So(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ka(n){return"_ngcontent-%COMP%".replace(bs,n)}(o+"-"+r.id),this.hostAttr=function nl(n){return"_nghost-%COMP%".replace(bs,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rl extends on{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=So(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let il=(()=>{class n extends ca{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=["alt","control","meta","shift"],Ip={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ki={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},cr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ti=(()=>{class n extends ca{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(sl.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Qa(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Ki.hasOwnProperty(e)&&(e=Ki[e]))}return Ip[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),sl.forEach(u=>{u!=o&&cr[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ae))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Xa=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function Ds(){Ws.makeCurrent(),Ri.init()},multi:!0},{provide:ae,useFactory:function ol(){return(0,d.RDi)(document),document},deps:[]}]),al=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function gi(){return new d.qLn},deps:[]},{provide:Ks,useClass:il,multi:!0,deps:[ae,d.R0b,d.Lbi]},{provide:Ks,useClass:ti,multi:!0,deps:[ae]},{provide:xo,useClass:xo,deps:[Wi,Ni,d.AFp]},{provide:d.FYo,useExisting:xo},{provide:pi,useExisting:Ni},{provide:Ni,useClass:Ni,deps:[ae]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Wi,useClass:Wi,deps:[Ks,d.R0b]},{provide:class Jt{},useClass:Yn,deps:[]}];let ha=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Kn,useExisting:d.AFp},an]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:al,imports:[Cc,d.hGG]}),n})();"undefined"!=typeof window&&window;var un=O(8996),pa=O(7669);function st(...n){const e=(0,pa.yG)(n);return(0,un.D)(n,e)}var Cr=O(7579);class mi extends Cr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var kn=O(8306);const{isArray:ga}=Array,{getPrototypeOf:kc,prototype:No,keys:Cs}=Object;function vn(n){if(1===n.length){const e=n[0];if(ga(e))return{args:e,keys:null};if(function Ts(n){return n&&"object"==typeof n&&kc(n)===No}(e)){const t=Cs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Oi=O(4671),Et=O(4004);const{isArray:Fc}=Array;function ll(n){return(0,Et.U)(e=>function Lc(n,e){return Fc(e)?n(...e):n(e)}(n,e))}function cl(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Qn=O(5403),As=O(9672);function Jn(n,e,t){n?(0,As.f)(t,n,e):e()}var no=O(576);function ro(n,e){const t=(0,no.m)(n)?n:()=>n,r=o=>o.error(t());return new kn.y(e?o=>e.schedule(r,0,o):r)}const Ss=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ko=O(8189);function Fo(...n){return function xs(){return(0,ko.J)(1)}()((0,un.D)(n,(0,pa.yG)(n)))}var dl=O(8421);function ma(n){return new kn.y(e=>{(0,dl.Xf)(n()).subscribe(e)})}var Ji=O(515),io=O(727),Xn=O(4482);function hl(){return(0,Xn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Qn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ms extends kn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new io.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Qn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=io.w0.EMPTY)}return e}refCount(){return hl()(this)}}function Fn(n,e){return(0,Xn.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Qn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const R=u++;(0,dl.Xf)(n(w,R)).subscribe(o=(0,Qn.x)(r,N=>r.next(e?e(w,N,R,C++):N),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var so=O(5698);function oo(...n){const e=(0,pa.yG)(n);return(0,Xn.e)((t,r)=>{(e?Fo(n,t,e):Fo(n,t)).subscribe(r)})}function Xi(n,e,t,r,o){return(u,h)=>{let m=t,w=e,C=0;u.subscribe((0,Qn.x)(h,R=>{const N=C++;w=m?n(w,R,N):(m=!0,R),r&&h.next(w)},o&&(()=>{m&&h.next(w),h.complete()})))}}function Pi(n,e){return(0,Xn.e)(Xi(n,e,arguments.length>=2,!0))}function er(n,e){return(0,Xn.e)((t,r)=>{let o=0;t.subscribe((0,Qn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function yi(n){return(0,Xn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Qn.x)(t,void 0,void 0,h=>{u=(0,dl.Xf)(n(h,yi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Ln=O(5577);function ki(n,e){return(0,no.m)(e)?(0,Ln.z)(n,e,1):(0,Ln.z)(n,1)}function ou(n){return n<=0?()=>Ji.E:(0,Xn.e)((e,t)=>{let r=[];e.subscribe((0,Qn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function fl(n=hn){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Qn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function hn(){return new Ss}function dh(n){return(0,Xn.e)((e,t)=>{let r=!1;e.subscribe((0,Qn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ao(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):Oi.y,(0,so.q)(1),t?dh(e):fl(()=>new Ss))}var Ur=O(8505);class Rs{constructor(e,t){this.id=e,this.url=t}}class Uc extends Rs{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class es extends Rs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pl extends Rs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tn extends Rs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ya extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class au extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bc extends Rs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hh extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr extends Rs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class _a{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ts{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ns{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class jc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uo(n){return new jc(n)}const dr="ngNavigationCancelingError";function va(n){const e=Error("NavigationCancelingError: "+n);return e[dr]=!0,e}function Ap(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function _i(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!uu(n[o],e[o]))return!1;return!0}function uu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function $c(n){return Array.prototype.concat.apply([],n)}function Fi(n){return n.length>0?n[n.length-1]:null}function sn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hr(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,un.D)(Promise.resolve(n)):st(n)}const fh={exact:function b(n,e,t){if(!ut(n.segments,e.segments)||!W(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!b(n.children[r],e.children[r],t))return!1;return!0},subset:x},Os={exact:function Ea(n,e){return _i(n,e)},subset:function D(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uu(n[t],e[t]))},ignored:()=>!0};function jo(n,e,t){return fh[t.paths](n.root,e.root,t.matrixParams)&&Os[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function x(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ut(o,t)||e.hasChildren()||!W(o,t,r))}if(n.segments.length===t.length){if(!ut(n.segments,t)||!W(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!x(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ut(n.segments,o)&&W(n.segments,o,r)&&n.children[At])&&F(n.children[At],e,u,r)}}function W(n,e,t){return e.every((r,o)=>Os[t](n[o].parameters,r.parameters))}class te{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){return Gn.serialize(this)}}class fe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return is(this)}}class Ke{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uo(this.parameters)),this._parameterMap}toString(){return yl(this)}}function ut(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wt{}class An{parse(e){const t=new Sp(e);return new te(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Li(e.root,!0)}`,r=function ph(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${fr(t)}=${fr(o)}`).join("&"):`${fr(t)}=${fr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ss(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Gn=new An;function is(n){return n.segments.map(e=>yl(e)).join("/")}function Li(n,e){if(!n.hasChildren())return is(n);if(e){const t=n.children[At]?Li(n.children[At],!1):"",r=[];return sn(n.children,(o,u)=>{u!==At&&r.push(`${u}:${Li(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lt(n,e){let t=[];return sn(n.children,(r,o)=>{o===At&&(t=t.concat(e(r,o)))}),sn(n.children,(r,o)=>{o!==At&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===At?[Li(n.children[At],!1)]:[`${o}:${Li(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${is(n)}/${t[0]}`:`${is(n)}/(${t.join("//")})`}}function vi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fr(n){return vi(n).replace(/%3B/gi,";")}function Ps(n){return vi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ml(n){return decodeURIComponent(n)}function Gc(n){return ml(n.replace(/\+/g,"%20"))}function yl(n){return`${Ps(n.path)}${function qc(n){return Object.keys(n).map(e=>`;${Ps(e)}=${Ps(n[e])}`).join("")}(n.parameters)}`}const gh=/^[^\/()?;=#]+/;function Zc(n){const e=n.match(gh);return e?e[0]:""}const lu=/^[^=?&#]+/,mh=/^[^&#]+/;class Sp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new fe(e,t)),r}parseSegment(){const e=Zc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ke(ml(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Zc(this.remaining);o&&(r=o,this.capture(r))}e[ml(t)]=ml(r)}parseQueryParam(e){const t=function _l(n){const e=n.match(lu);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function p0(n){const e=n.match(mh);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Gc(t),u=Gc(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[At]:new fe([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=xp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=xp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return cu(e,this._root).map(t=>t.value)}}function xp(n,e){if(n===e.value)return e;for(const t of e.children){const r=xp(n,t);if(r)return r}return null}function cu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cu(n,t);if(r.length)return r.unshift(e),r}return[]}class uo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function du(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vl extends yh{constructor(e,t){super(e),this.snapshot=t,Kc(this,e)}toString(){return this.snapshot.toString()}}function zc(n,e){const t=function hu(n,e){const h=new lo([],{},{},"",{},At,e,null,n.root,-1,{});return new Wc("",new uo(h,[]))}(n,e),r=new mi([new Ke("",{})]),o=new mi({}),u=new mi({}),h=new mi({}),m=new mi(""),w=new fu(r,o,h,m,u,At,e,t.root);return w.snapshot=t.root,new vl(new uo(w,[]),t)}class fu{constructor(e,t,r,o,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>Uo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>Uo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function g0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class lo{constructor(e,t,r,o,u,h,m,w,C,R,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=R,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wc extends yh{constructor(e,t){super(t),this.url=e,Kc(this,t)}toString(){return _h(this._root)}}function Kc(n,e){e.value._routerState=n,e.children.forEach(t=>Kc(n,t))}function _h(n){const e=n.children.length>0?` { ${n.children.map(_h).join(", ")} } `:"";return`${n.value}${e}`}function Yc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_i(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),_i(e.params,t.params)||n.params.next(t.params),function rs(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_i(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),_i(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qc(n,e){const t=_i(n.params,e.params)&&function tt(n,e){return ut(n,e)&&n.every((t,r)=>_i(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qc(n.parent,e.parent))}function El(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function uy(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return El(n,r,o);return El(n,r)})}(n,e,t);return new uo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>El(n,m)),h}}const r=function ly(n){return new fu(new mi(n.url),new mi(n.params),new mi(n.queryParams),new mi(n.fragment),new mi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>El(n,u));return new uo(r,o)}}function Ei(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function co(n){return"object"==typeof n&&null!=n&&n.outlets}function wl(n,e,t,r,o){let u={};if(r&&sn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new te(t,u,o);const h=dy(n,e,t);return new te(h,u,o)}function dy(n,e,t){const r={};return sn(n.children,(o,u)=>{r[u]=o===e?t:dy(o,e,t)}),new fe(n.segments,r)}class Np{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ei(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(co);if(o&&o!==Fi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Pp(n,e,t){if(n||(n=new fe([],{})),0===n.segments.length&&n.hasChildren())return Xc(n,e,t);const r=function hy(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(co(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Eh(w,C,h))return u;r+=2}else{if(!Eh(w,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new fe(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new fe(n.segments.slice(r.pathIndex),n.children),Xc(u,0,o)}return r.match&&0===o.length?new fe(n.segments,{}):r.match&&!n.hasChildren()?fy(n,e,t):r.match?Xc(n,0,o):fy(n,e,t)}function Xc(n,e,t){if(0===t.length)return new fe(n.segments,{});{const r=function Op(n){return co(n[0])?n[0].outlets:{[At]:n}}(t),o={};return sn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=Pp(n.children[h],e,u))}),sn(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new fe(n.segments,o)}}function fy(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(co(u)){const w=wa(u.outlets);return new fe(r,w)}if(0===o&&Ei(t[0])){r.push(new Ke(n.segments[e].path,Il(t[0]))),o++;continue}const h=co(u)?u.outlets[At]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&Ei(m)?(r.push(new Ke(h,Il(m))),o+=2):(r.push(new Ke(h,{})),o++)}return new fe(r,{})}function wa(n){const e={};return sn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=fy(new fe([],{}),0,t))}),e}function Il(n){const e={};return sn(n,(t,r)=>e[r]=`${t}`),e}function Eh(n,e,t){return n==t.path&&_i(e,t.parameters)}class bl{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=du(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),sn(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=du(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=du(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=du(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ns(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ts(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Yc(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),Yc(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function ed(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=w,h.outlet&&h.outlet.activateWith(o,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class td{constructor(e,t){this.routes=e,this.module=t}}function ho(n){return"function"==typeof n}function pu(n){return n instanceof te}const nd=Symbol("INITIAL_VALUE");function rd(){return Fn(n=>function Oo(...n){const e=(0,pa.yG)(n),t=(0,pa.jO)(n),{args:r,keys:o}=vn(n);if(0===r.length)return(0,un.D)([],e);const u=new kn.y(function to(n,e,t=Oi.y){return r=>{Jn(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let w=0;w<o;w++)Jn(e,()=>{const C=(0,un.D)(n[w],e);let R=!1;C.subscribe((0,Qn.x)(r,N=>{u[w]=N,R||(R=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>cl(o,h):Oi.y));return t?u.pipe(ll(t)):u}(n.map(e=>e.pipe((0,so.q)(1),oo(nd)))).pipe(Pi((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==nd?o:(u===nd&&(r=!0),r||!1!==u&&h!==t.length-1&&!pu(u)?o:u),e)},nd),er(e=>e!==nd),(0,Et.U)(e=>pu(e)?e:!0===e),(0,so.q)(1)))}class Fp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gu,this.attachRef=null}}class gu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Fp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Cl=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new py(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gu),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class py{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===fu?this.route:e===gu?this.childContexts:this.parent.get(e,t)}}let Lp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[Cl],encapsulation:2}),n})();function Tl(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];mu(r,gy(e,r))}}function mu(n,e){n.children&&Tl(n.children,e)}function gy(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Al(n){const e=n.children&&n.children.map(Al),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=Lp),t}function Br(n){return n.outlet||At}function Sn(n,e){const t=n.filter(r=>Br(r)===e);return t.push(...n.filter(r=>Br(r)!==e)),t}const Vp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function id(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Vp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Ap)(t,n,e);if(!u)return Object.assign({},Vp);const h={};sn(u.posParams,(w,C)=>{h[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ia(n,e,t,r,o="corrected"){if(t.length>0&&function yy(n,e,t){return t.some(r=>$o(n,e,r)&&Br(r)!==At)}(n,t,r)){const h=new fe(e,function my(n,e,t,r){const o={};o[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Br(u)!==At){const h=new fe([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Br(u)]=h}return o}(n,e,r,new fe(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function _y(n,e,t){return t.some(r=>$o(n,e,r))}(n,t,r)){const h=new fe(n.segments,function Up(n,e,t,r,o,u){const h={};for(const m of r)if($o(n,t,m)&&!o[Br(m)]){const w=new fe([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[Br(m)]=w}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new fe(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function $o(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Bp(n,e,t,r){return!!(Br(n)===r||r!==At&&$o(e,t,n))&&("**"===n.path||id(e,n,t).matched)}function jp(n,e,t){return 0===e.length&&!n.children[t]}class bh{constructor(e){this.segmentGroup=e||null}}class yu{constructor(e){this.urlTree=e}}function qn(n){return ro(new bh(n))}function sd(n){return ro(new yu(n))}class _u{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Ia(this.urlTree.root,[],[],this.config).segmentGroup,t=new fe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,At).pipe((0,Et.U)(u=>this.createUrlTree(Sl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yi(u=>{if(u instanceof yu)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof bh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,At).pipe((0,Et.U)(o=>this.createUrlTree(Sl(o),e.queryParams,e.fragment))).pipe(yi(o=>{throw o instanceof bh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new fe([],{[At]:e}):e;return new te(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Et.U)(u=>new fe([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,un.D)(o).pipe(ki(u=>{const h=r.children[u],m=Sn(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Et.U)(w=>({segment:w,outlet:u})))}),Pi((u,h)=>(u[h.outlet]=h.segment,u),{}),function ay(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):Oi.y,ou(1),t?dh(e):fl(()=>new Ss))}())}expandSegment(e,t,r,o,u,h){return(0,un.D)(r).pipe(ki(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(yi(C=>{if(C instanceof bh)return st(null);throw C}))),ao(m=>!!m),yi((m,w)=>{if(m instanceof Ss||"EmptyError"===m.name)return jp(t,o,u)?st(new fe([],{})):qn(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return Bp(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):qn(t):qn(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sd(u):this.lineralizeSegments(r,u).pipe((0,Ln.z)(h=>{const m=new fe(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:R}=id(t,o,u);if(!m)return qn(t);const N=this.applyRedirectCommands(w,o.redirectTo,R);return o.redirectTo.startsWith("/")?sd(N):this.lineralizeSegments(o,N).pipe((0,Ln.z)(q=>this.expandSegment(e,t,r,q.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Et.U)(N=>(r._loadedConfig=N,new fe(o,{})))):st(new fe(o,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=id(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,Ln.z)(R=>{const N=R.module,q=R.routes,{segmentGroup:ee,slicedSegments:me}=Ia(t,m,w,q),Fe=new fe(ee.segments,ee.children);if(0===me.length&&Fe.hasChildren())return this.expandChildren(N,q,Fe).pipe((0,Et.U)(Ht=>new fe(m,Ht)));if(0===q.length&&0===me.length)return st(new fe(m,{}));const rt=Br(r)===u;return this.expandSegment(N,Fe,q,me,rt?At:u,!0).pipe((0,Et.U)(Bt=>new fe(m.concat(Bt.segments),Bt.children)))})):qn(t)}getChildConfig(e,t,r){return t.children?st(new td(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Ln.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Et.U)(u=>(t._loadedConfig=u,u))):function od(n){return ro(va(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new td([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?st(o.map(h=>{const m=e.get(h);let w;if(function _0(n){return n&&ho(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!ho(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return hr(w)})).pipe(rd(),(0,Ur.b)(h=>{if(!pu(h))return;const m=va(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Et.U)(h=>!0===h)):st(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return st(r);if(o.numberOfChildren>1||!o.children[At])return ro(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new te(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return sn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,o)}),new fe(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Sl(n){const e={};for(const r of Object.keys(n.children)){const u=Sl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ch(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new fe(n.segments.concat(e.segments),e.children)}return n}(new fe(n.segments,e))}class jr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ho{constructor(e,t){this.component=e,this.route=t}}function Th(n,e,t){const r=n._root;return xl(r,e?e._root:null,t,[r.value])}function ba(n,e,t){const r=function Ah(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function xl(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=du(e);return n.children.forEach(h=>{(function ad(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ut(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ut(n.url,e.url)||!_i(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qc(n,e)||!_i(n.queryParams,e.queryParams);default:return!Qc(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new jr(r)):(u.data=h.data,u._resolvedData=h._resolvedData),xl(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ho(m.outlet.component,h))}else h&&Ui(e,m,o),o.canActivateChecks.push(new jr(r)),xl(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),sn(u,(h,m)=>Ui(h,t.getContext(m),o)),o}function Ui(n,e,t){const r=du(n),o=n.value;sn(r,(u,h)=>{Ui(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Ho(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Dy{}function os(n){return new kn.y(e=>e.error(n))}class Hp{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Ia(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,At);if(null===t)return null;const r=new lo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new uo(r,t),u=new Wc(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Mp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=Sn(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const o=qp(r);return function Gp(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return jp(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Bp(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const ee=r.length>0?Fi(r).parameters:{};u=new lo(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Br(e),e.component,e,Zp(t),Da(t)+r.length,f(e))}else{const ee=id(t,e,r);if(!ee.matched)return null;h=ee.consumedSegments,m=ee.remainingSegments,u=new lo(h,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),Br(e),e.component,e,Zp(t),Da(t)+h.length,f(e))}const w=function Cy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:R}=Ia(t,h,m,w.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===R.length&&C.hasChildren()){const ee=this.processChildren(w,C);return null===ee?null:[new uo(u,ee)]}if(0===w.length&&0===R.length)return[new uo(u,[])];const N=Br(e)===o,q=this.processSegment(w,C,R,N?At:o);return null===q?null:[new uo(u,q)]}}function Mh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qp(n){const e=[],t=new Set;for(const r of n){if(!Mh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=qp(r.children);e.push(new uo(r.value,o))}return e.filter(r=>!t.has(r))}function Zp(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Da(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Z(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ke(n){return Fn(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,Et.U)(()=>e)):st(e)})}class lt extends class ct{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const En=new d.OlP("ROUTES");class ri{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Et.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new td($c(h.injector.get(En,void 0,d.XFs.Self|d.XFs.Optional)).map(Al),h)}),yi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ms(o,()=>new Cr.x).pipe(hl()),t._loader$}loadModuleFactory(e){return hr(e()).pipe((0,Ln.z)(t=>t instanceof d.YKP?st(t):(0,un.D)(this.compiler.compileModuleAsync(t))))}}class Rh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function zp(n){throw n}function Ca(n,e,t){return e.parse("/")}function Rl(n,e){return st(null)}const cd={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wp={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let nr=(()=>{class n{constructor(t,r,o,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Cr.x,this.errorHandler=zp,this.malformedUriErrorHandler=Ca,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rl,afterPreactivation:Rl},this.urlHandlingStrategy=new Rh,this.routeReuseStrategy=new lt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const N=h.get(d.R0b);this.isNgZoneEnabled=N instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function gl(){return new te(new fe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ri(h,m,q=>this.triggerEvent(new Ar(q)),q=>this.triggerEvent(new _a(q))),this.routerState=zc(this.currentUrlTree,this.rootComponentType),this.transitions=new mi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(er(o=>0!==o.id),(0,Et.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{let u=!1,h=!1;return st(o).pipe((0,Ur.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Fn(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Oh(m.source)&&(this.browserUrlTree=m.extractedUrl),st(m).pipe(Fn(N=>{const q=this.transitions.getValue();return r.next(new Uc(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),q!==this.transitions.getValue()?Ji.E:Promise.resolve(N)}),function vy(n,e,t,r){return Fn(o=>function tr(n,e,t,r,o){return new _u(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Et.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ur.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function g(n,e,t,r,o){return(0,Ln.z)(u=>function Ml(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new Hp(n,e,t,r,o,u).recognize();return null===h?os(new Dy):st(h)}catch(h){return os(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Et.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ur.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ee,N)}this.browserUrlTree=N.urlAfterRedirects}const q=new ya(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(q)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:ee,source:me,restoredState:Fe,extras:rt}=m,Ut=new Uc(q,this.serializeUrl(ee),me,Fe);r.next(Ut);const Bt=zc(ee,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},m),{targetSnapshot:Bt,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},rt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Ji.E}),ke(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:ee}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!ee})}),(0,Ur.b)(m=>{const w=new au(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Et.U)(m=>Object.assign(Object.assign({},m),{guards:Th(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function ud(n,e){return(0,Ln.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function Iy(n,e,t,r){return(0,un.D)(n).pipe((0,Ln.z)(o=>function xh(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(m=>{const w=ba(m,e,o);let C;if(function Ih(n){return n&&ho(n.canDeactivate)}(w))C=hr(w.canDeactivate(n,e,t,r));else{if(!ho(w))throw new Error("Invalid CanDeactivate guard");C=hr(w(n,e,t,r))}return C.pipe(ao())})).pipe(rd()):st(!0)}(o.component,o.route,t,e,r)),ao(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Ln.z)(m=>m&&function kp(n){return"boolean"==typeof n}(m)?function by(n,e,t,r){return(0,un.D)(e).pipe(ki(o=>Fo(function $p(n,e){return null!==n&&e&&e(new Lo(n)),st(!0)}(o.route.parent,r),function ld(n,e){return null!==n&&e&&e(new Ns(n)),st(!0)}(o.route,r),function Sh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function Ey(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>ma(()=>st(h.guards.map(w=>{const C=ba(w,h.node,t);let R;if(function wh(n){return n&&ho(n.canActivateChild)}(C))R=hr(C.canActivateChild(r,n));else{if(!ho(C))throw new Error("Invalid CanActivateChild guard");R=hr(C(r,n))}return R.pipe(ao())})).pipe(rd())));return st(u).pipe(rd())}(n,o.path,t),function ni(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const o=r.map(u=>ma(()=>{const h=ba(u,e,t);let m;if(function Dl(n){return n&&ho(n.canActivate)}(h))m=hr(h.canActivate(e,n));else{if(!ho(h))throw new Error("Invalid CanActivate guard");m=hr(h(e,n))}return m.pipe(ao())}));return st(o).pipe(rd())}(n,o.route,t))),ao(o=>!0!==o,!0))}(r,u,n,e):st(m)),(0,Et.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ur.b)(m=>{if(pu(m.guardsResult)){const C=va(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new Bc(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),er(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),ke(m=>{if(m.guards.canActivateChecks.length)return st(m).pipe((0,Ur.b)(w=>{const C=new hh(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),Fn(w=>{let C=!1;return st(w).pipe(function v(n,e){return(0,Ln.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return st(t);let u=0;return(0,un.D)(o).pipe(ki(h=>function T(n,e,t,r){return function M(n,e,t,r){const o=Z(n);if(0===o.length)return st({});const u={};return(0,un.D)(o).pipe((0,Ln.z)(h=>function de(n,e,t,r){const o=ba(n,e,r);return hr(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Ur.b)(m=>{u[h]=m}))),ou(1),(0,Ln.z)(()=>Z(u).length===o.length?st(u):Ji.E))}(n._resolve,n,e,r).pipe((0,Et.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Mp(n,t).resolve),null)))}(h.route,r,n,e)),(0,Ur.b)(()=>u++),ou(1),(0,Ln.z)(h=>u===o.length?st(t):Ji.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ur.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Ur.b)(w=>{const C=new Tr(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),ke(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:q,replaceUrl:ee}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!q,replaceUrl:!!ee})}),(0,Et.U)(m=>{const w=function Rp(n,e,t){const r=El(n,e._root,t?t._root:void 0);return new vl(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Ur.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Et.U)(r=>(new bl(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ur.b)({next(){u=!0},complete(){u=!0}}),function Vc(n){return(0,Xn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),yi(m=>{if(h=!0,function Bo(n){return n&&n[dr]}(m)){const w=pu(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new pl(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oh(o.source)};this.scheduleNavigation(R,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Tn(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Ji.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Tl(t),this.config=t.map(Al),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,R=w?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function cy(n,e,t,r,o){if(0===t.length)return wl(e.root,e.root,e.root,r,o);const u=function m0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Np(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return sn(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new Np(t,e,r)}(t);if(u.toRoot())return wl(e.root,e.root,new fe([],{}),r,o);const h=function y0(n,e,t){if(n.isAbsolute)return new Jc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Jc(u,u===e.root,0)}const r=Ei(n.commands[0])?0:1;return function vh(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Jc(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Xc(h.segmentGroup,h.index,u.commands):Pp(h.segmentGroup,h.index,u.commands);return wl(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=pu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Nh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},cd):!1===r?Object.assign({},Wp):r,pu(t))return jo(this.currentUrlTree,t,o);const u=this.parseUrl(t);return jo(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new es(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let C,R,N;h?(C=h.resolve,R=h.reject,N=h.promise):N=new Promise((me,Fe)=>{C=me,R=Fe});const q=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ee=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):ee=0,this.setTransition({id:q,targetPageId:ee,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:R,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(me=>Promise.reject(me))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new pl(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Oh(n){return"imperative"!==n}let dd=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new Cr.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:wu(this.skipLocationChange),replaceUrl:wu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nr),d.Y36(fu),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})(),Eu=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Cr.x,this.subscription=t.events.subscribe(u=>{u instanceof es&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,h){if(0!==t||r||o||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:wu(this.skipLocationChange),replaceUrl:wu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:wu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nr),d.Y36(fu),d.Y36(he))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&d.uIk("target",r.target)("href",r.href,d.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function wu(n){return""===n||!!n}class Kp{}class Yp{preload(e,t){return st(null)}}let I0=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new ri(o,r,w=>t.triggerEvent(new Ar(w)),w=>t.triggerEvent(new _a(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(er(t=>t instanceof es),ki(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,un.D)(o).pipe((0,ko.J)(),(0,Et.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Ln.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nr),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(Kp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ty=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Uc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof es&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Vo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=new d.OlP("ROUTER_CONFIGURATION"),bu=new d.OlP("ROUTER_FORROOT_GUARD"),b0=[Ee,{provide:wt,useClass:An},{provide:nr,useFactory:function A0(n,e,t,r,o,u,h={},m,w){const C=new nr(null,n,e,t,r,o,$c(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function Sy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(R=>{var N,q;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(q=console.groupEnd)||void 0===q||q.call(console)}),C},deps:[wt,gu,Ee,d.zs3,d.Sil,En,Iu,[class vu{},new d.FiY],[class Qe{},new d.FiY]]},gu,{provide:fu,useFactory:function S0(n){return n.routerState.root},deps:[nr]},I0,Yp,class w0{preload(e,t){return t().pipe(yi(()=>st(null)))}},{provide:Iu,useValue:{enableTracing:!1}}];function D0(){return new d.PXZ("Router",nr)}let C0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[b0,Ay(t),{provide:bu,useFactory:T0,deps:[[nr,new d.FiY,new d.tp0]]},{provide:Iu,useValue:r||{}},{provide:he,useFactory:_b,deps:[ie,[new d.tBr(Ge),new d.FiY],Iu]},{provide:Ty,useFactory:Qp,deps:[nr,Qu,Iu]},{provide:Kp,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Yp},{provide:d.PXZ,multi:!0,useFactory:D0},[hd,{provide:d.ip1,multi:!0,useFactory:Jp,deps:[hd]},{provide:Xp,useFactory:x0,deps:[hd]},{provide:d.tb,multi:!0,useExisting:Xp}]]}}static forChild(t){return{ngModule:n,providers:[Ay(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bu,8),d.LFG(nr,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Qp(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ty(n,e,t)}function _b(n,e,t={}){return t.useHash?new Ce(n,e):new ze(n,e)}function T0(n){return"guarded"}function Ay(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:En,multi:!0,useValue:n}]}let hd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Cr.x}appInitializer(){return this.injector.get(j,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(nr),h=this.injector.get(Iu);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Iu),o=this.injector.get(I0),u=this.injector.get(Ty),h=this.injector.get(nr),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Jp(n){return n.appInitializer.bind(n)}function x0(n){return n.bootstrapListener.bind(n)}const Xp=new d.OlP("Router Initializer");let fd=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"home works!"),d.qZA())},styles:[""]}),n})();var ge=O(5861);let O0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Nl=(()=>{class n extends O0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const fo=new d.OlP("NgValueAccessor"),fA={provide:fo,useExisting:(0,d.Gpc)(()=>Du),multi:!0},vb=new d.OlP("CompositionEventMode");let Du=(()=>{class n extends O0{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function P0(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(vb,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([fA]),d.qOj]}),n})();function Cu(n){return null==n||0===n.length}function k0(n){return null!=n&&"number"==typeof n.length}const ln=new d.OlP("NgValidators"),Tu=new d.OlP("NgAsyncValidators"),F0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class nt{static min(e){return function L0(n){return e=>{if(Cu(e.value)||Cu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function V0(n){return e=>{if(Cu(e.value)||Cu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return U0(e)}static requiredTrue(e){return function Ry(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function B0(n){return Cu(n.value)||F0.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function j0(n){return e=>Cu(e.value)||!k0(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function $0(n){return e=>k0(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ct(n){if(!n)return Ph;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Cu(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return eg(e)}static composeAsync(e){return tg(e)}}function U0(n){return Cu(n.value)?{required:!0}:null}function Ph(n){return null}function Ny(n){return null!=n}function Oy(n){const e=(0,d.QGY)(n)?(0,un.D)(n):n;return(0,d.CqO)(e),e}function kh(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ks(n,e){return e.map(t=>t(n))}function G0(n){return n.map(e=>function H0(n){return!n.validate}(e)?e:t=>e.validate(t))}function eg(n){if(!n)return null;const e=n.filter(Ny);return 0==e.length?null:function(t){return kh(ks(t,e))}}function po(n){return null!=n?eg(G0(n)):null}function tg(n){if(!n)return null;const e=n.filter(Ny);return 0==e.length?null:function(t){return function N0(...n){const e=(0,pa.jO)(n),{args:t,keys:r}=vn(n),o=new kn.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,C=h;for(let R=0;R<h;R++){let N=!1;(0,dl.Xf)(t[R]).subscribe((0,Qn.x)(u,q=>{N||(N=!0,C--),m[R]=q},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?cl(r,m):m),u.complete())}))}});return e?o.pipe(ll(e)):o}(ks(t,e).map(Oy)).pipe((0,Et.U)(kh))}}function ng(n){return null!=n?tg(G0(n)):null}function rg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Eb(n){return n._rawValidators}function Py(n){return n._rawAsyncValidators}function q0(n){return n?Array.isArray(n)?n:[n]:[]}function Ol(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fh(n,e){const t=q0(e);return q0(n).forEach(o=>{Ol(t,o)||t.push(o)}),t}function ig(n,e){return q0(e).filter(t=>!Ol(n,t))}class sg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=po(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ng(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Go extends sg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bi extends sg{get formDirective(){return null}get path(){return null}}class Z0{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Lh=(()=>{class n extends Z0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Go,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),pd=(()=>{class n extends Z0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bi,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Fs(n,e){Vh(n,e),e.valueAccessor.writeValue(n.value),function Fy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ta(n,e)})}(n,e),function Q0(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ib(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ta(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Y0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Uh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ug(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vh(n,e){const t=Eb(n);null!==e.validator?n.setValidators(rg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Py(n);null!==e.asyncValidator?n.setAsyncValidators(rg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();ug(e._rawValidators,o),ug(e._rawAsyncValidators,o)}function Uh(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Eb(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Py(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(h=>h!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return ug(e._rawValidators,r),ug(e._rawAsyncValidators,r),t}function Ta(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const yd="VALID",jh="INVALID",Su="PENDING",Fl="DISABLED";function _d(n){return($h(n)?n.validators:n)||null}function nE(n){return Array.isArray(n)?po(n):n||null}function cg(n,e){return($h(e)?e.asyncValidators:n)||null}function bb(n){return Array.isArray(n)?ng(n):n||null}function $h(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const dg=n=>n instanceof jy,hg=n=>n instanceof $y,Uy=n=>n instanceof Db;function rE(n){return dg(n)?n.value:n.getRawValue()}function iE(n,e){const t=hg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function ji(n,e){hg(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class By{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nE(this._rawValidators),this._composedAsyncValidatorFn=bb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yd}get invalid(){return this.status===jh}get pending(){return this.status==Su}get disabled(){return this.status===Fl}get enabled(){return this.status!==Fl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nE(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=bb(e)}addValidators(e){this.setValidators(Fh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ig(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ig(e,this._rawAsyncValidators))}hasValidator(e){return Ol(this._rawValidators,e)}hasAsyncValidator(e){return Ol(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Su,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fl,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yd||this.status===Su)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fl:yd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Su,this._hasOwnPendingAsyncValidator=!0;const t=Oy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function tE(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=hg(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:Uy(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Fl:this.errors?jh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Su)?Su:this._anyControlsHaveStatus(jh)?jh:yd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$h(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class jy extends By{constructor(e=null,t,r){super(_d(t),cg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$h(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class $y extends By{constructor(e,t,r){super(_d(t),cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ji(this,e),Object.keys(e).forEach(r=>{iE(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=rE(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Db extends By{constructor(e,t,r){super(_d(t),cg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ji(this,e),e.forEach((r,o)=>{iE(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>rE(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const dE={provide:fo,useExisting:(0,d.Gpc)(()=>Hh),multi:!0};let Hh=(()=>{class n extends Nl{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([dE]),d.qOj]}),n})();const qo={provide:fo,useExisting:(0,d.Gpc)(()=>pE),multi:!0};let fE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Tb=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:fE}),n})(),pE=(()=>{class n extends Nl{constructor(t,r,o,u){super(t,r),this._registry=o,this._injector=u,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(Go),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Tb),d.Y36(d.zs3))},n.\u0275dir=d.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[d._Bn([qo]),d.qOj]}),n})();const Gy=new d.OlP("NgModelWithFormControlWarning"),Sb={provide:Bi,useExisting:(0,d.Gpc)(()=>Ll)};let Ll=(()=>{class n extends Bi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Fs(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gd(t.control||null,t,!1),kl(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function lg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(gd(r||null,t),dg(o)&&(Fs(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function J0(n,e){Vh(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ly(n,e){return Uh(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vh(this.form,this),this._oldForm&&Uh(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ln,10),d.Y36(Tu,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Sb]),d.qOj,d.TTD]}),n})();const yE={provide:Go,useExisting:(0,d.Gpc)(()=>Zh)};let Zh=(()=>{class n extends Go{constructor(t,r,o,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Au(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Du?t=u:function md(n){return Object.getPrototypeOf(n.constructor)===Nl}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Pl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ky(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Bi,13),d.Y36(ln,10),d.Y36(Tu,10),d.Y36(fo,10),d.Y36(Gy,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([yE]),d.qOj,d.TTD]}),n})(),Aa=(()=>{class n{constructor(){this._validator=Ph}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ph,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const zy={provide:ln,useExisting:(0,d.Gpc)(()=>Vl),multi:!0};let Vl=(()=>{class n extends Aa{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Rb(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>U0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([zy]),d.qOj]}),n})(),kb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[fE]]}),n})(),xE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gy,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[kb]}),n})(),Ed=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let m,u=null,h=null;return null!=r&&(function Zo(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new $y(o,{asyncValidators:h,updateOn:m,validators:u})}control(t,r,o){return new jy(t,r,o)}array(t,r,o){const u=t.map(h=>this._createControl(h));return new Db(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return dg(t)||hg(t)||Uy(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:xE}),n})();var ME=O(6451),Kh=O(5363),RE=O(6063);class Lb extends Cr.x{constructor(e=1/0,t=1/0,r=RE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var Vb=O(3099);function NE(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Vb.B)({connector:()=>new Lb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function OE(n,e){return(0,no.m)(e)?Fn(()=>n,e):Fn(()=>n)}var Ig=O(9468),ii=O(5813),Ls=O(2011);O(5867);var Sa=O(9681),Dg=O(4859),Rt=O(2090),xu=O(1877);const kE=new Map,qb={activated:!1,tokenObservers:[]},Zb={initialized:!1,enabled:!1};function Sr(n){return kE.get(n)||qb}function yo(n,e){kE.set(n,e)}function Bl(){return Zb}class zo{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Rt.BH,yield function Qh(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Rt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Zn=new Rt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function as(n){if(!Sr(n).activated)throw Zn.create("use-before-activation",{appName:n.name})}function Nu(n,e){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(N){throw Zn.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw Zn.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw Zn.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw Zn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),R=Date.now();return{token:m.token,expireTimeMillis:R+C,issuedAtTimeMillis:R}})).apply(this,arguments)}function bd(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Td="firebase-app-check-store";let Jh=null;function e_(){return Jh||(Jh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Zn.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Td,{keyPath:"compositeKey"})}}catch(t){e(Zn.create("storage-open",{originalErrorMessage:t.message}))}}),Jh)}function n_(){return(n_=(0,ge.Z)(function*(n,e){const r=(yield e_()).transaction(Td,"readwrite"),u=r.objectStore(Td).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var C;m(Zn.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Ad=new xu.Yd("@firebase/app-check");function o_(n,e){return(0,Rt.hl)()?function VE(n,e){return function t_(n,e){return n_.apply(this,arguments)}(function jE(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ad.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function $E(){return Bl().enabled}function HE(){return GE.apply(this,arguments)}function GE(){return(GE=(0,ge.Z)(function*(){const n=Bl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const a_={error:"UNKNOWN_ERROR"};function u_(n){return Rt.US.encodeString(JSON.stringify(n),!1)}function Tg(n){return qE.apply(this,arguments)}function qE(){return(qE=(0,ge.Z)(function*(n,e=!1){const t=n.app;as(t);const r=Sr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&Ag(w)&&(o=w)}if(!e&&o&&Ag(o))return{token:o.token};let m,h=!1;if($E()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Nu(bd(t,yield HE()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const w=yield r.exchangeTokenPromise;return yield o_(t,w),yo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Ad.warn(w.message):Ad.error(w),u=w}return o?(m={token:o.token},yo(t,Object.assign(Object.assign({},r),{token:o})),yield o_(t,o)):m=Sd(u),h&&Jb(t,m),m})).apply(this,arguments)}function zE(n,e){const t=Sr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),yo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function WE(n){const{app:e}=n,t=Sr(e);let r=t.tokenRefresher;r||(r=function KE(n){const{app:e}=n;return new zo((0,ge.Z)(function*(){let r;if(r=Sr(e).token?yield Tg(n,!0):yield Tg(n),r.error)throw r.error}),()=>!0,()=>{const t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),yo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Jb(n,e){const t=Sr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Ag(n){return n.expireTimeMillis-Date.now()>0}function Sd(n){return{token:u_(a_),error:n}}class Xb{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Sr(this.app);for(const t of e)zE(this.app,t.next);return Promise.resolve()}}const kg="app-check-internal";!function kA(){(0,Sa._registerComponent)(new Dg.wA("app-check",n=>function YE(n,e){return new Xb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kg).initialize()})),(0,Sa._registerComponent)(new Dg.wA(kg,n=>function eD(n){return{getToken:e=>Tg(n,e),addTokenListener:e=>function ZE(n,e,t,r){const{app:o}=n,u=Sr(o),h={next:t,error:r,type:e};if(yo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&Ag(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),WE(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>WE(n))}(n,"INTERNAL",e),removeTokenListener:e=>zE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Sa.registerVersion)("@firebase/app-check","0.5.8")}();class ef{constructor(){return(0,ii.vb)("app-check")}}"undefined"!=typeof window&&window;var h_=O(127);const p_=new d.OlP("angularfire2.auth.use-emulator"),g_=new d.OlP("angularfire2.auth.settings"),m_=new d.OlP("angularfire2.auth.tenant-id"),y_=new d.OlP("angularfire2.auth.langugage-code"),__=new d.OlP("angularfire2.auth.use-device-language"),v_=new d.OlP("angularfire.auth.persistence"),E_=(n,e,t,r,o,u,h,m)=>(0,Ls.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),h)for(const[C,R]of Object.entries(h))w.settings[C]=R;return m&&w.setPersistence(m),w},[t,r,o,u,h,m]);let tf=(()=>{class n{constructor(t,r,o,u,h,m,w,C,R,N,q,ee){const me=new Cr.x,Fe=st(void 0).pipe((0,Kh.Q)(h.outsideAngular),Fn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8775)))),(0,Et.U)(()=>(0,Ls.on)(t,u,r)),(0,Et.U)(rt=>E_(rt,u,m,C,R,N,w,q)),NE({bufferSize:1,refCount:!1}));if(Co(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{Fe.pipe(ao()).subscribe();const Ut=Fe.pipe(Fn(St=>St.getRedirectResult().then(jt=>jt,()=>null)),ii.iC,NE({bufferSize:1,refCount:!1})),Bt=Fe.pipe(Fn(St=>new kn.y(jt=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(tn=>jt.next(tn),tn=>jt.error(tn),()=>jt.complete()))})))),Ht=Fe.pipe(Fn(St=>new kn.y(jt=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(tn=>jt.next(tn),tn=>jt.error(tn),()=>jt.complete()))}))));this.authState=Ut.pipe(OE(Bt),(0,Ig.R)(h.outsideAngular),(0,Kh.Q)(h.insideAngular)),this.user=Ut.pipe(OE(Ht),(0,Ig.R)(h.outsideAngular),(0,Kh.Q)(h.insideAngular)),this.idToken=this.user.pipe(Fn(St=>St?(0,un.D)(St.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Fn(St=>St?(0,un.D)(St.getIdTokenResult()):st(null))),this.credential=(0,ME.T)(Ut,me,this.authState.pipe(er(St=>!St))).pipe((0,Et.U)(St=>(null==St?void 0:St.user)?St:null),(0,Ig.R)(h.outsideAngular),(0,Kh.Q)(h.insideAngular))}return(0,Ls.pX)(this,Fe,u,{spy:{apply:(rt,Ut,Bt)=>{(rt.startsWith("signIn")||rt.startsWith("createUser"))&&Bt.then(Ht=>me.next(Ht))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ls.Dh),d.LFG(Ls.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ii.HU),d.LFG(p_,8),d.LFG(g_,8),d.LFG(m_,8),d.LFG(y_,8),d.LFG(__,8),d.LFG(v_,8),d.LFG(ef,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BA=(()=>{class n{constructor(){h_.Z.registerVersion("angularfire",ii.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[tf]}),n})(),$l=(()=>{class n{constructor(t){this.afAuth=t}login(t,r){var o=this;return(0,ge.Z)(function*(){return yield o.afAuth.signInWithEmailAndPassword(t,r)})()}registrar(t,r){var o=this;return(0,ge.Z)(function*(){var u;return yield null===(u=(yield o.afAuth.createUserWithEmailAndPassword(t,r)).user)||void 0===u?void 0:u.sendEmailVerification(),"Check your email for verification mail before logging in"})()}singOut(){var t=this;return(0,ge.Z)(function*(){return t.afAuth.signOut(),t.Logueado})()}Logueado(){var t=this;return(0,ge.Z)(function*(){return t.afAuth.authState})()}getCurrentUser(){return this.afAuth.authState.pipe(ao()).toPromise()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(tf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var dD=O(4986);function Lg(){return(0,Xn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Qn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function pr(n,e){return n===e}O(8775);var Xe,pD=O(3942),gD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Wo={},Vg=Vg||{},Dt=gD||self;function Ma(){}function w_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var I_="closure_uid_"+(1e9*Math.random()>>>0),pw=0;function jA(n,e,t){return n.call.apply(n.bind,arguments)}function gw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gr(n,e,t){return(gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jA:gw).apply(null,arguments)}function us(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function Pu(){this.s=this.s,this.o=this.o}var _o={};Pu.prototype.s=!1,Pu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function fw(n){return Object.prototype.hasOwnProperty.call(n,I_)&&n[I_]||(n[I_]=++pw)}(this);delete _o[n]}},Pu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vs=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},b_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function yw(n){return Array.prototype.concat.apply([],arguments)}function D_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ug(n){return/^[\s\xa0]*$/.test(n)}var wi,_w=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hr(n,e){return-1!=n.indexOf(e)}function Hl(n,e){return n<e?-1:n>e?1:0}e:{var C_=Dt.navigator;if(C_){var vw=C_.userAgent;if(vw){wi=vw;break e}}wi=""}function Bg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function T_(n){const e={};for(const t in n)e[t]=n[t];return e}var rf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ew(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<rf.length;u++)t=rf[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jg(n){return jg[" "](n),n}jg[" "]=Ma;var sf,n,A_=Hr(wi,"Opera"),ku=Hr(wi,"Trident")||Hr(wi,"MSIE"),S_=Hr(wi,"Edge"),$g=S_||ku,x_=Hr(wi,"Gecko")&&!(Hr(wi.toLowerCase(),"webkit")&&!Hr(wi,"Edge"))&&!(Hr(wi,"Trident")||Hr(wi,"MSIE"))&&!Hr(wi,"Edge"),Iw=Hr(wi.toLowerCase(),"webkit")&&!Hr(wi,"Edge");function M_(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Hg="",Gg=(n=wi,x_?/rv:([^\);]+)(\)|;)/.exec(n):S_?/Edge\/([\d\.]+)/.exec(n):ku?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Iw?/WebKit\/(\S+)/.exec(n):A_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gg&&(Hg=Gg?Gg[1]:""),ku){var R_=M_();if(null!=R_&&R_>parseFloat(Hg)){sf=String(R_);break e}}sf=Hg}var mD={};var _D=Dt.document&&ku&&(M_()||parseInt(sf,10))||void 0,vD=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Ma,e),Dt.removeEventListener("test",Ma,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function of(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(x_){e:{try{jg(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ED[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&of.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},$r(of,oi);var ED={2:"touch",3:"pen",4:"mouse"};of.prototype.h=function(){of.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var af="closure_listenable_"+(1e6*Math.random()|0),wD=0;function ID(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++wD,this.ca=this.fa=!1}function qg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Zg(n){this.src=n,this.g={},this.h=0}function O_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Vs(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(qg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function P_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Zg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=P_(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new ID(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var k_="closure_lm_"+(1e6*Math.random()|0),zg={};function F_(n,e,t,r,o){if(r&&r.once)return V_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)F_(n,e[u],t,r,o);return null}return t=Ra(t),n&&n[af]?n.N(e,t,nf(r)?!!r.capture:!!r,o):L_(n,e,t,!1,r,o)}function L_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=nf(o)?!!o.capture:!!o,m=Kg(n);if(m||(n[k_]=m=new Zg(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function Dw(){var e=Cw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)vD||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(B_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function V_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)V_(n,e[u],t,r,o);return null}return t=Ra(t),n&&n[af]?n.O(e,t,nf(r)?!!r.capture:!!r,o):L_(n,e,t,!0,r,o)}function U_(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)U_(n,e[u],t,r,o);else r=nf(r)?!!r.capture:!!r,t=Ra(t),n&&n[af]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=P_(u=n.g[e],t,r,o))&&(qg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Kg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=P_(e,t,r,o)),(t=-1<n?e[n]:null)&&Wg(t))}function Wg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[af])O_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(B_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Kg(e))?(O_(t,n),0==t.h&&(t.src=null,e[k_]=null)):qg(n)}}}function B_(n){return n in zg?zg[n]:zg[n]="on"+n}function Cw(n,e){if(n.ca)n=!0;else{e=new of(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Wg(n),n=t.call(r,e)}return n}function Kg(n){return(n=n[k_])instanceof Zg?n:null}var Yg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ra(n){return"function"==typeof n?n:(n[Yg]||(n[Yg]=function(e){return n.handleEvent(e)}),n[Yg])}function xr(){Pu.call(this),this.i=new Zg(this),this.P=this,this.I=null}function Gr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var o=e;Ew(e=new oi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Na(h,r,!0,e)&&o}if(o=Na(h=e.g=n,r,!0,e)&&o,o=Na(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Na(h=e.g=t[u],r,!1,e)&&o}function Na(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&O_(n.i,h),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}$r(xr,Pu),xr.prototype[af]=!0,xr.prototype.removeEventListener=function(n,e,t,r){U_(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qg(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Tw=Dt.JSON.stringify;function j_(){var n=uf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var H_,$_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Aw,n=>n.reset());class Aw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function HA(n){Dt.setTimeout(()=>{throw n},0)}function gt(n,e){H_||function bD(){var n=Dt.Promise.resolve(void 0);H_=function(){n.then(DD)}}(),G_||(H_(),G_=!0),uf.add(n,e)}var G_=!1,uf=new class $A{constructor(){this.h=this.g=null}add(e,t){const r=$_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function DD(){for(var n;n=j_();){try{n.h.call(n.g)}catch(t){HA(t)}var e=$_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}G_=!1}function Gl(n,e){xr.call(this),this.h=n||1,this.g=e||Dt,this.j=gr(this.kb,this),this.l=Date.now()}function xd(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function wn(n,e,t){if("function"==typeof n)t&&(n=gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function CD(n){n.g=wn(()=>{n.g=null,n.i&&(n.i=!1,CD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(Gl,xr),(Xe=Gl.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gr(this,"tick"),this.da&&(xd(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){Gl.Z.M.call(this),xd(this),delete this.g};class Sw extends Pu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CD(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lf(n){Pu.call(this),this.h=n,this.g={}}$r(lf,Pu);var xw=[];function q_(n,e,t,r){Array.isArray(t)||(t&&(xw[0]=t.toString()),t=xw);for(var o=0;o<t.length;o++){var u=F_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Z_(n){Bg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wg(e)},n),n.g={}}function cf(){this.g=!0}function Md(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function df(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return Tw(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}lf.prototype.M=function(){lf.Z.M.call(this),Z_(this)},lf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cf.prototype.Aa=function(){this.g=!1},cf.prototype.info=function(){};var ql={},Rw=null;function Qg(){return Rw=Rw||new xr}function hf(n){oi.call(this,ql.Ma,n)}function Rd(n){const e=Qg();Gr(e,new hf(e,n))}function z_(n,e){oi.call(this,ql.STAT_EVENT,n),this.stat=e}function ai(n){const e=Qg();Gr(e,new z_(e,n))}function Nw(n,e){oi.call(this,ql.Na,n),this.size=e}function Oa(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}ql.Ma="serverreachability",$r(hf,oi),ql.STAT_EVENT="statevent",$r(z_,oi),ql.Na="timingevent",$r(Nw,oi);var Fu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ow={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function W_(){}function K_(){}W_.prototype.h=null;var Xg,Nd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jg(){oi.call(this,"d")}function Y_(){oi.call(this,"c")}function em(){}function ff(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new lf(this),this.P=GA,this.W=new Gl(n=$g?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new SD}function SD(){this.i=null,this.g="",this.h=!1}$r(Jg,oi),$r(Y_,oi),$r(em,W_),em.prototype.g=function(){return new XMLHttpRequest},em.prototype.i=function(){return{}},Xg=new em;var GA=45e3,kw={},Q_={};function tm(n,e,t){n.K=1,n.v=yf(ka(e)),n.s=t,n.U=!0,pf(n,null)}function pf(n,e){n.F=Date.now(),Pa(n),n.A=ka(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),nv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new SD,n.g=gv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Sw(gr(n.Ia,n,n.g),n.O)),q_(n.V,n.g,"readystatechange",n.gb),e=n.H?T_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Rd(1),function Mw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var R=C[0];C=C[1];var N=R.split("_");h=2<=N.length&&"type"==N[1]?h+(R+"=")+C+"&":h+(R+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Fw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Lw(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Vw(n,t),o==Q_){4==e&&(n.o=4,ai(14),r=!1),Md(n.j,n.m,null,"[Incomplete Response]");break}if(o==kw){n.o=4,ai(15),Md(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Md(n.j,n.m,o,null),J_(n,o)}Fw(n)&&o!=Q_&&o!=kw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ai(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Jw(e),e.L=!0,ai(11))):(Md(n.j,n.m,t,"[Invalid Chunked Response]"),Zl(n),gf(n))}function Vw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Q_:(t=Number(e.substring(t,r)),isNaN(t)?kw:(r+=1)+t>e.length?Q_:(e=e.substr(r,t),n.C=r+t,e))}function Pa(n){n.Y=Date.now()+n.P,Uw(n,n.P)}function Uw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Oa(gr(n.eb,n),e)}function nm(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function gf(n){0==n.l.G||n.I||HD(n.l,n)}function Zl(n){nm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,xd(n.W),Z_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function J_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ef(t.i,n)))if(t.I=n.N,!n.J&&Ef(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Oa(gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fm(t),dm(t)}Bu(t),ai(18)}if(1>=qw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else kd(t,11)}else if((n.J||t.g==n)&&fm(t),!Ug(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const R=C[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const q=C[5];null!=q&&"number"==typeof q&&0<q&&(t.K=r=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const me=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var u=r.i;!u.g&&(Hr(me,"spdy")||Hr(me,"quic")||Hr(me,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(wf(u,u.h),u.h=null))}if(r.D){const Fe=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,fn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=pm(r,r.H?r.la:null,r.W),h.J){iv(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(nm(m),Pa(m)),r.g=h}else dv(r);0<t.l.length&&hm(t)}else"stop"!=C[0]&&"close"!=C[0]||kd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?kd(t,7):cm(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Rd(4)}catch(C){}}function X_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(w_(n)||"string"==typeof n)b_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(w_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Bw(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(w_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Od(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Od)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Lu(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];zl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)zl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function zl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=ff.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Yo(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const R=Yo(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>R)&&(3!=R||$g||this.g&&(this.h.h||this.g.ga()||um(this.g)))){this.I||4!=R||7==e||Rd(8==e||0>=N?3:2),nm(this);var t=this.g.ba();this.N=t;t:if(Fw(this)){var r=um(this.g);n="";var o=r.length,u=4==Yo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zl(this),gf(this);var h="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function TD(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ug(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ai(12),Zl(this),gf(this);break e}Md(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,J_(this,t)}this.U?(Lw(this,R,h),$g&&this.i&&3==R&&(q_(this.V,this.W,"tick",this.fb),this.W.start())):(Md(this.j,this.m,h,null),J_(this,h)),4==R&&Zl(this),this.i&&!this.I&&(4==R?HD(this.l,this):(this.i=!1,Pa(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,ai(12)):(this.o=0,ai(13)),Zl(this),gf(this)}}}catch(R){}},Xe.fb=function(){if(this.g){var n=Yo(this.g),e=this.g.ga();this.C<e.length&&(nm(this),Lw(this,n,e),this.i&&4!=n&&Pa(this))}},Xe.cancel=function(){this.I=!0,Zl(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function AD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Rd(3),ai(17)),Zl(this),this.o=2,gf(this)):Uw(this,this.Y-n)},(Xe=Od.prototype).R=function(){Lu(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return Lu(this),this.g.concat()},Xe.get=function(n,e){return zl(this.h,n)?this.h[n]:e},Xe.set=function(n,e){zl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var ev=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Vu){this.g=void 0!==e?e:n.g,mf(this,n.j),this.s=n.s,rm(this,n.i),Pd(this,n.m),this.l=n.l,e=n.h;var t=new vf;t.i=e.i,e.g&&(t.g=new Od(e.g),t.h=e.h),jw(this,t),this.o=n.o}else n&&(t=String(n).match(ev))?(this.g=!!e,mf(this,t[1]||"",!0),this.s=_f(t[2]||""),rm(this,t[3]||"",!0),Pd(this,t[4]),this.l=_f(t[5]||"",!0),jw(this,t[6]||"",!0),this.o=_f(t[7]||"")):(this.g=!!e,this.h=new vf(null,this.g))}function ka(n){return new Vu(n)}function mf(n,e,t){n.j=t?_f(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function rm(n,e,t){n.i=t?_f(e,!0):e}function Pd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function jw(n,e,t){e instanceof vf?(n.h=e,function LD(n,e){e&&!n.j&&(Uu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&($w(this,r),nv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Wl(e,kD)),n.h=new vf(e,n.g))}function fn(n,e,t){n.h.set(e,t)}function yf(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _f(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ND),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ND(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Vu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wl(e,tv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Wl(e,tv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Wl(t,"/"==t.charAt(0)?PD:OD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wl(t,FD)),n.join("")};var tv=/[#\/\?@]/g,OD=/[#\?:]/g,PD=/[#\?]/g,kD=/[#\?@]/g,FD=/#/g;function vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Uu(n){n.g||(n.g=new Od,n.h=0,n.i&&function xD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $w(n,e){Uu(n),e=Kl(n,e),zl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,zl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Lu(n)))}function Hw(n,e){return Uu(n),e=Kl(n,e),zl(n.g.h,e)}function nv(n,e,t){$w(n,e),0<t.length&&(n.i=null,n.g.set(Kl(n,e),D_(t)),n.h+=t.length)}function Kl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function rv(n){this.l=n||UD,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=vf.prototype).add=function(n,e){Uu(this),this.i=null,n=Kl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Uu(this),this.g.forEach(function(t,r){b_(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){Uu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){Uu(this);var e=[];if("string"==typeof n)Hw(this,n)&&(e=yw(e,this.g.get(Kl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=yw(e,n[t])}return e},Xe.set=function(n,e){return Uu(this),this.i=null,Hw(this,n=Kl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var UD=10;function Gw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function qw(n){return n.h?1:n.g?n.g.size:0}function Ef(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wf(n,e){n.g?n.g.add(e):n.h=e}function iv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function im(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return D_(n.i)}function sv(){}function BD(){this.g=new sv}function ov(n,e,t){const r=t||"";try{X_(n,function(o,u){let h=o;nf(o)&&(h=Tw(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function If(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function bf(n){this.l=n.$b||null,this.j=n.ib||!1}function Df(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=av,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rv.prototype.cancel=function(){if(this.i=im(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sv.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},sv.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},$r(bf,W_),bf.prototype.g=function(){return new Df(this.l,this.j)},bf.prototype.i=function(n){return function(){return n}}({}),$r(Df,xr);var av=0;function uv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function sm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Cf(n)}function Cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Df.prototype).open=function(n,e){if(this.readyState!=av)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Cf(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sm(this)),this.readyState=av},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Cf(this)),this.g&&(this.readyState=3,Cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?sm(this):Cf(this),3==this.readyState&&uv(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,sm(this))},Xe.Ta=function(n){this.g&&(this.response=n,sm(this))},Xe.ha=function(){this.g&&sm(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Df.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var om=Dt.JSON.parse;function rr(n){xr.call(this),this.headers=new Od,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yl,this.K=this.L=!1}$r(rr,xr);var Yl="",Tf=/^https?$/i,$D=["POST","PUT"];function Zw(n){return"content-type"==n.toLowerCase()}function zw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ww(n),am(n)}function Ww(n){n.D||(n.D=!0,Gr(n,"complete"),Gr(n,"error"))}function Kw(n){if(n.h&&void 0!==Vg&&(!n.C[1]||4!=Yo(n)||2!=n.ba()))if(n.v&&4==Yo(n))wn(n.Fa,0,n);else if(Gr(n,"readystatechange"),4==Yo(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(ev)[1]||null;if(!o&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Tf.test(o?o.toLowerCase():"")}t=r}if(t)Gr(n,"complete"),Gr(n,"success");else{n.m=6;try{var h=2<Yo(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",Ww(n)}}finally{am(n)}}}function am(n,e){if(n.g){lv(n);const t=n.g,r=n.C[0]?Ma:null;n.g=null,n.C=null,e||Gr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function lv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function Yo(n){return n.g?n.g.readyState:0}function um(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yl:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ql(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function lm(n){let e="";return Bg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function Af(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cv(n){this.za=0,this.l=[],this.h=new cf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Af("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Af("baseRetryDelayMs",5e3,n),this.$a=Af("retryDelaySeedMs",1e4,n),this.Ya=Af("forwardChannelMaxRetries",2,n),this.ra=Af("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new rv(n&&n.concurrentRequestLimit),this.Ca=new BD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function cm(n){if(Yw(n),3==n.G){var e=n.V++,t=ka(n.F);fn(t,"SID",n.J),fn(t,"RID",e),fn(t,"TYPE","terminate"),xf(n,t),(e=new ff(n,n.h,e,void 0)).K=2,e.v=yf(ka(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=gv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pa(e)}pv(n)}function dm(n){n.g&&(Jw(n),n.g.cancel(),n.g=null)}function Yw(n){dm(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),fm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function Sf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&hm(n)}function hm(n){Gw(n.i)||n.m||(n.m=!0,gt(n.Ha,n),n.C=0)}function Qw(n,e){var t;t=e?e.m:n.V++;const r=ka(n.F);fn(r,"SID",n.J),fn(r,"RID",t),fn(r,"AID",n.U),xf(n,r),n.o&&n.s&&Ql(r,n.o,n.s),t=new ff(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Jl(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),wf(n.i,t),tm(t,r,e)}function xf(n,e){n.j&&X_({},function(t,r){fn(e,r,t)})}function Jl(n,e,t){t=Math.min(n.l.length,t);var r=n.j?gr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const R=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{ov(R,h,"req"+C+"_")}catch(N){r&&r(R)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function dv(n){n.g||n.u||(n.Y=1,gt(n.Ga,n),n.A=0)}function Bu(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Oa(gr(n.Ga,n),fv(n,n.A)),n.A++,0))}function Jw(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function hv(n){n.g=new ff(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ka(n.oa);fn(e,"RID","rpc"),fn(e,"SID",n.J),fn(e,"CI",n.N?"0":"1"),fn(e,"AID",n.U),xf(n,e),fn(e,"TYPE","xmlhttp"),n.o&&n.s&&Ql(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=yf(ka(e)),t.s=null,t.U=!0,pf(t,n)}function fm(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function HD(n,e){var t=null;if(n.g==e){fm(n),Jw(n),n.g=null;var r=2}else{if(!Ef(n.i,e))return;t=e.D,iv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Gr(r=Qg(),new Nw(r,t,e,o)),hm(n)}else dv(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function ZA(n,e){return!(qw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Oa(gr(n.Ha,n,e),fv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Bu(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:kd(n,5);break;case 4:kd(n,10);break;case 3:kd(n,6);break;default:kd(n,2)}}function fv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function kd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=gr(n.jb,n);t||(t=new Vu("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||mf(t,"https"),yf(t)),function jD(n,e){const t=new cf;if(Dt.Image){const r=new Image;r.onload=us(If,t,r,"TestLoadImage: loaded",!0,e),r.onerror=us(If,t,r,"TestLoadImage: error",!1,e),r.onabort=us(If,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=us(If,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ai(2);n.G=0,n.j&&n.j.va(e),pv(n),Yw(n)}function pv(n){n.G=0,n.I=-1,n.j&&((0!=im(n.i).length||0!=n.l.length)&&(n.i.i.length=0,D_(n.l),n.l.length=0),n.j.ua())}function pm(n,e,t){let r=function MD(n){return n instanceof Vu?ka(n):new Vu(n,void 0)}(t);if(""!=r.i)e&&rm(r,e+"."+r.i),Pd(r,r.m);else{const o=Dt.location;r=function RD(n,e,t,r){var o=new Vu(null,void 0);return n&&mf(o,n),e&&rm(o,e),t&&Pd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Bg(n.aa,function(o,u){fn(r,u,o)}),t=n.sa,(e=n.D)&&t&&fn(r,e,t),fn(r,"VER",n.ma),xf(n,r),r}function gv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ba&&!n.qa?new bf({ib:!0}):n.qa)).L=n.H,e}function Xw(){}function gm(){if(ku&&!(10<=Number(_D)))throw Error("Environmental error: no available transport.")}function ls(n,e){xr.call(this),this.g=new cv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ug(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ug(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fd(this)}function eI(n){Jg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tI(){Y_.call(this),this.status=1}function Fd(n){this.g=n}(Xe=rr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xg.g(),this.C=function Pw(n){return n.h||(n.h=n.i())}(this.u?this.u:Xg),this.g.onreadystatechange=gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void zw(this,u)}n=t||"";const o=new Od(this.headers);r&&X_(r,function(u,h){o.set(h,u)}),r=function mw(n){e:{var e=Zw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=Vs($D,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lv(this),0<this.B&&((this.K=function qA(n){return ku&&function yD(){return function ww(n){var e=mD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=_w(String(sf)).split("."),t=_w("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Hl(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Hl(0==o[2].length,0==u[2].length)||Hl(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gr(this.pa,this)):this.A=wn(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){zw(this,u)}},Xe.pa=function(){void 0!==Vg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gr(this,"complete"),Gr(this,"abort"),am(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),am(this,!0)),rr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?Kw(this):this.cb())},Xe.cb=function(){Kw(this)},Xe.ba=function(){try{return 2<Yo(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),om(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=cv.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new ff(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=T_(u),Ew(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Jl(this,o,e),fn(t=ka(this.F),"RID",n),fn(t,"CVER",22),this.D&&fn(t,"X-HTTP-Session-Id",this.D),xf(this,t),this.o&&u&&Ql(t,this.o,u),wf(this.i,o),this.Ra&&fn(t,"TYPE","init"),this.ja?(fn(t,"$req",e),fn(t,"SID","null"),o.$=!0,tm(o,t,null)):tm(o,t,e),this.G=2}}else 3==this.G&&(n?Qw(this,n):0==this.l.length||Gw(this.i)||Qw(this))},Xe.Ga=function(){if(this.u=null,hv(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Oa(gr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ai(10),dm(this),hv(this))},Xe.ab=function(){null!=this.v&&(this.v=null,dm(this),Bu(this),ai(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ai(2)):(this.h.info("Failed to ping google.com"),ai(1))},(Xe=Xw.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},gm.prototype.g=function(n,e){return new ls(n,e)},$r(ls,xr),ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),gt(gr(n.hb,n,e))),ai(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=pm(n,null,n.W),hm(n)},ls.prototype.close=function(){cm(this.g)},ls.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Sf(this.g,e)}else this.v?((e={}).__data__=Tw(n),Sf(this.g,e)):Sf(this.g,n)},ls.prototype.M=function(){this.g.j=null,delete this.j,cm(this.g),delete this.g,ls.Z.M.call(this)},$r(eI,Jg),$r(tI,Y_),$r(Fd,Xw),Fd.prototype.xa=function(){Gr(this.g,"a")},Fd.prototype.wa=function(n){Gr(this.g,new eI(n))},Fd.prototype.va=function(n){Gr(this.g,new tI(n))},Fd.prototype.ua=function(){Gr(this.g,"b")},gm.prototype.createWebChannel=gm.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,Fu.NO_ERROR=0,Fu.TIMEOUT=8,Fu.HTTP_ERROR=6,Ow.COMPLETE="complete",K_.EventType=Nd,Nd.OPEN="a",Nd.CLOSE="b",Nd.ERROR="c",Nd.MESSAGE="d",xr.prototype.listen=xr.prototype.N,rr.prototype.listenOnce=rr.prototype.O,rr.prototype.getLastError=rr.prototype.La,rr.prototype.getLastErrorCode=rr.prototype.Da,rr.prototype.getStatus=rr.prototype.ba,rr.prototype.getResponseJson=rr.prototype.Qa,rr.prototype.getResponseText=rr.prototype.ga,rr.prototype.send=rr.prototype.ea;var GD=Wo.createWebChannelTransport=function(){return new gm},qD=Wo.getStatEventTarget=function(){return Qg()},mv=Wo.ErrorCode=Fu,Mf=Wo.EventType=Ow,nI=Wo.Event=ql,yv=Wo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rI=Wo.FetchXmlHttpFactory=bf,Rf=Wo.WebChannel=K_,iI=Wo.XhrIo=rr;const sI="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let Ld="9.8.0";const ju=new xu.Yd("@firebase/firestore");function _v(){return ju.logLevel}function Oe(n,...e){if(ju.logLevel<=xu.in.DEBUG){const t=e.map(Of);ju.debug(`Firestore (${Ld}): ${n}`,...t)}}function In(n,...e){if(ju.logLevel<=xu.in.ERROR){const t=e.map(Of);ju.error(`Firestore (${Ld}): ${n}`,...t)}}function Nf(n,...e){if(ju.logLevel<=xu.in.WARN){const t=e.map(Of);ju.warn(`Firestore (${Ld}): ${n}`,...t)}}function Of(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function We(n="Unexpected state"){const e=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: `+n;throw In(e),new Error(e)}function It(n,e){n||We()}function $e(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Rt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class zD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class WD{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Mr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,ge.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Mr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new Pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new qr(e)}}class oI{constructor(e,t,r){this.type="FirstParty",this.user=qr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class aI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new oI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new ym(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function WA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}cs.A=-1;class _m{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=WA(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function Xl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function vm(n){return n+"\0"}class xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new xn(0,0))}static max(){return new vt(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function lI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ec(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Vd{constructor(e,t,r){void 0===t?t=0:t>e.length&&We(),void 0===r?r=e.length-t:r>e.length-t&&We(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Vd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Vt extends Vd{construct(e,t,r){return new Vt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Vt(t)}static emptyPath(){return new Vt([])}}const dI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends Vd{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return dI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Me(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Me(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Me(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class tc{constructor(e){this.fields=e,e.sort(mr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const fI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(n){if(It(!!n),"string"==typeof n){let e=0;const t=fI.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $u(n){return"string"==typeof n?yr.fromBase64String(n):yr.fromUint8Array(n)}function Ev(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ui(n){const e=n.mapValue.fields.__previous_value__;return Ev(e)?ui(e):e}function Qo(n){const e=Fa(n.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class KD{constructor(e,t,r,o,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class La{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}function Em(n){return null==n}function Va(n){return 0===n&&1/n==-1/0}function pI(n){return"number"==typeof n&&Number.isInteger(n)&&!Va(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Vt.fromString(e))}static fromName(e){return new Be(Vt.fromString(e).popFirst(5))}static empty(){return new Be(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Vt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Vt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Vt(e.slice()))}}const Hu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kf={nullValue:"NULL_VALUE"};function nc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ev(n)?4:Im(n)?9007199254740991:10:We()}function Jo(n,e){if(n===e)return!0;const t=nc(n);if(t!==nc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qo(n).isEqual(Qo(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Fa(r.timestampValue),h=Fa(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,$u(n.bytesValue).isEqual($u(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vn(r.geoPointValue.latitude)===Vn(o.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vn(r.integerValue)===Vn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Vn(r.doubleValue),h=Vn(o.doubleValue);return u===h?Va(u)===Va(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Xl(n.arrayValue.values||[],e.arrayValue.values||[],Jo);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(lI(u)!==lI(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!Jo(u[m],h[m])))return!1;return!0}(n,e);default:return We()}var o}function rc(n,e){return void 0!==(n.values||[]).find(t=>Jo(t,e))}function Ua(n,e){if(n===e)return 0;const t=nc(n),r=nc(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Vn(o.integerValue||o.doubleValue),m=Vn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return wv(n.timestampValue,e.timestampValue);case 4:return wv(Qo(n),Qo(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=$u(o),m=$u(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const C=Tt(h[w],m[w]);if(0!==C)return C}return Tt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Tt(Vn(o.latitude),Vn(u.latitude));return 0!==h?h:Tt(Vn(o.longitude),Vn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const C=Ua(h[w],m[w]);if(C)return C}return Tt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Hu.mapValue&&u===Hu.mapValue)return 0;if(o===Hu.mapValue)return 1;if(u===Hu.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let R=0;R<m.length&&R<C.length;++R){const N=Tt(m[R],C[R]);if(0!==N)return N;const q=Ua(h[m[R]],w[C[R]]);if(0!==q)return q}return Tt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw We()}}function wv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=Fa(n),r=Fa(e),o=Tt(t.seconds,r.seconds);return 0!==o?o:Tt(t.nanos,r.nanos)}function Ba(n){return Ff(n)}function Ff(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Fa(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$u(n.bytesValue).toBase64():"referenceValue"in n?Be.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=Ff(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${Ff(r.fields[m])}`;return u+"}"}(n.mapValue):We();var e}function Ud(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wm(n){return!!n&&"integerValue"in n}function Lf(n){return!!n&&"arrayValue"in n}function Iv(n){return!!n&&"nullValue"in n}function Vf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Uf(n){return!!n&&"mapValue"in n}function Bf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ec(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Im(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bv(n){return"nullValue"in n?kf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ud(La.empty(),Be.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:We()}function KA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ud(La.empty(),Be.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Hu:We()}function gI(n,e){const t=Ua(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function mI(n,e){const t=Ua(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Uf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(t)}setAll(e){let t=mr.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Bf(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Uf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Uf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){ec(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Zr(Bf(this.value))}}function Dv(n){const e=[];return ec(n.fields,(t,r)=>{const o=new mr([t]);if(Uf(r)){const u=Dv(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new tc(e)}class pn{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new pn(e,0,vt.min(),vt.min(),Zr.empty(),0)}static newFoundDocument(e,t,r){return new pn(e,1,t,vt.min(),r,0)}static newNoDocument(e,t){return new pn(e,2,t,vt.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,vt.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function bm(n){return n.fields.find(e=>2===e.kind)}function ic(n){return n.fields.filter(e=>2!==e.kind)}jf.UNKNOWN_ID=-1;class Dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bd(0,Us.min())}}function yI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new xn(t+1,0):new xn(t,r));return new Us(o,Be.empty(),e)}function _I(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(vt.min(),Be.empty(),-1)}static max(){return new Us(vt.max(),Be.empty(),-1)}}function Cv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Be.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}class Un{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cm(this.root,e,this.comparator,!0)}}class Cm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:zr.RED,this.left=null!=o?o:zr.EMPTY,this.right=null!=u?u:zr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new zr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return zr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw We();const e=this.left.check();if(e!==this.right.check())throw We();return e+(this.isRed()?0:1)}}zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1,zr.EMPTY=new class{constructor(){this.size=0}get key(){throw We()}get value(){throw We()}get color(){throw We()}get left(){throw We()}get right(){throw We()}copy(n,e,t,r,o){return this}insert(n,e,t){return new zr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $f(n){return n.hasNext()?n.getNext():void 0}class YA{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function YD(n,e=null,t=[],r=[],o=null,u=null,h=null){return new YA(n,e,t,r,o,u,h)}function jd(n){const e=$e(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Ba(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Em(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ba(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ba(r)).join(",")),e.P=t}return e.P}function Tm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!eC(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Jo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bI(n.startAt,e.startAt)&&bI(n.endAt,e.endAt)}function Av(n){return Be.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Sv(n,e){return n.filters.filter(t=>t instanceof Rr&&t.field.isEqual(e))}function Hf(n,e,t){let r=kf,o=!0;for(const u of Sv(n,e)){let h=kf,m=!0;switch(u.op){case"<":case"<=":h=bv(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=kf}gI({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];gI({value:r,inclusive:o},{value:h,inclusive:t.inclusive})<0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function QD(n,e,t){let r=Hu,o=!0;for(const u of Sv(n,e)){let h=Hu,m=!0;switch(u.op){case">=":case">":h=KA(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=Hu}mI({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];mI({value:r,inclusive:o},{value:h,inclusive:t.inclusive})>0&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class Rr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new xv(e,t,r):"array-contains"===t?new Mv(e,r):"in"===t?new wI(e,r):"not-in"===t?new XD(e,r):"array-contains-any"===t?new II(e,r):new Rr(e,t,r)}static V(e,t,r){return"in"===t?new vI(e,r):new EI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ua(t,this.value)):null!==t&&nc(this.value)===nc(t)&&this.v(Ua(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return We()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class xv extends Rr{constructor(e,t,r){super(e,t,r),this.key=Be.fromName(r.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.v(t)}}class vI extends Rr{constructor(e,t){super(e,"in",t),this.keys=JD(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EI extends Rr{constructor(e,t){super(e,"not-in",t),this.keys=JD(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function JD(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Be.fromName(r.referenceValue))}class Mv extends Rr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lf(t)&&rc(t.arrayValue,this.value)}}class wI extends Rr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rc(this.value.arrayValue,t)}}class XD extends Rr{constructor(e,t){super(e,"not-in",t)}matches(e){if(rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rc(this.value.arrayValue,t)}}class II extends Rr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rc(this.value.arrayValue,r))}}class sc{constructor(e,t){this.position=e,this.inclusive=t}}class $d{constructor(e,t="asc"){this.field=e,this.dir=t}}function eC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Am(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Be.comparator(Be.fromName(h.referenceValue),t.key):Ua(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function bI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Jo(n.position[t],e.position[t]))return!1;return!0}class Gu{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function tC(n,e,t,r,o,u,h,m){return new Gu(n,e,t,r,o,u,h,m)}function Gf(n){return new Gu(n)}function Rv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Nv(n){for(const e of n.filters)if(e.S())return e.field;return null}function DI(n){return null!==n.collectionGroup}function Hd(n){const e=$e(n);if(null===e.D){e.D=[];const t=Nv(e),r=Rv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new $d(t)),e.D.push(new $d(mr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new $d(mr.keyField(),u))}}}return e.D}function $i(n){const e=$e(n);if(!e.C)if("F"===e.limitType)e.C=YD(e.path,e.collectionGroup,Hd(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Hd(e))t.push(new $d(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new sc(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new sc(e.startAt.position,e.startAt.inclusive):null;e.C=YD(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function CI(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ii(n,e){return Tm($i(n),$i(e))&&n.limitType===e.limitType}function TI(n){return`${jd($i(n))}|lt:${n.limitType}`}function qf(n){return`Query(target=${function QA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ba(r.value)}`;var r}).join(", ")}]`),Em(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ba(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ba(t)).join(",")),`Target(${e})`}($i(n))}; limitType=${n.limitType})`}function Ov(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Be.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=Am(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,Hd(t),r)||t.endAt&&!function(o,u,h){const m=Am(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,Hd(t),r)));var t,r}function AI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sm(n){return(e,t)=>{let r=!1;for(const o of Hd(n)){const u=SI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function SI(n,e,t){const r=n.field.isKeyField()?Be.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),w=h.data.field(o);return null!==m&&null!==w?Ua(m,w):We()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return We()}}function Pv(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Va(e)?"-0":e}}function xI(n){return{integerValue:""+n}}function kv(n,e){return pI(e)?xI(e):Pv(n,e)}class xm{constructor(){this._=void 0}}function rC(n,e,t){return n instanceof Bs?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof qu?Fv(n,e):n instanceof oc?sC(n,e):function(r,o){const u=Mm(r,o),h=MI(u)+MI(r.k);return wm(u)&&wm(r.k)?xI(h):Pv(r.M,h)}(n,e)}function iC(n,e,t){return n instanceof qu?Fv(n,e):n instanceof oc?sC(n,e):t}function Mm(n,e){return n instanceof Gd?wm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bs extends xm{}class qu extends xm{constructor(e){super(),this.elements=e}}function Fv(n,e){const t=RI(e);for(const r of n.elements)t.some(o=>Jo(o,r))||t.push(r);return{arrayValue:{values:t}}}class oc extends xm{constructor(e){super(),this.elements=e}}function sC(n,e){let t=RI(e);for(const r of n.elements)t=t.filter(o=>!Jo(o,r));return{arrayValue:{values:t}}}class Gd extends xm{constructor(e,t){super(),this.M=e,this.k=t}}function MI(n){return Vn(n.integerValue||n.doubleValue)}function RI(n){return Lf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class aC{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zf{}function uC(n,e,t){n instanceof zd?function(r,o,u){const h=r.value.clone(),m=Uv(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ac?function(r,o,u){if(!Zd(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=Uv(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(Vv(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Lv(n,e,t){var o;n instanceof zd?function(r,o,u){if(!Zd(r.precondition,o))return;const h=r.value.clone(),m=OI(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(Nm(o),h).setHasLocalMutations()}(n,e,t):n instanceof ac?function(r,o,u){if(!Zd(r.precondition,o))return;const h=OI(r.fieldTransforms,u,o),m=o.data;m.setAll(Vv(r)),m.setAll(h),o.convertToFoundDocument(Nm(o),m).setHasLocalMutations()}(n,e,t):Zd(n.precondition,o=e)&&o.convertToNoDocument(vt.min())}function NI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Mm(r.transform,o||null);null!=u&&(null==t&&(t=Zr.empty()),t.set(r.field,u))}return t||null}function Rm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Xl(t,r,(o,u)=>function oC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof qu&&r instanceof qu||t instanceof oc&&r instanceof oc?Xl(t.elements,r.elements,Jo):t instanceof Gd&&r instanceof Gd?Jo(t.k,r.k):t instanceof Bs&&r instanceof Bs);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Nm(n){return n.isFoundDocument()?n.version:vt.min()}class zd extends Zf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class ac extends Zf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function Vv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Uv(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,iC(h,m,t[o]))}return r}function OI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,rC(u,h,e))}return r}class zf extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class PI extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class JA{constructor(e){this.count=e}}var zn,Gt;function kI(n){switch(n){default:return We();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function FI(n){if(void 0===n)return In("GRPC error has no .code"),ue.UNKNOWN;switch(n){case zn.OK:return ue.OK;case zn.CANCELLED:return ue.CANCELLED;case zn.UNKNOWN:return ue.UNKNOWN;case zn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case zn.INTERNAL:return ue.INTERNAL;case zn.UNAVAILABLE:return ue.UNAVAILABLE;case zn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case zn.NOT_FOUND:return ue.NOT_FOUND;case zn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case zn.ABORTED:return ue.ABORTED;case zn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case zn.DATA_LOSS:return ue.DATA_LOSS;default:return We()}}(Gt=zn||(zn={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";class uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ec(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}const XA=new Un(Be.comparator);function vo(){return XA}const eS=new Un(Be.comparator);function LI(...n){let e=eS;for(const t of n)e=e.insert(t.key,t);return e}function Wf(){return new uc(n=>n.toString(),(n,e)=>n.isEqual(e))}const Om=new Un(Be.comparator),lC=new gn(Be.comparator);function Xt(...n){let e=lC;for(const t of n)e=e.add(t);return e}const VI=new gn(Tt);function Xo(){return VI}class Wd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wd(vt.min(),r,Xo(),vo(),Xt())}}class lc{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new lc(yr.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class Kd{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class UI{constructor(e,t){this.targetId=e,this.$=t}}class Pm{constructor(e,t,r=yr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class km{constructor(){this.B=0,this.L=dC(),this.U=yr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Xt(),t=Xt(),r=Xt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:We()}}),new lc(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=dC()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Fm{constructor(e){this.nt=e,this.st=new Map,this.it=vo(),this.rt=cC(),this.ot=new gn(Tt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:We()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Av(u))if(0===r){const h=new Be(u.path);this.ct(t,h,pn.newNoDocument(h,vt.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&Av(m.target)){const w=new Be(m.target.path);null!==this.it.get(w)||this.It(h,w)||this.ct(h,w,pn.newNoDocument(w,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=Xt();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new Wd(e,t,this.ot,this.it,r);return this.it=vo(),this.rt=cC(),this.ot=new gn(Tt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new km,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new gn(Tt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new km),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function cC(){return new Un(Be.comparator)}function dC(){return new Un(Be.comparator)}const tS={asc:"ASCENDING",desc:"DESCENDING"},nS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BI{constructor(e,t){this.databaseId=e,this.N=t}}function Kf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jI(n,e){return n.N?e.toBase64():e.toUint8Array()}function hC(n,e){return Kf(n,e.toTimestamp())}function Nr(n){return It(!!n),vt.fromTimestamp(function(e){const t=Fa(e);return new xn(t.seconds,t.nanos)}(n))}function Lm(n,e){return(t=n,new Vt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Bv(n){const e=Vt.fromString(n);return It(s(e)),e}function Yd(n,e){return Lm(n.databaseId,e.path)}function ea(n,e){const t=Bv(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(fC(t))}function jv(n,e){return Lm(n.databaseId,e)}function $v(n){const e=Bv(n);return 4===e.length?Vt.emptyPath():fC(e)}function cc(n){return new Vt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fC(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Hv(n,e,t){return{name:Yd(n,e),fields:t.value.mapValue.fields}}function Vm(n,e,t){const r=ea(n,e.name),o=Nr(e.updateTime),u=new Zr({mapValue:{fields:e.fields}}),h=pn.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Um(n,e){let t;if(e instanceof zd)t={update:Hv(n,e.key,e.value)};else if(e instanceof zf)t={delete:Yd(n,e.key)};else if(e instanceof ac)t={update:Hv(n,e.key,e.data),updateMask:i(e.fieldMask)};else{if(!(e instanceof PI))return We();t={verify:Yd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Bs)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof qu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof oc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Gd)return{fieldPath:u.field.canonicalString(),increment:h.k};throw We()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:hC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:We()),t;var o}function $I(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?_r.updateTime(Nr(o.updateTime)):void 0!==o.exists?_r.exists(o.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(It("REQUEST_TIME"===h.setToServerValue),m=new Bs):"appendMissingElements"in h?m=new qu(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new oc(h.removeAllFromArray.values||[]):"increment"in h?m=new Gd(u,h.increment):We();const w=mr.fromServerFormat(h.fieldPath);return new qd(w,m)}(n,o)):[];var o;if(e.update){const o=ea(n,e.update.name),u=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new tc((e.updateMask.fieldPaths||[]).map(C=>mr.fromServerFormat(C)));return new ac(o,u,h,t,r)}return new zd(o,u,t,r)}if(e.delete){const o=ea(n,e.delete);return new zf(o,t)}if(e.verify){const o=ea(n,e.verify);return new PI(o,t)}return We()}function HI(n,e){return{documents:[jv(n,e.path)]}}function yC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=jv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=jv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(R=>function(N){if("=="===N.op){if(Vf(N.value))return{unaryFilter:{field:Yf(N.field),op:"IS_NAN"}};if(Iv(N.value))return{unaryFilter:{field:Yf(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Vf(N.value))return{unaryFilter:{field:Yf(N.field),op:"IS_NOT_NAN"}};if(Iv(N.value))return{unaryFilter:{field:Yf(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yf(N.field),op:EC(N.op),value:N.value}}}(R));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Yf((R=C).field),direction:iS(R.dir)};var R})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||Em(C)?C:{value:C});var C,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function _C(n){let e=$v(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];t.where&&(u=vC(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(R=>{return new $d(Qf((N=R).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(R){let N;return N="object"==typeof R?R.value:R,Em(N)?null:N}(t.limit));let w=null;var R;t.startAt&&(w=new sc((R=t.startAt).values||[],!!R.before));let C=null;return t.endAt&&(C=function(R){return new sc(R.values||[],!R.before)}(t.endAt)),tC(e,o,h,u,m,"F",w,C)}function vC(n){return n?void 0!==n.unaryFilter?[oS(n)]:void 0!==n.fieldFilter?[sS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>vC(e)).reduce((e,t)=>e.concat(t)):We():[]}function iS(n){return tS[n]}function EC(n){return nS[n]}function Yf(n){return{fieldPath:n.canonicalString()}}function Qf(n){return mr.fromServerFormat(n.fieldPath)}function sS(n){return Rr.create(Qf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return We()}}(n.fieldFilter.op),n.fieldFilter.value)}function oS(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Qf(n.unaryFilter.field);return Rr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Qf(n.unaryFilter.field);return Rr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qf(n.unaryFilter.field);return Rr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qf(n.unaryFilter.field);return Rr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return We()}}function i(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function s(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function a(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=c(e)),e=l(n.get(t),e);return c(e)}function l(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function c(n){return n+"\x01\x01"}function p(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Vt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&We(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:We()}u=h+2}return new Vt(r)}const _=["userId","batchId"];function E(n,e){return[n,a(e)]}function I(n,e,t){return[n,a(e),t]}const A={},S=["prefixPath","collectionGroup","readTime","documentId"],k=["prefixPath","collectionGroup","documentId"],V=["collectionGroup","readTime","prefixPath","documentId"],K=["canonicalId","targetId"],_e=["targetId","path"],Pe=["path","targetId"],je=["collectionId","parent"],et=["indexId","uid"],Ae=["uid","sequenceNumber"],ht=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pt=["indexId","uid","orderedDocumentKey"],en=["userId","collectionPath","documentId"],ds=["userId","collectionPath","largestBatchId"],dc=["userId","collectionGroup","largestBatchId"],Bm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gv=[...Bm,"documentOverlays"],jm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qv=[...jm,"indexConfiguration","indexState","indexEntries"],$m="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},w=>r(w))}),h=!0,u===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Qd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Mr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Zv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=wC(r.target.error);this.At.reject(new Zv(e,o))}}static open(e,t,r,o){try{return new Qd(t,e.transaction(o,r))}catch(u){throw new Zv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new DM(t)}}class hs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===hs.Vt((0,Rt.z$)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),Xf(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Rt.hl)())return!1;if(hs.St())return!0;const e=(0,Rt.z$)(),t=hs.Vt(e),r=0<t&&t<10,o=hs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Zv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Me(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Me(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Zv(e,m))},u.onupgradeneeded=h=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.Pt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ge.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=Qd.open(u.db,e,h?"readonly":"readwrite",r),C=o(w).next(R=>(w.bt(),R)).catch(R=>(w.abort(R),le.reject(R))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class bM{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Xf(this.Ft.delete())}}class Zv extends Me{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Jf(n){return"IndexedDbTransactionError"===n.name}class DM{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xf(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),Xf(this.store.add(e))}get(e){return Xf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),Xf(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),Xf(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new le((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=u=>{const h=wC(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new le((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const w=new bM(m),C=t(m.primaryKey,m.value,w);if(C instanceof le){const R=C.catch(N=>(w.done(),le.reject(N)));r.push(R)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xf(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=wC(r.target.error);t(o)}})}let aS=!1;function wC(n){const e=hs.Vt((0,Rt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aS||(aS=!0,setTimeout(()=>{throw r},0)),r}}return n}class uS extends Hm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function li(n,e){const t=$e(n);return hs.xt(t.Ht,e)}class IC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uC(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Lv(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Lv(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(vt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(t,r)=>Rm(t,r))&&Xl(this.baseMutations,e.baseMutations,(t,r)=>Rm(t,r))}}class bC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=Om;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new bC(e,t,r,o)}}class DC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jd{constructor(e,t,r,o,u=vt.min(),h=vt.min(),m=yr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Jd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lS{constructor(e){this.Jt=e}}function cS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:GI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Yd(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Kf(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ep(e.version)};else{if(!e.isUnknownDocument())return We();r.unknownDocument={path:t.path.toArray(),version:ep(e.version)}}var o,u;return r}function GI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ep(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tp(n){const e=new xn(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function Gm(n,e){const t=(e.baseMutations||[]).map(u=>$I(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>$I(n.Jt,u)),o=xn.fromMillis(e.localWriteTimeMs);return new IC(e.batchId,o,t,r)}function zv(n){const e=tp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tp(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=$i(Gf($v(o.documents[0])))):r=$i(_C(n.query)),new Jd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,yr.fromBase64String(n.resumeToken))}function dS(n,e){const t=ep(e.snapshotVersion),r=ep(e.lastLimboFreeSnapshotVersion);let o;o=Av(e.target)?HI(n.Jt,e.target):yC(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function CC(n){const e=_C({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?CI(e,e.limit,"L"):e}function TC(n,e){return new DC(e.largestBatchId,$I(n.Jt,e.overlayMutation))}function hS(n,e){const t=e.path.lastSegment();return[n,a(e.path.popLast()),t]}class TM{getBundleMetadata(e,t){return fS(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:tp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return fS(e).put({bundleId:(r=t).id,createTime:ep(Nr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return pS(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:CC(o.bundledQuery),readTime:tp(o.readTime)};var o})}saveNamedQuery(e,t){return pS(e).put({name:(r=t).name,readTime:ep(Nr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function fS(n){return li(n,"bundles")}function pS(n){return li(n,"namedQueries")}class AC{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new AC(e,t.uid||"")}getOverlay(e,t){return Wv(e).get(hS(this.userId,t)).next(r=>r?TC(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new DC(t,h);o.push(this.Xt(e,m))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(a(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Wv(e).Qt("collectionPathOverlayIndex",m))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Wf(),u=a(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wv(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const C=TC(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Wf();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wv(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,R)=>{const N=TC(this.M,C);u.size()<o||N.largestBatchId===h?(u.set(N.getKey(),N),h=N.largestBatchId):R.done()}).next(()=>u)}Xt(e,t){return Wv(e).put(function(r,o,u){const[h,m,w]=hS(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Um(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Wv(n){return li(n,"documentOverlays")}class np{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vn(e.integerValue));else if("doubleValue"in e){const r=Vn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Va(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue($u(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?Im(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):We()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Be.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function AM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function gS(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=AM(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}np.fe=new np;class SM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=gS(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=gS(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class xM{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class MM{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Kv{constructor(){this.De=new SM,this.Ce=new xM(this.De),this.xe=new MM(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class rp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rp(this.indexId,this.documentKey,this.arrayValue,r)}}function ip(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mS(n.arrayValue,e.arrayValue),0!==t?t:(t=mS(n.directionalValue,e.directionalValue),0!==t?t:Be.comparator(n.documentKey,e.documentKey)))}function mS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class RM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=bm(e);if(void 0!==t&&!this.Be(t))return!1;const r=ic(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NM{constructor(){this.qe=new SC}addToCollectionParentIndex(e,t){return this.qe.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Us.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class SC{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new gn(Vt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new gn(Vt.comparator)).toArray()}}const qI=new Uint8Array(0);class OM{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new SC,this.Ge=new uc(r=>jd(r),(r,o)=>Tm(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:a(o)};return yS(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[vm(t),""],!1,!0);return yS(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(p(h.parent))}return r})}addFieldIndex(e,t){const r=ZI(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=ZI(e),o=zI(e),u=Yv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Yv(e);let o=!0;const u=new Map;return le.forEach(this.Qe(t),h=>this.je(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=Xt();const m=[];return le.forEach(u,(w,C)=>{var R;Oe("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(Ht=>`${Ht.fieldPath}:${Ht.kind}`).join(",")}`} to execute ${jd(t)}`);const N=function(Ht,St){const jt=bm(St);if(void 0===jt)return null;for(const tn of Sv(Ht,jt.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(C,w),q=function(Ht,St){const jt=new Map;for(const tn of ic(St))for(const Gi of Sv(Ht,tn.fieldPath))switch(Gi.op){case"==":case"in":jt.set(tn.fieldPath.canonicalString(),Gi.value);break;case"not-in":case"!=":return jt.set(tn.fieldPath.canonicalString(),Gi.value),Array.from(jt.values())}return null}(C,w),ee=function(Ht,St){const jt=[];let tn=!0;for(const Gi of ic(St)){const h0=0===Gi.kind?Hf(Ht,Gi.fieldPath,Ht.startAt):QD(Ht,Gi.fieldPath,Ht.startAt);jt.push(h0.value),tn&&(tn=h0.inclusive)}return new sc(jt,tn)}(C,w),me=function(Ht,St){const jt=[];let tn=!0;for(const Gi of ic(St)){const h0=0===Gi.kind?QD(Ht,Gi.fieldPath,Ht.endAt):Hf(Ht,Gi.fieldPath,Ht.endAt);jt.push(h0.value),tn&&(tn=h0.inclusive)}return new sc(jt,tn)}(C,w),Fe=this.We(w,C,ee),rt=this.We(w,C,me),Ut=this.ze(w,C,q),Bt=this.He(w.indexId,N,Fe,ee.inclusive,rt,me.inclusive,Ut);return le.forEach(Bt,Ht=>r.Gt(Ht,t.limit).next(St=>{St.forEach(jt=>{const tn=Be.fromSegments(jt.documentKey);h.has(tn)||(h=h.add(tn),m.push(tn))})}))}).next(()=>m)}return le.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,h,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),R=[];for(let N=0;N<w;++N){const q=t?this.Je(t[N/C]):qI,ee=this.Ye(e,q,r[N%C],o),me=this.Xe(e,q,u[N%C],h),Fe=m.map(rt=>this.Ye(e,q,rt,!0));R.push(...this.createRange(ee,me,Fe))}return R}Ye(e,t,r,o){const u=new rp(e,Be.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new rp(e,Be.empty(),t,r);return o?u.ke():u}je(e,t){const r=new RM(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let h=null;for(const m of u)r.$e(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(e,t){let r=2;return le.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(h){let m=new gn(mr.comparator),w=!1;for(const C of h.filters){const R=C;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:m=m.add(R.field))}for(const C of h.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Kv;for(const o of ic(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);np.fe.Zt(u,h)}return r.Se()}Je(e){const t=new Kv;return np.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Kv;return np.fe.Zt(Ud(this.databaseId,t),r.Ne(function(o){const u=ic(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new Kv);let u=0;for(const h of ic(e)){const m=r[u++];for(const w of o)if(this.en(t,h.fieldPath)&&Lf(m))o=this.nn(o,h,m);else{const C=w.Ne(h.kind);np.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const w=new Kv;w.seed(m.Se()),np.fe.Zt(h,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Rr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=ZI(e),o=zI(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return le.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{h.push(function(C,R){const N=R?new Bd(R.sequenceNumber,new Us(tp(R.readTime),new Be(p(R.documentKey)),R.largestBatchId)):Bd.empty(),q=C.fields.map(([ee,me])=>new Dm(mr.fromServerFormat(ee),me));return new jf(C.indexId,C.collectionGroup,q,N)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Tt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=ZI(e),u=zI(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>le.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:ep((q=r).readTime),documentKey:a(q.documentKey.path),largestBatchId:q.largestBatchId});var q})))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?le.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),le.forEach(m,w=>this.on(e,o,w).next(C=>{const R=this.un(u,w);return C.isEqual(R)?le.resolve():this.an(e,u,w,C,R)}))))})}cn(e,t,r,o){return Yv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Yv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Yv(e);let u=new gn(ip);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,m)=>{u=u.add(new rp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new gn(ip);const o=this.Ze(t,e);if(null==o)return r;const u=bm(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Lf(h))for(const m of h.arrayValue.values||[])r=r.add(new rp(t.indexId,e.key,this.Je(m),o))}else r=r.add(new rp(t.indexId,e.key,qI,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,w,C,R,N){const q=m.getIterator(),ee=w.getIterator();let me=$f(q),Fe=$f(ee);for(;me||Fe;){let rt=!1,Ut=!1;if(me&&Fe){const Bt=C(me,Fe);Bt<0?Ut=!0:Bt>0&&(rt=!0)}else null!=me?Ut=!0:rt=!0;rt?(R(Fe),Fe=$f(ee)):Ut?(N(me),me=$f(q)):(me=$f(q),Fe=$f(ee))}}(o,u,ip,m=>{h.push(this.cn(e,t,r,m))},m=>{h.push(this.hn(e,t,r,m))}),le.waitFor(h)}rn(e){let t=1;return zI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>ip(h,m)).filter((h,m,w)=>!m||0!==ip(h,w[m-1]));const o=[];o.push(e);for(const h of r){const m=ip(h,e),w=ip(h,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(h),o.push(h.ke());else if(w>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,qI,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,qI,[]]));return u}getMinOffset(e,t){let r;return le.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||Cv(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Us.min()})).next(()=>r)}}function yS(n){return li(n,"collectionParents")}function Yv(n){return li(n,"indexEntries")}function ZI(n){return li(n,"indexConfiguration")}function zI(n){return li(n,"indexState")}const _S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class js{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new js(e,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vS(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:h},(R,N,q)=>(m++,q.delete()));u.push(w.next(()=>{It(1===m)}));const C=[];for(const R of t.mutations){const N=I(e,R.key.path,t.batchId);u.push(o.delete(N)),C.push(R.key)}return le.waitFor(u).next(()=>C)}function WI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw We();e=n.noDocument}return JSON.stringify(e).length}js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);class xC{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new xC(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=qm(e),h=Xd(e);return h.add({}).next(m=>{It("number"==typeof m);const w=new IC(m,t,r,o),C=function(q,ee,me){const Fe=me.baseMutations.map(Ut=>Um(q.Jt,Ut)),rt=me.mutations.map(Ut=>Um(q.Jt,Ut));return{userId:ee,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:Fe,mutations:rt}}(this.M,this.userId,w),R=[];let N=new gn((q,ee)=>Tt(q.canonicalString(),ee.canonicalString()));for(const q of o){const ee=I(this.userId,q.key.path,m);N=N.add(q.key.path.popLast()),R.push(h.put(C)),R.push(u.put(ee,A))}return N.forEach(q=>{R.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),le.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return Xd(e).get(t).next(r=>r?(It(r.userId===this.userId),Gm(this.M,r)):null)}fn(e,t){return this.ln[t]?le.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Xd(e).Wt({index:"userMutationsIndex",range:o},(h,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=Gm(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Gm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=E(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return qm(e).Wt({range:o},(h,m,w)=>{const[C,R,N]=h,q=p(R);if(C===this.userId&&t.path.isEqual(q))return Xd(e).get(N).next(ee=>{if(!ee)throw We();It(ee.userId===this.userId),u.push(Gm(this.M,ee))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Tt);const o=[];return t.forEach(u=>{const h=E(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=qm(e).Wt({range:m},(C,R,N)=>{const[q,ee,me]=C,Fe=p(ee);q===this.userId&&u.path.isEqual(Fe)?r=r.add(me):N.done()});o.push(w)}),le.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=E(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new gn(Tt);return qm(e).Wt({range:h},(w,C,R)=>{const[N,q,ee]=w,me=p(q);N===this.userId&&r.isPrefixOf(me)?me.length===o&&(m=m.add(ee)):R.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Xd(e).get(u).next(h=>{if(null===h)throw We();It(h.userId===this.userId),r.push(Gm(this.M,h))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return vS(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return qm(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=p(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return ES(e,this.userId,t)}wn(e){return wS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ES(n,e,t){const r=E(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return qm(n).Wt({range:u,jt:!0},(m,w,C)=>{const[R,N,q]=m;R===e&&N===o&&(h=!0),C.done()}).next(()=>h)}function Xd(n){return li(n,"mutations")}function qm(n){return li(n,"documentMutations")}function wS(n){return li(n,"mutationQueues")}class sp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new sp(0)}static yn(){return new sp(-1)}}class PM{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new sp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>vt.fromTimestamp(new xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Zm(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Zm(e).Wt((h,m)=>{const w=zv(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>le.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Zm(e).Wt((r,o)=>{const u=zv(o);t(u)})}pn(e){return IS(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return IS(e).put("targetGlobalKey",t)}Tn(e,t){return Zm(e).put(dS(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Zm(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,w)=>{const C=zv(m);Tm(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=eh(e);return t.forEach(h=>{const m=a(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=eh(e);return le.forEach(t,u=>{const h=a(u.path);return le.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=eh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=eh(e);let u=Xt();return o.Wt({range:r,jt:!0},(h,m,w)=>{const C=p(h[1]),R=new Be(C);u=u.add(R)}).next(()=>u)}containsKey(e,t){const r=a(t.path),o=IDBKeyRange.bound([r],[vm(r)],!1,!0);let u=0;return eh(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],w,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Zm(e).get(t).next(r=>r?zv(r):null)}}function Zm(n){return li(n,"targets")}function IS(n){return li(n,"targetGlobal")}function eh(n){return li(n,"targetDocuments")}function op(n){return MC.apply(this,arguments)}function MC(){return MC=(0,ge.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==$m)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),MC.apply(this,arguments)}function bS([n,e],[t,r]){const o=Tt(n,t);return 0===o?Tt(e,r):o}class kM{constructor(e){this.An=e,this.buffer=new gn(bS),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FM{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Jf(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield op(o)}yield t.Sn(e)}))}}class LM{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(cs.A);const r=new kM(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(_S)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_S):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,m,w,C;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),_v()<=xu.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-R}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-R}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class VM{constructor(e,t){this.db=e,this.garbageCollector=new LM(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return KI(e,r)}removeReference(e,t,r){return KI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return KI(e,t)}On(e,t){return function(r,o){let u=!1;return wS(r).zt(h=>ES(r,h,o).next(m=>(m&&(u=!0),le.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,m)=>{if(m<=t){const w=this.On(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,vt.min()),eh(e).delete([0,a(h.path)])))});o.push(w)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return KI(e,t)}Mn(e,t){const r=eh(e);let o,u=cs.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:C})=>{0===h?(u!==cs.A&&t(new Be(p(o)),u),u=C,o=w):u=cs.A}).next(()=>{u!==cs.A&&t(new Be(p(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function KI(n,e){return eh(n).put((r=n.currentSequenceNumber,{targetId:0,path:a(e.path),sequenceNumber:r}));var r}class DS{constructor(){this.changes=new uc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class UM{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ap(e).put(r)}removeEntry(e,t,r){return ap(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],GI(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=pn.newInvalidDocument(t);return ap(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:pn.newInvalidDocument(t)};return ap(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Qv(t))},(o,u)=>{r={document:this.$n(t,u),size:WI(u)}}).next(()=>r)}getEntries(e,t){let r=vo();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=vo(),o=new Un(Be.comparator);return this.Ln(e,t,(u,h)=>{const m=this.$n(u,h);r=r.insert(u,m),o=o.insert(u,WI(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return le.resolve();let o=new gn(AS);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Qv(o.first()),Qv(o.last())),h=o.getIterator();let m=h.getNext();return ap(e).Wt({index:"documentKeyIndex",range:u},(w,C,R)=>{const N=Be.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&AS(m,N)<0;)r(m,null),m=h.getNext();m&&m.isEqual(N)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?R.Ut(Qv(m)):R.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),GI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ap(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=vo();for(const w of h){const C=this.$n(Be.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=vo();const h=TS(t,r),m=TS(t,Us.max());return ap(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,C,R)=>{const N=this.$n(Be.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&R.done()}).next(()=>u)}newChangeBuffer(e){return new BM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return CS(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return CS(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function CM(n,e){let t;if(e.document)t=Vm(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),o=tp(e.noDocument.readTime);t=pn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return We();{const r=Be.fromSegments(e.unknownDocument.path),o=tp(e.unknownDocument.version);t=pn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new xn(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return pn.newInvalidDocument(e)}}class BM extends DS{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new uc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new gn((u,h)=>Tt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=cS(this.Kn.M,h);o=o.add(u.path.popLast()),r+=WI(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=cS(this.Kn.M,h.convertToNoDocument(vt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function CS(n){return li(n,"remoteDocumentGlobal")}function ap(n){return li(n,"remoteDocumentsV14")}function Qv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TS(n,e){const t=e.documentKey.path.toArray();return[n,GI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function AS(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Tt(t[u],r[u]),o)return o;return o=Tt(t.length,r.length),o||(o=Tt(t[t.length-2],r[r.length-2]),o||Tt(t[t.length-1],r[r.length-1]))}class jM{constructor(e){this.M=e}kt(e,t,r,o){const u=new Qd("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_,{unique:!0}),m.createObjectStore("documentMutations"),SS(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=le.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),SS(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_,{unique:!0});const R=w.store("mutations"),N=C.map(q=>R.put(q));return le.waitFor(N)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:en});w.createIndex("collectionPathOverlayIndex",ds,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",dc,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:S});w.createIndex("documentKeyIndex",k),w.createIndex("collectionGroupIndex",V)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:et}).createIndex("sequenceNumberIndex",Ae,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:ht}).createIndex("documentKeyIndex",Pt,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=WI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>le.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>le.forEach(m,w=>{It(w.userId===u.userId);const C=Gm(this.M,w);return vS(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const w=new Vt(h),C=[0,a(w)];u.push(t.get(C).next(R=>R?le.resolve():t.put({targetId:0,path:a(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:je});const r=t.store("collectionParents"),o=new SC,u=h=>{if(o.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:a(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const w=new Vt(h);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,w],C)=>{const R=p(m);return u(R.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=zv(o),h=dS(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(C=h,C.document?new Be(Vt.fromString(C.document.name).popFirst(5)):C.noDocument?Be.fromSegments(C.noDocument.path):C.unknownDocument?Be.fromSegments(C.unknownDocument.path):We()).path.toArray();var C;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(R))}).next(()=>le.waitFor(o))}}function SS(n){n.createObjectStore("targetDocuments",{keyPath:_e}).createIndex("documentTargetsIndex",Pe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",K,{unique:!0}),n.createObjectStore("targetGlobal")}const RC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class NC{constructor(e,t,r,o,u,h,m,w,C,R,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=m,this.Xn=C,this.Zn=R,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=q=>Promise.resolve(),!NC.vt())throw new Me(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VM(this,o),this.hs=t+"main",this.M=new lS(w),this.ls=new hs(this.hs,this.ts,new jM(this.M)),this.fs=new PM(this.referenceDelegate,this.M),this.ds=new UM(this.M),this._s=new TM,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===R&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,RC);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new cs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>YI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Jf(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Jv(e).get("owner").next(t=>le.resolve(this.Ps(t)))}Vs(e){return YI(e).delete(this.clientId)}vs(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=li(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return le.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?le.resolve(!0):Jv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Me(ue.FAILED_PRECONDITION,RC);return!1}}return!(!this.networkEnabled||!this.inForeground)||YI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new uS(t,cs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>YI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return xC.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new OM(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return AC.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?qv:13===h?jm:12===h?Gv:11===h?Bm:void We();var h;let m;return this.ls.runTransaction(e,o,u,w=>(m=new uS(w,this.es?this.es.next():cs.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw In(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(ue.FAILED_PRECONDITION,$m);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return Jv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ue.FAILED_PRECONDITION,RC)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jv(e).put("owner",t)}static vt(){return hs.vt()}Rs(e){const t=Jv(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(In(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Rt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return In("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){In("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jv(n){return li(n,"owner")}function YI(n){return li(n,"clientMetadata")}function OC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $M{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Be.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):DI(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Be(t)).next(r=>{let o=LI();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=LI();return this.indexManager.getCollectionParents(e,o).next(h=>le.forEach(h,m=>{const w=(C=t,R=m.child(o),new Gu(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,R;return this.zs(e,w,r).next(C=>{C.forEach((R,N)=>{u=u.insert(R,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const w=m.key;let C=o.get(w);null==C&&(C=pn.newInvalidDocument(w),o=o.insert(w,C)),Lv(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,h)=>{Ov(t,h)||(o=o.remove(u))}),o))}}class PC{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Xt(),o=Xt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new PC(e,t.fromCache,r,o)}}class xS{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return le.resolve(null)}ei(e,t,r,o){return function nC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(vt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const h=this.si(t,u);return this.ii(t,h,r,o)?this.ni(e,t):(_v()<=xu.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),qf(t)),this.ri(e,h,t,yI(o,-1)))})}si(e,t){let r=new gn(Sm(e));return t.forEach((o,u)=>{Ov(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return _v()<=xu.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",qf(t)),this.Zs.Qs(e,t,Us.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class HM{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Un(Tt),this.ai=new uc(u=>jd(u),Tm),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new $M(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function MS(n,e,t,r){return new HM(n,e,t,r)}function RS(n,e){return kC.apply(this,arguments)}function kC(){return kC=(0,ge.Z)(function*(n,e){const t=$e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=Xt();for(const C of o){h.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}for(const C of u){m.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}return t.fi.Ks(r,w).next(C=>({di:C,removedBatchIds:h,addedBatchIds:m}))})})}),kC.apply(this,arguments)}function GM(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(h,m,w,C){const R=w.batch,N=R.keys();let q=le.resolve();return N.forEach(ee=>{q=q.next(()=>C.getEntry(m,ee)).next(me=>{const Fe=w.docVersions.get(ee);It(null!==Fe),me.version.compareTo(Fe)<0&&(R.applyToRemoteDocument(me,w),me.isValidDocument()&&(me.setReadTime(w.commitVersion),C.addEntry(me)))})}),q.next(()=>h.Bs.removeMutationBatch(m,R))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function NS(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function qM(n,e){const t=$e(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,R)=>{const N=o.get(R);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,R).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,R)));let q=N.withSequenceNumber(u.currentSequenceNumber);var ee,me,Fe;e.targetMismatches.has(R)?q=q.withResumeToken(yr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):C.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(C.resumeToken,r)),o=o.insert(R,q),me=q,Fe=C,(0===(ee=N).resumeToken.approximateByteSize()||me.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,q))});let w=vo();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(OS(u,h,e.documentUpdates).next(C=>{w=C})),!r.isEqual(vt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(R=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return le.waitFor(m).next(()=>h.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function OS(n,e,t){let r=Xt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=vo();return t.forEach((h,m)=>{const w=o.get(h);m.isNoDocument()&&m.version.isEqual(vt.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Oe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",m.version)}),u})}function ZM(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function zm(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,le.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new Jd(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Wm(n,e,t){return FC.apply(this,arguments)}function FC(){return FC=(0,ge.Z)(function*(n,e,t){const r=$e(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Jf(h))throw h;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),FC.apply(this,arguments)}function QI(n,e,t){const r=$e(n);let o=vt.min(),u=Xt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,C){const R=$e(m),N=R.ai.get(C);return void 0!==N?le.resolve(R.ui.get(N)):R.fs.getTargetData(w,C)}(r,h,$i(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(h,e,t?o:vt.min(),t?u:Xt())).next(m=>(FS(r,AI(e),m),{documents:m,_i:u})))}function PS(n,e){const t=$e(n),r=$e(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function kS(n,e){const t=$e(n),r=t.ci.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,yI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(FS(t,e,o),o))}function FS(n,e,t){let r=vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function LC(){return LC=(0,ge.Z)(function*(n,e,t,r){const o=$e(n);let u=Xt(),h=vo();for(const C of t){const R=e.wi(C.metadata.name);C.document&&(u=u.add(R));const N=e.mi(C);N.setReadTime(e.gi(C.metadata.readTime)),h=h.insert(R,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield zm(o,(C=r,$i(Gf(Vt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>OS(C,m,h).next(R=>(m.apply(C),R)).next(R=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.fi.Gs(C,R)).next(()=>R)))}),LC.apply(this,arguments)}function WM(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,ge.Z)(function*(n,e,t=Xt()){const r=yield zm(n,$i(CC(e.bundledQuery))),o=$e(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Nr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(yr.EMPTY_BYTE_STRING,h);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),VC.apply(this,arguments)}class KM{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return le.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Nr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:CC(r.bundledQuery),readTime:Nr(r.readTime)}),le.resolve();var r}}class YM{constructor(){this.overlays=new Un(Be.comparator),this.Ii=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=Wf(),u=t.length+1,h=new Be(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Un((C,R)=>C-R);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let R=u.get(C.largestBatchId);null===R&&(R=Wf(),u=u.insert(C.largestBatchId,R)),R.set(C.getKey(),C)}}const m=Wf(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,R)=>m.set(C,R)),!(m.size()>=o)););return le.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new DC(t,r));let u=this.Ii.get(t);void 0===u&&(u=Xt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class UC{constructor(){this.Ti=new gn(ci.Ei),this.Ai=new gn(ci.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new ci(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new ci(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Be(new Vt([])),r=new ci(t,e),o=new ci(t,e+1),u=[];return this.Ai.forEachInRange([r,o],h=>{this.Pi(h),u.push(h.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Be(new Vt([])),r=new ci(t,e),o=new ci(t,e+1);let u=Xt();return this.Ai.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new ci(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ci{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Be.comparator(e.key,t.key)||Tt(e.Ci,t.Ci)}static Ri(e,t){return Tt(e.Ci,t.Ci)||Be.comparator(e.key,t.key)}}class QM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new gn(ci.Ei)}checkEmpty(e){return le.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const h=new IC(u,t,r,o);this.Bs.push(h);for(const m of o)this.Ni=this.Ni.add(new ci(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(h)}lookupMutationBatch(e,t){return le.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return le.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ci(t,0),o=new ci(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],h=>{const m=this.ki(h.Ci);u.push(m)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Tt);return t.forEach(o=>{const u=new ci(o,0),h=new ci(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,h],m=>{r=r.add(m.Ci)})}),le.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Be.isDocumentKey(u)||(u=u.child(""));const h=new ci(new Be(u),0);let m=new gn(Tt);return this.Ni.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Ci)),!0)},h),le.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return le.forEach(t.mutations,o=>{const u=new ci(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new ci(t,0),o=this.Ni.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class JM{constructor(e){this.$i=e,this.docs=new Un(Be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=vo();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():pn.newInvalidDocument(o))}),le.resolve(r)}getAllFromCollection(e,t,r){let o=vo();const u=new Be(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Cv(_I(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,o){We()}Bi(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XM(this)}getSize(e){return le.resolve(this.size)}}class XM extends DS{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class e1{constructor(e){this.persistence=e,this.Li=new uc(t=>jd(t),Tm),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new UC,this.targetCount=0,this.Ki=sp.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),le.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new sp(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Tn(t),le.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.qi.containsKey(t))}}class t1{constructor(e,t){this.Gi={},this.overlays={},this.es=new cs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new e1(this),this.indexManager=new NM,this.ds=new JM(r=>this.referenceDelegate.Qi(r)),this.M=new lS(t),this._s=new KM(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new QM(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new n1(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return le.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class n1 extends Hm{constructor(e){super(),this.currentSequenceNumber=e}}class BC{constructor(e){this.persistence=e,this.Hi=new UC,this.Ji=null}static Yi(e){return new BC(e)}get Xi(){if(this.Ji)return this.Ji;throw We()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Xi,r=>{const o=Be.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return le.or([()=>le.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function LS(n,e){return`firestore_clients_${n}_${e}`}function VS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jC(n,e){return`firestore_targets_${n}_${e}`}class JI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Me(o.error.code,o.error.message))),h?new JI(e,t,o.state,u):(In("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Me(r.error.code,r.error.message))),u?new Xv(e,r.state,o):(In("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Xo();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=pI(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new XI(e,u):(In("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $C{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $C(t.clientId,t.onlineState):(In("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HC{constructor(){this.activeTargetIds=Xo()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GC{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Un(Tt),this.started=!1,this.cr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=LS(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new HC),this.dr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(LS(e.persistenceKey,o));if(u){const h=XI.tr(o,u);h&&(e.ar=e.ar.insert(h.clientId,h))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jC(this.persistenceKey,e));if(r){const o=Xv.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jC(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let h=cs.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),h=m}catch(m){In("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==cs.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new JI(this.currentUser,e,t,r),u=VS(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=VS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=jC(this.persistenceKey,e),u=new Xv(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return XI.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return JI.tr(new qr(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return Xv.tr(o,t)}pr(e){return $C.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),h=[],m=[];return u.forEach(w=>{o.has(w)||h.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(h,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Xo();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class US{constructor(){this.Ur=new HC,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new HC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r1{Kr(e){}shutdown(){}}class BS{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const i1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class s1{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class o1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const h=this.ho(e,t);Oe("RestConnection","Sending: ",h,r);const m={};return this.lo(m,o,u),this.fo(e,h,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Nf("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ld,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${i1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,h)=>{const m=new iI;m.listenOnce(Mf.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case mv.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case mv.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),h(new Me(ue.DEADLINE_EXCEEDED,"Request time out"));break;case mv.HTTP_ERROR:const R=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",m.getResponseText()),R>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const q=function(ee){const me=ee.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(me)>=0?me:ue.UNKNOWN}(N.status);h(new Me(q,N.message))}else h(new Me(ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Me(ue.UNAVAILABLE,"Connection failed."));break;default:We()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=GD(),h=qD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new rI({})),this.lo(m.initMessageHeaders,t,r),(0,Rt.uI)()||(0,Rt.b$)()||(0,Rt.d)()||(0,Rt.w1)()||(0,Rt.Mn)()||(0,Rt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let R=!1,N=!1;const q=new s1({Jr:me=>{N?Oe("Connection","Not sending because WebChannel is closed:",me):(R||(Oe("Connection","Opening WebChannel transport."),C.open(),R=!0),Oe("Connection","WebChannel sending:",me),C.send(me))},Yr:()=>C.close()}),ee=(me,Fe,rt)=>{me.listen(Fe,Ut=>{try{rt(Ut)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return ee(C,Rf.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),ee(C,Rf.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),q.ro())}),ee(C,Rf.EventType.ERROR,me=>{N||(N=!0,Nf("Connection","WebChannel transport errored:",me),q.ro(new Me(ue.UNAVAILABLE,"The operation could not be completed")))}),ee(C,Rf.EventType.MESSAGE,me=>{var Fe;if(!N){const rt=me.data[0];It(!!rt);const Ut=rt,Bt=Ut.error||(null===(Fe=Ut[0])||void 0===Fe?void 0:Fe.error);if(Bt){Oe("Connection","WebChannel received error:",Bt);const Ht=Bt.status;let St=function(tn){const Gi=zn[tn];if(void 0!==Gi)return FI(Gi)}(Ht),jt=Bt.message;void 0===St&&(St=ue.INTERNAL,jt="Unknown error status: "+Ht+" with message "+Bt.message),N=!0,q.ro(new Me(St,jt)),C.close()}else Oe("Connection","WebChannel received:",rt),q.oo(rt)}}),ee(h,nI.STAT_EVENT,me=>{me.stat===yv.PROXY?Oe("Connection","Detected buffering proxy"):me.stat===yv.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.io()},0),q}}function jS(){return"undefined"!=typeof window?window:null}function eb(){return"undefined"!=typeof document?document:null}function e0(n){return new BI(n,!0)}class qC{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $S{constructor(e,t,r,o,u,h,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new qC(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ge.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ge.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(In(t.toString()),In("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Me(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a1 extends $S{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function gC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:We(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(It(void 0===C||"string"==typeof C),yr.fromBase64String(C||"")):(It(void 0===C||C instanceof Uint8Array),yr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const C=void 0===w.code?ue.UNKNOWN:FI(w.code);return new Me(C,w.message||"")}(h);t=new Pm(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ea(n,r.document.name),u=Nr(r.document.updateTime),h=new Zr({mapValue:{fields:r.document.fields}}),m=pn.newFoundDocument(o,u,h);t=new Kd(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ea(n,r.document),u=r.readTime?Nr(r.readTime):vt.min(),h=pn.newNoDocument(o,u);t=new Kd([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=ea(n,r.document);t=new Kd([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return We();{const r=e.filter,u=new JA(r.count||0);t=new UI(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?Nr(u.readTime):vt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=cc(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=Av(m)?{documents:HI(o,m)}:{query:yC(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=jI(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(h.readTime=Kf(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function rS(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return We()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=cc(this.M),t.removeTarget=e,this.Lo(t)}}class u1 extends $S{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function mC(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Nr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=Nr(o)),new aC(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Nr(e.commitTime);return this.listener.tu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=cc(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Um(this.M,r))};this.Lo(t)}}class l1 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ue.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ue.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class c1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(In(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class d1{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,ge.Z)(function*(){var w;th(h)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ge.Z)(function*(C){const R=$e(C);R.wu.add(4),yield Km(R),R.yu.set("Unknown"),R.wu.delete(4),yield t0(R)}),function(C){return w.apply(this,arguments)})(h))}))}),this.yu=new c1(r,o)}}function t0(n){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,ge.Z)(function*(n){if(th(n))for(const e of n.mu)yield e(!0)}),ZC.apply(this,arguments)}function Km(n){return zC.apply(this,arguments)}function zC(){return zC=(0,ge.Z)(function*(n){for(const e of n.mu)yield e(!1)}),zC.apply(this,arguments)}function tb(n,e){const t=$e(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),YC(t)?KC(t):Qm(t).Mo()&&WC(t,e))}function n0(n,e){const t=$e(n),r=Qm(t);t._u.delete(e),r.Mo()&&HS(t,e),0===t._u.size&&(r.Mo()?r.$o():th(t)&&t.yu.set("Unknown"))}function WC(n,e){n.pu.Z(e.targetId),Qm(n).Ho(e)}function HS(n,e){n.pu.Z(e),Qm(n).Jo(e)}function KC(n){n.pu=new Fm({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Qm(n).start(),n.yu.au()}function YC(n){return th(n)&&!Qm(n).ko()&&n._u.size>0}function th(n){return 0===$e(n).wu.size}function GS(n){n.pu=void 0}function h1(n){return QC.apply(this,arguments)}function QC(){return QC=(0,ge.Z)(function*(n){n._u.forEach((e,t)=>{WC(n,e)})}),QC.apply(this,arguments)}function f1(n,e){return JC.apply(this,arguments)}function JC(){return JC=(0,ge.Z)(function*(n,e){GS(n),YC(n)?(n.yu.lu(e),KC(n)):n.yu.set("Unknown")}),JC.apply(this,arguments)}function p1(n,e,t){return XC.apply(this,arguments)}function XC(){return XC=(0,ge.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Pm&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nb(n,r)}else if(e instanceof Kd?n.pu.ut(e):e instanceof UI?n.pu._t(e):n.pu.ht(e),!t.isEqual(vt.min()))try{const r=yield NS(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.pu.yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(yr.EMPTY_BYTE_STRING,w.snapshotVersion)),HS(o,m);const C=new Jd(w.target,m,1,w.sequenceNumber);WC(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield nb(n,r)}var r}),XC.apply(this,arguments)}function nb(n,e,t){return eT.apply(this,arguments)}function eT(){return eT=(0,ge.Z)(function*(n,e,t){if(!Jf(e))throw e;n.wu.add(1),yield Km(n),n.yu.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield t0(n)}))}),eT.apply(this,arguments)}function qS(n,e){return e().catch(t=>nb(n,t,e))}function Ym(n){return tT.apply(this,arguments)}function tT(){return tT=(0,ge.Z)(function*(n){const e=$e(n),t=nh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;g1(e);)try{const o=yield ZM(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,m1(e,o)}catch(o){yield nb(e,o)}ZS(e)&&zS(e)}),tT.apply(this,arguments)}function g1(n){return th(n)&&n.du.length<10}function m1(n,e){n.du.push(e);const t=nh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function ZS(n){return th(n)&&!nh(n).ko()&&n.du.length>0}function zS(n){nh(n).start()}function y1(n){return nT.apply(this,arguments)}function nT(){return nT=(0,ge.Z)(function*(n){nh(n).nu()}),nT.apply(this,arguments)}function _1(n){return rT.apply(this,arguments)}function rT(){return rT=(0,ge.Z)(function*(n){const e=nh(n);for(const t of n.du)e.Zo(t.mutations)}),rT.apply(this,arguments)}function v1(n,e,t){return iT.apply(this,arguments)}function iT(){return iT=(0,ge.Z)(function*(n,e,t){const r=n.du.shift(),o=bC.from(r,e,t);yield qS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ym(n)}),iT.apply(this,arguments)}function E1(n,e){return sT.apply(this,arguments)}function sT(){return sT=(0,ge.Z)(function*(n,e){var t;e&&nh(n).Xo&&(yield(t=(0,ge.Z)(function*(r,o){if(kI(u=o.code)&&u!==ue.ABORTED){const h=r.du.shift();nh(r).Fo(),yield qS(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield Ym(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),ZS(n)&&zS(n)}),sT.apply(this,arguments)}function WS(n,e){return oT.apply(this,arguments)}function oT(){return oT=(0,ge.Z)(function*(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=th(t);t.wu.add(3),yield Km(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield t0(t)}),oT.apply(this,arguments)}function aT(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ge.Z)(function*(n,e){const t=$e(n);e?(t.wu.delete(2),yield t0(t)):e||(t.wu.add(2),yield Km(t),t.yu.set("Unknown"))}),uT.apply(this,arguments)}function Qm(n){return n.Iu||(n.Iu=function(e,t,r){const o=$e(e);return o.iu(),new a1(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:h1.bind(null,n),eo:f1.bind(null,n),zo:p1.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Fo(),YC(n)?KC(n):n.yu.set("Unknown")):(yield n.Iu.stop(),GS(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function nh(n){return n.Tu||(n.Tu=function(e,t,r){const o=$e(e);return o.iu(),new u1(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:y1.bind(null,n),eo:E1.bind(null,n),eu:_1.bind(null,n),tu:v1.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),yield Ym(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class lT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new lT(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(n,e){if(In("AsyncQueue",`${e}: ${n}`),Jf(n))return new Me(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Xm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Be.comparator(t.key,r.key):(t,r)=>Be.comparator(t.key,r.key),this.keyedMap=LI(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KS{constructor(){this.Eu=new Un(Be.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):We():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ey{constructor(e,t,r,o,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new ey(e,t,Xm.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ii(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class w1{constructor(){this.Ru=void 0,this.listeners=[]}}class I1{constructor(){this.queries=new uc(e=>TI(e),Ii),this.onlineState="Unknown",this.bu=new Set}}function cT(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new w1),o)try{u.Ru=yield t.onListen(r)}catch(h){const m=Jm(h,`Initialization of query '${qf(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&pT(t)}),dT.apply(this,arguments)}function hT(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),fT.apply(this,arguments)}function b1(n,e){const t=$e(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Vu(o)&&(r=!0);h.Ru=o}}r&&pT(t)}function D1(n,e,t){const r=$e(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function pT(n){n.bu.forEach(e=>{e.next()})}class gT{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new ey(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class C1{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class YS{constructor(e){this.M=e}wi(e){return ea(this.M,e)}mi(e){return e.metadata.exists?Vm(this.M,e.document,!1):pn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Nr(e)}}class T1{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QS(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Vt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new YS(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||Xt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function zM(n,e,t,r){return LC.apply(this,arguments)}(e.localStore,new YS(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield WM(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function QS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JS{constructor(e){this.key=e}}class XS{constructor(e){this.key=e}}class ex{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Xt(),this.mutatedKeys=Xt(),this.Gu=Sm(e),this.Qu=new Xm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new KS,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,N)=>{const q=o.get(R),ee=Ov(this.query,N)?N:null,me=!!q&&this.mutatedKeys.has(q.key),Fe=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let rt=!1;q&&ee?q.data.isEqual(ee.data)?me!==Fe&&(r.track({type:3,doc:ee}),rt=!0):this.Hu(q,ee)||(r.track({type:2,doc:ee}),rt=!0,(w&&this.Gu(ee,w)>0||C&&this.Gu(ee,C)<0)&&(m=!0)):!q&&ee?(r.track({type:0,doc:ee}),rt=!0):q&&!ee&&(r.track({type:1,doc:q}),rt=!0,(w||C)&&(m=!0)),rt&&(ee?(h=h.add(ee),u=Fe?u.add(R):u.delete(R)):(h=h.delete(R),u=u.delete(R)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const R="F"===this.query.limitType?h.last():h.first();h=h.delete(R.key),u=u.delete(R.key),r.track({type:1,doc:R})}return{Qu:h,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,R)=>function(N,q){const ee=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We()}};return ee(N)-ee(q)}(C.type,R.type)||this.Gu(C.doc,R.doc)),this.Ju(r);const h=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new ey(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:h}:{Xu:h}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new KS,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Xt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new XS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new JS(r))}),t}ta(e){this.Uu=e._i,this.Ku=Xt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return ey.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class A1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S1{constructor(e){this.key=e,this.na=!1}}class x1{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.sa={},this.ia=new uc(m=>TI(m),Ii),this.ra=new Map,this.oa=new Set,this.ua=new Un(Be.comparator),this.aa=new Map,this.ca=new UC,this.ha={},this.la=new Map,this.fa=sp.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function M1(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,ge.Z)(function*(n,e){const t=UT(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const h=yield zm(t.localStore,$i(e));t.isPrimaryClient&&tb(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield yT(t,e,r,"current"===m)}return o}),mT.apply(this,arguments)}function yT(n,e,t,r){return _T.apply(this,arguments)}function _T(){return _T=(0,ge.Z)(function*(n,e,t,r){n._a=(R,N,q)=>{return(ee=(0,ge.Z)(function*(me,Fe,rt,Ut){let Bt=Fe.view.Wu(rt);Bt.ii&&(Bt=yield QI(me.localStore,Fe.query,!1).then(({documents:jt})=>Fe.view.Wu(jt,Bt)));const Ht=Ut&&Ut.targetChanges.get(Fe.targetId),St=Fe.view.applyChanges(Bt,me.isPrimaryClient,Ht);return ST(me,Fe.targetId,St.Xu),St.snapshot}),function(me,Fe,rt,Ut){return ee.apply(this,arguments)})(n,R,N,q);var ee};const o=yield QI(n.localStore,e,!0),u=new ex(e,o._i),h=u.Wu(o.documents),m=lc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);ST(n,t,w.Xu);const C=new A1(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),_T.apply(this,arguments)}function R1(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,ge.Z)(function*(n,e){const t=$e(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!Ii(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),n0(t.remoteStore,r.targetId),ty(t,r.targetId)}).catch(op))):(ty(t,r.targetId),yield Wm(t.localStore,r.targetId,!0))}),vT.apply(this,arguments)}function ET(){return ET=(0,ge.Z)(function*(n,e,t){const r=BT(n);try{const o=yield function(u,h){const m=$e(u),w=xn.now(),C=h.reduce((N,q)=>N.add(q.key),Xt());let R;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,C).next(q=>{R=q;const ee=[];for(const me of h){const Fe=NI(me,R.get(me.key));null!=Fe&&ee.push(new ac(me.key,Fe,Dv(Fe.value.mapValue),_r.exists(!0)))}return m.Bs.addMutationBatch(N,w,ee,h)})).then(N=>(N.applyToLocalDocumentSet(R),{batchId:N.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Un(Tt)),w=w.insert(h,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield hc(r,o.changes),yield Ym(r.remoteStore)}catch(o){const u=Jm(o,"Failed to persist write");t.reject(u)}}),ET.apply(this,arguments)}function tx(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,ge.Z)(function*(n,e){const t=$e(n);try{const r=yield qM(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.aa.get(u);h&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.na=!0:o.modifiedDocuments.size>0?It(h.na):o.removedDocuments.size>0&&(It(h.na),h.na=!1))}),yield hc(t,r,e)}catch(r){yield op(r)}}),wT.apply(this,arguments)}function nx(n,e,t){const r=$e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,h)=>{const m=h.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=$e(u);m.onlineState=h;let w=!1;m.queries.forEach((C,R)=>{for(const N of R.listeners)N.Pu(h)&&(w=!0)}),w&&pT(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O1(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=(0,ge.Z)(function*(n,e,t){const r=$e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let h=new Un(Be.comparator);h=h.insert(u,pn.newNoDocument(u,vt.min()));const m=Xt().add(u),w=new Wd(vt.min(),new Map,new gn(Tt),h,m);yield tx(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),xT(r)}else yield Wm(r.localStore,e,!1).then(()=>ty(r,e,t)).catch(op)}),IT.apply(this,arguments)}function P1(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,ge.Z)(function*(n,e){const t=$e(n),r=e.batch.batchId;try{const o=yield GM(t.localStore,e);AT(t,r,null),TT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hc(t,o)}catch(o){yield op(o)}}),bT.apply(this,arguments)}function k1(n,e,t){return DT.apply(this,arguments)}function DT(){return DT=(0,ge.Z)(function*(n,e,t){const r=$e(n);try{const o=yield function(u,h){const m=$e(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,h).next(R=>(It(null!==R),C=R.keys(),m.Bs.removeMutationBatch(w,R))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,C))})}(r.localStore,e);AT(r,e,t),TT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hc(r,o)}catch(o){yield op(o)}}),DT.apply(this,arguments)}function CT(){return CT=(0,ge.Z)(function*(n,e){const t=$e(n);th(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=$e(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Jm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),CT.apply(this,arguments)}function TT(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function AT(n,e,t){const r=$e(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||rx(n,r)})}function rx(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(n0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),xT(n))}function ST(n,e,t){for(const r of t)r instanceof JS?(n.ca.addReference(r.key,e),L1(n,r)):r instanceof XS?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||rx(n,r.key)):We()}function L1(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),xT(n))}function xT(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Be(Vt.fromString(e)),r=n.fa.next();n.aa.set(r,new S1(t)),n.ua=n.ua.insert(t,r),tb(n.remoteStore,new Jd($i(Gf(t.path)),r,2,cs.A))}}function hc(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,ge.Z)(function*(n,e,t){const r=$e(n),o=[],u=[],h=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{h.push(r._a(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const R=PC.Ys(w.targetId,C);u.push(R)}}))}),yield Promise.all(h),r.sa.zo(o),yield(m=(0,ge.Z)(function*(w,C){const R=$e(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>le.forEach(C,q=>le.forEach(q.Hs,ee=>R.persistence.referenceDelegate.addReference(N,q.targetId,ee)).next(()=>le.forEach(q.Js,ee=>R.persistence.referenceDelegate.removeReference(N,q.targetId,ee)))))}catch(N){if(!Jf(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const q=N.targetId;if(!N.fromCache){const ee=R.ui.get(q),Fe=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);R.ui=R.ui.insert(q,Fe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),MT.apply(this,arguments)}function V1(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,ge.Z)(function*(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield RS(t.localStore,e);t.currentUser=e,(o=t).la.forEach(h=>{h.forEach(m=>{m.reject(new Me(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hc(t,r.di)}var o}),RT.apply(this,arguments)}function U1(n,e){const t=$e(n),r=t.aa.get(e);if(r&&r.na)return Xt().add(r.key);{let o=Xt();const u=t.ra.get(e);if(!u)return o;for(const h of u){const m=t.ia.get(h);o=o.unionWith(m.view.ju)}return o}}function B1(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,ge.Z)(function*(n,e){const t=$e(n),r=yield QI(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&ST(t,e.targetId,o.Xu),o}),NT.apply(this,arguments)}function j1(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ge.Z)(function*(n,e){const t=$e(n);return kS(t.localStore,e).then(r=>hc(t,r))}),OT.apply(this,arguments)}function $1(n,e,t,r){return PT.apply(this,arguments)}function PT(){return PT=(0,ge.Z)(function*(n,e,t,r){const o=$e(n),u=yield function(h,m){const w=$e(h),C=$e(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>C.fn(R,m).next(N=>N?w.fi.Ks(R,N):le.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Ym(o.remoteStore):"acknowledged"===t||"rejected"===t?(AT(o,e,r||null),TT(o,e),m=e,$e($e(o.localStore).Bs)._n(m)):We(),yield hc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),PT.apply(this,arguments)}function kT(){return kT=(0,ge.Z)(function*(n,e){const t=$e(n);if(UT(t),BT(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield ix(t,r.toArray());t.da=!0,yield aT(t.remoteStore,!0);for(const u of o)tb(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(ty(t,h),Wm(t.localStore,h,!0))),n0(t.remoteStore,h)}),yield o,yield ix(t,r),function(u){const h=$e(u);h.aa.forEach((m,w)=>{n0(h.remoteStore,w)}),h.ca.Si(),h.aa=new Map,h.ua=new Un(Be.comparator)}(t),t.da=!1,yield aT(t.remoteStore,!1)}}),kT.apply(this,arguments)}function ix(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,ge.Z)(function*(n,e,t){const r=$e(n),o=[],u=[];for(const h of e){let m;const w=r.ra.get(h);if(w&&0!==w.length){m=yield zm(r.localStore,$i(w[0]));for(const C of w){const R=r.ia.get(C),N=yield B1(r,R);N.snapshot&&u.push(N.snapshot)}}else{const C=yield PS(r.localStore,h);m=yield zm(r.localStore,C),yield yT(r,sx(C),h,!1)}o.push(m)}return r.sa.zo(u),o}),FT.apply(this,arguments)}function sx(n){return tC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G1(n){const e=$e(n);return $e($e(e.localStore).persistence).Fs()}function q1(n,e,t,r){return LT.apply(this,arguments)}function LT(){return LT=(0,ge.Z)(function*(n,e,t,r){const o=$e(n);if(o.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield kS(o.localStore,AI(u[0])),m=Wd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hc(o,h,m);break}case"rejected":yield Wm(o.localStore,e,!0),ty(o,e,r);break;default:We()}}),LT.apply(this,arguments)}function Z1(n,e,t){return VT.apply(this,arguments)}function VT(){return VT=(0,ge.Z)(function*(n,e,t){const r=UT(n);if(r.da){for(const o of e){if(r.ra.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield PS(r.localStore,o),h=yield zm(r.localStore,u);yield yT(r,sx(u),h.targetId,!1),tb(r.remoteStore,h)}for(const o of t)r.ra.has(o)&&(yield Wm(r.localStore,o,!1).then(()=>{n0(r.remoteStore,o),ty(r,o)}).catch(op))}}),VT.apply(this,arguments)}function UT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O1.bind(null,e),e.sa.zo=b1.bind(null,e.eventManager),e.sa.wa=D1.bind(null,e.eventManager),e}function BT(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k1.bind(null,e),e}class ox{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.M=e0(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return MS(this.persistence,new xS,e.initialUser,this.M)}ya(e){return new t1(BC.Yi,this.M)}ga(e){return new US}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ax extends ox{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield BT(r.Ta.syncEngine),yield Ym(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return MS(this.persistence,new xS,e.initialUser,this.M)}pa(e){return new FM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=OC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?js.withCacheSize(this.cacheSizeBytes):js.DEFAULT;return new NC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jS(),eb(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new US}}class W1 extends ax{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof GC&&(r.sharedClientState.syncEngine={$r:$1.bind(null,o),Br:q1.bind(null,o),Lr:Z1.bind(null,o),Fs:G1.bind(null,o),Fr:j1.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ge.Z)(function*(h){yield function H1(n,e){return kT.apply(this,arguments)}(r.Ta.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}ga(e){const t=jS();if(!GC.vt(t))throw new Me(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=OC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GC(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jT{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>nx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=V1.bind(null,r.syncEngine),yield aT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I1}createDatastore(e){const t=e0(e.databaseInfo.databaseId),r=new o1(e.databaseInfo);return new l1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>nx(this.syncEngine,m,0),h=BS.vt()?new BS:new r1,new d1(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,w,C){const R=new x1(r,o,u,h,m,w);return C&&(R.da=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=$e(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Km(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ux(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class rb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class K1{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Mr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new C1(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,ge.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Y1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(u,h){const m=$e(u),w=cc(m.M)+"/documents",C={documents:h.map(ee=>Yd(m.M,ee))},R=yield m._o("BatchGetDocuments",w,C),N=new Map;R.forEach(ee=>{const me=function pC(n,e){return"found"in e?function(t,r){It(!!r.found);const o=ea(t,r.found.name),u=Nr(r.found.updateTime),h=new Zr({mapValue:{fields:r.found.fields}});return pn.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=ea(t,r.missing),u=Nr(r.readTime);return pn.newNoDocument(o,u)}(n,e):We()}(m.M,ee);N.set(me.key.toString(),me)});const q=[];return h.forEach(ee=>{const me=N.get(ee.toString());It(!!me),q.push(me)}),q}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Be.fromPath(o);e.mutations.push(new PI(u,e.precondition(u)))}),yield(r=(0,ge.Z)(function*(o,u){const h=$e(o),m=cc(h.M)+"/documents",w={writes:u.map(C=>Um(h.M,C))};yield h.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw We();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Me(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Q1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new qC(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,ge.Z)(function*(){const t=new Y1(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Em(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kI(t)}return!1}}class J1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=qr.UNAUTHENTICATED,this.clientId=_m.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,ge.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Jm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function lx(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(u){r.isEqual(u)||(yield RS(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),$T.apply(this,arguments)}function cx(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield GT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>WS(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>WS(e.remoteStore,u)),n.onlineComponents=e}),HT.apply(this,arguments)}function GT(n){return qT.apply(this,arguments)}function qT(){return qT=(0,ge.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield lx(n,new ox)),n.offlineComponents}),qT.apply(this,arguments)}function ib(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ge.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield cx(n,new jT)),n.onlineComponents}),ZT.apply(this,arguments)}function dx(n){return GT(n).then(e=>e.persistence)}function zT(n){return GT(n).then(e=>e.localStore)}function hx(n){return ib(n).then(e=>e.remoteStore)}function WT(n){return ib(n).then(e=>e.syncEngine)}function ny(n){return KT.apply(this,arguments)}function KT(){return KT=(0,ge.Z)(function*(n){const e=yield ib(n),t=e.eventManager;return t.onListen=M1.bind(null,e.syncEngine),t.onUnlisten=R1.bind(null,e.syncEngine),t}),KT.apply(this,arguments)}function fx(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,h,m,w){const C=new rb({next:N=>{u.enqueueAndForget(()=>hT(o,R));const q=N.docs.has(h);!q&&N.fromCache?w.reject(new Me(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&N.fromCache&&m&&"server"===m.source?w.reject(new Me(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new gT(Gf(h.path),C,{includeMetadataChanges:!0,ku:!0});return cT(o,R)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}function px(n,e,t={}){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,u,h,m,w){const C=new rb({next:N=>{u.enqueueAndForget(()=>hT(o,R)),N.fromCache&&"server"===m.source?w.reject(new Me(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new gT(h,C,{includeMetadataChanges:!0,ku:!0});return cT(o,R)}(yield ny(n),n.asyncQueue,e,t,r)})),r.promise}const gx=new Map;function YT(n,e,t){if(!t)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mx(n,e,t,r){if(!0===e&&!0===r)throw new Me(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yx(n){if(!Be.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _x(n){if(Be.isDocumentKey(n))throw new Me(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":We()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sb(n);throw new Me(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vx(n,e){if(e<=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Ex{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,mx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ex({}),this._settingsFrozen=!1,e instanceof La?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Me(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(o.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ex(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mm;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new aI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gx.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),gx.delete(e),t.terminate())}(this),Promise.resolve()}}class Mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Hi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Zu extends Hi{constructor(e,t,r){super(e,t,Gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new Be(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function wx(n,e,...t){if(n=(0,Rt.m9)(n),YT("collection","path",e),n instanceof r0){const r=Vt.fromString(e,...t);return _x(r),new Zu(n,null,r)}{if(!(n instanceof Mn||n instanceof Zu))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vt.fromString(e,...t));return _x(r),new Zu(n.firestore,null,r)}}function ob(n,e,...t){if(n=(0,Rt.m9)(n),1===arguments.length&&(e=_m.R()),YT("doc","path",e),n instanceof r0){const r=Vt.fromString(e,...t);return yx(r),new Mn(n,null,new Be(r))}{if(!(n instanceof Mn||n instanceof Zu))throw new Me(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Vt.fromString(e,...t));return yx(r),new Mn(n.firestore,n instanceof Zu?n.converter:null,new Be(r))}}function Ix(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),(n instanceof Mn||n instanceof Zu)&&(e instanceof Mn||e instanceof Zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bx(n,e){return n=(0,Rt.m9)(n),e=(0,Rt.m9)(e),n instanceof Hi&&e instanceof Hi&&n.firestore===e.firestore&&Ii(n._query,e._query)&&n.converter===e.converter}class lR{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new qC(this,"async_queue_retry"),this.Qa=()=>{const t=eb();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=eb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=eb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Mr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,ge.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Jf(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,In("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=lT.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&We()}verifyOperationInProgress(){}Ja(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function QT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class cR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends r0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new lR,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Dx(this),this._firestoreClient.terminate()}}function Or(n){return n._firestoreClient||Dx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Dx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new KD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new J1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Cx(n,e,t){const r=new Mr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield lx(n,t),yield cx(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function Tx(n){if(n._initialized||n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zu(yr.fromBase64String(e))}catch(t){throw new Me(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zu(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class up{constructor(e){this._methodName=e}}class ab{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const ER=/^__.*__$/;class wR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ac(e,this.data,this.fieldMask,t,this.fieldTransforms):new zd(e,this.data,t,this.fieldTransforms)}}class Ax{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ac(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We()}}class ub{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new ub(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return db(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Sx(this.ec)&&ER.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class IR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||e0(e)}lc(e,t,r,o=!1){return new ub({ec:e,methodName:t,hc:r,path:mr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function lp(n){const e=n._freezeSettings(),t=e0(n._databaseId);return new IR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lb(n,e,t,r,o,u={}){const h=n.lc(u.merge||u.mergeFields?2:0,e,t,o);tA("Data must be an object, but it was:",h,r);const m=Rx(r,h);let w,C;if(u.merge)w=new tc(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const R=[];for(const N of u.mergeFields){const q=nA(e,N,t);if(!h.contains(q))throw new Me(ue.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);Ox(R,q)||R.push(q)}w=new tc(R),C=h.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=h.fieldTransforms;return new wR(new Zr(m),w,C)}class s0 extends up{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof s0}}function xx(n,e,t){return new ub({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class JT extends up{_toFieldTransform(e){return new qd(e.path,new Bs)}isEqual(e){return e instanceof JT}}class bR extends up{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xx(this,e,!0),r=this.fc.map(u=>cp(u,t)),o=new qu(r);return new qd(e.path,o)}isEqual(e){return this===e}}class DR extends up{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=xx(this,e,!0),r=this.fc.map(u=>cp(u,t)),o=new oc(r);return new qd(e.path,o)}isEqual(e){return this===e}}class CR extends up{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Gd(e.M,kv(e.M,this.dc));return new qd(e.path,t)}isEqual(e){return this===e}}function XT(n,e,t,r){const o=n.lc(1,e,t);tA("Data must be an object, but it was:",o,r);const u=[],h=Zr.empty();ec(r,(w,C)=>{const R=cb(e,w,t);C=(0,Rt.m9)(C);const N=o.oc(R);if(C instanceof s0)u.push(R);else{const q=cp(C,N);null!=q&&(u.push(R),h.set(R,q))}});const m=new tc(u);return new Ax(h,m,o.fieldTransforms)}function eA(n,e,t,r,o,u){const h=n.lc(1,e,t),m=[nA(e,r,t)],w=[o];if(u.length%2!=0)throw new Me(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<u.length;q+=2)m.push(nA(e,u[q])),w.push(u[q+1]);const C=[],R=Zr.empty();for(let q=m.length-1;q>=0;--q)if(!Ox(C,m[q])){const ee=m[q];let me=w[q];me=(0,Rt.m9)(me);const Fe=h.oc(ee);if(me instanceof s0)C.push(ee);else{const rt=cp(me,Fe);null!=rt&&(C.push(ee),R.set(ee,rt))}}const N=new tc(C);return new Ax(R,N,h.fieldTransforms)}function Mx(n,e,t,r=!1){return cp(t,n.lc(r?4:3,e))}function cp(n,e){if(Nx(n=(0,Rt.m9)(n)))return tA("Unsupported field value:",e,n),Rx(n,e);if(n instanceof up)return function(t,r){if(!Sx(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=cp(h,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Rt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kv(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=xn.fromDate(t);return{timestampValue:Kf(r.M,o)}}if(t instanceof xn){const o=new xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kf(r.M,o)}}if(t instanceof ab)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zu)return{bytesValue:jI(r.M,t._byteString)};if(t instanceof Mn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Lm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${sb(t)}`)}(n,e)}function Rx(n,e){const t={};return cI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ec(n,(r,o)=>{const u=cp(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Nx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof xn||n instanceof ab||n instanceof zu||n instanceof Mn||n instanceof up)}function tA(n,e,t){if(!Nx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=sb(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function nA(n,e,t){if((e=(0,Rt.m9)(e))instanceof fc)return e._internalPath;if("string"==typeof e)return cb(n,e);throw db("Field path arguments must be of type string or ",n,!1,void 0,t)}const TR=new RegExp("[~\\*/\\[\\]]");function cb(n,e,t){if(e.search(TR)>=0)throw db(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fc(...e.split("."))._internalPath}catch(r){throw db(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function db(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${o}`),w+=")"),new Me(ue.INVALID_ARGUMENT,m+n+w)}function Ox(n,e){return n.some(t=>t.isEqual(e))}class o0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new AR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class AR extends o0{data(){return super.data()}}function hb(n,e){return"string"==typeof e?cb(n,e):e instanceof fc?e._internalPath:e._delegate._internalPath}class dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pc extends o0{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends pc{data(e={}){return super.data(e)}}class rh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new dp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new dp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:SR(h.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function SR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We()}}function Px(n,e){return n instanceof pc&&e instanceof pc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rh&&e instanceof rh&&n._firestore===e._firestore&&bx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function ih(n,...e){for(const t of e)n=t._apply(n);return n}class xR extends u0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=lp(e.firestore),r=function(o,u,h,m,w,C,R){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){jx(R,C);const ee=[];for(const me of R)ee.push(Bx(m,o,me));N={arrayValue:{values:ee}}}else N=Bx(m,o,R)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||jx(R,C),N=Mx(h,"where",R,"in"===C||"not-in"===C);const q=Rr.create(w,C,N);return function(ee,me){if(me.S()){const rt=Nv(ee);if(null!==rt&&!rt.isEqual(me.field))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${rt.toString()}' and '${me.field.toString()}'`);const Ut=Rv(ee);null!==Ut&&$x(0,me.field,Ut)}const Fe=function(rt,Ut){for(const Bt of rt.filters)if(Ut.indexOf(Bt.op)>=0)return Bt.op;return null}(ee,function(rt){switch(rt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(me.op));if(null!==Fe)throw new Me(ue.INVALID_ARGUMENT,Fe===me.op?`Invalid query. You cannot use more than one '${me.op.toString()}' filter.`:`Invalid query. You cannot use '${me.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,q),q}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Hi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new Gu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class RR extends u0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new $d(o,u);return function(m,w){if(null===Rv(m)){const C=Nv(m);null!==C&&$x(0,C,w.field)}}(r,h),h}(e._query,this._c,this.gc);return new Hi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Gu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Fx extends u0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Hi(e.firestore,e.converter,CI(e._query,this.yc,this.Ic))}}class Lx extends u0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Ux(e,this.type,this.Tc,this.Ec);return new Hi(e.firestore,e.converter,(o=t,new Gu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class Vx extends u0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=Ux(e,this.type,this.Tc,this.Ec);return new Hi(e.firestore,e.converter,(o=t,new Gu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Ux(n,e,t,r){if(t[0]=(0,Rt.m9)(t[0]),t[0]instanceof o0)return function(o,u,h,m,w){if(!m)throw new Me(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const R of Hd(o))if(R.field.isKeyField())C.push(Ud(u,m.key));else{const N=m.data.field(R.field);if(Ev(N))throw new Me(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const q=R.field.canonicalString();throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}C.push(N)}return new sc(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=lp(n.firestore);return function(u,h,m,w,C,R){const N=u.explicitOrderBy;if(C.length>N.length)throw new Me(ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let ee=0;ee<C.length;ee++){const me=C[ee];if(N[ee].field.isKeyField()){if("string"!=typeof me)throw new Me(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof me}`);if(!DI(u)&&-1!==me.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${me}' contains a slash.`);const Fe=u.path.child(Vt.fromString(me));if(!Be.isDocumentKey(Fe))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const rt=new Be(Fe);q.push(Ud(h,rt))}else{const Fe=Mx(m,w,me);q.push(Fe)}}return new sc(q,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Bx(n,e,t){if("string"==typeof(t=(0,Rt.m9)(t))){if(""===t)throw new Me(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DI(e)&&-1!==t.indexOf("/"))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Vt.fromString(t));if(!Be.isDocumentKey(r))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ud(n,new Be(r))}if(t instanceof Mn)return Ud(n,t._key);throw new Me(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sb(t)}.`)}function jx(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function $x(n,e,t){if(!t.isEqual(e))throw new Me(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const UR={maxAttempts:5};class rA{convertValue(e,t="none"){switch(nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw We()}}convertObject(e,t){const r={};return ec(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ab(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ui(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qo(e));default:return null}}convertTimestamp(e){const t=Fa(e);return new xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Vt.fromString(e);It(s(r));const o=new La(r.get(1),r.get(3)),u=new Be(r.popFirst(5));return o.isEqual(t)||In(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function fb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class BR extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}class Hx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lp(e)}set(e,t,r){this._verifyNotCommitted();const o=sh(e,this._firestore),u=fb(o.converter,t,r),h=lb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,_r.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=sh(e,this._firestore);let h;return h="string"==typeof(t=(0,Rt.m9)(t))||t instanceof fc?eA(this._dataReader,"WriteBatch.update",u._key,t,r,o):XT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sh(e,this._firestore);return this._mutations=this._mutations.concat(new zf(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sh(n,e){if((n=(0,Rt.m9)(n)).firestore!==e)throw new Me(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hp extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new zu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function Gx(n,e,t){n=zt(n,Mn);const r=zt(n.firestore,Bn),o=fb(n.converter,e,t);return ry(r,[lb(lp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,_r.none())])}function qx(n,e,t,...r){n=zt(n,Mn);const o=zt(n.firestore,Bn),u=lp(o);let h;return h="string"==typeof(e=(0,Rt.m9)(e))||e instanceof fc?eA(u,"updateDoc",n._key,e,t,r):XT(u,"updateDoc",n._key,e),ry(o,[h.toMutation(n._key,_r.exists(!0))])}function Zx(n,...e){var t,r,o;n=(0,Rt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||QT(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(QT(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,R;if(n instanceof Mn)C=zt(n.firestore,Bn),R=Gf(n._key.path),w={next:N=>{e[h]&&e[h](iA(C,n,N))},error:e[h+1],complete:e[h+2]};else{const N=zt(n,Hi);C=zt(N.firestore,Bn),R=N._query;const q=new hp(C);w={next:ee=>{e[h]&&e[h](new rh(C,q,N,ee))},error:e[h+1],complete:e[h+2]},kx(n._query)}return function(N,q,ee,me){const Fe=new rb(me),rt=new gT(q,Fe,ee);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return cT(yield ny(N),rt)})),()=>{Fe.Aa(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return hT(yield ny(N),rt)}))}}(Or(C),R,m,w)}function ry(n,e){return function(t,r){const o=new Mr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function N1(n,e,t){return ET.apply(this,arguments)}(yield WT(t),r,o)})),o.promise}(Or(n),e)}function iA(n,e,t){const r=t.docs.get(e._key),o=new hp(n);return new pc(n,o,e._key,r,new dp(t.hasPendingWrites,t.fromCache),e.converter)}class YR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lp(e)}get(e){const t=sh(e,this._firestore),r=new BR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return We();const u=o[0];if(u.isFoundDocument())return new o0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new o0(this._firestore,r,t._key,null,t.converter);throw We()})}set(e,t,r){const o=sh(e,this._firestore),u=fb(o.converter,t,r),h=lb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=sh(e,this._firestore);let h;return h="string"==typeof(t=(0,Rt.m9)(t))||t instanceof fc?eA(this._dataReader,"Transaction.update",u._key,t,r,o):XT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=sh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sh(e,this._firestore),r=new hp(this._firestore);return super.get(e).then(o=>new pc(this._firestore,r,t._key,o._document,new dp(!1,!1),t.converter))}}function sA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Wx(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function Kx(){if(!function hI(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ld=Sa.SDK_VERSION,(0,Sa._registerComponent)(new Dg.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Bn(o,new WD(t.getProvider("auth-internal")),new uI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Sa.registerVersion)(sI,"3.4.9",n),(0,Sa.registerVersion)(sI,"3.4.9","esm2017")}();class l0{constructor(e){this._delegate=e}static fromBase64String(e){return Kx(),new l0(zu.fromBase64String(e))}static fromUint8Array(e){return Wx(),new l0(zu.fromUint8Array(e))}toBase64(){return Kx(),this._delegate.toBase64()}toUint8Array(){return Wx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oA(n){return function sN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class oN{enableIndexedDbPersistence(e,t){return function hR(n,e){Tx(n=zt(n,Bn));const t=Or(n),r=n._freezeSettings(),o=new jT;return Cx(t,o,new ax(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fR(n){Tx(n=zt(n,Bn));const e=Or(n),t=n._freezeSettings(),r=new jT;return Cx(e,r,new W1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pR(n){if(n._initialized&&!n._terminated)throw new Me(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Mr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!hs.vt())return Promise.resolve();const o=r+"main";yield hs.delete(o)}),function(r){return t.apply(this,arguments)})(OC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Yx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof La||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function aR(n,e,t,r={}){var o;const u=(n=zt(n,r0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Nf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=qr.MOCK_USER;else{h=(0,Rt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Me(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new qr(w)}n._authCredentials=new zD(new Pf(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function mR(n){return function X1(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield dx(n),t=yield hx(n);return e.setNetworkEnabled(!0),function(r){const o=$e(r);return o.wu.delete(0),t0(o)}(t)}))}(Or(n=zt(n,Bn)))}(this._delegate)}disableNetwork(){return function yR(n){return function eR(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield dx(n),t=yield hx(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const u=$e(o);u.wu.add(0),yield Km(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Or(n=zt(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gR(n){return function(e){const t=new Mr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function F1(n,e){return CT.apply(this,arguments)}(yield WT(e),t)})),t.promise}(Or(n=zt(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function KR(n,e){return function rR(n,e){const t=new rb(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ny(n),o=t,$e(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield ny(n),o=t,void $e(r).bu.delete(o);var r,o}))}}(Or(n=zt(n,Bn)),QT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new iy(this,wx(this._delegate,e))}catch(t){throw fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,ob(this._delegate,e))}catch(t){throw fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ps(this,function uR(n,e){if(n=zt(n,r0),YT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hi(n,null,(t=e,new Gu(Vt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QR(n,e,t){n=zt(n,Bn);const r=Object.assign(Object.assign({},UR),t);return function(o){if(o.maxAttempts<1)throw new Me(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function iR(n,e,t){const r=new Mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const o=yield(u=n,ib(u).then(h=>h.datastore));var u;new Q1(n.asyncQueue,o,t,e,r).run()})),r.promise}(Or(n),o=>e(new YR(n,o)),r)}(this._delegate,t=>e(new Qx(this,t)))}batch(){return Or(this._delegate),new Jx(new Hx(this._delegate,e=>ry(this._delegate,e)))}loadBundle(e){return function _R(n,e){const t=Or(n=zt(n,Bn)),r=new cR;return function sR(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return ux(w,C);if(w instanceof ArrayBuffer)return ux(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new K1(w,h);var w}(t,e0(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function z1(n,e,t){const r=$e(n);var o;(o=(0,ge.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(q,ee){const me=$e(q),Fe=Nr(ee.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",rt=>me._s.getBundleMetadata(rt,ee.id)).then(rt=>!!rt&&rt.createTime.compareTo(Fe)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(q=w).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);m._updateProgress(QS(w));const C=new T1(w,u.localStore,h.M);let R=yield h.ma();for(;R;){const q=yield C.Fu(R);q&&m._updateProgress(q),R=yield h.ma()}const N=yield C.complete();return yield hc(u,N.Lu,void 0),yield function(q,ee){const me=$e(q);return me.persistence.runTransaction("Save bundle","readwrite",Fe=>me._s.saveBundleMetadata(Fe,ee))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return Nf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var q}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield WT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function vR(n,e){return function oR(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=$e(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield zT(n),e)}))}(Or(n=zt(n,Bn)),e).then(t=>t?new Hi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ps(this,t):null)}}class pb extends rA{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(new zu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class Qx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pb(e)}get(e){const t=pp(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new pc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=pp(e);return r?(sA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}}class Jx{constructor(e){this._delegate=e}set(e,t,r){const o=pp(e);return r?(sA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=pp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=pp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new fp(e,new pb(e),t),o.set(t,u)),u}}fp.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Mn(t._delegate,r,new Be(e)))}static forKey(e,t,r){return new ta(t,new Mn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new iy(this.firestore,wx(this._delegate,e))}catch(t){throw fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Rt.m9)(e))instanceof Mn&&Ix(this._delegate,e)}set(e,t){t=sA("DocumentReference.set",t);try{return t?Gx(this._delegate,e,t):Gx(this._delegate,e)}catch(r){throw fs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?qx(this._delegate,e):qx(this._delegate,e,t,...r)}catch(o){throw fs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function zR(n){return ry(zt(n.firestore,Bn),[new zf(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=Xx(e),r=eM(e,o=>new c0(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Zx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $R(n){n=zt(n,Mn);const e=zt(n.firestore,Bn),t=Or(e),r=new hp(e);return function tR(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,h){try{const m=yield function(w,C){const R=$e(w);return R.persistence.runTransaction("read document","readonly",N=>R.fi.Ls(N,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Me(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Jm(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield zT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new pc(e,r,n._key,o,new dp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function HR(n){n=zt(n,Mn);const e=zt(n.firestore,Bn);return fx(Or(e),n._key,{source:"server"}).then(t=>iA(e,n,t))}(this._delegate):function jR(n){n=zt(n,Mn);const e=zt(n.firestore,Bn);return fx(Or(e),n._key).then(t=>iA(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function fs(n,e,t){return n.message=n.message.replace(e,t),n}function Xx(n){for(const e of n)if("object"==typeof e&&!oA(e))return e;return{}}function eM(n,e){var t,r;let o;return o=oA(n[0])?n[0]:oA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Px(this._delegate,e._delegate)}}class d0 extends c0{data(e){const t=this._delegate.data(e);return function vv(n,e){n||We()}(void 0!==t),t}}class ps{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pb(e)}where(e,t,r){try{return new ps(this.firestore,ih(this._delegate,function MR(n,e,t){const r=e,o=hb("where",n);return new xR(o,r,t)}(e,t,r)))}catch(o){throw fs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ps(this.firestore,ih(this._delegate,function NR(n,e="asc"){const t=e,r=hb("orderBy",n);return new RR(r,t)}(e,t)))}catch(r){throw fs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ps(this.firestore,ih(this._delegate,function OR(n){return vx("limit",n),new Fx("limit",n,"F")}(e)))}catch(t){throw fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ps(this.firestore,ih(this._delegate,function PR(n){return vx("limitToLast",n),new Fx("limitToLast",n,"L")}(e)))}catch(t){throw fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ps(this.firestore,ih(this._delegate,function kR(...n){return new Lx("startAt",n,!0)}(...e)))}catch(t){throw fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ps(this.firestore,ih(this._delegate,function FR(...n){return new Lx("startAfter",n,!1)}(...e)))}catch(t){throw fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ps(this.firestore,ih(this._delegate,function LR(...n){return new Vx("endBefore",n,!1)}(...e)))}catch(t){throw fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ps(this.firestore,ih(this._delegate,function VR(...n){return new Vx("endAt",n,!0)}(...e)))}catch(t){throw fs(t,"endAt()","Query.endAt()")}}isEqual(e){return bx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function qR(n){n=zt(n,Hi);const e=zt(n.firestore,Bn),t=Or(e),r=new hp(e);return function nR(n,e){const t=new Mr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,u,h){try{const m=yield QI(o,u,!0),w=new ex(u,m._i),C=w.Wu(m.documents),R=w.applyChanges(C,!1);h.resolve(R.snapshot)}catch(m){const w=Jm(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(o,u,h){return r.apply(this,arguments)})(yield zT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function ZR(n){n=zt(n,Hi);const e=zt(n.firestore,Bn),t=Or(e),r=new hp(e);return px(t,n._query,{source:"server"}).then(o=>new rh(e,r,n,o))}(this._delegate):function GR(n){n=zt(n,Hi);const e=zt(n.firestore,Bn),t=Or(e),r=new hp(e);return kx(n._query),px(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate),t.then(r=>new aA(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Xx(e),r=eM(e,o=>new aA(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Zx(this._delegate,t,r)}withConverter(e){return new ps(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}class uN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new d0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ps(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new d0(this._firestore,r))})}isEqual(e){return Px(this._delegate,e._delegate)}}class iy extends ps{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?ob(this._delegate):ob(this._delegate,e))}catch(t){throw fs(t,"doc()","CollectionReference.doc()")}}add(e){return function WR(n,e){const t=zt(n.firestore,Bn),r=ob(n),o=fb(n.converter,e);return ry(t,[lb(lp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return Ix(this._delegate,e._delegate)}withConverter(e){return new iy(this.firestore,this._delegate.withConverter(e?fp.getInstance(this.firestore,e):null))}}function pp(n){return zt(n,Mn)}class uA{constructor(...e){this._delegate=new fc(...e)}static documentId(){return new uA(mr.keyField().canonicalString())}isEqual(e){return(e=(0,Rt.m9)(e))instanceof fc&&this._delegate._internalPath.isEqual(e._internalPath)}}class gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function XR(){return new JT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gp(e)}static delete(){const e=function JR(){return new s0("deleteField")}();return e._methodName="FieldValue.delete",new gp(e)}static arrayUnion(...e){const t=function eN(...n){return new bR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gp(t)}static arrayRemove(...e){const t=function tN(...n){return new DR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gp(t)}static increment(e){const t=function nN(n){return new CR("increment",n)}(e);return t._methodName="FieldValue.increment",new gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lN={Firestore:Yx,GeoPoint:ab,Timestamp:xn,Blob:l0,Transaction:Qx,WriteBatch:Jx,DocumentReference:ta,DocumentSnapshot:c0,Query:ps,QueryDocumentSnapshot:d0,QuerySnapshot:aA,CollectionReference:iy,FieldPath:uA,FieldValue:gp,setLogLevel:function aN(n){!function ZD(n){ju.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function tM(n,e){return function hN(n,e=dD.z){return new kn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function lA(n,e){return tM(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function gb(n,e){return lA(n,e).pipe(oo(void 0),Lg(),(0,Et.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=o.find(R=>R.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function nM(n,e,t){return gb(n,t).pipe(Pi((r,o)=>function pN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function hD(n,e=Oi.y){return n=null!=n?n:pr,(0,Xn.e)((t,r)=>{let o,u=!0;t.subscribe((0,Qn.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,Et.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function cA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function rM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function dN(n){(function cN(n,e){n.INTERNAL.registerComponent(new Dg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lN)))})(n,(e,t)=>new Yx(e,t,new oN)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(pD.Z);class iM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(oo(void 0),Lg(),er(([r,o])=>o.length>0||!r),(0,Et.U)(([r,o])=>o),ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rM(e);return nM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ii.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(ii.iC)}add(e){return this.ref.add(e)}doc(e){return new sM(this.ref.doc(e),this.afs)}}class sM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=oM(r,t);return new iM(o,u,this.afs)}snapshotChanges(){return function fN(n,e){return tM(n,e).pipe(oo(void 0),Lg(),(0,Et.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(ii.iC)}}class mN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),er(t=>t.length>0),ii.iC):gb(this.query,this.afs.schedulers.outsideAngular).pipe(ii.iC)}auditTrail(e){return this.stateChanges(e).pipe(Pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rM(e);return nM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ii.iC)}valueChanges(e={}){return lA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ii.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(ii.iC)}}const yN=new d.OlP("angularfire2.enableFirestorePersistence"),_N=new d.OlP("angularfire2.firestore.persistenceSettings"),vN=new d.OlP("angularfire2.firestore.settings"),EN=new d.OlP("angularfire2.firestore.use-emulator");function oM(n,e=(t=>t)){return{query:e(n),ref:n}}let aM=(()=>{class n{constructor(t,r,o,u,h,m,w,C,R,N,q,ee,me,Fe,rt,Ut,Bt){this.schedulers=w;const Ht=(0,Ls.on)(t,m,r),St=R;N&&E_(Ht,m,q,me,Fe,rt,ee,Ut),[this.firestore,this.persistenceEnabled$]=(0,Ls.cc)(`${Ht.name}.firestore`,"AngularFirestore",Ht.name,()=>{const jt=m.runOutsideAngular(()=>Ht.firestore());if(u&&jt.settings(u),St&&jt.useEmulator(...St),o&&!Co(h)){const tn=()=>{try{return(0,un.D)(jt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Gi){return"undefined"!=typeof console&&console.warn(Gi),st(!1)}};return[jt,m.runOutsideAngular(tn)]}return[jt,st(!1)]},[u,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=oM(o,r),m=this.schedulers.ngZone.run(()=>u);return new iM(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new mN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new sM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ls.Dh),d.LFG(Ls.xv,8),d.LFG(yN,8),d.LFG(vN,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(ii.HU),d.LFG(_N,8),d.LFG(EN,8),d.LFG(tf,8),d.LFG(p_,8),d.LFG(g_,8),d.LFG(m_,8),d.LFG(y_,8),d.LFG(__,8),d.LFG(v_,8),d.LFG(ef,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),uM=(()=>{class n{constructor(t,r){this.db=t,this.serciceLogin=r}traeDatosEspecialista(){var t=this;return(0,ge.Z)(function*(){yield t.serciceLogin.getCurrentUser().then(r=>null==r?void 0:r.email).then(r=>{if(null!=r)return console.log(r),t.filtrarPorMailEspecialista(r)})})()}filtrarPorMailEspecialista(t){var r=this;return(0,ge.Z)(function*(){(yield r.getAllEspecialista()).subscribe(o=>{let u=o.find(h=>h.mail===t);console.log(u),u&&(r.datosEspecialistaConectado=u)})})()}getAllEspecialista(){var t=this;return(0,ge.Z)(function*(){return t.db.collection("especialista").snapshotChanges().pipe((0,Et.U)(r=>r.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data()))))})()}traeDatosAdministradores(){var t=this;return(0,ge.Z)(function*(){yield t.serciceLogin.getCurrentUser().then(r=>null==r?void 0:r.email).then(r=>{if(null!=r)return console.log(r),t.filtrarPorMailAdministradores(r)})})()}filtrarPorMailAdministradores(t){var r=this;return(0,ge.Z)(function*(){(yield r.getAllAdministradores()).subscribe(o=>{let u=o.find(h=>h.mail===t);console.log(u),u&&(r.datosAdminConectado=u)})})()}getAllAdministradores(){var t=this;return(0,ge.Z)(function*(){return t.db.collection("administradores").snapshotChanges().pipe((0,Et.U)(r=>r.map(o=>Object.assign({id:o.payload.doc.id},o.payload.doc.data()))))})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aM),d.LFG($l))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wN(n,e){1&n&&(d.TgZ(0,"div",13)(1,"span",14),d._uU(2,"Loading..."),d.qZA()())}let IN=(()=>{class n{constructor(t,r,o,u){this.fb=t,this.serviceLogin=r,this.route=o,this.serviceTraerDatos=u,this.muestroSpiner=!1}ngOnInit(){this.form=this.fb.group({email:["",[nt.required,nt.minLength(3),nt.maxLength(100)]],password:[]})}ingresar(){var t=this;return(0,ge.Z)(function*(){var r;try{let o=!0;yield t.serviceTraerDatos.filtrarPorMailEspecialista(t.form.value.email),null!=t.serviceTraerDatos.datosEspecialistaConectado&&(o=!!t.serviceTraerDatos.datosEspecialistaConectado.habilitado),o?(null===(r=(yield t.serviceLogin.login(t.form.value.email,t.form.value.password)).user)||void 0===r?void 0:r.emailVerified)?t.route.navigate(["/home"]):(t.mensajeError="Verificar Email",yield t.serviceLogin.singOut()):t.mensajeError="Usuario no habilitado"}catch(o){o instanceof Error&&(t.mensajeError=o.message)}})()}inicioRapido(){var t=this;return(0,ge.Z)(function*(){var r;(null===(r=(yield t.serviceLogin.login("thomasciarlo18@gmail.com","123456")).user)||void 0===r?void 0:r.emailVerified)&&t.route.navigate(["/home"])})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ed),d.Y36($l),d.Y36(nr),d.Y36(uM))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"login","d-flex","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","formControlName","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","password","id","exampleInputPassword1",1,"form-control"],[1,"d-flex","column","justify-content-center"],["type","submit",1,"btn","btn-primary"],[1,"d-flex","column","justify-content-center","m-2"],["type","submit",1,"btn","btn-primary",3,"click"],["for",""],["class","spinner-border justify-content-center","role","status",4,"ngIf"],["role","status",1,"spinner-border","justify-content-center"],[1,"visually-hidden"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"form",1),d.NdJ("ngSubmit",function(){return r.ingresar()}),d.TgZ(2,"div",2)(3,"label",3),d._uU(4,"Email"),d.qZA(),d._UZ(5,"input",4),d.qZA(),d.TgZ(6,"div",2)(7,"label",5),d._uU(8,"Contrase\xf1a"),d.qZA(),d._UZ(9,"input",6),d.qZA(),d.TgZ(10,"div",7)(11,"button",8),d._uU(12,"Conectar"),d.qZA()(),d.TgZ(13,"div",9)(14,"button",10),d.NdJ("click",function(){return r.inicioRapido()}),d._uU(15,"Inicio Rapido"),d.qZA()(),d.TgZ(16,"div")(17,"label",11),d._uU(18),d.qZA()(),d.YNc(19,wN,3,0,"div",12),d.qZA()()),2&t&&(d.xp6(1),d.Q6J("formGroup",r.form),d.xp6(17),d.Oqu(r.mensajeError),d.xp6(1),d.Q6J("ngIf",r.muestroSpiner))},directives:[vd,pd,Ll,Du,Lh,Zh,dn],styles:["form[_ngcontent-%COMP%]{max-height:500px;max-width:500px;background-color:#fff;padding:15px;margin:20px}"]}),n})();class dA{}let hA=(()=>{class n{constructor(t,r){this.db=t,this.serviceLogin=r}createPaciente(t,r){JSON.stringify(r),this.db.collection("usuarios").doc(this.db.createId()).set({nombre:r.nombre,apellido:r.apellido,edad:r.edad,DNI:r.DNI,obraSocial:r.obraSocial,mail:r.mail,password:r.password,imagenes:r.imagenes,especialidad:r.especialidad,tipo:r.tipo})}createEspecialista(t,r){JSON.stringify(r),this.db.collection("especialista").doc(this.db.createId()).set({nombre:r.nombre,apellido:r.apellido,edad:r.edad,DNI:r.DNI,mail:r.mail,password:r.password,imagenes:r.imagenes,especialidad:r.especialidad,tipo:r.tipo,habilitado:r.habilitado})}createAdministrador(t,r){JSON.stringify(r),this.db.collection("administradores").doc(this.db.createId()).set({nombre:r.nombre,apellido:r.apellido,edad:r.edad,DNI:r.DNI,mail:r.mail,password:r.password,tipo:r.tipo})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(aM),d.LFG($l))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function bN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre es requerido. "),d.qZA())}function DN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre minimo 3 caracteres. "),d.qZA())}function CN(n,e){if(1&n&&(d.TgZ(0,"div",19),d.YNc(1,bN,2,0,"div",20),d.YNc(2,DN,2,0,"div",20),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.minlength)}}function TN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido es requerido. "),d.qZA())}function AN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido minimo 3 caracteres. "),d.qZA())}function SN(n,e){if(1&n&&(d.TgZ(0,"div",19),d.YNc(1,TN,2,0,"div",20),d.YNc(2,AN,2,0,"div",20),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.minlength)}}function xN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Email es requerido. "),d.qZA())}function MN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Emial minimo 10 caracteres. "),d.qZA())}function RN(n,e){if(1&n&&(d.TgZ(0,"div",19),d.YNc(1,xN,2,0,"div",20),d.YNc(2,MN,2,0,"div",20),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.minlength)}}function NN(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"form",2),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw().aceptar()}),d.TgZ(1,"div",3)(2,"label",4),d._uU(3,"Nombre"),d.qZA(),d._UZ(4,"input",5),d.YNc(5,CN,3,2,"div",6),d.TgZ(6,"label",7),d._uU(7,"Apellido"),d.qZA(),d._UZ(8,"input",8),d.YNc(9,SN,3,2,"div",6),d.qZA(),d.TgZ(10,"div",3)(11,"label",9),d._uU(12,"Edad"),d.qZA(),d._UZ(13,"input",10),d.TgZ(14,"label",11),d._uU(15,"Dni"),d.qZA(),d._UZ(16,"input",12),d.qZA(),d.TgZ(17,"label",13),d._uU(18,"Email"),d.qZA(),d._UZ(19,"input",14),d.YNc(20,RN,3,2,"div",6),d.TgZ(21,"div",3)(22,"label",15),d._uU(23,"Password"),d.qZA(),d._UZ(24,"input",16),d.qZA(),d.TgZ(25,"button",17),d._uU(26,"Enviar"),d.qZA(),d._UZ(27,"label",18),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("formGroup",t.form),d.xp6(5),d.Q6J("ngIf",(null==t.nombre?null:t.nombre.invalid)&&((null==t.nombre?null:t.nombre.dirty)||(null==t.nombre?null:t.nombre.touched))),d.xp6(4),d.Q6J("ngIf",(null==t.apellido?null:t.apellido.invalid)&&((null==t.apellido?null:t.apellido.dirty)||(null==t.apellido?null:t.apellido.touched))),d.xp6(11),d.Q6J("ngIf",(null==t.mail?null:t.mail.invalid)&&((null==t.mail?null:t.mail.dirty)||(null==t.mail?null:t.mail.touched)))}}function ON(n,e){1&n&&(d.TgZ(0,"div",21)(1,"p"),d._uU(2,"Verifique su email para activar la cuenta"),d.qZA()())}let PN=(()=>{class n{constructor(t,r,o){this.fb=t,this.serviceLogin=r,this.serviceRegister=o,this.seRegistroOk=!1}ngOnInit(){this.form=this.fb.group({nombre:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],apellido:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],edad:[0,[nt.required]],dni:[0,[nt.required]],mail:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(100)])],password:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])]})}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}aceptar(){const{nombre:t,apellido:r,edad:o,dni:u,password:h,mail:m}=this.form.value;this.user=new dA,this.user.nombre=t,this.user.apellido=r,this.user.edad=o,this.user.DNI=u,this.user.password=h,this.user.mail=m,this.user.tipo="admin";const w=document.getElementById("errorLogin");null!=w&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(C=>{this.serviceRegister.createAdministrador(this.user.mail,this.user),this.seRegistroOk=!0,this.form.reset()}).catch(C=>w.textContent=C.message)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ed),d.Y36($l),d.Y36(hA))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-form-register-admin"]],decls:2,vars:2,consts:[["class","text-center",3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],[1,"alert","alert-danger"],[4,"ngIf"],[1,"d-flex","justify-content-center","pop"]],template:function(t,r){1&t&&(d.YNc(0,NN,28,4,"form",0),d.YNc(1,ON,3,0,"div",1)),2&t&&(d.Q6J("ngIf",!r.seRegistroOk),d.xp6(1),d.Q6J("ngIf",r.seRegistroOk))},directives:[dn,vd,pd,Ll,Du,Lh,Zh,Vl,Hh],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),n})();function kN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre es requerido. "),d.qZA())}function FN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre minimo 3 caracteres. "),d.qZA())}function LN(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,kN,2,0,"div",25),d.YNc(2,FN,2,0,"div",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.minlength)}}function VN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido es requerido. "),d.qZA())}function UN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido minimo 3 caracteres. "),d.qZA())}function BN(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,VN,2,0,"div",25),d.YNc(2,UN,2,0,"div",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.minlength)}}function jN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Obra Social es requerido. "),d.qZA())}function $N(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Obra Social minimo 3 caracteres. "),d.qZA())}function HN(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,jN,2,0,"div",25),d.YNc(2,$N,2,0,"div",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.obrasocial||null==t.obrasocial.errors?null:t.obrasocial.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.obrasocial||null==t.obrasocial.errors?null:t.obrasocial.errors.minlength)}}function GN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Email es requerido. "),d.qZA())}function qN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Emial minimo 10 caracteres. "),d.qZA())}function ZN(n,e){if(1&n&&(d.TgZ(0,"div",24),d.YNc(1,GN,2,0,"div",25),d.YNc(2,qN,2,0,"div",25),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.minlength)}}function zN(n,e){1&n&&(d.TgZ(0,"div",26)(1,"p"),d._uU(2,"Verifique su email para activar la cuenta"),d.qZA()())}let WN=(()=>{class n{constructor(t,r,o){this.fb=t,this.serviceLogin=r,this.serviceRegister=o,this.seRegistroOk=!1}ngOnInit(){this.form=this.fb.group({nombre:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],apellido:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],edad:[0,[nt.required]],dni:[0,[nt.required]],obrasocial:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],mail:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(100)])],password:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],imagenuno:["",nt.nullValidator],imagendos:["",nt.nullValidator]})}aceptar(){const{nombre:t,apellido:r,edad:o,dni:u,obrasocial:h,password:m,mail:w,imagenuno:C,imagendos:R}=this.form.value;this.user=new dA,this.user.nombre=t,this.user.apellido=r,this.user.edad=o,this.user.DNI=u,this.user.obraSocial=h,this.user.password=m,this.user.mail=w,this.user.imagenes=[C,R],this.user.tipo="paciente";const N=document.getElementById("errorLogin");null!=N&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(q=>{this.serviceRegister.createPaciente(this.user.mail,this.user),this.seRegistroOk=!0,this.form.reset()}).catch(q=>N.textContent=q.message)}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ed),d.Y36($l),d.Y36(hA))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-form-register"]],decls:43,vars:6,consts:[[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","obrasocial",1,"form-label"],["type","text","formControlName","obrasocial","id","obrasocial",1,"form-control"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagenuno","id","imagen1",1,"form-control"],["for","imagen2",1,"form-label"],["type","file","formControlName","imagendos","id","imagen2",1,"form-control"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"d-flex","justify-content-center","pop"]],template:function(t,r){1&t&&(d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return r.aceptar()}),d.TgZ(1,"div",1)(2,"label",2),d._uU(3,"Nombre"),d.qZA(),d._UZ(4,"input",3),d.YNc(5,LN,3,2,"div",4),d.TgZ(6,"label",5),d._uU(7,"Apellido"),d.qZA(),d._UZ(8,"input",6),d.YNc(9,BN,3,2,"div",4),d.qZA(),d.TgZ(10,"div",1)(11,"label",7),d._uU(12,"edad"),d.qZA(),d._UZ(13,"input",8),d.TgZ(14,"label",9),d._uU(15,"dni"),d.qZA(),d._UZ(16,"input",10),d.qZA(),d.TgZ(17,"div",1)(18,"div")(19,"label",11),d._uU(20,"obrasocial"),d.qZA(),d._UZ(21,"input",12),d.YNc(22,HN,3,2,"div",4),d.qZA(),d.TgZ(23,"label",13),d._uU(24,"mail"),d.qZA(),d._UZ(25,"input",14),d.YNc(26,ZN,3,2,"div",4),d.qZA(),d.TgZ(27,"div",1)(28,"label",15),d._uU(29,"password"),d.qZA(),d._UZ(30,"input",16),d.TgZ(31,"div")(32,"label",17),d._uU(33,"imagen uno"),d.qZA(),d._UZ(34,"input",18),d.qZA()(),d.TgZ(35,"div",1)(36,"label",19),d._uU(37,"imagen dos"),d.qZA(),d._UZ(38,"input",20),d.qZA(),d.TgZ(39,"button",21),d._uU(40,"Enviar"),d.qZA(),d._UZ(41,"label",22),d.qZA(),d.YNc(42,zN,3,0,"div",23)),2&t&&(d.Q6J("formGroup",r.form),d.xp6(5),d.Q6J("ngIf",(null==r.nombre?null:r.nombre.invalid)&&((null==r.nombre?null:r.nombre.dirty)||(null==r.nombre?null:r.nombre.touched))),d.xp6(4),d.Q6J("ngIf",(null==r.apellido?null:r.apellido.invalid)&&((null==r.apellido?null:r.apellido.dirty)||(null==r.apellido?null:r.apellido.touched))),d.xp6(13),d.Q6J("ngIf",(null==r.obrasocial?null:r.obrasocial.invalid)&&((null==r.obrasocial?null:r.obrasocial.dirty)||(null==r.obrasocial?null:r.obrasocial.touched))),d.xp6(4),d.Q6J("ngIf",(null==r.mail?null:r.mail.invalid)&&((null==r.mail?null:r.mail.dirty)||(null==r.mail?null:r.mail.touched))),d.xp6(16),d.Q6J("ngIf",r.seRegistroOk))},directives:[vd,pd,Ll,Du,Lh,Zh,Vl,dn,Hh],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}input[_ngcontent-%COMP%]{width:300px;margin:5px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),n})(),KN=(()=>{class n{constructor(){this.especialidades=["PEDIATRA","ODONTOLOGO","PSICOLOGO"]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre es requerido. "),d.qZA())}function QN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Nombre minimo 3 caracteres. "),d.qZA())}function JN(n,e){if(1&n&&(d.TgZ(0,"div",23),d.YNc(1,YN,2,0,"div",24),d.YNc(2,QN,2,0,"div",24),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.nombre||null==t.nombre.errors?null:t.nombre.errors.minlength)}}function XN(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido es requerido. "),d.qZA())}function eO(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Apellido minimo 3 caracteres. "),d.qZA())}function tO(n,e){if(1&n&&(d.TgZ(0,"div",23),d.YNc(1,XN,2,0,"div",24),d.YNc(2,eO,2,0,"div",24),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.apellido||null==t.apellido.errors?null:t.apellido.errors.minlength)}}function nO(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Obra Social es requerido. "),d.qZA())}function rO(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Obra Social minimo 3 caracteres. "),d.qZA())}function iO(n,e){if(1&n&&(d.TgZ(0,"div",23),d.YNc(1,nO,2,0,"div",24),d.YNc(2,rO,2,0,"div",24),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.obrasocial||null==t.obrasocial.errors?null:t.obrasocial.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.obrasocial||null==t.obrasocial.errors?null:t.obrasocial.errors.minlength)}}function sO(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"input",26),d.TgZ(2,"label",27),d._uU(3),d.qZA()()),2&n){const t=e.$implicit;d.xp6(1),d.s9C("value",t),d.xp6(2),d.Oqu(t)}}function oO(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Email es requerido. "),d.qZA())}function aO(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Emial minimo 10 caracteres. "),d.qZA())}function uO(n,e){if(1&n&&(d.TgZ(0,"div",23),d.YNc(1,oO,2,0,"div",24),d.YNc(2,aO,2,0,"div",24),d.qZA()),2&n){const t=d.oxw(2);d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.required),d.xp6(1),d.Q6J("ngIf",null==t.mail||null==t.mail.errors?null:t.mail.errors.minlength)}}function lO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"form",2),d.NdJ("ngSubmit",function(){return d.CHM(t),d.oxw().aceptar()}),d.TgZ(1,"div",3)(2,"label",4),d._uU(3,"Nombre"),d.qZA(),d._UZ(4,"input",5),d.YNc(5,JN,3,2,"div",6),d.TgZ(6,"label",7),d._uU(7,"Apellido"),d.qZA(),d._UZ(8,"input",8),d.YNc(9,tO,3,2,"div",6),d.qZA(),d.TgZ(10,"div",3)(11,"label",9),d._uU(12,"edad"),d.qZA(),d._UZ(13,"input",10),d.TgZ(14,"label",11),d._uU(15,"dni"),d.qZA(),d._UZ(16,"input",12),d.qZA(),d.TgZ(17,"div",3),d.YNc(18,iO,3,2,"div",6),d.qZA(),d.TgZ(19,"div")(20,"label",13),d._uU(21,"espelicidad"),d.qZA(),d.YNc(22,sO,4,2,"div",14),d.qZA(),d.TgZ(23,"label",15),d._uU(24,"mail"),d.qZA(),d._UZ(25,"input",16),d.YNc(26,uO,3,2,"div",6),d.TgZ(27,"div",3)(28,"label",17),d._uU(29,"password"),d.qZA(),d._UZ(30,"input",18),d.TgZ(31,"label",19),d._uU(32,"imagen uno"),d.qZA(),d._UZ(33,"input",20),d.qZA(),d.TgZ(34,"button",21),d._uU(35,"Enviar"),d.qZA(),d._UZ(36,"label",22),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("formGroup",t.form),d.xp6(5),d.Q6J("ngIf",(null==t.nombre?null:t.nombre.invalid)&&((null==t.nombre?null:t.nombre.dirty)||(null==t.nombre?null:t.nombre.touched))),d.xp6(4),d.Q6J("ngIf",(null==t.apellido?null:t.apellido.invalid)&&((null==t.apellido?null:t.apellido.dirty)||(null==t.apellido?null:t.apellido.touched))),d.xp6(9),d.Q6J("ngIf",(null==t.obrasocial?null:t.obrasocial.invalid)&&((null==t.obrasocial?null:t.obrasocial.dirty)||(null==t.obrasocial?null:t.obrasocial.touched))),d.xp6(4),d.Q6J("ngForOf",t.serviceEspecialidad.especialidades),d.xp6(4),d.Q6J("ngIf",(null==t.mail?null:t.mail.invalid)&&((null==t.mail?null:t.mail.dirty)||(null==t.mail?null:t.mail.touched)))}}function cO(n,e){1&n&&(d.TgZ(0,"div",28)(1,"p"),d._uU(2,"Verifique su email para activar la cuenta"),d.qZA()())}let dO=(()=>{class n{constructor(t,r,o,u){this.serviceEspecialidad=t,this.fb=r,this.serviceLogin=o,this.serviceRegister=u,this.seRegistroOk=!1}ngOnInit(){this.form=this.fb.group({nombre:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],apellido:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],edad:[0,[nt.required]],dni:[0,[nt.required]],mail:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(100)])],password:["",nt.compose([nt.required,nt.minLength(3),nt.maxLength(15)])],especialidad:["",nt.nullValidator],imagenuno:["",nt.nullValidator]})}aceptar(){const{nombre:t,apellido:r,edad:o,dni:u,password:h,mail:m,imagenuno:w}=this.form.value;this.user=new dA,this.user.nombre=t,this.user.apellido=r,this.user.edad=o,this.user.DNI=u,this.user.password=h,this.user.mail=m,this.user.especialidad=this.form.value.especialidad,this.user.imagenes=[w],this.user.tipo="especialista",this.user.habilitado=!1;const C=document.getElementById("errorLogin");null!=C&&this.serviceLogin.registrar(this.user.mail,this.user.password).then(R=>{this.serviceRegister.createEspecialista(this.user.mail,this.user),this.seRegistroOk=!0,this.form.reset()}).catch(R=>C.textContent=R.message)}get nombre(){return this.form.get("nombre")}get apellido(){return this.form.get("apellido")}get obrasocial(){return this.form.get("obrasocial")}get mail(){return this.form.get("mail")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(KN),d.Y36(Ed),d.Y36($l),d.Y36(hA))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-form-register-especialista"]],decls:2,vars:2,consts:[["class","text-center",3,"formGroup","ngSubmit",4,"ngIf"],["class","d-flex justify-content-center pop",4,"ngIf"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre","id","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido","id","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","formControlName","edad","id","edad",1,"form-control"],["for","dni",1,"form-label"],["type","number","formControlName","dni","id","dni",1,"form-control"],["for","especialidad",1,"form-label"],["class","form-check form-switch",4,"ngFor","ngForOf"],["for","mail",1,"form-label"],["type","email","formControlName","mail","id","mail",1,"form-control"],["for","password",1,"form-label"],["type","password","formControlName","password","id","password",1,"form-control"],["for","imagen1",1,"form-label"],["type","file","formControlName","imagenuno","id","imagen1",1,"form-control"],["type","submit",1,"btn","btn-primary"],["id","errorLogin","for",""],[1,"alert","alert-danger"],[4,"ngIf"],[1,"form-check","form-switch"],["type","radio","formControlName","especialidad","role","switch",1,"form-check-input",3,"value"],["for","flexSwitchCheckDefault",1,"form-check-label"],[1,"d-flex","justify-content-center","pop"]],template:function(t,r){1&t&&(d.YNc(0,lO,37,6,"form",0),d.YNc(1,cO,3,0,"div",1)),2&t&&(d.Q6J("ngIf",!r.seRegistroOk),d.xp6(1),d.Q6J("ngIf",r.seRegistroOk))},directives:[dn,vd,pd,Ll,Du,Lh,Zh,Vl,Hh,$n,pE],styles:["form[_ngcontent-%COMP%]{background-color:#fff;padding:15px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px}.pop[_ngcontent-%COMP%]{text-align:center;align-items:center;width:300px;height:100px;background-color:#fff;color:#1e90ff;font-size:15px;border-radius:10px}"]}),n})();function hO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",3)(1,"div",4)(2,"div",5),d._uU(3," Pacientes "),d.qZA(),d.TgZ(4,"div",6)(5,"button",7),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.mostrarRegister=!0,o.tipo="paciente"}),d._uU(6,"Paciente"),d.qZA(),d.TgZ(7,"p"),d._uU(8,"de salud de paciente"),d.qZA()()(),d.TgZ(9,"div",4)(10,"div",5),d._uU(11," Especialistas "),d.qZA(),d.TgZ(12,"div",6)(13,"button",7),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.mostrarRegister=!0,o.tipo="especialista"}),d._uU(14,"Especialidad"),d.qZA(),d.TgZ(15,"p"),d._uU(16,"Intranet para el personal del hospital"),d.qZA()()(),d.TgZ(17,"div",4)(18,"div",5),d._uU(19," Administradores "),d.qZA(),d.TgZ(20,"div",6)(21,"button",7),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.tipo="admin",o.mostrarRegister=!0}),d._uU(22,"Administrador"),d.qZA(),d.TgZ(23,"p"),d._uU(24,"Intranet para el personal del hospital"),d.qZA()()()()}}function fO(n,e){1&n&&(d.TgZ(0,"div"),d._UZ(1,"app-form-register-admin"),d.qZA())}function pO(n,e){1&n&&(d.TgZ(0,"div"),d._UZ(1,"app-form-register"),d.qZA())}function gO(n,e){1&n&&(d.TgZ(0,"div"),d._UZ(1,"app-form-register-especialista"),d.qZA())}let mO=(()=>{class n{constructor(){this.mostrarRegister=!1,this.tipo=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:5,vars:4,consts:[[1,"register","d-flex","justify-content-center"],["class","container d-flex row justify-content-center m-3",4,"ngIf"],[4,"ngIf"],[1,"container","d-flex","row","justify-content-center","m-3"],[1,"card","m-2"],[1,"card-header"],[1,"card-body"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.YNc(1,hO,25,0,"div",1),d.YNc(2,fO,2,0,"div",2),d.YNc(3,pO,2,0,"div",2),d.YNc(4,gO,2,0,"div",2),d.qZA()),2&t&&(d.xp6(1),d.Q6J("ngIf",!r.mostrarRegister),d.xp6(1),d.Q6J("ngIf","admin"==r.tipo),d.xp6(1),d.Q6J("ngIf","paciente"==r.tipo),d.xp6(1),d.Q6J("ngIf","especialista"==r.tipo))},directives:[dn,PN,WN,dO],styles:[".register[_ngcontent-%COMP%]{max-width:900px;max-height:900px;margin:0 auto}"]}),n})(),yO=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-usuarios"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"usuarios works!"),d.qZA())},styles:[""]}),n})(),lM=(()=>{class n{constructor(t,r){this.serviceTraerDatos=t,this.route=r,this.serviceTraerDatos.traeDatosAdministradores()}canActivate(t,r){var o;return"admin"==(null===(o=this.serviceTraerDatos.datosAdminConectado)||void 0===o?void 0:o.tipo)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(uM),d.LFG(nr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _O=[{path:"",component:fd},{path:"home",component:fd},{path:"registrar",component:mO},{path:"ingresar",component:IN},{path:"usuarios",component:yO,canActivate:[lM]}];let vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[C0.forRoot(_O)],C0]}),n})();const EO=function(){return["usuarios"]};function wO(n,e){1&n&&(d.TgZ(0,"div",7)(1,"ul",8)(2,"li",9)(3,"a",10),d._uU(4,"Usuarios"),d.qZA()()()()),2&n&&(d.xp6(3),d.Q6J("routerLink",d.DdM(1,EO)))}const IO=function(){return["ingresar"]},bO=function(){return["registrar"]};function DO(n,e){1&n&&(d.TgZ(0,"div",11)(1,"ul",8)(2,"li",9)(3,"a",10),d._uU(4,"Ingresar"),d.qZA()(),d.TgZ(5,"li",12)(6,"a",13),d._uU(7," Registrar "),d.qZA()()()()),2&n&&(d.xp6(3),d.Q6J("routerLink",d.DdM(2,IO)),d.xp6(3),d.Q6J("routerLink",d.DdM(3,bO)))}function CO(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",11)(1,"ul",8)(2,"li",9)(3,"a",14),d.NdJ("click",function(){return d.CHM(t),d.oxw().Desloguear()}),d._uU(4,"Cerrar sesion"),d.qZA()()()()}}const TO=function(){return["home"]};let AO=(()=>{class n{constructor(t,r){this.loginservice=t,this.guardAdmin=r,this.login=!1,this.register=!1,this.estaLogeado=!1,this.usuarioConectado$=this.loginservice.afAuth.user}ngOnInit(){this.usuarioConectado$.subscribe(t=>{this.estaLogeado=!!t,console.log(this.estaLogeado)})}Desloguear(){this.loginservice.singOut()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($l),d.Y36(lM))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-bienvenida"]],decls:9,vars:5,consts:[[1,"navbar","navbar-expand-lg","bg-light"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"routerLink"],[1,"navbar-toggler-icon"],["class","collapse navbar-collapse justify-content-center","id","navbarNav",4,"ngIf"],["class","collapse navbar-collapse justify-content-end","id","navbarNav",4,"ngIf"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-center"],[1,"navbar-nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav-item","dropdown"],["role","button","id","navbarDropdownMenuLink",1,"nav-link",3,"routerLink"],["role","button",1,"nav-link",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),d._uU(3,"Home"),d.qZA(),d.TgZ(4,"button",3),d._UZ(5,"span",4),d.qZA(),d.YNc(6,wO,5,2,"div",5),d.YNc(7,DO,8,4,"div",6),d.YNc(8,CO,5,0,"div",6),d.qZA()()),2&t&&(d.xp6(4),d.Q6J("routerLink",d.DdM(4,TO)),d.xp6(2),d.Q6J("ngIf",r.estaLogeado),d.xp6(1),d.Q6J("ngIf",!r.estaLogeado),d.xp6(1),d.Q6J("ngIf",r.estaLogeado))},directives:[dd,dn,Eu],styles:["nav[_ngcontent-%COMP%]{margin-bottom:50px}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.logreg[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center}"]}),n})(),SO=(()=>{class n{constructor(){this.title="clinicafinal"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&d._UZ(0,"app-bienvenida")(1,"router-outlet")},directives:[AO,Cl],styles:[""]}),n})();const cM_firebaseConfig={apiKey:"AIzaSyBGJbZPSzr2qQI0tSDcZJIcvj5xLwo05kw",authDomain:"clinicafinal.firebaseapp.com",projectId:"clinicafinal",storageBucket:"clinicafinal.appspot.com",messagingSenderId:"146126855144",appId:"1:146126855144:web:385ae78bb032c50fa0e25d",measurementId:"G-5848TY8HST"};let xO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[SO]}),n.\u0275inj=d.cJS({providers:[],imports:[[ha,vO,Ls.hO.initializeApp(cM_firebaseConfig),BA,xE]]}),n})();(0,d.G48)(),Xa().bootstrapModule(xO).catch(n=>console.error(n))},5867:(Je,we,O)=>{O.d(we,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=O(9681);(0,d.registerVersion)("firebase","9.8.2","app")},127:(Je,we,O)=>{O.d(we,{Z:()=>d.Z});var d=O(3942);d.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,O)=>{O.r(we);var d=O(5861),Q=O(3942),P=O(2090),oe=O(9681),ne=O(655),pe=O(1877),ae=O(4859);const Re=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ge=new pe.Yd("@firebase/auth");function ze(y,...f){Ge.logLevel<=pe.in.ERROR&&Ge.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function Ce(y,...f){throw Ve(y,...f)}function Ee(y,...f){return Ve(y,...f)}function Ie(y,f,g){const v=Object.assign(Object.assign({},Le()),{[f]:g});return new P.LL("auth","Firebase",v).create(f,{appName:y.name})}function Ue(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ce(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return he.create(y,...f)}function B(y,f,...g){if(!y)throw Ve(f,...g)}function ve(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ze(f),new Error(f)}function z(y,f){y||ve(f)}const re=new Map;function J(y){z(y instanceof Function,"Expected a class definition");let f=re.get(y);return f?(z(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,re.set(y,f),f)}function Ne(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===kt()||"https:"===kt()}function kt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Wt{constructor(f,g){this.shortDelay=f,this.longDelay=g,z(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Nt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,f){z(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Yt{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vr=new Wt(3e4,6e4);function $t(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function xt(y,f,g,v){return qi.apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(y,f,g,v,T={}){return Wr(y,T,(0,d.Z)(function*(){let M={},Z={};v&&("GET"===f?Z=v:M={body:JSON.stringify(v)});const de=(0,P.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),Yt.fetch()(gs(y,y.config.apiHost,g,de),Object.assign({method:f,headers:ke,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Wr(y,f,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},qt),f);try{const T=new Kr(y),M=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const Z=yield M.json();if("needConfirmation"in Z)throw di(y,"account-exists-with-different-credential",Z);if(M.ok&&!("errorMessage"in Z))return Z;{const de=M.ok?Z.errorMessage:Z.error.message,[ke,Qe]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw di(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===ke)throw di(y,"email-already-in-use",Z);if("USER_DISABLED"===ke)throw di(y,"user-disabled",Z);const ct=v[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Ie(y,ct,Qe);Ce(y,ct)}}catch(T){if(T instanceof P.ZR)throw T;Ce(y,"network-request-failed")}})).apply(this,arguments)}function Er(y,f,g,v){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(y,f,g,v,T={}){const M=yield xt(y,f,g,v,T);return"mfaPendingCredential"in M&&Ce(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function gs(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?mn(y.config,T):`${y.config.apiScheme}://${T}`}class Kr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(Ee(this.auth,"network-request-failed")),vr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function di(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=Ee(y,f,v);return T.customData._tokenResponse=g,T}function Yr(){return(Yr=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function cn(y,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function $s(y,f){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function jn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Eo(){return(Eo=(0,d.Z)(function*(y,f=!1){const g=(0,P.m9)(y),v=yield g.getIdToken(f),T=it(v);B(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,Z=null==M?void 0:M.sign_in_provider;return{claims:T,token:v,authTime:jn(Ft(T.auth_time)),issuedAtTime:jn(Ft(T.iat)),expirationTime:jn(Ft(T.exp)),signInProvider:Z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Ft(y){return 1e3*Number(y)}function it(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(ze("Failed to decode base64 JWT payload"),null)}catch(T){return ze("Caught error parsing JWT payload as JSON",T),null}}function sr(y,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof P.ZR&&Ot(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ot({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class or{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=jn(this.lastLoginAt),this.creationTime=jn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ar(y){return L.apply(this,arguments)}function L(){return(L=(0,d.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield sr(y,$s(g,{idToken:v}));B(null==T?void 0:T.users.length,g,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const Z=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?$(M.providerUserInfo):[],de=De(y.providerData,Z),ct=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==de?void 0:de.length)),lt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:de,metadata:new or(M.createdAt,M.lastLoginAt),isAnonymous:ct};Object.assign(y,lt)})).apply(this,arguments)}function G(){return(G=(0,d.Z)(function*(y){const f=(0,P.m9)(y);yield ar(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function De(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function $(y){return y.map(f=>{var{providerId:g}=f,v=(0,ne._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function xe(){return(xe=(0,d.Z)(function*(y,f){const g=yield Wr(y,{},(0,d.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,Z=gs(y,T,"/v1/token",`key=${M}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",Yt.fetch()(Z,{method:"POST",headers:de,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function mt(y){const f=it(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,d.Z)(function*(){return B(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:Z}=yield function Y(y,f){return xe.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,M,Number(Z))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:M}=g,Z=new Ye;return v&&(B("string"==typeof v,"internal-error",{appName:f}),Z.refreshToken=v),T&&(B("string"==typeof T,"internal-error",{appName:f}),Z.accessToken=T),M&&(B("number"==typeof M,"internal-error",{appName:f}),Z.expirationTime=M),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return ve("not implemented")}}function dt(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class _t{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,M=(0,ne._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new or(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const v=yield sr(g,g.stsTokenManager.getToken(g.auth,f));return B(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function hi(y){return Eo.apply(this,arguments)}(this,f)}reload(){return function H(y){return G.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new _t(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,d.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield ar(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield sr(f,function ft(y,f){return Yr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,M,Z,de,ke,Qe,ct;const lt=null!==(v=g.displayName)&&void 0!==v?v:void 0,En=null!==(T=g.email)&&void 0!==T?T:void 0,ri=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,vu=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,Rh=null!==(de=g.tenantId)&&void 0!==de?de:void 0,zp=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Ca=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,Rl=null!==(ct=g.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:cd,emailVerified:Wp,isAnonymous:nr,providerData:Nh,stsTokenManager:Oh}=g;B(cd&&Oh,f,"internal-error");const dd=Ye.fromJSON(this.name,Oh);B("string"==typeof cd,f,"internal-error"),dt(lt,f.name),dt(En,f.name),B("boolean"==typeof Wp,f,"internal-error"),B("boolean"==typeof nr,f,"internal-error"),dt(ri,f.name),dt(vu,f.name),dt(Rh,f.name),dt(zp,f.name),dt(Ca,f.name),dt(Rl,f.name);const Eu=new _t({uid:cd,auth:f,email:En,emailVerified:Wp,displayName:lt,isAnonymous:nr,photoURL:vu,phoneNumber:ri,tenantId:Rh,stsTokenManager:dd,createdAt:Ca,lastLoginAt:Rl});return Nh&&Array.isArray(Nh)&&(Eu.providerData=Nh.map(wu=>Object.assign({},wu))),zp&&(Eu._redirectEventId=zp),Eu}static _fromIdTokenResponse(f,g,v=!1){return(0,d.Z)(function*(){const T=new Ye;T.updateFromServerResponse(g);const M=new _t({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield ar(M),M})()}}const yt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,d.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,d.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,d.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function Rn(y,f,g){return`firebase:${y}:${f}:${g}`}class wr{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:M}=this.auth;this.fullUserKey=Rn(this.userKey,T.apiKey,M),this.fullPersistenceKey=Rn("persistence",T.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?_t._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,d.Z)(function*(){if(!g.length)return new wr(J(yt),f,v);const T=(yield Promise.all(g.map(function(){var Qe=(0,d.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let M=T[0]||J(yt);const Z=Rn(v,f.config.apiKey,f.name);let de=null;for(const Qe of g)try{const ct=yield Qe._get(Z);if(ct){const lt=_t._fromJSON(f,ct);Qe!==M&&(de=lt),M=Qe;break}}catch(ct){}const ke=T.filter(Qe=>Qe._shouldAllowMigration);return M._shouldAllowMigration&&ke.length?(M=ke[0],de&&(yield M._set(Z,de.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,d.Z)(function*(ct){if(ct!==M)try{yield ct._remove(Z)}catch(lt){}});return function(ct){return Qe.apply(this,arguments)}}())),new wr(M,f,v)):new wr(M,f,v)})()}}function ja(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Nn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(na(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Zi(f))return"Blackberry";if(On(f))return"Webos";if($a(f))return"Safari";if((f.includes("chrome/")||ra(f))&&!f.includes("edge/"))return"Chrome";if(Ir(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function na(y=(0,P.z$)()){return/firefox\//i.test(y)}function $a(y=(0,P.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ra(y=(0,P.z$)()){return/crios\//i.test(y)}function Nn(y=(0,P.z$)()){return/iemobile/i.test(y)}function Ir(y=(0,P.z$)()){return/android/i.test(y)}function Zi(y=(0,P.z$)()){return/blackberry/i.test(y)}function On(y=(0,P.z$)()){return/webos/i.test(y)}function Pr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function ms(y=(0,P.z$)()){return Pr(y)||Ir(y)||On(y)||Zi(y)||/windows phone/i.test(y)||Nn(y)}function wo(y,f=[]){let g;switch(y){case"Browser":g=ja((0,P.z$)());break;case"Worker":g=`${ja((0,P.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class kr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const v=M=>new Promise((Z,de)=>{try{Z(f(M))}catch(ke){de(ke)}});v.onAbort=g,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,d.Z)(function*(){if(g.auth.currentUser===f)return;const v=[];try{for(const T of g.queue)yield T(f),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const M of v)try{M()}catch(Z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class qe{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kt(this),this.idTokenSubscription=new Kt(this),this.beforeStateQueue=new kr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=J(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,M;if(!v._deleted&&(v.persistenceManager=yield wr.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(Z){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(M=v.currentUser)||void 0===M?void 0:M.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var v;const T=yield g.assertedPersistence.getCurrentUser();let M=T,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,ke=null==M?void 0:M._redirectEventId,Qe=yield g.tryRedirectSignIn(f);(!de||de===ke)&&(null==Qe?void 0:Qe.user)&&(M=Qe.user,Z=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(M)}catch(de){M=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield ar(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ze(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const v=f?(0,P.m9)(f):null;return v&&B(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f,g=!1){var v=this;return(0,d.Z)(function*(){if(!v._deleted)return f&&B(v.tenantId===f.tenantId,v,"tenant-id-mismatch"),g||(yield v.beforeStateQueue.runMiddleware(f)),v.queue((0,d.Z)(function*(){yield v.directlySetCurrentUser(f),v.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(J(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new P.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,d.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&J(f)||g._popupRedirectResolver;B(v,g,"argument-error"),g.redirectPersistenceManager=yield wr.create(g,[J(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Z,this,"internal-error"),Z.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=wo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function ot(y){return(0,P.m9)(y)}class Kt{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Di(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ci(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class fi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ve("not implemented")}_getIdTokenResponse(f){return ve("not implemented")}_linkToIdToken(f,g){return ve("not implemented")}_getReauthenticationResolver(f){return ve("not implemented")}}function _n(y,f){return bt.apply(this,arguments)}function bt(){return(bt=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:resetPassword",$t(y,f))})).apply(this,arguments)}function sa(y,f){return ys.apply(this,arguments)}function ys(){return(ys=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ha(y,f){return _s.apply(this,arguments)}function _s(){return(_s=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:update",$t(y,f))})).apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPassword",$t(y,f))})).apply(this,arguments)}function vs(y,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:sendOobCode",$t(y,f))})).apply(this,arguments)}function Qt(y,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function oa(y,f){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,d.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function Ti(y,f){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function mc(y,f){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(y,f){return vs(y,f)})).apply(this,arguments)}function Wu(){return(Wu=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}function yc(){return(yc=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}class ur extends fi{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new ur(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new ur(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function $n(y,f){return qs.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Si(y,f){return Wu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ce(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return sa(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function mp(y,f){return yc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Ce(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Es(y,f){return _c.apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithIdp",$t(y,f))})).apply(this,arguments)}class zi extends fi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,M=(0,ne._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const Z=new zi(v,T);return Z.idToken=M.idToken||void 0,Z.accessToken=M.accessToken||void 0,Z.secret=M.secret,Z.nonce=M.nonce,Z.pendingToken=M.pendingToken||null,Z}_getIdTokenResponse(f){return Es(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Es(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Es(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,P.xO)(g)}return f}}function _p(y,f){return vc.apply(this,arguments)}function vc(){return(vc=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:sendVerificationCode",$t(y,f))})).apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f))})).apply(this,arguments)}function Ec(){return(Ec=(0,d.Z)(function*(y,f){const g=yield Er(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f));if(g.temporaryProof)throw di(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ep={USER_NOT_FOUND:"user-not-found"};function wc(){return(wc=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ep)})).apply(this,arguments)}class Io extends fi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Io({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Io({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ku(y,f){return ws.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function vp(y,f){return Ec.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function wp(y,f){return wc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:M}=f;return v||g||T||M?new Io({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:M}):null}}class Za{constructor(f){var g,v,T,M,Z,de;const ke=(0,P.zd)((0,P.pd)(f)),Qe=null!==(g=ke.apiKey)&&void 0!==g?g:null,ct=null!==(v=ke.oobCode)&&void 0!==v?v:null,lt=function oh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);B(Qe&&ct&&lt,"argument-error"),this.apiKey=Qe,this.operation=lt,this.code=ct,this.continueUrl=null!==(M=ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Z=ke.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(de=ke.tenantId)&&void 0!==de?de:null}static parseLink(f){const g=function aa(y){const f=(0,P.zd)((0,P.pd)(y)).link,g=f?(0,P.zd)((0,P.pd)(f)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||g||f||y}(f);try{return new Za(g)}catch(v){return null}}}let bc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return ur._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=Za.parseLink(v);return B(T,"argument-error"),ur._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class lr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Zs extends lr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class xi extends Zs{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),zi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return xi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return xi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:M,nonce:Z,providerId:de}=f;if(!v&&!T&&!g&&!M||!de)return null;try{return new xi(de)._credential({idToken:g,accessToken:v,nonce:Z,pendingToken:M})}catch(ke){return null}}}let bo=(()=>{class y extends Zs{constructor(){super("facebook.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Dc=(()=>{class y extends Zs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ah=(()=>{class y extends Zs{constructor(){super("github.com")}static credential(g){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class zs extends fi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Es(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Es(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Es(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:M}=g;return v&&T&&M&&v===T?new zs(v,M):null}static _create(f,g){return new zs(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class br extends lr{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return br.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return br.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=zs.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return zs._create(v,g)}catch(T){return null}}}let Tc=(()=>{class y extends Zs{constructor(){super("twitter.com")}static credential(g,v){return zi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Dr(y,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signUp",$t(y,f))})).apply(this,arguments)}class Xr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,d.Z)(function*(){const M=yield _t._fromIdTokenResponse(f,v,T),Z=Yu(v);return new Xr({user:M,providerId:Z,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=Yu(v);return new Xr({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function Yu(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Qu(){return(Qu=(0,d.Z)(function*(y){var f;const g=ot(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Xr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Dr(g,{returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class To extends P.ZR{constructor(f,g,v,T){var M;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,To.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new To(f,g,v,T)}}function Ju(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?To._fromErrorAndOperation(y,M,f,v):M})}function Mi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Jt(){return(Jt=(0,d.Z)(function*(y,f){const g=(0,P.m9)(y);yield Zt(!0,g,f);const{providerUserInfo:v}=yield cn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Mi(v||[]);return g.providerData=g.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ua(y,f){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(y,f,g=!1){const v=yield sr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return Xr._forOperation(y,"link",v)})).apply(this,arguments)}function Zt(y,f,g){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(y,f,g){yield ar(f);const T=!1===y?"provider-already-linked":"no-such-provider";B(Mi(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function za(y,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const M=yield sr(y,Ju(v,T,f,y),g);B(M.idToken,v,"internal-error");const Z=it(M.idToken);B(Z,v,"internal-error");const{sub:de}=Z;return B(y.uid===de,v,"user-mismatch"),Xr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ce(v,"user-mismatch"),M}})).apply(this,arguments)}function Kn(y,f){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(y,f,g=!1){const v="signIn",T=yield Ju(y,v,f),M=yield Xr._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function an(y,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,d.Z)(function*(y,f){return Kn(ot(y),f)})).apply(this,arguments)}function Yn(y,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,d.Z)(function*(y,f){const g=(0,P.m9)(y);return yield Zt(!1,g,f.providerId),ua(g,f)})).apply(this,arguments)}function Wi(y,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,d.Z)(function*(y,f){return za((0,P.m9)(y),f)})).apply(this,arguments)}function pi(y,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,d.Z)(function*(y,f){return Er(y,"POST","/v1/accounts:signInWithCustomToken",$t(y,f))})).apply(this,arguments)}function pt(){return(pt=(0,d.Z)(function*(y,f){const g=ot(y),v=yield pi(g,{token:f,returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class bs{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?el._fromServerResponse(f,g):Ce(f,"internal-error")}}class el extends bs{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new el(g)}}function da(y,f,g){var v;B((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Wa(){return(Wa=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&da(v,T,g),yield oa(v,T)})).apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(y,f,g){yield _n((0,P.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(y,f){yield Ha((0,P.m9)(y),{oobCode:f})})).apply(this,arguments)}function Mt(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(y,f){const g=(0,P.m9)(y),v=yield _n(g,{oobCode:f}),T=v.requestType;switch(B(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(v.mfaInfo,g,"internal-error");default:B(v.email,g,"internal-error")}let M=null;return v.mfaInfo&&(M=bs._fromServerResponse(ot(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(y,f){const{data:g}=yield Mt((0,P.m9)(y),f);return g.email})).apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(y,f,g){const v=ot(y),T=yield Dr(v,{returnSecureToken:!0,email:f,password:g}),M=yield Xr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(M.user),M})).apply(this,arguments)}function sl(){return(sl=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,v,"argument-error"),g&&da(v,T,g),yield Ti(v,T)})).apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y),T=bc.credentialWithLink(f,g||Ne());return B(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),an(v,T)})).apply(this,arguments)}function cr(y,f){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:createAuthUri",$t(y,f))})).apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:at()?Ne():"http://localhost"},{signinMethods:T}=yield cr((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function ol(){return(ol=(0,d.Z)(function*(y,f){const g=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&da(g.auth,T,f);const{email:M}=yield Qt(g.auth,T);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function Xa(){return(Xa=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&da(v.auth,M,g);const{email:Z}=yield mc(v.auth,M);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function al(y,f){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(y,f){return xt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function tu(){return(tu=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,P.m9)(y),M={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield sr(v,al(v.auth,M));v.displayName=Z.displayName||null,v.photoURL=Z.photoUrl||null;const de=v.providerData.find(({providerId:ke})=>"password"===ke);de&&(de.displayName=v.displayName,de.photoURL=v.photoURL),yield v._updateTokensIfNecessary(Z)})).apply(this,arguments)}function nu(y,f,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(y,f,g){const{auth:v}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const Z=yield sr(y,sa(v,M));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Mo{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Nc extends Mo{constructor(f,g,v,T){super(f,g,v),this.username=T}}class ru extends Mo{constructor(f,g){super(f,"facebook.com",g)}}class Vr extends Nc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class lh extends Mo{constructor(f,g){super(f,"google.com",g)}}class ul extends Nc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Hn(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Rc(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(f=it(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new Mo(M,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!v)return null;switch(v){case"facebook.com":return new ru(M,T);case"github.com":return new Vr(M,T);case"google.com":return new lh(M,T);case"twitter.com":return new ul(M,T,y.screenName||null);case"custom":case"anonymous":return new Mo(M,null);default:return new Mo(M,v,T)}}(g)}class Yi{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new Yi("enroll",f)}static _fromMfaPendingCredential(f){return new Yi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Yi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return Yi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Xs{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=ot(f),T=g.customData._serverResponse,M=(T.mfaInfo||[]).map(de=>bs._fromServerResponse(v,de));B(T.mfaPendingCredential,v,"internal-error");const Z=Yi._fromMfaPendingCredential(T.mfaPendingCredential);return new Xs(Z,M,function(){var de=(0,d.Z)(function*(ke){const Qe=yield ke._process(v,Z);delete T.mfaInfo,delete T.mfaPendingCredential;const ct=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const lt=yield Xr._fromIdTokenResponse(v,g.operationType,ct);return yield v._updateCurrentUser(lt.user),lt;case"reauthenticate":return B(g.user,v,"internal-error"),Xr._forOperation(g.user,g.operationType,ct);default:Ce(v,"internal-error")}});return function(ke){return de.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function Pc(y,f){return xt(y,"POST","/v2/accounts/mfaEnrollment:start",$t(y,f))}class Ro{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>bs._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new Ro(f)}getSession(){var f=this;return(0,d.Z)(function*(){return Yi._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,d.Z)(function*(){const T=f,M=yield v.getSession(),Z=yield sr(v.user,T._process(v.user.auth,M,g));return yield v.user._updateTokensIfNecessary(Z),v.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),M=yield sr(g.user,function eo(y,f){return xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Z})=>Z!==v),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const iu=new WeakMap,Qi="__sak";class su{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Qi,"1"),this.storage.removeItem(Qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cr=(()=>{class y extends su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Tp(){const y=(0,P.z$)();return $a(y)||Pr(y)}()&&function Wn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ms(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),M=this.localCache[v];T!==M&&g(v,M,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((de,ke,Qe)=>{this.notifyListeners(de,Qe)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const M=()=>{const de=this.storage.getItem(T);!v&&this.localCache[T]===de||this.notifyListeners(T,de)},Z=this.storage.getItem(T);!function ia(){return(0,P.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,M=this;return(0,d.Z)(function*(){yield T().call(M,g,v),M.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,d.Z)(function*(){const M=yield v().call(T,g);return T.localCache[g]=JSON.stringify(M),M})()}_remove(g){var v=()=>super._remove,T=this;return(0,d.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),kn=(()=>{class y extends su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let kc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(M=>M.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,d.Z)(function*(){const T=g,{eventId:M,eventType:Z,data:de}=T.data,ke=v.handlersMap[Z];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:Z});const Qe=Array.from(ke).map(function(){var lt=(0,d.Z)(function*(En){return En(T.origin,de)});return function(En){return lt.apply(this,arguments)}}()),ct=yield function ga(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:M,eventType:Z,response:ct})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function No(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class Cs{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,d.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Z,de;return new Promise((ke,Qe)=>{const ct=No("",20);M.port1.start();const lt=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);de={messageChannel:M,onMessage(En){const ri=En;if(ri.data.eventId===ct)switch(ri.data.status){case"ack":clearTimeout(lt),Z=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),ke(ri.data.response);break;default:clearTimeout(lt),clearTimeout(Z),Qe(new Error("invalid_response"))}}},T.handlers.add(de),M.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:f,eventId:ct,data:g},[M.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function vn(){return window}function Oi(){return void 0!==vn().WorkerGlobalScope&&"function"==typeof vn().importScripts}function Fc(){return(Fc=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const cl="firebaseLocalStorageDb",As="firebaseLocalStorage",Oo="fbase_key";class to{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Jn(y,f){return y.transaction([As],f?"readwrite":"readonly").objectStore(As)}function ro(){const y=indexedDB.open(cl,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(As,{keyPath:Oo})}catch(T){g(T)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(As)?f(v):(v.close(),yield function no(){const y=indexedDB.deleteDatabase(cl);return new to(y).toPromise()}(),f(yield ro()))}))})}function Po(y,f,g){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(y,f,g){const v=Jn(y,!0).put({[Oo]:f,value:g});return new to(v).toPromise()})).apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,f){const g=Jn(y,!1).get(f),v=yield new to(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Fo(y,f){const g=Jn(y,!0).delete(f);return new to(g).toPromise()}const io=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield ro()),g.db})()}_withRetries(g){var v=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const M=yield v._openDb();return yield g(M)}catch(M){if(T++>3)throw M;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Oi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=kc._getInstance(function ll(){return Oi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(T,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(T,M){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function Et(){return Fc.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Cs(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(v=M[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Lc(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ro();return yield Po(g,Qi,"1"),yield Fo(g,Qi),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(M=>Po(M,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,d.Z)(function*(){const T=yield v._withRetries(M=>function ko(y,f){return xs.apply(this,arguments)}(M,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(T=>Fo(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const v=yield g._withRetries(Z=>{const de=Jn(Z,!1).getAll();return new to(de).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:Z,value:de}of v)M.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(de)&&(g.notifyListeners(Z,de),T.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!M.has(Z)&&(g.notifyListeners(Z,null),T.push(Z));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Xn(y,f){return xt(y,"POST","/v2/accounts/mfaSignIn:start",$t(y,f))}function Fn(){return(Fn=(0,d.Z)(function*(y){return(yield xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function oo(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const M=Ee("internal-error");M.customData=T,g(M)},v.type="text/javascript",v.charset="UTF-8",function so(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function Xi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const yi=1e12;class Ln{constructor(f){this.auth=f,this.counter=yi,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new ki(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||yi;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||yi))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var v;return null===(v=g._widgets.get(f||yi))||void 0===v||v.execute(),""})()}}class ki{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;B(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ou(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fl=Xi("rcb"),hn=new Wt(3e4,6e4);class ay{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vn().grecaptcha}load(f,g=""){return B(function ao(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(vn().grecaptcha):new Promise((v,T)=>{const M=vn().setTimeout(()=>{T(Ee(f,"network-request-failed"))},hn.get());vn()[fl]=()=>{vn().clearTimeout(M),delete vn()[fl];const de=vn().grecaptcha;if(!de)return void T(Ee(f,"internal-error"));const ke=de.render;de.render=(Qe,ct)=>{const lt=ke(Qe,ct);return this.counter++,lt},this.hostLanguage=g,v(de)},oo(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:fl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),T(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!vn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ur{load(f){return(0,d.Z)(function*(){return new Ln(f)})()}clearedOneInstance(){}}const Vc="recaptcha",Rs={theme:"light",type:"image"};class Uc{constructor(f,g=Object.assign({},Rs),v){this.parameters=g,this.type=Vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(v),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;B(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ur:new ay,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(M=>{const Z=de=>{!de||(f.tokenChangeListeners.delete(Z),M(de))};f.tokenChangeListeners.add(Z),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=vn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){B(at()&&!Oi(),f.auth,"internal-error"),yield function es(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ms(y){return Fn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class pl{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Io._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ya(){return(ya=(0,d.Z)(function*(y,f,g){const v=ot(y),T=yield Ar(v,f,(0,P.m9)(g));return new pl(T,M=>an(v,M))})).apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y);yield Zt(!1,v,"phone");const T=yield Ar(v.auth,f,(0,P.m9)(g));return new pl(T,M=>Yn(v,M))})).apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y),T=yield Ar(v.auth,f,(0,P.m9)(g));return new pl(T,M=>Wi(v,M))})).apply(this,arguments)}function Ar(y,f,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let M;if(B("string"==typeof T,y,"argument-error"),B(g.type===Vc,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Z=M.session;if("phoneNumber"in M)return B("enroll"===Z.type,y,"internal-error"),(yield Pc(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{B("signin"===Z.type,y,"internal-error");const de=(null===(v=M.multiFactorHint)||void 0===v?void 0:v.uid)||M.multiFactorUid;return B(de,y,"missing-multi-factor-info"),(yield Xn(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield _p(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return Z}}finally{g._reset()}})).apply(this,arguments)}function ts(){return(ts=(0,d.Z)(function*(y,f){yield ua((0,P.m9)(y),f)})).apply(this,arguments)}let Ns=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=ot(g)}verifyPhoneNumber(g,v){return Ar(this.auth,g,(0,P.m9)(v))}static credential(g,v){return Io._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?Io._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function ns(y,f){return f?J(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Vo extends fi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Es(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Es(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Es(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function At(y){return Kn(y.auth,new Vo(y),y.bypassAuthState)}function jc(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),za(g,new Vo(y),y.bypassAuthState)}function Uo(y){return dr.apply(this,arguments)}function dr(){return(dr=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),ua(g,new Vo(y),y.bypassAuthState)})).apply(this,arguments)}class va{constructor(f,g,v,T,M=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:M,tenantId:Z,error:de,type:ke}=f;if(de)return void g.reject(de);const Qe={auth:g.auth,requestUri:v,sessionId:T,tenantId:Z||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Qe))}catch(ct){g.reject(ct)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return At;case"linkViaPopup":case"linkViaRedirect":return Uo;case"reauthViaPopup":case"reauthViaRedirect":return jc;default:Ce(this.auth,"internal-error")}}resolve(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Bo=new Wt(2e3,1e4);function rs(){return(rs=(0,d.Z)(function*(y,f,g){const v=ot(y);Ue(y,f,lr);const T=ns(v,g);return new Hc(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function uu(){return(uu=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y);Ue(v.auth,f,lr);const T=ns(v.auth,g);return new Hc(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function Fi(){return(Fi=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y);Ue(v.auth,f,lr);const T=ns(v.auth,g);return new Hc(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Hc=(()=>{class y extends va{constructor(g,v,T,M,Z){super(g,v,M,Z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const v=yield g.execute();return B(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,d.Z)(function*(){z(1===g.filter.length,"Popup operations only handle one event");const v=No();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Ee(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Bo.get())};g()}}return y.currentPopupAction=null,y})();const hr=new Map;class gl extends va{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let v=hr.get(g.auth._key());if(!v){try{const M=(yield function fh(y,f){return Os.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(M)}catch(T){v=()=>Promise.reject(T)}hr.set(g.auth._key(),v)}return g.bypassAuthState||hr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Os(){return(Os=(0,d.Z)(function*(y,f){const g=F(f),v=x(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function jo(y,f){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(y,f){return x(y)._set(F(f),"true")})).apply(this,arguments)}function D(y,f){hr.set(y._key(),f)}function x(y){return J(y._redirectPersistence)}function F(y){return Rn("pendingRedirect",y.config.apiKey,y.name)}function fe(){return(fe=(0,d.Z)(function*(y,f,g){const v=ot(y);Ue(y,f,lr);const T=ns(v,g);return yield jo(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y);Ue(v.auth,f,lr);const T=ns(v.auth,g);yield jo(T,v.auth);const M=yield fr(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(y,f,g){const v=(0,P.m9)(y);Ue(v.auth,f,lr);const T=ns(v.auth,g);yield Zt(!1,v,f.providerId),yield jo(T,v.auth);const M=yield fr(v);return T._openRedirect(v.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(y,f){return yield ot(y)._initializationPromise,Li(y,f,!1)})).apply(this,arguments)}function Li(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,d.Z)(function*(y,f,g=!1){const v=ot(y),T=ns(v,f),Z=yield new gl(v,T,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield v._persistUserIfCurrent(Z.user),yield v._setRedirectUser(null,f)),Z})).apply(this,arguments)}function fr(y){return ss.apply(this,arguments)}function ss(){return(ss=(0,d.Z)(function*(y){const f=No(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class ml{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function qc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yl(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!yl(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(Ee(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gc(f))}saveEventToCache(f){this.cachedEventUids.add(Gc(f)),this.lastProcessedEventTime=Date.now()}}function Gc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function yl({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function ph(y){return gh.apply(this,arguments)}function gh(){return(gh=(0,d.Z)(function*(y,f={}){return xt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Zc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lu=/^https?/;function mh(){return(mh=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ph(y);for(const g of f)try{if(p0(g))return}catch(v){}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function p0(y){const f=Ne(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===v}if(!lu.test(g))return!1;if(Zc.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Sp=new Wt(3e4,6e4);function yh(){const y=vn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let cu=null;function uo(y){return cu=cu||function xp(y){return new Promise((f,g)=>{var v,T,M;function Z(){yh(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{yh(),g(Ee(y,"network-request-failed"))},timeout:Sp.get()})}if(null===(T=null===(v=vn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=vn().gapi)||void 0===M?void 0:M.load)){const de=Xi("iframefcb");return vn()[de]=()=>{gapi.load?Z():g(Ee(y,"network-request-failed"))},oo(`https://apis.google.com/js/api.js?onload=${de}`).catch(ke=>g(ke))}Z()}}).catch(f=>{throw cu=null,f})}(y),cu}const du=new Wt(5e3,15e3),hu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mp(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?mn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},T=fu.get(y.config.apiHost);T&&(v.eid=T);const M=y._getFrameworks();return M.length&&(v.fw=M.join(",")),`${g}?${(0,P.xO)(v).slice(1)}`}function lo(){return lo=(0,d.Z)(function*(y){const f=yield uo(y),g=vn().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:Mp(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hu,dontclear:!0},v=>new Promise(function(){var T=(0,d.Z)(function*(M,Z){yield v.restyle({setHideOnLeave:!1});const de=Ee(y,"network-request-failed"),ke=vn().setTimeout(()=>{Z(de)},du.get());function Qe(){vn().clearTimeout(ke),M(v)}v.ping(Qe).then(Qe,()=>{Z(de)})});return function(M,Z){return T.apply(this,arguments)}}()))}),lo.apply(this,arguments)}const Wc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Ei(y,f,g,v,T,M){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(f instanceof lr){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,P.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ke,Qe]of Object.entries(M||{}))Z[ke]=Qe}if(f instanceof Zs){const ke=f.getScopes().filter(Qe=>""!==Qe);ke.length>0&&(Z.scopes=ke.join(","))}y.tenantId&&(Z.tid=y.tenantId);const de=Z;for(const ke of Object.keys(de))void 0===de[ke]&&delete de[ke];return`${function co({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(de).slice(1)}`}const wl="webStorageSupport";class Jc extends class m0{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Jc(f)}_finalizeEnroll(f,g,v){return function Dp(y,f){return xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",$t(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function hl(y,f){return xt(y,"POST","/v2/accounts/mfaSignIn:finalize",$t(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let y0=(()=>{class y{constructor(){}static assertion(g){return Jc._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var vh="@firebase/auth";class Pp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wa(){return window}function Vi(){return(Vi=(0,d.Z)(function*(y,f,g){var v;const{BuildInfo:T}=wa();z(f.sessionId,"AuthEvent did not contain a session ID");const M=yield _0(f.sessionId),Z={};return Pr()?Z.ibi=T.packageName:Ir()?Z.apn=T.packageName:Ce(y,"operation-not-supported-in-this-environment"),T.displayName&&(Z.appDisplayName=T.displayName),Z.sessionId=M,Ei(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,Z)})).apply(this,arguments)}function ed(){return(ed=(0,d.Z)(function*(y){const{BuildInfo:f}=wa(),g={};Pr()?g.iosBundleId=f.packageName:Ir()?g.androidPackageName=f.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield ph(y,g)})).apply(this,arguments)}function kp(){return(kp=(0,d.Z)(function*(y,f,g){const{cordova:v}=wa();let T=()=>{};try{yield new Promise((M,Z)=>{let de=null;function ke(){var lt;M();const En=null===(lt=v.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof En&&En(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Qe(){de||(de=window.setTimeout(()=>{Z(Ee(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(ke),document.addEventListener("resume",Qe,!1),Ir()&&document.addEventListener("visibilitychange",ct,!1),T=()=>{f.removePassiveListener(ke),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",ct,!1),de&&window.clearTimeout(de)}})}finally{T()}})).apply(this,arguments)}function _0(y){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,d.Z)(function*(y){const f=wh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wh(y){if(z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function hy(y){(0,oe._registerComponent)(new ae.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:M,authDomain:Z}=v.options;return((de,ke)=>{B(M&&!M.includes(":"),"invalid-api-key",{appName:de.name}),B(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:de.name});const Qe={apiKey:M,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wo(y)},ct=new qe(de,ke,Qe);return function se(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(J);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ct,g),ct})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ae.wA("auth-internal",f=>{const g=ot(f.getProvider("auth").getImmediate());return new Pp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(vh,"0.20.2",function Xc(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(vh,"0.20.2","esm2017")}("Browser");class nd extends ml{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function gu(y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,d.Z)(function*(y){const f=yield Tl()._get(mu(y));return f&&(yield Tl()._remove(mu(y))),f})).apply(this,arguments)}function Lp(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function Tl(){return J(Cr)}function mu(y){return Rn("authEvent",y.config.apiKey,y.name)}function Br(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Ia(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function $o(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function jp(y=(0,P.z$)()){return!("file:"!==$o()&&"ionic:"!==$o()&&"capacitor:"!==$o()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dh(){try{const y=self.localStorage,f=No();if(y)return y.setItem(f,"1"),y.removeItem(f),!function sd(y=(0,P.z$)()){return function yu(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function qn(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return od()&&(0,P.hl)()}return!1}function od(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function tr(){return(function Bp(){return"http:"===$o()||"https:"===$o()}()||(0,P.ru)()||jp())&&!function bh(){return(0,P.b$)()||(0,P.UG)()}()&&Dh()&&!od()}function _u(){return jp()&&"undefined"!=typeof document}function Sl(){return(Sl=(0,d.Z)(function*(){return!!_u()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const jr={LOCAL:"local",NONE:"none",SESSION:"session"},Ho=B,Th="persistence";function ba(y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,d.Z)(function*(y){yield y._initializationPromise;const f=ad(),g=Rn(Th,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function ad(){var y;try{return(null===(y=function vy(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const wy=B;class Ui{constructor(){this.browserResolver=J(class dy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Li,this._overrideRedirectResult=D}_openPopup(f,g,v,T){var M=this;return(0,d.Z)(function*(){var Z;z(null===(Z=M.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const de=Ei(f,g,v,Ne(),T);return function El(y,f,g,v=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),Z=Math.max((window.screen.availWidth-v)/2,0).toString();let de="";const ke=Object.assign(Object.assign({},Wc),{width:v.toString(),height:T.toString(),top:M,left:Z}),Qe=(0,P.z$)().toLowerCase();g&&(de=ra(Qe)?"_blank":g),na(Qe)&&(f=f||"http://localhost",ke.scrollbars="yes");const ct=Object.entries(ke).reduce((En,[ri,vu])=>`${En}${ri}=${vu},`,"");if(function Gs(y=(0,P.z$)()){var f;return Pr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==de)return function uy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",de),new Rp(null);const lt=window.open(f||"",de,ct);B(lt,y,"popup-blocked");try{lt.focus()}catch(En){}return new Rp(lt)}(f,de,No())})()}_openRedirect(f,g,v,T){var M=this;return(0,d.Z)(function*(){return yield M._originValidation(f),function Ts(y){vn().location.href=y}(Ei(f,g,v,Ne(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:M}=this.eventManagers[g];return T?Promise.resolve(T):(z(M,"If manager is not set, promise should be"),M)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const v=yield function g0(y){return lo.apply(this,arguments)}(f),T=new ml(f);return v.register("authEvent",M=>(B(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(wl,{type:wl},T=>{var M;const Z=null===(M=null==T?void 0:T[0])||void 0===M?void 0:M[wl];void 0!==Z&&g(!!Z),Ce(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function _l(y){return mh.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ms()||$a()||Pr()}}),this.cordovaResolver=J(class Vp{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Li,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,d.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new nd(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ce(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var M=this;return(0,d.Z)(function*(){!function pu(y){var f,g,v,T,M,Z,de,ke,Qe,ct;const lt=wa();B("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(M=null===(T=null===(v=null==lt?void 0:lt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ke=null===(de=null===(Z=null==lt?void 0:lt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===de?void 0:de.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(ct=null===(Qe=null==lt?void 0:lt.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield M._initialize(f);yield Z.initialized(),Z.resetRedirect(),function b(){hr.clear()}(),yield M._originValidation(f);const de=function rd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Lp(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,v,T);yield function Fp(y,f){return Tl()._set(mu(y),f)}(f,de);const ke=yield function Eh(y,f,g){return Vi.apply(this,arguments)}(f,de,g),Qe=yield function td(y){const{cordova:f}=wa();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function gc(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(ke);return function ho(y,f,g){return kp.apply(this,arguments)}(f,Z,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function bl(y){return ed.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:M}=wa(),Z=setTimeout((0,d.Z)(function*(){yield gu(f),g.onEvent(Ia())}),500),de=function(){var ct=(0,d.Z)(function*(lt){clearTimeout(Z);const En=yield gu(f);let ri=null;En&&(null==lt?void 0:lt.url)&&(ri=function py(y,f){var g,v;const T=function Al(y){const f=Br(y),g=f.link?decodeURIComponent(f.link):void 0,v=Br(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Br(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const M=Br(T),Z=M.firebaseError?function gy(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,de=null===(v=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],ke=de?Ee(de):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(En,lt.url)),g.onEvent(ri||Ia())});return function(En){return ct.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,de);const ke=T,Qe=`${M.packageName.toLowerCase()}://`;wa().handleOpenURL=function(){var ct=(0,d.Z)(function*(lt){if(lt.toLowerCase().startsWith(Qe)&&de({url:lt}),"function"==typeof ke)try{ke(lt)}catch(En){console.error(En)}});return function(lt){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Li,this._overrideRedirectResult=D}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var M=this;return(0,d.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return _u()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Ch(){return Sl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ud(y){return y.unwrap()}function by(y){return $p(y)}function $p(y){const{_tokenResponse:f}=y instanceof P.ZR?y.customData:y;if(!f)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ns.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=Dc;break;case"facebook.com":v=bo;break;case"github.com":v=ah;break;case"twitter.com":v=Tc;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:Z,pendingToken:de,nonce:ke}=f;return M||Z||T||de?de?g.startsWith("saml.")?zs._create(g,de):zi._fromParams({providerId:g,signInMethod:g,pendingToken:de,idToken:T,accessToken:M}):new xi(g).credential({idToken:T,accessToken:M,rawNonce:ke}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ni(y,f){return f.catch(g=>{throw g instanceof P.ZR&&function ld(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Dy(y,function Pn(y,f){var g;const v=(0,P.m9)(y),T=f;return B(f.customData.operationType,v,"argument-error"),B(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Xs._fromError(v,T)}(y,f));else if(v){const T=$p(f),M=f;T&&(M.credential=T,M.tenantId=v.tenantId||void 0,M.email=v.email||void 0,M.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:by(g),additionalUserInfo:Hn(g),user:os.getOrCreate(T)}})}function Sh(y,f){return xh.apply(this,arguments)}function xh(){return(xh=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>ni(y,g.confirm(v))}})).apply(this,arguments)}class Dy{constructor(f,g){this.resolver=g,this.auth=function Iy(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return ni(ud(this.auth),this.resolver.resolveSignIn(f))}}class os{constructor(f){this._delegate=f,this.multiFactor=function Cp(y){const f=(0,P.m9)(y);return iu.has(f)||iu.set(f,Ro._fromUser(f)),iu.get(f)}(f)}static getOrCreate(f){return os.USER_MAP.has(f)||os.USER_MAP.set(f,new os(f)),os.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return ni(g.auth,Yn(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,d.Z)(function*(){return Sh(v.auth,function au(y,f,g){return Bc.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return ni(g.auth,function $c(y,f,g){return Fi.apply(this,arguments)}(g._delegate,f,Ui))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield ba(ot(g.auth)),function Lt(y,f,g){return function wt(y,f,g){return An.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ui)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return ni(g.auth,Wi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Sh(this.auth,function hh(y,f,g){return Tr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return ni(this.auth,function _i(y,f,g){return uu.apply(this,arguments)}(this._delegate,f,Ui))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield ba(ot(g.auth)),function Ke(y,f,g){return function tt(y,f,g){return ut.apply(this,arguments)}(y,f,g)}(g._delegate,f,Ui)})()}sendEmailVerification(f){return function gi(y,f){return ol.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function uh(y,f){return Jt.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xc(y,f){return nu((0,P.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Mc(y,f){return nu((0,P.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Lo(y,f){return ts.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function eu(y,f){return tu.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Ja(y,f,g){return Xa.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}os.USER_MAP=new WeakMap;const Ml=B;let Hp=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ml(T,"invalid-api-key",{appName:g.name}),Ml(T,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?Ui:void 0;this._delegate=v.initialize({options:{persistence:Cy(T,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?os.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function Fr(y,f,g){const v=ot(y);B(v._canInitEmulator,v,"emulator-config-failed"),B(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),M=Di(f),{host:Z,port:de}=function Dn(y){const f=Di(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const M=T[1];return{host:M,port:Ci(v.substr(M.length+1))}}{const[M,Z]=v.split(":");return{host:M,port:Ci(Z)}}}(f);v.config.emulator={url:`${M}//${Z}${null===de?"":`:${de}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:Z,port:de,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function So(y,f){return Te.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Mt(this._delegate,g)}confirmPasswordReset(g,v){return function Ka(y,f,g){return nl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,d.Z)(function*(){return ni(T._delegate,function Ys(y,f,g){return ei.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Qa(y,f){return Ds.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Sc(y,f){const g=Za.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){Ml(tr(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Gn(y,f){return is.apply(this,arguments)}(g._delegate,Ui);return v?ni(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Up(y,f){ot(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:M,error:Z,complete:de}=Gp(g,v,T);return this._delegate.onAuthStateChanged(M,Z,de)}onIdTokenChanged(g,v,T){const{next:M,error:Z,complete:de}=Gp(g,v,T);return this._delegate.onIdTokenChanged(M,Z,de)}sendSignInLinkToEmail(g,v){return function il(y,f,g){return sl.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function tl(y,f,g){return Wa.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,d.Z)(function*(){let T;switch(function Ey(y,f){Ho(Object.values(jr).includes(f),y,"invalid-persistence-type"),(0,P.b$)()?Ho(f!==jr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Ho(f===jr.NONE,y,"unsupported-persistence-type"):od()?Ho(f===jr.NONE||f===jr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Ho(f===jr.NONE||Dh(),y,"unsupported-persistence-type")}(v._delegate,g),g){case jr.SESSION:T=kn;break;case jr.LOCAL:T=(yield J(io)._isAvailable())?io:Cr;break;case jr.NONE:T=yt;break;default:return Ce("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ni(this._delegate,function Ac(y){return Qu.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ni(this._delegate,an(this._delegate,g))}signInWithCustomToken(g){return ni(this._delegate,function Ao(y,f){return pt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return ni(this._delegate,function rl(y,f,g){return an((0,P.m9)(y),bc.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return ni(this._delegate,function Ip(y,f,g){return Ki.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Sh(this._delegate,function Tn(y,f,g){return ya.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,d.Z)(function*(){return Ml(tr(),v._delegate,"operation-not-supported-in-this-environment"),ni(v._delegate,function Ap(y,f,g){return rs.apply(this,arguments)}(v._delegate,g,Ui))})()}signInWithRedirect(g){var v=this;return(0,d.Z)(function*(){return Ml(tr(),v._delegate,"operation-not-supported-in-this-environment"),yield ba(v._delegate),function W(y,f,g){return function te(y,f,g){return fe.apply(this,arguments)}(y,f,g)}(v._delegate,g,Ui)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function on(y,f){return Ya.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=jr,y})();function Gp(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:Z=>T(Z&&os.getOrCreate(Z)),error:f,complete:g}}function Cy(y,f){const g=function xl(y,f){const g=ad();if(!g)return[];const v=Rn(Th,y,f);switch(g.getItem(v)){case jr.NONE:return[yt];case jr.LOCAL:return[io,kn];case jr.SESSION:return[kn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(io)&&g.push(io),"undefined"!=typeof window)for(const v of[Cr,kn])g.includes(v)||g.push(v);return g.includes(yt)||g.push(yt),g}class Mh{constructor(){this.providerId="phone",this._delegate=new Ns(ud(Q.Z.auth()))}static credential(f,g){return Ns.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Mh.PHONE_SIGN_IN_METHOD=Ns.PHONE_SIGN_IN_METHOD,Mh.PROVIDER_ID=Ns.PROVIDER_ID;const qp=B;class v0{constructor(f,g,v=Q.Z.app()){var T;qp(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Uc(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Da(y){y.INTERNAL.registerComponent(new ae.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Hp(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:bc,FacebookAuthProvider:bo,GithubAuthProvider:ah,GoogleAuthProvider:Dc,OAuthProvider:xi,SAMLAuthProvider:br,PhoneAuthProvider:Mh,PhoneMultiFactorGenerator:y0,RecaptchaVerifier:v0,TwitterAuthProvider:Tc,Auth:Hp,AuthCredential:fi,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(Q.Z)},8306:(Je,we,O)=>{O.d(we,{y:()=>j});var d=O(2961),Q=O(727),P=O(8822),oe=O(4671);var ae=O(2416),ie=O(576),ce=O(2806);let j=(()=>{class Se{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Se;return he.source=this,he.operator=Le,he}subscribe(Le,he,be){const Ge=function He(Se){return Se&&Se instanceof d.Lv||function X(Se){return Se&&(0,ie.m)(Se.next)&&(0,ie.m)(Se.error)&&(0,ie.m)(Se.complete)}(Se)&&(0,Q.Nn)(Se)}(Le)?Le:new d.Hp(Le,he,be);return(0,ce.x)(()=>{const{operator:ze,source:Ce}=this;Ge.add(ze?ze.call(Ge,Ce):Ce?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=U(he))((be,Ge)=>{const ze=new d.Hp({next:Ce=>{try{Le(Ce)}catch(Ee){Ge(Ee),ze.unsubscribe()}},error:Ge,complete:be});this.subscribe(ze)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[P.L](){return this}pipe(...Le){return function pe(Se){return 0===Se.length?oe.y:1===Se.length?Se[0]:function(Le){return Se.reduce((he,be)=>be(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=U(Le))((he,be)=>{let Ge;this.subscribe(ze=>Ge=ze,ze=>be(ze),()=>he(Ge))})}}return Se.create=Re=>new Se(Re),Se})();function U(Se){var Re;return null!==(Re=null!=Se?Se:ae.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Je,we,O)=>{O.d(we,{x:()=>ae});var d=O(8306),Q=O(727);const oe=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ne=O(8737),pe=O(2806);let ae=(()=>{class ce extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const X=new ie(this,this);return X.operator=U,X}_throwIfClosed(){if(this.closed)throw new oe}next(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(U)}})}error(U){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:X}=this;for(;X.length;)X.shift().error(U)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:X,isStopped:He,observers:Se}=this;return X||He?Q.Lc:(this.currentObservers=null,Se.push(U),new Q.w0(()=>{this.currentObservers=null,(0,ne.P)(Se,U)}))}_checkFinalizedStatuses(U){const{hasError:X,thrownError:He,isStopped:Se}=this;X?U.error(He):Se&&U.complete()}asObservable(){const U=new d.y;return U.source=this,U}}return ce.create=(j,U)=>new ie(j,U),ce})();class ie extends ae{constructor(j,U){super(),this.destination=j,this.source=U}next(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===X||X.call(U,j)}error(j){var U,X;null===(X=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===X||X.call(U,j)}complete(){var j,U;null===(U=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===U||U.call(j)}_subscribe(j){var U,X;return null!==(X=null===(U=this.source)||void 0===U?void 0:U.subscribe(j))&&void 0!==X?X:Q.Lc}}},2961:(Je,we,O)=>{O.d(we,{Hp:()=>Le,Lv:()=>X});var d=O(576),Q=O(727),P=O(2416),oe=O(7849);function ne(){}const pe=ce("C",void 0,void 0);function ce(Ce,Ee,Ie){return{kind:Ce,value:Ee,error:Ie}}var j=O(3410),U=O(2806);class X extends Q.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,Q.Nn)(Ee)&&Ee.add(this)):this.destination=ze}static create(Ee,Ie,Ue){return new Le(Ee,Ie,Ue)}next(Ee){this.isStopped?Ge(function ie(Ce){return ce("N",Ce,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?Ge(function ae(Ce){return ce("E",void 0,Ce)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?Ge(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(Ce,Ee){return He.call(Ce,Ee)}class Re{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(Ue){he(Ue)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(Ue){he(Ue)}else he(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){he(Ie)}}}class Le extends X{constructor(Ee,Ie,Ue){let Ve;if(super(),(0,d.m)(Ee)||!Ee)Ve={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=Ue?Ue:void 0};else{let B;this&&P.v.useDeprecatedNextContext?(B=Object.create(Ee),B.unsubscribe=()=>this.unsubscribe(),Ve={next:Ee.next&&Se(Ee.next,B),error:Ee.error&&Se(Ee.error,B),complete:Ee.complete&&Se(Ee.complete,B)}):Ve=Ee}this.destination=new Re(Ve)}}function he(Ce){P.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(Ce):(0,oe.h)(Ce)}function Ge(Ce,Ee){const{onStoppedNotification:Ie}=P.v;Ie&&j.z.setTimeout(()=>Ie(Ce,Ee))}const ze={closed:!0,next:ne,error:function be(Ce){throw Ce},complete:ne}},727:(Je,we,O)=>{O.d(we,{Lc:()=>pe,w0:()=>ne,Nn:()=>ae});var d=O(576);const P=(0,O(3888).d)(ce=>function(U){ce(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((X,He)=>`${He+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var oe=O(8737);class ne{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const Se of U)Se.remove(this);else U.remove(this);const{initialTeardown:X}=this;if((0,d.m)(X))try{X()}catch(Se){j=Se instanceof P?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{ie(Se)}catch(Re){j=null!=j?j:[],Re instanceof P?j=[...j,...Re.errors]:j.push(Re)}}if(j)throw new P(j)}}add(j){var U;if(j&&j!==this)if(this.closed)ie(j);else{if(j instanceof ne){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push(j)}}_hasParent(j){const{_parentage:U}=this;return U===j||Array.isArray(U)&&U.includes(j)}_addParent(j){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push(j),U):U?[U,j]:j}_removeParent(j){const{_parentage:U}=this;U===j?this._parentage=null:Array.isArray(U)&&(0,oe.P)(U,j)}remove(j){const{_finalizers:U}=this;U&&(0,oe.P)(U,j),j instanceof ne&&j._removeParent(this)}}ne.EMPTY=(()=>{const ce=new ne;return ce.closed=!0,ce})();const pe=ne.EMPTY;function ae(ce){return ce instanceof ne||ce&&"closed"in ce&&(0,d.m)(ce.remove)&&(0,d.m)(ce.add)&&(0,d.m)(ce.unsubscribe)}function ie(ce){(0,d.m)(ce)?ce():ce.unsubscribe()}},2416:(Je,we,O)=>{O.d(we,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,O)=>{O.d(we,{E:()=>Q});const Q=new(O(8306).y)(ne=>ne.complete())},8996:(Je,we,O)=>{O.d(we,{D:()=>Ee});var d=O(8421),Q=O(5363),P=O(9468),pe=O(8306),ie=O(2202),ce=O(576),j=O(9672);function X(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new pe.y(Ve=>{(0,j.f)(Ve,Ue,()=>{const B=Ie[Symbol.asyncIterator]();(0,j.f)(Ve,Ue,()=>{B.next().then(ve=>{ve.done?Ve.complete():Ve.next(ve.value)})},0,!0)})})}var He=O(3670),Se=O(8239),Re=O(1144),Le=O(6495),he=O(2206),be=O(4532),Ge=O(3260);function Ee(Ie,Ue){return Ue?function Ce(Ie,Ue){if(null!=Ie){if((0,He.c)(Ie))return function oe(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,P.R)(Ue),(0,Q.Q)(Ue))}(Ie,Ue);if((0,Re.z)(Ie))return function ae(Ie,Ue){return new pe.y(Ve=>{let B=0;return Ue.schedule(function(){B===Ie.length?Ve.complete():(Ve.next(Ie[B++]),Ve.closed||this.schedule())})})}(Ie,Ue);if((0,Se.t)(Ie))return function ne(Ie,Ue){return(0,d.Xf)(Ie).pipe((0,P.R)(Ue),(0,Q.Q)(Ue))}(Ie,Ue);if((0,he.D)(Ie))return X(Ie,Ue);if((0,Le.T)(Ie))return function U(Ie,Ue){return new pe.y(Ve=>{let B;return(0,j.f)(Ve,Ue,()=>{B=Ie[ie.h](),(0,j.f)(Ve,Ue,()=>{let ve,z;try{({value:ve,done:z}=B.next())}catch(re){return void Ve.error(re)}z?Ve.complete():Ve.next(ve)},0,!0)}),()=>(0,ce.m)(null==B?void 0:B.return)&&B.return()})}(Ie,Ue);if((0,Ge.L)(Ie))return function ze(Ie,Ue){return X((0,Ge.Q)(Ie),Ue)}(Ie,Ue)}throw(0,be.z)(Ie)}(Ie,Ue):(0,d.Xf)(Ie)}},8421:(Je,we,O)=>{O.d(we,{Xf:()=>He});var d=O(655),Q=O(1144),P=O(8239),oe=O(8306),ne=O(3670),pe=O(2206),ae=O(4532),ie=O(6495),ce=O(3260),j=O(576),U=O(7849),X=O(8822);function He(Ce){if(Ce instanceof oe.y)return Ce;if(null!=Ce){if((0,ne.c)(Ce))return function Se(Ce){return new oe.y(Ee=>{const Ie=Ce[X.L]();if((0,j.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ce);if((0,Q.z)(Ce))return function Re(Ce){return new oe.y(Ee=>{for(let Ie=0;Ie<Ce.length&&!Ee.closed;Ie++)Ee.next(Ce[Ie]);Ee.complete()})}(Ce);if((0,P.t)(Ce))return function Le(Ce){return new oe.y(Ee=>{Ce.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,U.h)})}(Ce);if((0,pe.D)(Ce))return be(Ce);if((0,ie.T)(Ce))return function he(Ce){return new oe.y(Ee=>{for(const Ie of Ce)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Ce);if((0,ce.L)(Ce))return function Ge(Ce){return be((0,ce.Q)(Ce))}(Ce)}throw(0,ae.z)(Ce)}function be(Ce){return new oe.y(Ee=>{(function ze(Ce,Ee){var Ie,Ue,Ve,B;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,d.KL)(Ce);!(Ue=yield Ie.next()).done;)if(Ee.next(Ue.value),Ee.closed)return}catch(ve){Ve={error:ve}}finally{try{Ue&&!Ue.done&&(B=Ie.return)&&(yield B.call(Ie))}finally{if(Ve)throw Ve.error}}Ee.complete()})})(Ce,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(Je,we,O)=>{O.d(we,{T:()=>pe});var d=O(8189),Q=O(8421),P=O(515),oe=O(7669),ne=O(8996);function pe(...ae){const ie=(0,oe.yG)(ae),ce=(0,oe._6)(ae,1/0),j=ae;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,d.J)(ce)((0,ne.D)(j,ie)):P.E}},5403:(Je,we,O)=>{O.d(we,{x:()=>Q});var d=O(2961);function Q(oe,ne,pe,ae,ie){return new P(oe,ne,pe,ae,ie)}class P extends d.Lv{constructor(ne,pe,ae,ie,ce,j){super(ne),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=pe?function(U){try{pe(U)}catch(X){ne.error(X)}}:super._next,this._error=ie?function(U){try{ie(U)}catch(X){ne.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ae?function(){try{ae()}catch(U){ne.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ne=this.onFinalize)||void 0===ne||ne.call(this))}}}},4004:(Je,we,O)=>{O.d(we,{U:()=>P});var d=O(4482),Q=O(5403);function P(oe,ne){return(0,d.e)((pe,ae)=>{let ie=0;pe.subscribe((0,Q.x)(ae,ce=>{ae.next(oe.call(ne,ce,ie++))}))})}},8189:(Je,we,O)=>{O.d(we,{J:()=>P});var d=O(5577),Q=O(4671);function P(oe=1/0){return(0,d.z)(Q.y,oe)}},5577:(Je,we,O)=>{O.d(we,{z:()=>ie});var d=O(4004),Q=O(8421),P=O(4482),oe=O(9672),ne=O(5403),ae=O(576);function ie(ce,j,U=1/0){return(0,ae.m)(j)?ie((X,He)=>(0,d.U)((Se,Re)=>j(X,Se,He,Re))((0,Q.Xf)(ce(X,He))),U):("number"==typeof j&&(U=j),(0,P.e)((X,He)=>function pe(ce,j,U,X,He,Se,Re,Le){const he=[];let be=0,Ge=0,ze=!1;const Ce=()=>{ze&&!he.length&&!be&&j.complete()},Ee=Ue=>be<X?Ie(Ue):he.push(Ue),Ie=Ue=>{Se&&j.next(Ue),be++;let Ve=!1;(0,Q.Xf)(U(Ue,Ge++)).subscribe((0,ne.x)(j,B=>{null==He||He(B),Se?Ee(B):j.next(B)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(be--;he.length&&be<X;){const B=he.shift();Re?(0,oe.f)(j,Re,()=>Ie(B)):Ie(B)}Ce()}catch(B){j.error(B)}}))};return ce.subscribe((0,ne.x)(j,Ee,()=>{ze=!0,Ce()})),()=>{null==Le||Le()}}(X,He,ce,U)))}},5363:(Je,we,O)=>{O.d(we,{Q:()=>oe});var d=O(9672),Q=O(4482),P=O(5403);function oe(ne,pe=0){return(0,Q.e)((ae,ie)=>{ae.subscribe((0,P.x)(ie,ce=>(0,d.f)(ie,ne,()=>ie.next(ce),pe),()=>(0,d.f)(ie,ne,()=>ie.complete(),pe),ce=>(0,d.f)(ie,ne,()=>ie.error(ce),pe)))})}},3099:(Je,we,O)=>{O.d(we,{B:()=>pe});var d=O(8996),Q=O(5698),P=O(7579),oe=O(2961),ne=O(4482);function pe(ie={}){const{connector:ce=(()=>new P.x),resetOnError:j=!0,resetOnComplete:U=!0,resetOnRefCountZero:X=!0}=ie;return He=>{let Se=null,Re=null,Le=null,he=0,be=!1,Ge=!1;const ze=()=>{null==Re||Re.unsubscribe(),Re=null},Ce=()=>{ze(),Se=Le=null,be=Ge=!1},Ee=()=>{const Ie=Se;Ce(),null==Ie||Ie.unsubscribe()};return(0,ne.e)((Ie,Ue)=>{he++,!Ge&&!be&&ze();const Ve=Le=null!=Le?Le:ce();Ue.add(()=>{he--,0===he&&!Ge&&!be&&(Re=ae(Ee,X))}),Ve.subscribe(Ue),Se||(Se=new oe.Hp({next:B=>Ve.next(B),error:B=>{Ge=!0,ze(),Re=ae(Ce,j,B),Ve.error(B)},complete:()=>{be=!0,ze(),Re=ae(Ce,U),Ve.complete()}}),(0,d.D)(Ie).subscribe(Se))})(He)}}function ae(ie,ce,...j){return!0===ce?(ie(),null):!1===ce?null:ce(...j).pipe((0,Q.q)(1)).subscribe(()=>ie())}},9468:(Je,we,O)=>{O.d(we,{R:()=>Q});var d=O(4482);function Q(P,oe=0){return(0,d.e)((ne,pe)=>{pe.add(P.schedule(()=>ne.subscribe(pe),oe))})}},5698:(Je,we,O)=>{O.d(we,{q:()=>oe});var d=O(515),Q=O(4482),P=O(5403);function oe(ne){return ne<=0?()=>d.E:(0,Q.e)((pe,ae)=>{let ie=0;pe.subscribe((0,P.x)(ae,ce=>{++ie<=ne&&(ae.next(ce),ne<=ie&&ae.complete())}))})}},8505:(Je,we,O)=>{O.d(we,{b:()=>ne});var d=O(576),Q=O(4482),P=O(5403),oe=O(4671);function ne(pe,ae,ie){const ce=(0,d.m)(pe)||ae||ie?{next:pe,error:ae,complete:ie}:pe;return ce?(0,Q.e)((j,U)=>{var X;null===(X=ce.subscribe)||void 0===X||X.call(ce);let He=!0;j.subscribe((0,P.x)(U,Se=>{var Re;null===(Re=ce.next)||void 0===Re||Re.call(ce,Se),U.next(Se)},()=>{var Se;He=!1,null===(Se=ce.complete)||void 0===Se||Se.call(ce),U.complete()},Se=>{var Re;He=!1,null===(Re=ce.error)||void 0===Re||Re.call(ce,Se),U.error(Se)},()=>{var Se,Re;He&&(null===(Se=ce.unsubscribe)||void 0===Se||Se.call(ce)),null===(Re=ce.finalize)||void 0===Re||Re.call(ce)}))}):oe.y}},4408:(Je,we,O)=>{O.d(we,{o:()=>ne});var d=O(727);class Q extends d.w0{constructor(ae,ie){super()}schedule(ae,ie=0){return this}}const P={setInterval(pe,ae,...ie){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(pe,ae,...ie):setInterval(pe,ae,...ie)},clearInterval(pe){const{delegate:ae}=P;return((null==ae?void 0:ae.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=O(8737);class ne extends Q{constructor(ae,ie){super(ae,ie),this.scheduler=ae,this.work=ie,this.pending=!1}schedule(ae,ie=0){if(this.closed)return this;this.state=ae;const ce=this.id,j=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(j,ce,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(j,this.id,ie),this}requestAsyncId(ae,ie,ce=0){return P.setInterval(ae.flush.bind(ae,this),ce)}recycleAsyncId(ae,ie,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ie;P.clearInterval(ie)}execute(ae,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ae,ie);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ie){let j,ce=!1;try{this.work(ae)}catch(U){ce=!0,j=U||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ae,scheduler:ie}=this,{actions:ce}=ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ce,this),null!=ae&&(this.id=this.recycleAsyncId(ie,ae,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,O)=>{O.d(we,{v:()=>P});var d=O(6063);class Q{constructor(ne,pe=Q.now){this.schedulerActionCtor=ne,this.now=pe}schedule(ne,pe=0,ae){return new this.schedulerActionCtor(this,ne).schedule(ae,pe)}}Q.now=d.l.now;class P extends Q{constructor(ne,pe=Q.now){super(ne,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ne){const{actions:pe}=this;if(this._active)return void pe.push(ne);let ae;this._active=!0;do{if(ae=ne.execute(ne.state,ne.delay))break}while(ne=pe.shift());if(this._active=!1,ae){for(;ne=pe.shift();)ne.unsubscribe();throw ae}}}},4986:(Je,we,O)=>{O.d(we,{z:()=>P});var d=O(4408);const P=new(O(7565).v)(d.o)},6063:(Je,we,O)=>{O.d(we,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(Je,we,O)=>{O.d(we,{z:()=>d});const d={setTimeout(Q,P,...oe){const{delegate:ne}=d;return(null==ne?void 0:ne.setTimeout)?ne.setTimeout(Q,P,...oe):setTimeout(Q,P,...oe)},clearTimeout(Q){const{delegate:P}=d;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(Je,we,O)=>{O.d(we,{h:()=>Q});const Q=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,O)=>{O.d(we,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,O)=>{O.d(we,{_6:()=>pe,jO:()=>oe,yG:()=>ne});var d=O(576);function P(ae){return ae[ae.length-1]}function oe(ae){return(0,d.m)(P(ae))?ae.pop():void 0}function ne(ae){return function Q(ae){return ae&&(0,d.m)(ae.schedule)}(P(ae))?ae.pop():void 0}function pe(ae,ie){return"number"==typeof P(ae)?ae.pop():ie}},8737:(Je,we,O)=>{function d(Q,P){if(Q){const oe=Q.indexOf(P);0<=oe&&Q.splice(oe,1)}}O.d(we,{P:()=>d})},3888:(Je,we,O)=>{function d(Q){const oe=Q(ne=>{Error.call(ne),ne.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(we,{d:()=>d})},2806:(Je,we,O)=>{O.d(we,{O:()=>oe,x:()=>P});var d=O(2416);let Q=null;function P(ne){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!Q;if(pe&&(Q={errorThrown:!1,error:null}),ne(),pe){const{errorThrown:ae,error:ie}=Q;if(Q=null,ae)throw ie}}else ne()}function oe(ne){d.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ne)}},9672:(Je,we,O)=>{function d(Q,P,oe,ne=0,pe=!1){const ae=P.schedule(function(){oe(),pe?Q.add(this.schedule(null,ne)):this.unsubscribe()},ne);if(Q.add(ae),!pe)return ae}O.d(we,{f:()=>d})},4671:(Je,we,O)=>{function d(Q){return Q}O.d(we,{y:()=>d})},1144:(Je,we,O)=>{O.d(we,{z:()=>d});const d=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(Je,we,O)=>{O.d(we,{D:()=>Q});var d=O(576);function Q(P){return Symbol.asyncIterator&&(0,d.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Je,we,O)=>{function d(Q){return"function"==typeof Q}O.d(we,{m:()=>d})},3670:(Je,we,O)=>{O.d(we,{c:()=>P});var d=O(8822),Q=O(576);function P(oe){return(0,Q.m)(oe[d.L])}},6495:(Je,we,O)=>{O.d(we,{T:()=>P});var d=O(2202),Q=O(576);function P(oe){return(0,Q.m)(null==oe?void 0:oe[d.h])}},8239:(Je,we,O)=>{O.d(we,{t:()=>Q});var d=O(576);function Q(P){return(0,d.m)(null==P?void 0:P.then)}},3260:(Je,we,O)=>{O.d(we,{L:()=>oe,Q:()=>P});var d=O(655),Q=O(576);function P(ne){return(0,d.FC)(this,arguments,function*(){const ae=ne.getReader();try{for(;;){const{value:ie,done:ce}=yield(0,d.qq)(ae.read());if(ce)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ie)}}finally{ae.releaseLock()}})}function oe(ne){return(0,Q.m)(null==ne?void 0:ne.getReader)}},4482:(Je,we,O)=>{O.d(we,{A:()=>Q,e:()=>P});var d=O(576);function Q(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function P(oe){return ne=>{if(Q(ne))return ne.lift(function(pe){try{return oe(pe,this)}catch(ae){this.error(ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,we,O)=>{O.d(we,{h:()=>P});var d=O(2416),Q=O(3410);function P(oe){Q.z.setTimeout(()=>{const{onUnhandledError:ne}=d.v;if(!ne)throw oe;ne(oe)})}},4532:(Je,we,O)=>{function d(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>d})},655:(Je,we,O)=>{function oe(z,re){var J={};for(var ye in z)Object.prototype.hasOwnProperty.call(z,ye)&&re.indexOf(ye)<0&&(J[ye]=z[ye]);if(null!=z&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(ye=Object.getOwnPropertySymbols(z);se<ye.length;se++)re.indexOf(ye[se])<0&&Object.prototype.propertyIsEnumerable.call(z,ye[se])&&(J[ye[se]]=z[ye[se]])}return J}function ie(z,re,J,ye){return new(J||(J=Promise))(function(Ne,at){function kt(Wt){try{Ze(ye.next(Wt))}catch(mn){at(mn)}}function Nt(Wt){try{Ze(ye.throw(Wt))}catch(mn){at(mn)}}function Ze(Wt){Wt.done?Ne(Wt.value):function se(Ne){return Ne instanceof J?Ne:new J(function(at){at(Ne)})}(Wt.value).then(kt,Nt)}Ze((ye=ye.apply(z,re||[])).next())})}function he(z){return this instanceof he?(this.v=z,this):new he(z)}function be(z,re,J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,ye=J.apply(z,re||[]),Ne=[];return se={},at("next"),at("throw"),at("return"),se[Symbol.asyncIterator]=function(){return this},se;function at(Yt){ye[Yt]&&(se[Yt]=function(qt){return new Promise(function(vr,$t){Ne.push([Yt,qt,vr,$t])>1||kt(Yt,qt)})})}function kt(Yt,qt){try{!function Nt(Yt){Yt.value instanceof he?Promise.resolve(Yt.value.v).then(Ze,Wt):mn(Ne[0][2],Yt)}(ye[Yt](qt))}catch(vr){mn(Ne[0][3],vr)}}function Ze(Yt){kt("next",Yt)}function Wt(Yt){kt("throw",Yt)}function mn(Yt,qt){Yt(qt),Ne.shift(),Ne.length&&kt(Ne[0][0],Ne[0][1])}}function ze(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J,re=z[Symbol.asyncIterator];return re?re.call(z):(z=function X(z){var re="function"==typeof Symbol&&Symbol.iterator,J=re&&z[re],ye=0;if(J)return J.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&ye>=z.length&&(z=void 0),{value:z&&z[ye++],done:!z}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(z),J={},ye("next"),ye("throw"),ye("return"),J[Symbol.asyncIterator]=function(){return this},J);function ye(Ne){J[Ne]=z[Ne]&&function(at){return new Promise(function(kt,Nt){!function se(Ne,at,kt,Nt){Promise.resolve(Nt).then(function(Ze){Ne({value:Ze,done:kt})},at)}(kt,Nt,(at=z[Ne](at)).done,at.value)})}}}O.d(we,{FC:()=>be,KL:()=>ze,_T:()=>oe,mG:()=>ie,qq:()=>he})},5e3:(Je,we,O)=>{O.d(we,{$8M:()=>oo,$Z:()=>iw,AFp:()=>vI,AaK:()=>ie,CHM:()=>xo,CRH:()=>hI,CZH:()=>xv,CqO:()=>uD,DdM:()=>gv,EJc:()=>bI,EpF:()=>Fg,F4k:()=>lw,FYo:()=>Zw,FiY:()=>fr,G48:()=>zf,GfV:()=>lv,Gpc:()=>U,JOm:()=>M,LFG:()=>tt,LSH:()=>Ia,Lbi:()=>XD,NdJ:()=>d_,OlP:()=>hn,Oqu:()=>A_,PXZ:()=>MI,Q6J:()=>sw,QGY:()=>uw,Qsj:()=>zw,R0b:()=>Ii,RDi:()=>Ju,Rgc:()=>$e,SBq:()=>Tf,Sil:()=>Rv,Suo:()=>tc,TTD:()=>xi,TgZ:()=>c_,VLi:()=>iC,X6Q:()=>OI,XFs:()=>ft,Xpm:()=>dt,Y36:()=>Og,YKP:()=>dv,YNc:()=>r_,Yjl:()=>ra,Yz7:()=>qt,ZZ4:()=>cc,_Bn:()=>If,_UZ:()=>kg,_Vd:()=>om,_c5:()=>mC,_uU:()=>ww,aQg:()=>Vm,c2e:()=>$d,cJS:()=>$t,cg1:()=>j_,dDg:()=>kv,deG:()=>dh,dqk:()=>Ot,eFA:()=>qd,ekj:()=>gr,g9A:()=>wI,h0i:()=>Jl,hGG:()=>HI,iGM:()=>dI,ifc:()=>Ft,ip1:()=>Rr,kL8:()=>$_,lG2:()=>$a,n5z:()=>Fn,oAB:()=>wr,oxw:()=>cD,q4F:()=>Yo,qLn:()=>ld,qOj:()=>Sa,qZA:()=>Pg,s9C:()=>h_,sBO:()=>Gt,sIi:()=>Yh,s_b:()=>mm,soG:()=>Am,tBr:()=>vi,tb:()=>II,tp0:()=>Ps,uIk:()=>Jy,vHH:()=>Re,vpe:()=>We,wAp:()=>gt,xp6:()=>Ph,z2F:()=>Rm,zSh:()=>Eg,zs3:()=>Zo});var d=O(7579),Q=O(727),P=O(8306),oe=O(6451),ne=O(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ae(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ie(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ie).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function U(i){return i.__forward_ref__=U,i.toString=function(){return ie(this())},i}function X(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===U}class Re extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function be(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function Ee(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${be(i)} found${a}`)}function Nt(i,s){null==i&&function Ze(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function qt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function $t(i){return{providers:i.providers||[],imports:i.imports||[]}}function xt(i){return qi(i,bi)||qi(i,Kr)}function qi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Er(i){return i&&(i.hasOwnProperty(gs)||i.hasOwnProperty(di))?i[gs]:null}const bi=pe({\u0275prov:pe}),gs=pe({\u0275inj:pe}),Kr=pe({ngInjectableDef:pe}),di=pe({ngInjectorDef:pe});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Yr;function yn(i){const s=Yr;return Yr=i,s}function $s(i,s,a){const l=xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==s?s:void Ee(ie(i),"Injector")}function jn(i){return{toString:i}.toString()}var bn=(()=>((bn=bn||{})[bn.OnPush=0]="OnPush",bn[bn.Default=1]="Default",bn))(),Ft=(()=>{return(i=Ft||(Ft={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ft;var i})();const it="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,sr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ot=it||"undefined"!=typeof global&&global||mt||sr,ar={},L=[],H=pe({\u0275cmp:pe}),G=pe({\u0275dir:pe}),De=pe({\u0275pipe:pe}),$=pe({\u0275mod:pe}),Y=pe({\u0275fac:pe}),xe=pe({__NG_ELEMENT_ID__:pe});let Ye=0;function dt(i){return jn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===bn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ft.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Ye++,l.inputs=na(i.inputs,a),l.outputs=na(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(nn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(yt):null,l})}function nn(i){return Nn(i)||function Ir(i){return i[G]||null}(i)}function yt(i){return function Zi(i){return i[De]||null}(i)}const Rn={};function wr(i){return jn(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Rn[i.id]=i.type),s})}function na(i,s){if(null==i)return ar;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const $a=dt;function ra(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Nn(i){return i[H]||null}function On(i,s){const a=i[$]||null;if(!a&&!0===s)throw new Error(`Type ${ie(i)} does not have '\u0275mod' property.`);return a}function Lr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ti(i){return Array.isArray(i)&&!0===i[1]}function qa(i){return 0!=(8&i.flags)}function mc(i){return 2==(2&i.flags)}function Ai(i){return 1==(1&i.flags)}function Si(i){return null!==i.template}function Wu(i){return 0!=(512&i[2])}function lr(i,s){return i.hasOwnProperty(Y)?i[Y]:null}class Zs{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function xi(){return bo}function bo(i){return i.type.prototype.ngOnChanges&&(i.setInput=ah),Dc}function Dc(){const i=zs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===ar)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ah(i,s,a,l){const c=zs(i)||function Do(i,s){return i[Cc]=s}(i,{previous:ar,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];p[E]=new Zs(I&&I.currentValue,s,_===ar),i[l]=s}xi.ngInherit=!0;const Cc="__ngSimpleChanges__";function zs(i){return i[Cc]||null}let To;function Ju(i){To=i}function Jt(i){return!!i.listen}const ua={createRenderer:(i,s)=>function Mi(){return void 0!==To?To:"undefined"!=typeof document?document:void 0}()};function Zt(i){for(;Array.isArray(i);)i=i[0];return i}function Is(i,s){return Zt(s[i])}function Kn(i,s){return Zt(s[i.index])}function an(i,s){return i.data[s]}function Yn(i,s){const a=s[i];return Lr(a)?a:a[0]}function Ks(i){return 4==(4&i[2])}function Wi(i){return 128==(128&i[2])}function pi(i,s){return null==s?null:i[s]}function Ni(i){i[18]=0}function Ao(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const pt={lFrame:Mo(null),bindingsEnabled:!0};function Ka(){return pt.bindingsEnabled}function Te(){return pt.lFrame.lView}function Mt(){return pt.lFrame.tView}function xo(i){return pt.lFrame.contextLView=i,i[8]}function on(){let i=Ya();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ya(){return pt.lFrame.currentTNode}function ei(i,s){const a=pt.lFrame;a.currentTNode=i,a.isParent=s}function rl(){return pt.lFrame.isParent}function Ds(){return pt.lFrame.bindingIndex++}function Xa(i,s){const a=pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ha(s)}function ha(i){pt.lFrame.currentDirectiveIndex=i}function tu(){return pt.lFrame.currentQueryIndex}function xc(i){pt.lFrame.currentQueryIndex=i}function Mc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function nu(i,s,a){if(a&ft.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ft.Host||(c=Mc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=pt.lFrame=Rc();return l.currentTNode=s,l.lView=i,!0}function Qs(i){const s=Rc(),a=i[1];pt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Rc(){const i=pt.lFrame,s=null===i?null:i.child;return null===s?Mo(i):s}function Mo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Nc(){const i=pt.lFrame;return pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ru=Nc;function Vr(){const i=Nc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hn(){return pt.lFrame.selectedIndex}function Js(i){pt.lFrame.selectedIndex=i}function Cn(){const i=pt.lFrame;return an(i.tView,i.selectedIndex)}function fa(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Yi(i,s,a){Pc(i,s,3,a)}function Xs(i,s,a,l){(3&i[2])===a&&Pc(i,s,a,l)}function Pn(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Pc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Dp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Dp(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Ro{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Cr(i,s,a){const l=Jt(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=p,E=a[++c];kn(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function mi(i){return 3===i||4===i||6===i}function kn(i){return 64===i.charCodeAt(0)}function ga(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||kc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function kc(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function No(i){return-1!==i}function Cs(i){return 32767&i}function Ts(i,s){let a=function vn(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Oi=!0;function Et(i){const s=Oi;return Oi=i,s}let cl=0;function As(i,s){const a=to(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Oo(l.data,i),Oo(s,null),Oo(l.blueprint,null));const c=Jn(i,s),p=i.injectorIndex;if(No(c)){const _=Cs(c),E=Ts(c,s),I=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|I[_+A]}return s[p+8]=c,p}function Oo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function to(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Jn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function no(i,s,a){!function Qn(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(xe)&&(l=a[xe]),null==l&&(l=a[xe]=cl++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Po(i,s,a){if(a&ft.Optional)return i;Ee(s,"NodeInjector")}function Ss(i,s,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const c=i[9],p=yn(void 0);try{return c?c.get(s,l,a&ft.Optional):$s(s,l,a&ft.Optional)}finally{yn(p)}}return Po(l,s,a)}function ko(i,s,a,l=ft.Default,c){if(null!==i){const p=function io(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(xe)?i[xe]:void 0;return"number"==typeof s?s>=0?255&s:Fo:s}(a);if("function"==typeof p){if(!nu(s,i,l))return l&ft.Host?Po(c,a,l):Ss(s,a,l,c);try{const _=p(l);if(null!=_||l&ft.Optional)return _;Ee(a)}finally{ru()}}else if("number"==typeof p){let _=null,E=to(i,s),I=-1,A=l&ft.Host?s[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(I=-1===E?Jn(i,s):s[E+8],-1!==I&&hl(l,!1)?(_=s[1],E=Cs(I),s=Ts(I,s)):E=-1);-1!==E;){const S=s[1];if(Xn(p,E,S.data)){const k=dl(E,s,a,_,l,A);if(k!==xs)return k}I=s[E+8],-1!==I&&hl(l,s[1].data[E+8]===A)&&Xn(p,E,s)?(_=S,E=Cs(I),s=Ts(I,s)):E=-1}}}return Ss(s,a,l,c)}const xs={};function Fo(){return new Ms(on(),Te())}function dl(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=ma(E,_,a,null==l?mc(E)&&Oi:l!=_&&0!=(3&E.type),c&ft.Host&&p===E);return null!==S?Ji(s,_,S,E):xs}function ma(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,I=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let K=l?E:E+S;K<V;K++){const _e=_[K];if(K<I&&a===_e||K>=I&&_e.type===a)return K}if(c){const K=_[I];if(K&&Si(K)&&K.type===a)return I}return null}function Ji(i,s,a,l){let c=i[a];const p=s.data;if(function iu(i){return i instanceof Ro}(c)){const _=c;_.resolving&&function Ge(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(be(p[a]));const E=Et(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?yn(_.injectImpl):null;nu(i,l,ft.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function oy(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=bo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&yn(I),Et(E),_.resolving=!1,ru()}}return c}function Xn(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function hl(i,s){return!(i&ft.Self||i&ft.Host&&s)}class Ms{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ko(this._tNode,this._lView,s,l,a)}}function Fn(i){return jn(()=>{const s=i.prototype.constructor,a=s[Y]||so(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Y]||so(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function so(i){return He(i)?()=>{const s=so(X(i));return s&&s()}:lr(i)}function oo(i){return function ro(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(mi(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(on(),i)}const Pi="__parameters__";function ki(i,s,a){return jn(()=>{const l=function Ln(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(Pi)?I[Pi]:Object.defineProperty(I,Pi,{value:[]})[Pi];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class hn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=qt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dh=new hn("AnalyzeForEntryComponents");function Tr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Tr(l,s)):s!==i&&s.push(l)}return s}function Ar(i,s){i.forEach(a=>Array.isArray(a)?Ar(a,s):s(a))}function _a(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Lo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function dr(i,s,a){let l=Bo(i,s);return l>=0?i[1|l]=a:(l=~l,function Vo(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function va(i,s){const a=Bo(i,s);if(a>=0)return i[1|a]}function Bo(i,s){return function rs(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Os={},jo="__NG_DI_FLAG__",Ea="ngTempTokenPath",D=/\n/gm,F="__source",W=pe({provide:String,useValue:pe});let te;function fe(i){const s=te;return te=i,s}function Ke(i,s=ft.Default){if(void 0===te)throw new Re(203,"");return null===te?$s(i,void 0,s):te.get(i,s&ft.Optional?null:void 0,s)}function tt(i,s=ft.Default){return(function cn(){return Yr}()||Ke)(X(i),s)}const Lt=tt;function wt(i){const s=[];for(let a=0;a<i.length;a++){const l=X(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,p=ft.Default;for(let _=0;_<l.length;_++){const E=l[_],I=Gn(E);"number"==typeof I?-1===I?c=E.token:p|=I:c=E}s.push(tt(c,p))}else s.push(tt(l))}return s}function An(i,s){return i[jo]=s,i.prototype[jo]=s,i}function Gn(i){return i[jo]}const vi=An(ki("Inject",i=>({token:i})),-1),fr=An(ki("Optional"),8),Ps=An(ki("SkipSelf"),4);class Qc{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ei(i){return i instanceof Qc?i.changingThisBreaksApplicationSecurity:i}const hy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,wa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function Ia(i){const s=function yu(){const i=Te();return i&&i[12]}();return s?s.sanitize(Sn.URL,i)||"":function co(i,s){const a=function wl(i){return i instanceof Qc&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Ei(i):function Il(i){return(i=String(i)).match(hy)||i.match(wa)?i:"unsafe:"+i}(he(i))}const od="__ngContext__";function tr(i,s){i[od]=s}function Ch(i){const s=function _u(i){return i[od]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function ud(i){return i.ngOriginalError}function by(i,...s){i.error(...s)}class ld{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Iy(i){return i&&i.ngErrorLogger||by}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ud(s);for(;a&&ud(a);)a=ud(a);return a||null}}const Mh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ot))();function y(i){return i instanceof Function?i():i}var M=(()=>((M=M||{})[M.Important=1]="Important",M[M.DashCase=2]="DashCase",M))();function de(i,s){return undefined(i,s)}function ct(i){const s=i[3];return Ti(s)?s[3]:s}function ri(i){return Rh(i[13])}function vu(i){return Rh(i[4])}function Rh(i){for(;null!==i&&!Ti(i);)i=i[4];return i}function Ca(i,s,a,l,c){if(null!=l){let p,_=!1;Ti(l)?p=l:Lr(l)&&(_=!0,l=l[0]);const E=Zt(l);0===i&&null!==a?null==c?b0(s,a,E):bu(s,a,E,c||null,!0):1===i&&null!==a?bu(s,a,E,c||null,!0):2===i?function M0(i,s,a){const l=Qp(i,s);l&&function C0(i,s,a,l){Jt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function O0(i,s,a,l,c){const p=a[7];p!==Zt(a)&&Ca(s,i,l,p,c);for(let E=10;E<a.length;E++){const I=a[E];fd(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function nr(i,s,a){if(Jt(i))return i.createElement(s,a);{const l=null!==a?function Qu(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function E0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Ao(c,-1)),a.splice(l,1)}function Kp(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&E0(c,l),s>0&&(i[a-1][4]=l[4]);const p=Lo(i,10+s);!function Nh(i,s){fd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function w0(i,s){if(!(256&s[2])){const a=s[11];Jt(a)&&a.destroyNode&&fd(i,s,a,3,null,null),function Eu(i){let s=i[13];if(!s)return Yp(i[1],i);for(;s;){let a=null;if(Lr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Lr(s)&&Yp(s[1],s),s=s[3];null===s&&(s=i),Lr(s)&&Yp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Yp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Ty(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Ro)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function I0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):Zt(s[_]),I=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&Jt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ti(s[3])){a!==s[3]&&E0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function yb(i,s,a){return function Iu(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ft.None||c===Ft.Emulated)return null}return Kn(l,a)}(i,s.parent,a)}function bu(i,s,a,l,c){Jt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function b0(i,s,a){Jt(i)?i.appendChild(s,a):s.appendChild(a)}function D0(i,s,a,l,c){null!==l?bu(i,s,a,l,c):b0(i,s,a)}function Qp(i,s){return Jt(i)?i.parentNode(s):s.parentNode}let A0=function Ay(i,s,a){return 40&i.type?Kn(i,a):null};function hd(i,s,a,l){const c=yb(i,l,s),p=s[11],E=function T0(i,s,a){return A0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)D0(p,c,a[I],E,!1);else D0(p,c,a,E,!1)}function Jp(i,s){if(null!==s){const a=s.type;if(3&a)return Kn(s,i);if(4&a)return Xp(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Jp(i,l);{const c=i[s.index];return Ti(c)?Xp(-1,c):Zt(c)}}if(32&a)return de(s,i)()||Zt(i[s.index]);{const l=x0(i,s);return null!==l?Array.isArray(l)?l[0]:Jp(ct(i[16]),l):Jp(i,s.next)}}return null}function x0(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Xp(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Jp(l,c)}return s[7]}function R0(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&tr(Zt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)R0(i,s,a.child,l,c,p,!1),Ca(s,i,c,E,p);else if(32&I){const A=de(a,l);let S;for(;S=A();)Ca(s,i,c,S,p);Ca(s,i,c,E,p)}else 16&I?N0(i,s,l,a,c,p):Ca(s,i,c,E,p);a=_?a.projectionNext:a.next}}function fd(i,s,a,l,c,p){R0(a,l,i.firstChild,s,c,p,!1)}function N0(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Ca(s,i,c,I[A],p);else R0(i,s,I,_[3],c,p,!0)}function fo(i,s,a){Jt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function xy(i,s,a){Jt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function My(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const P0="ng-template";function vb(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==My(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Du(i){return 4===i.type&&i.value!==P0}function Cu(i,s,a){return s===(4!==i.type||a?i.value:P0)}function k0(i,s,a){let l=4;const c=i.attrs||[],p=function L0(i){for(let s=0;s<i.length;s++)if(mi(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!Cu(i,I,a)||""===I&&1===s.length){if(ln(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!vb(i.attrs,A,a)){if(ln(l))return!1;_=!0}continue}const k=Tu(8&l?"class":I,c,Du(i),a);if(-1===k){if(ln(l))return!1;_=!0;continue}if(""!==A){let V;V=k>p?"":c[k+1].toLowerCase();const K=8&l?V:null;if(K&&-1!==My(K,A,0)||2&l&&A!==V){if(ln(l))return!1;_=!0}}}}else{if(!_&&!ln(l)&&!ln(I))return!1;if(_&&ln(I))continue;_=!1,l=I|1&l}}return ln(l)||_}function ln(i){return 0==(1&i)}function Tu(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function V0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function F0(i,s,a=!1){for(let l=0;l<s.length;l++)if(k0(i,s[l],a))return!0;return!1}function Ry(i,s){return i?":not("+s.trim()+")":s}function B0(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!ln(_)&&(s+=Ry(p,c),c=""),l=_,p=p||!ln(l);a++}return""!==c&&(s+=Ry(p,c)),s}const Ct={};function Ph(i){Ny(Mt(),Te(),Hn()+i,!1)}function Ny(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Yi(s,p,a)}else{const p=i.preOrderHooks;null!==p&&Xs(s,p,0,a)}Js(a)}function kh(i,s){return i<<17|s<<2}function ks(i){return i>>17&32767}function eg(i){return 2|i}function po(i){return(131068&i)>>2}function tg(i,s){return-131069&i|s<<2}function rg(i){return 1|i}function X0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];xc(c),_.contentQueries(2,s[p],p)}}}function Pl(i,s,a,l,c,p,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ni(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function md(i,s,a,l,c){let p=i.data[s];if(null===p)p=function lg(i,s,a,l,c){const p=Ya(),_=rl(),I=i.data[s]=function hg(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function ol(){return pt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function Ys(){const i=pt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ei(p,!0),p}function Au(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function kl(i,s,a){Qs(s);try{const l=i.viewQuery;null!==l&&_g(1,l,a);const c=i.template;null!==c&&yd(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&X0(i,s),i.staticViewQueries&&_g(2,i.viewQuery,a);const p=i.components;null!==p&&function bA(i,s){for(let a=0;a<s.length;a++)Sb(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Vr()}}function Bh(i,s,a,l){const c=s[2];if(256!=(256&c)){Qs(s);try{Ni(s),function Qa(i){return pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&yd(i,s,a,2,l);const _=3==(3&c);if(_){const A=i.preOrderCheckHooks;null!==A&&Yi(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Xs(s,A,0,null),Pn(s,0)}if(function Gy(i){for(let s=ri(i);null!==s;s=vu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Ao(p,1),c[2]|=1024}}}(s),function mE(i){for(let s=ri(i);null!==s;s=vu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Wi(l)&&Bh(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&X0(i,s),_){const A=i.contentCheckHooks;null!==A&&Yi(s,A)}else{const A=i.contentHooks;null!==A&&Xs(s,A,1),Pn(s,1)}!function IA(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Js(~c);else{const p=c,_=a[++l],E=a[++l];Xa(_,p),E(2,s[p])}}}finally{Js(-1)}}(i,s);const E=i.components;null!==E&&function eE(i,s){for(let a=0;a<s.length;a++)Ab(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&_g(2,I,l),_){const A=i.viewCheckHooks;null!==A&&Yi(s,A)}else{const A=i.viewHooks;null!==A&&Xs(s,A,2),Pn(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-73,1024&s[2]&&(s[2]&=-1025,Ao(s[3],-1))}finally{Vr()}}}function Vy(i,s,a,l){const c=s[10],_=Ks(s);try{!_&&c.begin&&c.begin(),_&&kl(i,s,l),Bh(i,s,a,l)}finally{!_&&c.end&&c.end()}}function yd(i,s,a,l,c){const p=Hn(),_=2&l;try{Js(-1),_&&s.length>20&&Ny(i,s,20,!1),a(l,c)}finally{Js(p)}}function Su(i,s,a){!Ka()||(function CA(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||As(a,s),tr(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const I=i.data[E],A=Si(I);A&&Hh(s,a,I);const S=Ji(s,i,E,a);tr(S,s),null!==_&&fE(0,E-c,S,I,0,_),A&&(Yn(a.index,s)[8]=S)}}(i,s,a,Kn(a,s)),128==(128&a.flags)&&function TA(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function al(){return pt.lFrame.currentDirectiveIndex}();try{Js(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];ha(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&oE(A,S)}}finally{Js(-1),ha(E)}}(i,s,a))}function Fl(i,s,a=Kn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function tE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=_d(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function _d(i,s,a,l,c,p,_,E,I,A){const S=20+l,k=S+c,V=function nE(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ct);return a}(S,k),K="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:K,incompleteFirstPass:!1}}function dg(i,s,a,l){const c=_E(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&vE(i).push(l,c.length-1))}function Uy(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function ji(i,s,a,l,c,p,_,E){const I=Kn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(Mb(i,a,S,l,c),mc(s)&&function By(i,s){const a=Yn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function iE(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Jt(p)?p.setProperty(I,l,c):kn(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function pg(i,s,a,l){let c=!1;if(Ka()){const p=function aE(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];F0(a,_.selectors,!1)&&(c||(c=[]),no(As(a,s),i,_.type),Si(_)?(uE(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,vd(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const k=p[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=Au(i,s,p.length,null);for(let S=0;S<p.length;S++){const k=p[S];a.mergedAttrs=ga(a.mergedAttrs,k.hostAttrs),dE(i,a,s,A,k),cE(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const V=k.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function rE(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,V=null===p||Du(s)?null:Tb(k,p);_.push(V),E=Uy(k,A,E),I=Uy(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function lE(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Re(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=ga(a.mergedAttrs,a.attrs),c}function Cb(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function DA(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function oE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function uE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function cE(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Si(s)&&(a[""]=i)}}function vd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function dE(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=lr(c.type)),_=new Ro(p,Si(c),null);i.blueprint[l]=_,a[l]=_,Cb(i,s,0,l,Au(i,a,c.hostVars,Ct),c)}function Hh(i,s,a){const l=Kn(s,i),c=tE(a),p=i[10],_=mg(i,Pl(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function qo(i,s,a,l,c,p){const _=Kn(i,s);!function hE(i,s,a,l,c,p,_){if(null==p)Jt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(p):_(p,l||"",c);Jt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function fE(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function Tb(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function gE(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Ab(i,s){const a=Yn(s,i);if(Wi(a)){const l=a[1];80&a[2]?Bh(l,a,l.template,a[8]):a[5]>0&&gg(a)}}function gg(i){for(let l=ri(i);null!==l;l=vu(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Bh(_,p,_.template,p[8])}else p[5]>0&&gg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Yn(a[l],i);Wi(c)&&c[5]>0&&gg(c)}}function Sb(i,s){const a=Yn(s,i),l=a[1];(function Ll(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),kl(l,a,a[8])}function mg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Gh(i){for(;i;){i[2]|=64;const s=ct(i);if(Wu(i)&&!s)return i;i=s}return null}function yE(i){!function qh(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Ch(a),c=l[1];Vy(c,l,c.template,a)}}(i[8])}function _g(i,s,a){xc(0),s(i,a)}const qy=(()=>Promise.resolve(null))();function _E(i){return i[7]||(i[7]=[])}function vE(i){return i.cleanup||(i.cleanup=[])}function EE(i,s){const a=i[9],l=a?a.get(ld,null):null;l&&l.handleError(s)}function Mb(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function go(i,s,a){const l=Is(s,i);!function cd(i,s,a){Jt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function vg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=ce(c,E):2==p&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Aa=new hn("INJECTOR",-1);class IE{get(s,a=Os){if(a===Os){const l=new Error(`NullInjectorError: No provider for ${ie(s)}!`);throw l.name="NullInjectorError",l}return a}}const Eg=new hn("Set Injector scope."),zh={},bE={};let zy;function DE(){return void 0===zy&&(zy=new IE),zy}function Vl(i,s=null,a=null,l){const c=Wy(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Wy(i,s=null,a=null,l){return new Ob(i,a,s||DE(),l)}class Ob{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Ar(a,E=>this.processProvider(E,s,a)),Ar([s],E=>this.processInjectorType(E,[],p)),this.records.set(Aa,Ul(void 0,this));const _=this.records.get(Eg);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ie(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Os,l=ft.Default){this.assertNotDestroyed();const c=fe(this),p=yn(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function xE(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(s)&&xt(s);E=I&&this.injectableDefInScope(I)?Ul(wg(s),zh):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ft.Self?DE():this.parent).get(s,a=l&ft.Optional&&a===Os?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Ea]=_[Ea]||[]).unshift(ie(s)),c)throw _;return function is(i,s,a,l){const c=i[Ea];throw s[F]&&c.unshift(s[F]),i.message=function Li(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ie(s);if(Array.isArray(s))c=s.map(ie).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ie(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Ea]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{yn(p),fe(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ie(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=X(s)))return!1;let c=Er(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=Er(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{Ar(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:V,providers:K}=S[k];Ar(K,_e=>this.processProvider(_e,V,K||L))}}this.injectorDefTypes.add(_);const I=lr(_)||(()=>new _);this.records.set(_,Ul(I,zh));const A=c.providers;if(null!=A&&!E){const S=s;Ar(A,k=>this.processProvider(k,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=Wh(s=X(s))?s:X(s&&s.provide);const p=function CE(i,s,a){return AE(i)?Ul(void 0,i.useValue):Ul(TE(i),zh)}(s);if(Wh(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=Ul(void 0,zh,!0),_.factory=()=>wt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===zh&&(a.value=bE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function RA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function wg(i){const s=xt(i),a=null!==s?s.factory:lr(i);if(null!==a)return a;if(i instanceof hn)throw new Re(204,!1);if(i instanceof Function)return function Pb(i){const s=i.length;if(s>0)throw function ts(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Wr(i){const s=i&&(i[bi]||i[Kr]);if(s){const a=function ir(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function TE(i,s,a){let l;if(Wh(i)){const c=X(i);return lr(c)||wg(c)}if(AE(i))l=()=>X(i.useValue);else if(function xA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...wt(i.deps||[]));else if(function SE(i){return!(!i||!i.useExisting)}(i))l=()=>tt(X(i.useExisting));else{const c=X(i&&(i.useClass||i.provide));if(!function kb(i){return!!i.deps}(i))return lr(c)||wg(c);l=()=>new c(...wt(i.deps))}return l}function Ul(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function AE(i){return null!==i&&"object"==typeof i&&W in i}function Wh(i){return"function"==typeof i}let Zo=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Vl({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return Vl({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Os,i.NULL=new IE,i.\u0275prov=qt({token:i,providedIn:"any",factory:()=>tt(Aa)}),i.__NG_ELEMENT_ID__=-1,i})();function PA(i,s){fa(Ch(i)[1],on())}function Sa(i){let s=function Gb(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Si(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=Rt(i.inputs),_.declaredInputs=Rt(i.declaredInputs),_.outputs=Rt(i.outputs);const E=c.hostBindings;E&&qb(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&xu(i,I),A&&kE(i,A),ae(i.inputs,c.inputs),ae(i.declaredInputs,c.declaredInputs),ae(i.outputs,c.outputs),Si(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===Sa&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Dg(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ga(c.hostAttrs,a=ga(a,c.hostAttrs))}}(l)}function Rt(i){return i===ar?{}:i===L?[]:i}function xu(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function kE(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function qb(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Bl=null;function Mu(){if(!Bl){const i=Ot.Symbol;if(i&&i.iterator)Bl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Bl=l)}}}return Bl}function Yh(i){return!!Qy(i)&&(Array.isArray(i)||!(i instanceof Map)&&Mu()in i)}function Qy(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function si(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Jy(i,s,a,l){const c=Te();return si(c,Ds(),s)&&(Mt(),qo(Cn(),c,i,s,a,l)),Jy}function xa(i,s,a,l){return si(i,Ds(),a)?s+he(a)+l:Ct}function r_(i,s,a,l,c,p,_,E){const I=Te(),A=Mt(),S=i+20,k=A.firstCreatePass?function n_(i,s,a,l,c,p,_,E,I){const A=s.consts,S=md(s,i,4,_||null,pi(A,E));pg(s,a,S,pi(A,I)),fa(s,S);const k=S.tViews=_d(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,p,_):A.data[S];ei(k,!1);const V=I[11].createComment("");hd(A,I,V,k),tr(V,I),mg(I,I[S]=gE(V,I,V,k)),Ai(k)&&Su(A,I,k),null!=_&&Fl(I,k,E)}function Og(i,s=ft.Default){const a=Te();return null===a?tt(i,s):ko(on(),a,X(i),s)}function iw(){throw new Error("invalid")}function sw(i,s,a){const l=Te();return si(l,Ds(),s)&&ji(Mt(),Cn(),l,i,s,l[11],a,!1),sw}function ow(i,s,a,l,c){const _=c?"class":"style";Mb(i,a,s.inputs[_],_,l)}function c_(i,s,a,l){const c=Te(),p=Mt(),_=20+i,E=c[11],I=c[_]=nr(E,s,function bp(){return pt.lFrame.currentNamespace}()),A=p.firstCreatePass?function l_(i,s,a,l,c,p,_){const E=s.consts,A=md(s,i,2,c,pi(E,p));return pg(s,a,A,pi(E,_)),null!==A.attrs&&vg(A,A.attrs,!1),null!==A.mergedAttrs&&vg(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];ei(A,!0);const S=A.mergedAttrs;null!==S&&Cr(E,I,S);const k=A.classes;null!==k&&xy(E,I,k);const V=A.styles;return null!==V&&fo(E,I,V),64!=(64&A.flags)&&hd(p,c,I,A),0===function da(){return pt.lFrame.elementDepthCount}()&&tr(I,c),function tl(){pt.lFrame.elementDepthCount++}(),Ai(A)&&(Su(p,c,A),function jh(i,s,a){if(qa(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&Fl(c,A),c_}function Pg(){let i=on();rl()?function il(){pt.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const s=i;!function Wa(){pt.lFrame.elementDepthCount--}();const a=Mt();return a.firstCreatePass&&(fa(a,i),qa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Tp(i){return 0!=(16&i.flags)}(s)&&ow(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function un(i){return 0!=(32&i.flags)}(s)&&ow(a,s,Te(),s.stylesWithoutHost,!1),Pg}function kg(i,s,a,l){return c_(i,s,a,l),Pg(),kg}function Fg(){return Te()}function uw(i){return!!i&&"function"==typeof i.then}function lw(i){return!!i&&"function"==typeof i.subscribe}const uD=lw;function d_(i,s,a,l){const c=Te(),p=Mt(),_=on();return function lD(i,s,a,l,c,p,_,E){const I=Ai(l),S=i.firstCreatePass&&vE(i),k=s[8],V=_E(s);let K=!0;if(3&l.type||E){const je=Kn(l,s),et=E?E(je):je,Ae=V.length,ht=E?Pt=>E(Zt(Pt[l.index])):l.index;if(Jt(a)){let Pt=null;if(!E&&I&&(Pt=function FA(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],I=c[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=p,Pt.__ngLastListenerFn__=p,K=!1;else{p=hw(l,s,k,p,!1);const en=a.listen(et,c,p);V.push(p,en),S&&S.push(c,ht,Ae,Ae+1)}}else p=hw(l,s,k,p,!0),et.addEventListener(c,p,_),V.push(p),S&&S.push(c,ht,Ae,_)}else p=hw(l,s,k,p,!1);const _e=l.outputs;let Pe;if(K&&null!==_e&&(Pe=_e[c])){const je=Pe.length;if(je)for(let et=0;et<je;et+=2){const ds=s[Pe[et]][Pe[et+1]].subscribe(p),dc=V.length;V.push(p,ds),S&&S.push(c,l.index,dc,-(dc+1))}}}(p,c,c[11],_,i,s,!!a,l),d_}function dw(i,s,a,l){try{return!1!==a(l)}catch(c){return EE(i,c),!1}}function hw(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?Yn(i.index,s):s;0==(32&s[2])&&Gh(E);let I=dw(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)I=dw(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function cD(i=1){return function lh(i){return(pt.lFrame.contextLView=function ul(i,s){for(;i>0;)s=s[15],i--;return s}(i,pt.lFrame.contextLView))[8]}(i)}function h_(i,s,a){return f_(i,"",s,"",a),h_}function f_(i,s,a,l,c){const p=Te(),_=xa(p,s,a,l);return _!==Ct&&ji(Mt(),Cn(),p,i,_,p[11],c,!1),f_}function Lg(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?ks(p):po(p),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];hD(i[E],s)&&(I=!0,i[E+1]=l?rg(S):eg(S)),E=l?ks(S):po(S)}I&&(i[a+1]=l?eg(p):rg(p))}function hD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Bo(i,s)>=0}function gr(i,s){return function _o(i,s,a,l){const c=Te(),p=Mt(),_=function gi(i){const s=pt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);p.firstUpdatePass&&function mw(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Hn()],_=function b_(i,s){return s>=i.expandoStartIndex}(i,a);(function jg(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function yw(i,s,a,l){const c=function eu(i){const s=pt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Hl(a=Hr(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Hr(c,i,s,a,l),null===p){let I=function D_(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==po(l))return i[ks(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Hr(null,i,s,I[1],l),I=Hl(I,s.attrs,l),function Ug(i,s,a,l){i[ks(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function _w(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Hl(l,i[p].hostAttrs,a);return Hl(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function $l(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=ks(_),I=po(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||Bo(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=ks(i[E+1]);i[l+1]=kh(V,E),0!==V&&(i[V+1]=tg(i[V+1],l)),i[E+1]=function G0(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=kh(E,0),0!==E&&(i[E+1]=tg(i[E+1],l)),E=l;else i[l+1]=kh(I,0),0===E?E=l:i[I+1]=tg(i[I+1],l),I=l;A&&(i[l+1]=eg(i[l+1])),Lg(i,S,l,!0),Lg(i,S,l,!1),function dD(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Bo(p,s)>=0&&(a[l+1]=rg(a[l+1]))}(s,S,i,l,p),_=kh(E,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Ct&&si(c,_,s)&&function Bg(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];rf(function ng(i){return 1==(1&i)}(A)?T_(I,s,a,c,po(A),_):void 0)||(rf(p)||function H0(i){return 2==(2&i)}(A)&&(p=T_(I,null,a,c,E,_)),function Nl(i,s,a,l,c){const p=Jt(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:M.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=M.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Is(Hn(),a),c,p))}(p,p.data[Hn()],c,c[11],i,c[_+1]=function Ew(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ie(Ei(i)))),i}(s,a),l,_)}(i,s,null,!0),gr}function Hr(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=Hl(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Hl(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),dr(i,_,!!a||s[++p]))}return void 0===i?null:i}function T_(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let V=a[c+1];V===Ct&&(V=k?L:void 0);let K=k?va(V,l):S===l?V:void 0;if(A&&!rf(K)&&(K=va(I,l)),rf(K)&&(E=K,_))return E;const _e=i[c+1];c=_?ks(_e):po(_e)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=va(I,l))}return E}function rf(i){return void 0!==i}function ww(i,s=""){const a=Te(),l=Mt(),c=i+20,p=l.firstCreatePass?md(l,c,1,s,null):l.data[c],_=a[c]=function Rl(i,s){return Jt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);hd(l,a,_,p),ei(p,!1)}function A_(i){return ku("",i,""),A_}function ku(i,s,a){const l=Te(),c=xa(l,i,s,a);return c!==Ct&&go(l,Hn(),c),ku}const Ra=void 0;var Gr=["en",[["a","p"],["AM","PM"],Ra],[["AM","PM"],Ra,Ra],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ra,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ra,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ra,"{1} 'at' {0}",Ra],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function xr(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Na={};function j_(i){const s=function H_(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Aw(s);if(a)return a;const l=s.split("-")[0];if(a=Aw(l),a)return a;if("en"===l)return Gr;throw new Error(`Missing locale data for the locale "${i}".`)}function $_(i){return j_(i)[gt.PluralCase]}function Aw(i){return i in Na||(Na[i]=Ot.ng&&Ot.ng.common&&Ot.ng.common.locales&&Ot.ng.common.locales[i]),Na[i]}var gt=(()=>((gt=gt||{})[gt.LocaleId=0]="LocaleId",gt[gt.DayPeriodsFormat=1]="DayPeriodsFormat",gt[gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",gt[gt.DaysFormat=3]="DaysFormat",gt[gt.DaysStandalone=4]="DaysStandalone",gt[gt.MonthsFormat=5]="MonthsFormat",gt[gt.MonthsStandalone=6]="MonthsStandalone",gt[gt.Eras=7]="Eras",gt[gt.FirstDayOfWeek=8]="FirstDayOfWeek",gt[gt.WeekendRange=9]="WeekendRange",gt[gt.DateFormat=10]="DateFormat",gt[gt.TimeFormat=11]="TimeFormat",gt[gt.DateTimeFormat=12]="DateTimeFormat",gt[gt.NumberSymbols=13]="NumberSymbols",gt[gt.NumberFormats=14]="NumberFormats",gt[gt.CurrencyCode=15]="CurrencyCode",gt[gt.CurrencySymbol=16]="CurrencySymbol",gt[gt.CurrencyName=17]="CurrencyName",gt[gt.Currencies=18]="Currencies",gt[gt.Directionality=19]="Directionality",gt[gt.PluralCase=20]="PluralCase",gt[gt.ExtraData=21]="ExtraData",gt))();const uf="en-US";let Sw=uf;function Ef(i,s,a,l,c){if(i=X(i),Array.isArray(i))for(let p=0;p<i.length;p++)Ef(i[p],s,a,l,c);else{const p=Mt(),_=Te();let E=Wh(i)?i:X(i.provide),I=TE(i);const A=on(),S=1048575&A.providerIndexes,k=A.directiveStart,V=A.providerIndexes>>20;if(Wh(i)||!i.multi){const K=new Ro(I,c,Og),_e=im(E,s,c?S:S+V,k);-1===_e?(no(As(A,_),p,E),wf(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(K),_.push(K)):(a[_e]=K,_[_e]=K)}else{const K=im(E,s,S+V,k),_e=im(E,s,S,S+V),Pe=K>=0&&a[K],je=_e>=0&&a[_e];if(c&&!je||!c&&!Pe){no(As(A,_),p,E);const et=function jD(i,s,a,l,c){const p=new Ro(i,a,Og);return p.multi=[],p.index=s,p.componentProviders=0,iv(p,c,l&&!a),p}(c?BD:sv,a.length,c,l,I);!c&&je&&(a[_e].providerFactory=et),wf(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(et),_.push(et)}else wf(p,i,K>-1?K:_e,iv(a[c?_e:K],I,!c&&l));!c&&l&&je&&a[_e].componentProviders++}}}function wf(i,s,a,l){const c=Wh(s),p=function MA(i){return!!i.useClass}(s);if(c||p){const I=(p?X(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function iv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function im(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function sv(i,s,a,l){return ov(this.multi,[])}function BD(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Ji(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),ov(c,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],ov(c,p);return p}function ov(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function If(i,s=[]){return a=>{a.providersResolver=(l,c)=>function qw(i,s,a){const l=Mt();if(l.firstCreatePass){const c=Si(i);Ef(a,l.data,l.blueprint,c,!0),Ef(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Df{}class Cf{resolveComponentFactory(s){throw function av(i){const s=Error(`No component factory found for ${ie(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let om=(()=>{class i{}return i.NULL=new Cf,i})();function rr(){return Yl(on(),Te())}function Yl(i,s){return new Tf(Kn(i,s))}let Tf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=rr,i})();function $D(i){return i instanceof Tf?i.nativeElement:i}class Zw{}let zw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Kw(){const i=Te(),a=Yn(on().index,i);return function Ww(i){return i[11]}(Lr(a)?a:i)}(),i})(),am=(()=>{class i{}return i.\u0275prov=qt({token:i,providedIn:"root",factory:()=>null}),i})();class lv{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Yo=new lv("13.3.10"),um={};function lm(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(Zt(p)),Ti(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&lm(I[1],I,A,l)}const _=a.type;if(8&_)lm(i,s,a.child,l);else if(32&_){const E=de(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=x0(s,a);if(Array.isArray(E))l.push(...E);else{const I=ct(s[16]);lm(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Ql{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return lm(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ti(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Kp(s,l),Lo(a,l))}this._attachedToViewContainer=!1}w0(this._lView[1],this._lView)}onDestroy(s){dg(this._lView[1],this._lView,null,s)}markForCheck(){Gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function yg(i,s,a){const l=s[10];l.begin&&l.begin();try{Bh(i,s,i.template,a)}catch(c){throw EE(s,c),c}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dd(i,s){fd(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class Af extends Ql{constructor(s){super(s),this._view=s}detectChanges(){yE(this._view)}checkNoChanges(){}get context(){return null}}class cv extends om{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Nn(s);return new Sf(a,this.ngModule)}}function cm(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Sf extends Df{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function j0(i){return i.map(B0).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return cm(this.componentDef.inputs)}get outputs(){return cm(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function Yw(i,s){return{get:(a,l,c)=>{const p=i.get(a,um,c);return p!==um||l===um?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(Zw,ua),E=p.get(am,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function $h(i,s,a){if(Jt(i))return i.selectRootElement(s,a===Ft.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):nr(_.createRenderer(null,this.componentDef),A,function dm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,V=function Hb(i,s){return{components:[],scheduler:i||Mh,clean:qy,playerHandler:s||null,flags:0}}(),K=_d(0,null,null,1,0,null,null,null,null,null),_e=Pl(null,K,V,k,null,null,_,I,E,p);let Pe,je;Qs(_e);try{const et=function jb(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=md(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(vg(I,A,!0),null!==i&&(Cr(c,i,A),null!==I.classes&&xy(c,i,I.classes),null!==I.styles&&fo(c,i,I.styles)));const S=l.createRenderer(i,s),k=Pl(a,tE(s),null,s.onPush?64:16,a[20],I,l,S,p||null,null);return _.firstCreatePass&&(no(As(I,a),_,s.type),uE(_,I),vd(I,a.length,1)),mg(a,k),a[20]=k}(S,this.componentDef,_e,_,I);if(S)if(l)Cr(I,S,["ng-version",Yo.full]);else{const{attrs:Ae,classes:ht}=function $0(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!ln(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ae&&Cr(I,S,Ae),ht&&ht.length>0&&xy(I,S,ht.join(" "))}if(je=an(K,20),void 0!==a){const Ae=je.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Pt=a[ht];Ae.push(null!=Pt?Array.from(Pt):null)}}Pe=function $b(i,s,a,l,c){const p=a[1],_=function Hy(i,s,a){const l=on();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),dE(i,l,s,Au(i,s,1,null),a));const c=Ji(s,i,l.directiveStart,l);tr(c,s);const p=Kn(l,s);return p&&tr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=on();s.contentQueries(1,_,I.directiveStart)}const E=on();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Js(E.index),Cb(a[1],E,0,E.directiveStart,E.directiveEnd,s),oE(s,_)),_}(et,this.componentDef,_e,V,[PA]),kl(K,_e,null)}finally{Vr()}return new Qw(this.componentType,Pe,Yl(je,_e),_e,je)}}class Qw extends class bf{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Af(c),this.componentType=s}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Jl{}class dv{}const Bu=new Map;class pv extends Jl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new cv(this);const l=On(s);this._bootstrapComponents=y(l.bootstrap),this._r3Injector=Wy(s,a,[{provide:Jl,useValue:this},{provide:om,useValue:this.componentFactoryResolver}],ie(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Zo.THROW_IF_NOT_FOUND,l=ft.Default){return s===Zo||s===Jl||s===Aa?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pm extends dv{constructor(s){super(),this.moduleType=s,null!==On(s)&&function fm(i){const s=new Set;!function a(l){const c=On(l,!0),p=c.id;null!==p&&(function hv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ie(s)} vs ${ie(s.name)}`)}(p,Bu.get(p),l),Bu.set(p,l));const _=y(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new pv(this.moduleType,s)}}function gv(i,s,a){const l=function cr(){const i=pt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,c=Te();return c[l]===Ct?function zo(i,s,a){return i[s]=a}(c,l,a?s.call(a):s()):function Qh(i,s){return i[s]}(c,l)}function Of(i){return s=>{setTimeout(i,void 0,s)}}const We=class Nf extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=Of(I),E&&(E=Of(E)),A&&(A=Of(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Q.w0&&s.add(S),S}};function It(){return this._results[Mu()]()}class vv{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Mu(),l=vv.prototype;l[a]||(l[a]=It)}get changes(){return this._changes||(this._changes=new We)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Tr(s);(this._changesDetected=!function hh(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let $e=(()=>{class i{}return i.__NG_ELEMENT_ID__=Mr,i})();const ue=$e,Me=class extends ue{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Pl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),kl(a,l,s),new Ql(l)}};function Mr(){return Pf(on(),Te())}function Pf(i,s){return 4&i.type?new Me(s,i,Yl(i,s)):null}let mm=(()=>{class i{}return i.__NG_ELEMENT_ID__=zD,i})();function zD(){return uI(on(),Te())}const WD=mm,oI=class extends WD{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Yl(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){const s=Jn(this._hostTNode,this._hostLView);if(No(s)){const a=Ts(s,this._hostLView),l=Cs(s);return new Ms(a[1].data[l+8],a)}return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=aI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function au(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,p=k.ngModuleRef}const I=_?s:new Sf(Nn(s)),A=l||this.parentInjector;if(!p&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Jl,null);V&&(p=V)}const S=I.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function ca(i){return Ti(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],V=new oI(k,k[6],k[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function wu(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],_a(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function mb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=Xp(p,_),I=l[11],A=Qp(I,_[7]);return null!==A&&function Oh(i,s,a,l,c,p){l[0]=c,l[6]=s,fd(i,l,a,1,c,p)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),_a(ym(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=aI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Kp(this._lContainer,a);l&&(Lo(ym(this._lContainer),a),w0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Kp(this._lContainer,a);return l&&null!=Lo(ym(this._lContainer),a)?new Ql(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function aI(i){return i[8]}function ym(i){return i[8]||(i[8]=[])}function uI(i,s){let a;const l=s[i.index];if(Ti(l))a=l;else{let c;if(8&i.type)c=Zt(l);else{const p=s[11];c=p.createComment("");const _=Kn(i,s);bu(p,Qp(p,_),c,function _b(i,s){return Jt(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=gE(l,s,c,i),mg(s,a)}return new oI(a,i,s)}class _m{constructor(s){this.queryList=s,this.matches=null}clone(){return new _m(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tt{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new Tt(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==$u(s,a).matches&&this.queries[a].setDirty()}}class Xl{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class vm{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new vm(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class xn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new xn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,vt(a,p)),this.matchTNodeWithReadOption(s,a,ma(a,s,p,!1,!1))}else l===$e?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ma(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Tf||c===mm||c===$e&&4&a.type)this.addMatch(a.index,-2);else{const p=ma(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vt(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function ec(i,s,a,l){return-1===a?function lI(i,s){return 11&i.type?Yl(i,s):4&i.type?Pf(i,s):null}(s,i):-2===a?function cI(i,s,a){return a===Tf?Yl(s,i):a===$e?Pf(s,i):a===mm?uI(s,i):void 0}(i,s,l):Ji(i,i[1],a,s)}function Vd(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:ec(s,p[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Vt(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=Vd(i,s,c,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-I];for(let k=10;k<S.length;k++){const V=S[k];V[17]===V[3]&&Vt(V[1],V,A,l)}if(null!==S[9]){const k=S[9];for(let V=0;V<k.length;V++){const K=k[V];Vt(K[1],K,A,l)}}}}}return l}function dI(i){const s=Te(),a=Mt(),l=tu();xc(l+1);const c=$u(a,l);if(i.dirty&&Ks(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Vt(a,s,l,[]):Vd(a,s,c,l);i.reset(p,$D),i.notifyOnChanges()}return!0}return!1}function tc(i,s,a,l){const c=Mt();if(c.firstCreatePass){const p=on();(function Fa(i,s,a){null===i.queries&&(i.queries=new vm),i.queries.track(new xn(s,a))})(c,new Xl(s,a,l),p.index),function Vn(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function fI(i,s,a){const l=new vv(4==(4&a));dg(i,s,l,l.destroy),null===s[19]&&(s[19]=new Tt),s[19].queries.push(new _m(l))}(c,Te(),a)}function hI(){return function yr(i,s){return i[19].queries[s].queryList}(Te(),tu())}function $u(i,s){return i.queries.getByIndex(s)}function Hf(...i){}const Rr=new hn("Application Initializer");let xv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Hf,this.reject=Hf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(uw(p))a.push(p);else if(uD(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(tt(Rr,8))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vI=new hn("AppId",{providedIn:"root",factory:function EI(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wI=new hn("Platform Initializer"),XD=new hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),II=new hn("appBootstrapListener");let $d=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Am=new hn("LocaleId",{providedIn:"root",factory:()=>Lt(Am,ft.Optional|ft.SkipSelf)||function eC(){return"undefined"!=typeof $localize&&$localize.locale||uf}()}),bI=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Rv=(()=>{class i{compileModuleSync(a){return new pm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=y(On(a).declarations).reduce((_,E)=>{const I=Nn(E);return I&&_.push(new Sf(I)),_},[]);return new nC(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hd=(()=>Promise.resolve(0))();function $i(i){"undefined"==typeof Zone?Hd.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ii{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new We(!1),this.onMicrotaskEmpty=new We(!1),this.onStable=new We(!1),this.onError=new We(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function CI(){let i=Ot.requestAnimationFrame,s=Ot.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function AI(i){const s=()=>{!function Ov(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ot,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Sm(i),i.isCheckStableRunning=!0,qf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Sm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return SI(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Pv(i)}},onInvoke:(a,l,c,p,_,E,I)=>{try{return SI(i),a.invoke(c,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Pv(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Sm(i),qf(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ii.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ii.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,TI,Hf,Hf);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const TI={};function qf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Sm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function SI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Pv(i){i._nesting--,qf(i)}class xI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new We,this.onMicrotaskEmpty=new We,this.onStable=new We,this.onError=new We}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let kv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ii.assertNotInAngularZone(),$i(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$i(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(tt(Ii))},i.\u0275prov=qt({token:i,factory:i.\u0275fac}),i})(),xm=(()=>{class i{constructor(){this._applications=new Map,Mm.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Mm.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class rC{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function iC(i){Mm=i}let Mm=new rC,Bs=null;const qu=new hn("AllowMultipleToken"),Fv=new hn("PlatformOnDestroy");class MI{constructor(s,a){this.name=s,this.token=a}}function qd(i,s,a=[]){const l=`Platform: ${s}`,c=new hn(l);return(p=[])=>{let _=Zd();if(!_||_.injector.get(qu,!1)){const E=[...a,...p,{provide:c,useValue:!0}];i?i(E):function RI(i){if(Bs&&!Bs.get(qu,!1))throw new Re(400,"");Bs=i;const s=i.get(Zf),a=i.get(wI,null);a&&a.forEach(l=>l())}(function aC(i=[],s){return Zo.create({name:s,providers:[{provide:Eg,useValue:"platform"},{provide:Fv,useValue:()=>Bs=null},...i]})}(E,l))}return function oC(i){const s=Zd();if(!s)throw new Re(401,"");return s}()}}function Zd(){var i;return null!==(i=null==Bs?void 0:Bs.get(Zf))&&void 0!==i?i:null}let Zf=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function uC(i,s){let a;return a="noop"===i?new xI:("zone.js"===i?void 0:i)||new Ii({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:Ii,useValue:E}];return E.run(()=>{const A=Zo.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(ld,null);if(!k)throw new Re(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:K=>{k.handleError(K)}});S.onDestroy(()=>{Nm(this._modules,S),V.unsubscribe()})}),function Lv(i,s,a){try{const l=a();return uw(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const V=S.injector.get(xv);return V.runInitializers(),V.donePromise.then(()=>(function lf(i){Nt(i,"Expected localeId to be defined"),"string"==typeof i&&(Sw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Am,uf)||uf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=NI({},l);return function oc(i,s,a){const l=new pm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Rm);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Fv,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(tt(Zo))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function NI(i,s){return Array.isArray(s)?s.reduce(NI,i):Object.assign(Object.assign({},i),s)}let Rm=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Ii.assertNotInAngularZone(),$i(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ii.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,ne.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof Df?a:this._injector.get(om).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function Gd(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Jl),E=c.create(Zo.NULL,[],l||c.selector,p),I=E.location.nativeElement,A=E.injector.get(kv,null),S=A&&E.injector.get(xm);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Nm(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Nm(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(II,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(tt(Ii),tt(Zo),tt(ld),tt(xv))},i.\u0275prov=qt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Vv=!0,Uv=!1;function OI(){return Uv=!0,Vv}function zf(){if(Uv)throw new Error("Cannot enable prod mode after platform setup.");Vv=!1}let Gt=(()=>{class i{}return i.__NG_ELEMENT_ID__=kI,i})();function kI(i){return function FI(i,s,a){if(mc(i)&&!a){const l=Yn(i.index,s);return new Ql(l,l)}return 47&i.type?new Ql(s[16],s):null}(on(),Te(),16==(16&i))}class BI{constructor(){}supports(s){return Yh(s)}create(s){return new jI(s)}}const Kf=(i,s)=>s;class jI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Kf}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Bv(l,c,p)?a:l,E=Bv(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const K=V<p.length?p[V]:p[V]=0,_e=K+V;S<=_e&&_e<A&&(p[V]=K+1)}p[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Yh(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function FE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Mu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new hC(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Lm),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Lm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class hC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nr{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Lm{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Nr,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Bv(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Yd{constructor(){}supports(s){return s instanceof Map||Qy(s)}create(){return new ea}}class ea{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Qy(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new jv(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class jv{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $v(){return new cc([new BI])}let cc=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||$v()),deps:[[i,new Ps,new fr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:$v}),i})();function Hv(){return new Vm([new Yd])}let Vm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Hv()),deps:[[i,new Ps,new fr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=qt({token:i,providedIn:"root",factory:Hv}),i})();const mC=qd(null,"core",[]);let HI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(tt(Rm))},i.\u0275mod=wr({type:i}),i.\u0275inj=$t({}),i})()},3942:(Je,we,O)=>{O.d(we,{Z:()=>Re});var d=O(2090),Q=O(4859),P=O(9681),oe=O(1877);class ne{constructor(he,be){this._delegate=he,this.firebase=be,(0,P._addComponent)(he,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,be=P._DEFAULT_ENTRY_NAME){var Ge;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(he);return!ze.isInitialized()&&"EXPLICIT"===(null===(Ge=ze.getComponent())||void 0===Ge?void 0:Ge.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:be})}_removeServiceInstance(he,be=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(be)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const Le=function ie(Le){const he={},be={__esModule:!0,initializeApp:function Ce(Ve,B={}){const ve=P.initializeApp(Ve,B);if((0,d.r3)(he,ve.name))return he[ve.name];const z=new Le(ve,be);return he[ve.name]=z,z},app:ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ve){const B=Ve.name,ve=B.replace("-compat","");if(P._registerComponent(Ve)&&"PUBLIC"===Ve.type){const z=(re=ze())=>{if("function"!=typeof re[ve])throw ae.create("invalid-app-argument",{appName:B});return re[ve]()};void 0!==Ve.serviceProps&&(0,d.ZB)(z,Ve.serviceProps),be[ve]=z,Le.prototype[ve]=function(...re){return this._getService.bind(this,B).apply(this,Ve.multipleInstances?re:[])}}return"PUBLIC"===Ve.type?be[ve]:null},removeApp:function Ge(Ve){delete he[Ve]},useAsService:function Ue(Ve,B){return"serverAuth"===B?null:B},modularAPIs:P}};function ze(Ve){if(!(0,d.r3)(he,Ve=Ve||P._DEFAULT_ENTRY_NAME))throw ae.create("no-app",{appName:Ve});return he[Ve]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ee(){return Object.keys(he).map(Ve=>he[Ve])}}),ze.App=Le,be}(ne);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(be){(0,d.ZB)(Le,be)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Le}(),U=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=j;!function Se(Le){(0,P.registerVersion)("@firebase/app-compat","0.1.26",Le)}()},9681:(Je,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>bi,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>Yt,_addOrOverwriteComponent:()=>qt,_apps:()=>Wt,_clearComponents:()=>qi,_components:()=>mn,_getProvider:()=>$t,_registerComponent:()=>vr,_removeServiceInstance:()=>xt,deleteApp:()=>ft,getApp:()=>Kr,getApps:()=>di,initializeApp:()=>gs,onLog:()=>yn,registerVersion:()=>cn,setLogLevel:()=>$s});var d=O(5861),Q=O(4859),P=O(1877),oe=O(2090),ne=O(8766);class pe{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(xe=>{if(function ae($){const Y=$.getComponent();return"VERSION"===(null==Y?void 0:Y.type)}(xe)){const Ye=xe.getImmediate();return`${Ye.library}/${Ye.version}`}return null}).filter(xe=>xe).join(" ")}}const ie="@firebase/app",j=new P.Yd("@firebase/app"),Nt="[DEFAULT]",Ze={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Wt=new Map,mn=new Map;function Yt($,Y){try{$.container.addComponent(Y)}catch(xe){j.debug(`Component ${Y.name} failed to register with FirebaseApp ${$.name}`,xe)}}function qt($,Y){$.container.addOrOverwriteComponent(Y)}function vr($){const Y=$.name;if(mn.has(Y))return j.debug(`There were multiple attempts to register component ${Y}.`),!1;mn.set(Y,$);for(const xe of Wt.values())Yt(xe,$);return!0}function $t($,Y){const xe=$.container.getProvider("heartbeat").getImmediate({optional:!0});return xe&&xe.triggerHeartbeat(),$.container.getProvider(Y)}function xt($,Y,xe=Nt){$t($,Y).clearInstance(xe)}function qi(){mn.clear()}const ir=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Er{constructor(Y,xe,Ye){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},xe),this._name=xe.name,this._automaticDataCollectionEnabled=xe.automaticDataCollectionEnabled,this._container=Ye,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const bi="9.8.2";function gs($,Y={}){"object"!=typeof Y&&(Y={name:Y});const xe=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},Y),Ye=xe.name;if("string"!=typeof Ye||!Ye)throw ir.create("bad-app-name",{appName:String(Ye)});const dt=Wt.get(Ye);if(dt){if((0,oe.vZ)($,dt.options)&&(0,oe.vZ)(xe,dt.config))return dt;throw ir.create("duplicate-app",{appName:Ye})}const _t=new Q.H0(Ye);for(const yt of mn.values())_t.addComponent(yt);const nn=new Er($,xe,_t);return Wt.set(Ye,nn),nn}function Kr($=Nt){const Y=Wt.get($);if(!Y)throw ir.create("no-app",{appName:$});return Y}function di(){return Array.from(Wt.values())}function ft($){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*($){const Y=$.name;Wt.has(Y)&&(Wt.delete(Y),yield Promise.all($.container.getProviders().map(xe=>xe.delete())),$.isDeleted=!0)})).apply(this,arguments)}function cn($,Y,xe){var Ye;let dt=null!==(Ye=Ze[$])&&void 0!==Ye?Ye:$;xe&&(dt+=`-${xe}`);const _t=dt.match(/\s|\//),nn=Y.match(/\s|\//);if(_t||nn){const yt=[`Unable to register library "${dt}" with version "${Y}":`];return _t&&yt.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),_t&&nn&&yt.push("and"),nn&&yt.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void j.warn(yt.join(" "))}vr(new Q.wA(`${dt}-version`,()=>({library:dt,version:Y}),"VERSION"))}function yn($,Y){if(null!==$&&"function"!=typeof $)throw ir.create("invalid-log-argument");(0,P.Am)($,Y)}function $s($){(0,P.Ub)($)}const bn="firebase-heartbeat-store";let hi=null;function Eo(){return hi||(hi=(0,ne.X3)("firebase-heartbeat-database",1,{upgrade:($,Y)=>{0===Y&&$.createObjectStore(bn)}}).catch($=>{throw ir.create("storage-open",{originalErrorMessage:$.message})})),hi}function it(){return(it=(0,d.Z)(function*($){try{return(yield Eo()).transaction(bn).objectStore(bn).get(Jr($))}catch(Y){throw ir.create("storage-get",{originalErrorMessage:Y.message})}})).apply(this,arguments)}function mt($,Y){return sr.apply(this,arguments)}function sr(){return(sr=(0,d.Z)(function*($,Y){try{const Ye=(yield Eo()).transaction(bn,"readwrite");return yield Ye.objectStore(bn).put(Y,Jr($)),Ye.done}catch(xe){throw ir.create("storage-set",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function Jr($){return`${$.name}!${$.options.appId}`}class or{constructor(Y){this.container=Y,this._heartbeatsCache=null;const xe=this.container.getProvider("app").getImmediate();this._storage=new H(xe),this._heartbeatsCachePromise=this._storage.read().then(Ye=>(this._heartbeatsCache=Ye,Ye))}triggerHeartbeat(){var Y=this;return(0,d.Z)(function*(){const Ye=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=ar();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==dt&&!Y._heartbeatsCache.heartbeats.some(_t=>_t.date===dt))return Y._heartbeatsCache.heartbeats.push({date:dt,agent:Ye}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(_t=>{const nn=new Date(_t.date).valueOf();return Date.now()-nn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,d.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const xe=ar(),{heartbeatsToSend:Ye,unsentEntries:dt}=function L($,Y=1024){const xe=[];let Ye=$.slice();for(const dt of $){const _t=xe.find(nn=>nn.agent===dt.agent);if(_t){if(_t.dates.push(dt.date),G(xe)>Y){_t.dates.pop();break}}else if(xe.push({agent:dt.agent,dates:[dt.date]}),G(xe)>Y){xe.pop();break}Ye=Ye.slice(1)}return{heartbeatsToSend:xe,unsentEntries:Ye}}(Y._heartbeatsCache.heartbeats),_t=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ye}));return Y._heartbeatsCache.lastSentHeartbeatDate=xe,dt.length>0?(Y._heartbeatsCache.heartbeats=dt,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),_t})()}}function ar(){return(new Date).toISOString().substring(0,10)}class H{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,d.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Ft($){return it.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var xe=this;return(0,d.Z)(function*(){var Ye;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return mt(xe.app,{lastSentHeartbeatDate:null!==(Ye=Y.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var xe=this;return(0,d.Z)(function*(){var Ye;if(yield xe._canUseIndexedDBPromise){const _t=yield xe.read();return mt(xe.app,{lastSentHeartbeatDate:null!==(Ye=Y.lastSentHeartbeatDate)&&void 0!==Ye?Ye:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Y.heartbeats]})}})()}}function G($){return(0,oe.L)(JSON.stringify({version:2,heartbeats:$})).length}!function De($){vr(new Q.wA("platform-logger",Y=>new pe(Y),"PRIVATE")),vr(new Q.wA("heartbeat",Y=>new or(Y),"PRIVATE")),cn(ie,"0.7.25",$),cn(ie,"0.7.25","esm2017"),cn("fire-js","")}("")},4859:(Je,we,O)=>{O.d(we,{H0:()=>ie,wA:()=>P});var d=O(5861),Q=O(2090);class P{constructor(j,U,X){this.name=j,this.instanceFactory=U,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const oe="[DEFAULT]";class ne{constructor(j,U){this.name=j,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const U=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(U)){const X=new Q.BH;if(this.instancesDeferred.set(U,X),this.isInitialized(U)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:U});He&&X.resolve(He)}catch(He){}}return this.instancesDeferred.get(U).promise}getImmediate(j){var U;const X=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),He=null!==(U=null==j?void 0:j.optional)&&void 0!==U&&U;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ae(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(U){}for(const[U,X]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(U);try{const Se=this.getOrInitializeService({instanceIdentifier:He});X.resolve(Se)}catch(Se){}}}}clearInstance(j=oe){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,d.Z)(function*(){const U=Array.from(j.instances.values());yield Promise.all([...U.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...U.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=oe){return this.instances.has(j)}getOptions(j=oe){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:U={}}=j,X=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:X,options:U});for(const[Se,Re]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Se)&&Re.resolve(He);return He}onInit(j,U){var X;const He=this.normalizeInstanceIdentifier(U),Se=null!==(X=this.onInitCallbacks.get(He))&&void 0!==X?X:new Set;Se.add(j),this.onInitCallbacks.set(He,Se);const Re=this.instances.get(He);return Re&&j(Re,He),()=>{Se.delete(j)}}invokeOnInitCallbacks(j,U){const X=this.onInitCallbacks.get(U);if(X)for(const He of X)try{He(j,U)}catch(Se){}}getOrInitializeService({instanceIdentifier:j,options:U={}}){let X=this.instances.get(j);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===oe?void 0:ce),options:U}),this.instances.set(j,X),this.instancesOptions.set(j,U),this.invokeOnInitCallbacks(X,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,X)}catch(He){}var ce;return X||null}normalizeInstanceIdentifier(j=oe){return this.component?this.component.multipleInstances?j:oe:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ie{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const U=this.getProvider(j.name);if(U.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);U.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const U=new ne(j,this);return this.providers.set(j,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,O)=>{O.d(we,{Am:()=>ce,Ub:()=>ie,Yd:()=>ae,in:()=>Q});const d=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const P={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},oe=Q.INFO,ne={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},pe=(j,U,...X)=>{if(U<j.logLevel)return;const He=(new Date).toISOString(),Se=ne[U];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[Se](`[${He}]  ${j.name}:`,...X)};class ae{constructor(U){this.name=U,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in Q))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?P[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...U),this._logHandler(this,Q.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...U),this._logHandler(this,Q.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...U),this._logHandler(this,Q.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...U),this._logHandler(this,Q.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...U),this._logHandler(this,Q.ERROR,...U)}}function ie(j){d.forEach(U=>{U.setLogLevel(j)})}function ce(j,U){for(const X of d){let He=null;U&&U.level&&(He=P[U.level]),X.userLogHandler=null===j?null:(Se,Re,...Le)=>{const he=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(Ge){return null}}).filter(be=>be).join(" ");Re>=(null!=He?He:Se.logLevel)&&j({level:Q[Re].toLowerCase(),message:he,args:Le,type:Se.name})}}}},8766:(Je,we,O)=>{O.d(we,{Lj:()=>Ce,X3:()=>ze});var d=O(5861);let P,oe;const ae=new WeakMap,ie=new WeakMap,ce=new WeakMap,j=new WeakMap,U=new WeakMap;let Se={get(B,ve,z){if(B instanceof IDBTransaction){if("done"===ve)return ie.get(B);if("objectStoreNames"===ve)return B.objectStoreNames||ce.get(B);if("store"===ve)return z.objectStoreNames[1]?void 0:z.objectStore(z.objectStoreNames[0])}return be(B[ve])},set:(B,ve,z)=>(B[ve]=z,!0),has:(B,ve)=>B instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in B};function he(B){return"function"==typeof B?function Le(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...ve){return B.apply(Ge(this),ve),be(ae.get(this))}:function(...ve){return be(B.apply(Ge(this),ve))}:function(ve,...z){const re=B.call(Ge(this),ve,...z);return ce.set(re,ve.sort?ve.sort():[ve]),be(re)}}(B):(B instanceof IDBTransaction&&function He(B){if(ie.has(B))return;const ve=new Promise((z,re)=>{const J=()=>{B.removeEventListener("complete",ye),B.removeEventListener("error",se),B.removeEventListener("abort",se)},ye=()=>{z(),J()},se=()=>{re(B.error||new DOMException("AbortError","AbortError")),J()};B.addEventListener("complete",ye),B.addEventListener("error",se),B.addEventListener("abort",se)});ie.set(B,ve)}(B),((B,ve)=>ve.some(z=>B instanceof z))(B,function ne(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,Se):B)}function be(B){if(B instanceof IDBRequest)return function X(B){const ve=new Promise((z,re)=>{const J=()=>{B.removeEventListener("success",ye),B.removeEventListener("error",se)},ye=()=>{z(be(B.result)),J()},se=()=>{re(B.error),J()};B.addEventListener("success",ye),B.addEventListener("error",se)});return ve.then(z=>{z instanceof IDBCursor&&ae.set(z,B)}).catch(()=>{}),U.set(ve,B),ve}(B);if(j.has(B))return j.get(B);const ve=he(B);return ve!==B&&(j.set(B,ve),U.set(ve,B)),ve}const Ge=B=>U.get(B);function ze(B,ve,{blocked:z,upgrade:re,blocking:J,terminated:ye}={}){const se=indexedDB.open(B,ve),Ne=be(se);return re&&se.addEventListener("upgradeneeded",at=>{re(be(se.result),at.oldVersion,at.newVersion,be(se.transaction))}),z&&se.addEventListener("blocked",()=>z()),Ne.then(at=>{ye&&at.addEventListener("close",()=>ye()),J&&at.addEventListener("versionchange",()=>J())}).catch(()=>{}),Ne}function Ce(B,{blocked:ve}={}){const z=indexedDB.deleteDatabase(B);return ve&&z.addEventListener("blocked",()=>ve()),be(z).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function Ve(B,ve){if(!(B instanceof IDBDatabase)||ve in B||"string"!=typeof ve)return;if(Ue.get(ve))return Ue.get(ve);const z=ve.replace(/FromIndex$/,""),re=ve!==z,J=Ie.includes(z);if(!(z in(re?IDBIndex:IDBObjectStore).prototype)||!J&&!Ee.includes(z))return;const ye=function(){var se=(0,d.Z)(function*(Ne,...at){const kt=this.transaction(Ne,J?"readwrite":"readonly");let Nt=kt.store;return re&&(Nt=Nt.index(at.shift())),(yield Promise.all([Nt[z](...at),J&&kt.done]))[0]});return function(at){return se.apply(this,arguments)}}();return Ue.set(ve,ye),ye}!function Re(B){Se=B(Se)}(B=>pM(fM({},B),{get:(ve,z,re)=>Ve(ve,z)||B.get(ve,z,re),has:(ve,z)=>!!Ve(ve,z)||B.has(ve,z)}))},5861:(Je,we,O)=>{function d(P,oe,ne,pe,ae,ie,ce){try{var j=P[ie](ce),U=j.value}catch(X){return void ne(X)}j.done?oe(U):Promise.resolve(U).then(pe,ae)}function Q(P){return function(){var oe=this,ne=arguments;return new Promise(function(pe,ae){var ie=P.apply(oe,ne);function ce(U){d(ie,pe,ae,ce,j,"next",U)}function j(U){d(ie,pe,ae,ce,j,"throw",U)}ce(void 0)})}}O.d(we,{Z:()=>Q})}},Je=>{Je(Je.s=8742)}]);