"use strict";(self.webpackChunkclinicafinal=self.webpackChunkclinicafinal||[]).push([[797],{6797:(U,v,c)=>{c.r(v),c.d(v,{PacientesModule:()=>M});var d=c(9808),f=c(5839),u=c(5861);class m{constructor(){this.dia=0,this.horarios=[]}}var t=c(5e3),h=c(956),_=c(4215),C=c(5493),l=c(2382),T=c(5848);function x(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",3)(1,"input",4),t.NdJ("change",function(){const a=t.CHM(i).$implicit;return t.oxw().enviar(a)}),t.qZA(),t.TgZ(2,"label",5),t._uU(3),t.qZA()()}if(2&e){const i=n.$implicit;t.xp6(1),t.s9C("value",i),t.xp6(2),t.Oqu(i)}}let b=(()=>{class e{constructor(i,o,s){this.serviceEspecialidad=i,this.fb=o,this.traerDatos=s,this.listaEspecialistas=[],this.listaDeEspecialistaFiltrada=new t.vpe}ngOnInit(){this.form=this.fb.group({especialidad:["",l.kI.nullValidator]})}enviar(i){var o=this;return(0,u.Z)(function*(){console.log(i),o.listaEspecialistas=[],yield o.traerDatos.getAllEspecialista().subscribe(s=>{let a=s.find(r=>r.especialidad==i);null!=a&&o.listaEspecialistas.push(a)}),o.listaDeEspecialistaFiltrada.emit(o.listaEspecialistas)})()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(T.u),t.Y36(l.qu),t.Y36(h.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-formturno"]],outputs:{listaDeEspecialistaFiltrada:"listaDeEspecialistaFiltrada"},decls:5,vars:2,consts:[[1,"text-center",3,"formGroup"],["for","especialidad",1,"form-label"],["class","form-check form-switch",4,"ngFor","ngForOf"],[1,"form-check","form-switch"],["type","radio","formControlName","especialidad","role","switch",1,"form-check-input",3,"value","change"],["for","flexSwitchCheckDefault",1,"form-check-label"]],template:function(i,o){1&i&&(t.TgZ(0,"form",0)(1,"div")(2,"label",1),t._uU(3,"Selecciones la Espelicidad"),t.qZA(),t.YNc(4,x,4,2,"div",2),t.qZA()()),2&i&&(t.Q6J("formGroup",o.form),t.xp6(4),t.Q6J("ngForOf",o.serviceEspecialidad.especialidades))},directives:[l._Y,l.JL,l.sg,d.sg,l._,l.Fj,l.JJ,l.u],styles:["form[_ngcontent-%COMP%]{background-color:#fff}"]}),e})();function Z(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"button",4),t.NdJ("click",function(){const a=t.CHM(i).$implicit;return t.oxw().seleccionoEspecialista(a)}),t._uU(10,"Seleccionar"),t.qZA()()()()}if(2&e){const i=n.$implicit;t.xp6(3),t.Oqu(i.nombre),t.xp6(2),t.Oqu(i.apellido),t.xp6(2),t.Oqu(i.especialidad)}}let y=(()=>{class e{constructor(){this.especialistaSeleccionado=new t.vpe}ngOnInit(){}seleccionoEspecialista(i){this.especialistaSeleccionado.emit(i)}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-especialista"]],inputs:{ListaUsuarios:"ListaUsuarios"},outputs:{especialistaSeleccionado:"especialistaSeleccionado"},decls:11,vars:1,consts:[[1,"d-flex","column","justify-content-center"],[1,"table","border","border-4"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),t._uU(5,"Nombre"),t.qZA(),t.TgZ(6,"th",2),t._uU(7,"Apellido"),t.qZA(),t.TgZ(8,"th",2),t._uU(9,"Especialidad"),t.qZA()()(),t.YNc(10,Z,11,3,"tbody",3),t.qZA()()),2&i&&(t.xp6(10),t.Q6J("ngForOf",o.ListaUsuarios))},directives:[d.sg],styles:[""]}),e})();class E{constructor(){this.dia=0,this.mes=0,this.especialidad="",this.horario=0,this.estado="",this.idEspecialista="",this.idPaciente=""}}function F(e,n){if(1&e&&(t.TgZ(0,"th",4),t._uU(1),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Oqu(i.dia)}}function D(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"tr")(1,"td",4)(2,"button",5),t.NdJ("click",function(){const a=t.CHM(i).$implicit,r=t.oxw().$implicit;return t.oxw().TomarHorarioYDia(r.dia,a)}),t._uU(3),t.qZA()()()}if(2&e){const i=n.$implicit;t.xp6(3),t.Oqu(i)}}function O(e,n){if(1&e&&(t.TgZ(0,"th"),t.YNc(1,D,4,1,"tr",3),t.qZA()),2&e){const i=n.$implicit;t.xp6(1),t.Q6J("ngForOf",i.horarios)}}let A=(()=>{class e{constructor(i){this.traeDatos=i,this.dias=[],this.horas=[11,12,13,14,15,16],this.nuevoTurno=new t.vpe}ngOnInit(){}TomarHorarioYDia(i,o){var s=this;return(0,u.Z)(function*(){const a=new E;a.dia=i,a.horario=o,s.nuevoTurno.emit(a)})()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(h.k))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-calendarioturnos"]],inputs:{disponibilidad:"disponibilidad"},outputs:{nuevoTurno:"nuevoTurno"},decls:7,vars:2,consts:[[1,"container"],[1,"table"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],[1,"btn","btn-info",3,"click"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr"),t.YNc(4,F,2,1,"th",2),t.qZA()(),t.TgZ(5,"tbody"),t.YNc(6,O,2,1,"th",3),t.qZA()()()),2&i&&(t.xp6(4),t.Q6J("ngForOf",o.disponibilidad),t.xp6(2),t.Q6J("ngForOf",o.disponibilidad))},directives:[d.sg],styles:["table[_ngcontent-%COMP%]{max-width:200px;max-height:200px;font-size:10px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20px;height:20px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{text-align:center}button[_ngcontent-%COMP%]{width:40px;height:30px;font-size:10px;text-align:center}.container[_ngcontent-%COMP%]{width:500px;height:300px;overflow:auto}"]}),e})(),w=(()=>{class e{constructor(i,o,s){this.traerDatos=i,this.serviceLogin=o,this.serviceSubida=s,this.listaEspecialistas=[],this.arrayTurnos=[],this.arrayDisponibilidad=[]}ngOnInit(){}tomarLista(i){this.listaEspecialistas=i}tomarEspecialista(i){this.especialistaSeleccionado=i,this.traerTurnosDelEspecialista()}traerTurnosDelEspecialista(){var i=this;return(0,u.Z)(function*(){var o;let s=new Date;console.log(i.especialistaSeleccionado),(yield i.traerDatos.traerTurnosDoc(null===(o=i.especialistaSeleccionado)||void 0===o?void 0:o.id,s.getDate())).subscribe(r=>{console.log(r);let p=new m;r.forEach(g=>{p=new m,p.dia=g.dia,p.horarios.push(g.horario),i.arrayTurnos.push(p)}),i.disponibilidad(),i.sacarDisponibilidad()})})()}disponibilidad(){var i=this;return(0,u.Z)(function*(){let o=new m;i.arrayDisponibilidad=[];let s=new Date;for(let a=s.getDate();a<=s.getDate()+15;a++){o=new m,o.dia=a;for(let r=i.especialistaSeleccionado.franjaHoraria[0];r<=i.especialistaSeleccionado.franjaHoraria[1];r++)o.horarios.push(r);i.arrayDisponibilidad.push(o)}})()}sacarDisponibilidad(){this.arrayTurnos.forEach(i=>{this.arrayDisponibilidad.forEach(o=>{i.dia==o.dia&&(console.log(i.horarios),console.log(o.dia),o.horarios=o.horarios.filter(s=>s!=i.horarios[0]))})})}tomarTurno(i){this.turnoNuevo=i,this.turnoNuevo.especialidad=this.especialistaSeleccionado.especialidad,this.turnoNuevo.idEspecialista=this.especialistaSeleccionado.id,this.serviceLogin.getCurrentUser().then(o=>{null!=(null==o?void 0:o.uid)&&(this.turnoNuevo.idPaciente=null==o?void 0:o.uid),this.serviceSubida.createTurno(i)})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(h.k),t.Y36(_.W),t.Y36(C.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-nuevoturno"]],decls:11,vars:2,consts:[[1,"container","d-flex","justify-content-center","flex-column"],[1,"d-flex","flex-row","justify-content-center"],[1,"m-5"],[3,"listaDeEspecialistaFiltrada"],[3,"ListaUsuarios","especialistaSeleccionado"],[3,"disponibilidad","nuevoTurno"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"Nuevo turno"),t.qZA()(),t.TgZ(4,"div",1)(5,"div",2)(6,"app-formturno",3),t.NdJ("listaDeEspecialistaFiltrada",function(a){return o.tomarLista(a)}),t.qZA()(),t.TgZ(7,"div",2)(8,"app-list-especialista",4),t.NdJ("especialistaSeleccionado",function(a){return o.tomarEspecialista(a)}),t.qZA()()(),t.TgZ(9,"div")(10,"app-calendarioturnos",5),t.NdJ("nuevoTurno",function(a){return o.tomarTurno(a)}),t.qZA()()()),2&i&&(t.xp6(8),t.Q6J("ListaUsuarios",o.listaEspecialistas),t.xp6(2),t.Q6J("disponibilidad",o.arrayDisponibilidad))},directives:[b,y,A],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:10px;border-radius:10px;width:700px}"]}),e})();const N=function(){return["pacientes/nuevoTurno"]},P=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-pacientes"]],decls:9,vars:2,consts:[[1,"container","d-flex","row","justify-content-center"],[1,"card","m-2","d-flex","row","justify-content-center"],[1,"card-header"],[1,"card-body"],[1,"btn","btn-primary",3,"routerLink"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3," Solicitar Turno "),t.qZA(),t.TgZ(4,"div",3)(5,"p"),t._uU(6,"Solicita el turno con el especialista necesario"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Nuevo turno"),t.qZA()()()()),2&i&&(t.xp6(7),t.Q6J("routerLink",t.DdM(1,N)))},directives:[f.rH],styles:[".card[_ngcontent-%COMP%]{max-width:700px}"]}),e})()},{path:"pacientes/nuevoTurno",component:w}];let S=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[f.Bz.forChild(P)],f.Bz]}),e})(),M=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,S,l.UX]]}),e})()}}]);